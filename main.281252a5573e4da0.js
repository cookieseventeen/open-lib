"use strict";(self.webpackChunkopen_lib=self.webpackChunkopen_lib||[]).push([[179],{58:($i,wn,Ve)=>{Ve.d(wn,{BH:()=>Dt,G6:()=>wi,L:()=>Ke,LL:()=>Q,Pz:()=>dt,Sg:()=>dr,UG:()=>K,ZB:()=>ye,ZR:()=>$,aH:()=>Pt,b$:()=>rn,eu:()=>V,hl:()=>O,jU:()=>Bt,m9:()=>Ra,ne:()=>Ti,pd:()=>Aa,r3:()=>Bn,ru:()=>Mt,tV:()=>Y,uI:()=>_n,vZ:()=>Hi,w1:()=>Ei,xO:()=>Ca,xb:()=>Sr,z$:()=>Be,zd:()=>ii});const Re=function(C){const w=[];let b=0;for(let F=0;F<C.length;F++){let x=C.charCodeAt(F);x<128?w[b++]=x:x<2048?(w[b++]=x>>6|192,w[b++]=63&x|128):55296==(64512&x)&&F+1<C.length&&56320==(64512&C.charCodeAt(F+1))?(x=65536+((1023&x)<<10)+(1023&C.charCodeAt(++F)),w[b++]=x>>18|240,w[b++]=x>>12&63|128,w[b++]=x>>6&63|128,w[b++]=63&x|128):(w[b++]=x>>12|224,w[b++]=x>>6&63|128,w[b++]=63&x|128)}return w},jt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,w){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=w?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let x=0;x<C.length;x+=3){const z=C[x],Pe=x+1<C.length,$e=Pe?C[x+1]:0,ht=x+2<C.length,Nt=ht?C[x+2]:0;let bn=(15&$e)<<2|Nt>>6,vt=63&Nt;ht||(vt=64,Pe||(bn=64)),F.push(b[z>>2],b[(3&z)<<4|$e>>4],b[bn],b[vt])}return F.join("")},encodeString(C,w){return this.HAS_NATIVE_SUPPORT&&!w?btoa(C):this.encodeByteArray(Re(C),w)},decodeString(C,w){return this.HAS_NATIVE_SUPPORT&&!w?atob(C):function(C){const w=[];let b=0,F=0;for(;b<C.length;){const x=C[b++];if(x<128)w[F++]=String.fromCharCode(x);else if(x>191&&x<224){const z=C[b++];w[F++]=String.fromCharCode((31&x)<<6|63&z)}else if(x>239&&x<365){const ht=((7&x)<<18|(63&C[b++])<<12|(63&C[b++])<<6|63&C[b++])-65536;w[F++]=String.fromCharCode(55296+(ht>>10)),w[F++]=String.fromCharCode(56320+(1023&ht))}else{const z=C[b++],Pe=C[b++];w[F++]=String.fromCharCode((15&x)<<12|(63&z)<<6|63&Pe)}}return w.join("")}(this.decodeStringToByteArray(C,w))},decodeStringToByteArray(C,w){this.init_();const b=w?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let x=0;x<C.length;){const z=b[C.charAt(x++)],$e=x<C.length?b[C.charAt(x)]:0;++x;const Nt=x<C.length?b[C.charAt(x)]:64;++x;const ge=x<C.length?b[C.charAt(x)]:64;if(++x,null==z||null==$e||null==Nt||null==ge)throw new Qt;F.push(z<<2|$e>>4),64!==Nt&&(F.push($e<<4&240|Nt>>2),64!==ge&&F.push(Nt<<6&192|ge))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class Qt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ke=function(C){return function(C){const w=Re(C);return jt.encodeByteArray(w,!0)}(C).replace(/\./g,"")},Y=function(C){try{return jt.decodeString(C,!0)}catch(w){console.error("base64Decode failed: ",w)}return null};function ye(C,w){if(!(w instanceof Object))return w;switch(w.constructor){case Date:return new Date(w.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return w}for(const b in w)!w.hasOwnProperty(b)||!Ge(b)||(C[b]=ye(C[b],w[b]));return C}function Ge(C){return"__proto__"!==C}const je=()=>{try{return function at(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const w=C&&Y(C[1]);return w&&JSON.parse(w)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},Pt=()=>{var C;return null===(C=je())||void 0===C?void 0:C.config},dt=C=>{var w;return null===(w=je())||void 0===w?void 0:w[`_${C}`]};class Dt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((w,b)=>{this.resolve=w,this.reject=b})}wrapCallback(w){return(b,F)=>{b?this.reject(b):this.resolve(F),"function"==typeof w&&(this.promise.catch(()=>{}),1===w.length?w(b):w(b,F))}}}function dr(C,w){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const F=w||"demo-project",x=C.iat||0,z=C.sub||C.user_id;if(!z)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${F}`,aud:F,iat:x,exp:x+3600,auth_time:x,sub:z,user_id:z,firebase:{sign_in_provider:"custom",identities:{}}},C);return[Ke(JSON.stringify({alg:"none",type:"JWT"})),Ke(JSON.stringify(Pe)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _n(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function K(){var C;const w=null===(C=je())||void 0===C?void 0:C.forceEnvironment;if("node"===w)return!0;if("browser"===w)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Bt(){return"object"==typeof self&&self.self===self}function Mt(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function rn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ei(){const C=Be();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function wi(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O(){try{return"object"==typeof indexedDB}catch{return!1}}function V(){return new Promise((C,w)=>{try{let b=!0;const F="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(F);x.onsuccess=()=>{x.result.close(),b||self.indexedDB.deleteDatabase(F),C(!0)},x.onupgradeneeded=()=>{b=!1},x.onerror=()=>{var z;w((null===(z=x.error)||void 0===z?void 0:z.message)||"")}}catch(b){w(b)}})}class $ extends Error{constructor(w,b,F){super(b),this.code=w,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,$.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Q.prototype.create)}}class Q{constructor(w,b,F){this.service=w,this.serviceName=b,this.errors=F}create(w,...b){const F=b[0]||{},x=`${this.service}/${w}`,z=this.errors[w],Pe=z?function le(C,w){return C.replace(Ee,(b,F)=>{const x=w[F];return null!=x?String(x):`<${F}?>`})}(z,F):"Error";return new $(x,`${this.serviceName}: ${Pe} (${x}).`,F)}}const Ee=/\{\$([^}]+)}/g;function Bn(C,w){return Object.prototype.hasOwnProperty.call(C,w)}function Sr(C){for(const w in C)if(Object.prototype.hasOwnProperty.call(C,w))return!1;return!0}function Hi(C,w){if(C===w)return!0;const b=Object.keys(C),F=Object.keys(w);for(const x of b){if(!F.includes(x))return!1;const z=C[x],Pe=w[x];if(os(z)&&os(Pe)){if(!Hi(z,Pe))return!1}else if(z!==Pe)return!1}for(const x of F)if(!b.includes(x))return!1;return!0}function os(C){return null!==C&&"object"==typeof C}function Ca(C){const w=[];for(const[b,F]of Object.entries(C))Array.isArray(F)?F.forEach(x=>{w.push(encodeURIComponent(b)+"="+encodeURIComponent(x))}):w.push(encodeURIComponent(b)+"="+encodeURIComponent(F));return w.length?"&"+w.join("&"):""}function ii(C){const w={};return C.replace(/^\?/,"").split("&").forEach(F=>{if(F){const[x,z]=F.split("=");w[decodeURIComponent(x)]=decodeURIComponent(z)}}),w}function Aa(C){const w=C.indexOf("?");if(!w)return"";const b=C.indexOf("#",w);return C.substring(w,b>0?b:void 0)}function Ti(C,w){const b=new as(C,w);return b.subscribe.bind(b)}class as{constructor(w,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{w(this)}).catch(F=>{this.error(F)})}next(w){this.forEachObserver(b=>{b.next(w)})}error(w){this.forEachObserver(b=>{b.error(w)}),this.close(w)}complete(){this.forEachObserver(w=>{w.complete()}),this.close()}subscribe(w,b,F){let x;if(void 0===w&&void 0===b&&void 0===F)throw new Error("Missing Observer.");x=function nr(C,w){if("object"!=typeof C||null===C)return!1;for(const b of w)if(b in C&&"function"==typeof C[b])return!0;return!1}(w,["next","error","complete"])?w:{next:w,error:b,complete:F},void 0===x.next&&(x.next=cs),void 0===x.error&&(x.error=cs),void 0===x.complete&&(x.complete=cs);const z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),z}unsubscribeOne(w){void 0===this.observers||void 0===this.observers[w]||(delete this.observers[w],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(w){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,w)}sendOne(w,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[w])try{b(this.observers[w])}catch(F){typeof console<"u"&&console.error&&console.error(F)}})}close(w){this.finalized||(this.finalized=!0,void 0!==w&&(this.finalError=w),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cs(){}function Ra(C){return C&&C._delegate?C._delegate:C}},575:($i,wn,Ve)=>{function I(t){return"function"==typeof t}function be(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const j=be(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Re(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof j?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Tn(s)}catch(o){e=e??[],o instanceof j?e=[...e,...o.errors]:e.push(o)}}if(e)throw new j(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Tn(e);else{if(e instanceof ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Re(n,e)}remove(e){const{_finalizers:n}=this;n&&Re(n,e),e instanceof ct&&e._removeParent(this)}}ct.EMPTY=(()=>{const t=new ct;return t.closed=!0,t})();const jt=ct.EMPTY;function Qt(t){return t instanceof ct||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function Tn(t){I(t)?t():t.unsubscribe()}const Ke={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Y={setTimeout(t,e,...n){const{delegate:r}=Y;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Y;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function se(t){Y.setTimeout(()=>{const{onUnhandledError:e}=Ke;if(!e)throw t;e(t)})}function ye(){}const Ge=lt("C",void 0,void 0);function lt(t,e,n){return{kind:t,value:e,error:n}}let Me=null;function je(t){if(Ke.useDeprecatedSynchronousErrorHandling){const e=!Me;if(e&&(Me={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Me;if(Me=null,n)throw r}}else t()}class An extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qt(e)&&e.add(this)):this.destination=Bt}static create(e,n,r){return new dr(e,n,r)}next(e){this.isStopped?K(function Dn(t){return lt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?K(function at(t){return lt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?K(Ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pt=Function.prototype.bind;function dt(t,e){return Pt.call(t,e)}class Dt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Be(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Be(r)}else Be(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Be(n)}}}class dr extends An{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ke.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dt(e.next,s),error:e.error&&dt(e.error,s),complete:e.complete&&dt(e.complete,s)}):i=e}this.destination=new Dt(i)}}function Be(t){Ke.useDeprecatedSynchronousErrorHandling?function Cn(t){Ke.useDeprecatedSynchronousErrorHandling&&Me&&(Me.errorThrown=!0,Me.error=t)}(t):se(t)}function K(t,e){const{onStoppedNotification:n}=Ke;n&&Y.setTimeout(()=>n(t,e))}const Bt={closed:!0,next:ye,error:function _n(t){throw t},complete:ye},Mt="function"==typeof Symbol&&Symbol.observable||"@@observable";function rn(t){return t}function Ei(t){return 0===t.length?rn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Qe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function O(t){return t&&t instanceof An||function wi(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&Qt(t)}(n)?n:new dr(n,r,i);return je(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=js(r))((i,s)=>{const o=new dr({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Mt](){return this}pipe(...n){return Ei(n)(this)}toPromise(n){return new(n=js(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function js(t){var e;return null!==(e=t??Ke.Promise)&&void 0!==e?e:Promise}const V=be(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let B=(()=>{class t extends Qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new H(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new V}next(n){je(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){je(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){je(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?jt:(this.currentObservers=null,s.push(n),new ct(()=>{this.currentObservers=null,Re(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Qe;return n.source=this,n}}return t.create=(e,n)=>new H(e,n),t})();class H extends B{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:jt}}class $ extends B{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Q(t){return I(t?.lift)}function le(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(t,e,n,r,i){return new Yt(t,e,n,r,i)}class Yt extends An{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ie(t,e){return le((n,r)=>{let i=0;n.subscribe(Ee(r,s=>{r.next(t.call(e,s,i++))}))})}var Ye=Ve(582);const $t=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function St(t){return I(t?.then)}function jn(t){return I(t[Mt])}function yn(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function Bn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Sr=function Ar(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Da(t){return I(t?.[Sr])}function Hi(t){return(0,Ye.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ye.qq)(n.read());if(i)return yield(0,Ye.qq)(void 0);yield yield(0,Ye.qq)(r)}}finally{n.releaseLock()}})}function os(t){return I(t?.getReader)}function sn(t){if(t instanceof Qe)return t;if(null!=t){if(jn(t))return function Ca(t){return new Qe(e=>{const n=t[Mt]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if($t(t))return function ii(t){return new Qe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(St(t))return function Aa(t){return new Qe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,se)})}(t);if(yn(t))return Ti(t);if(Da(t))return function br(t){return new Qe(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(os(t))return function as(t){return Ti(Hi(t))}(t)}throw Bn(t)}function Ti(t){return new Qe(e=>{(function us(t,e){var n,r,i,s;return(0,Ye.mG)(this,void 0,void 0,function*(){try{for(n=(0,Ye.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function nr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function xt(t,e,n=1/0){return I(e)?xt((r,i)=>ie((s,o)=>e(r,s,i,o))(sn(t(r,i))),n):("number"==typeof e&&(n=e),le((r,i)=>function cs(t,e,n,r,i,s,o,a){const u=[];let d=0,f=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},y=D=>d<r?E(D):u.push(D),E=D=>{s&&e.next(D),d++;let S=!1;sn(n(D,f++)).subscribe(Ee(e,N=>{i?.(N),s?y(N):e.next(N)},()=>{S=!0},void 0,()=>{if(S)try{for(d--;u.length&&d<r;){const N=u.shift();o?nr(e,o,()=>E(N)):E(N)}_()}catch(N){e.error(N)}}))};return t.subscribe(Ee(e,y,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function hr(t=1/0){return xt(rn,t)}const Sn=new Qe(t=>t.complete());function Bs(t){return t[t.length-1]}function Sa(t){return I(Bs(t))?t.pop():void 0}function Di(t){return function vo(t){return t&&I(t.schedule)}(Bs(t))?t.pop():void 0}function $n(t,e=0){return le((n,r)=>{n.subscribe(Ee(r,i=>nr(r,t,()=>r.next(i),e),()=>nr(r,t,()=>r.complete(),e),i=>nr(r,t,()=>r.error(i),e)))})}function Rr(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function C(t,e){if(!t)throw new Error("Iterable cannot be null");return new Qe(n=>{nr(n,e,()=>{const r=t[Symbol.asyncIterator]();nr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function F(t,e){return e?function b(t,e){if(null!=t){if(jn(t))return function Io(t,e){return sn(t).pipe(Rr(e),$n(e))}(t,e);if($t(t))return function ba(t,e){return new Qe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(St(t))return function sc(t,e){return sn(t).pipe(Rr(e),$n(e))}(t,e);if(yn(t))return C(t,e);if(Da(t))return function Ra(t,e){return new Qe(n=>{let r;return nr(n,e,()=>{r=t[Sr](),nr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(os(t))return function w(t,e){return C(Hi(t),e)}(t,e)}throw Bn(t)}(t,e):sn(t)}function x(...t){const e=Di(t),n=function zi(t,e){return"number"==typeof Bs(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?sn(r[0]):hr(n)(F(r,e)):Sn}function z(...t){return F(t,Di(t))}function Pe(t={}){const{connector:e=(()=>new B),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,d=0,f=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),o=u=void 0,f=g=!1},E=()=>{const D=o;y(),D?.unsubscribe()};return le((D,S)=>{d++,!g&&!f&&_();const N=u=u??e();S.add(()=>{d--,0===d&&!g&&!f&&(a=$e(E,i))}),N.subscribe(S),!o&&d>0&&(o=new dr({next:R=>N.next(R),error:R=>{g=!0,_(),a=$e(y,n,R),N.error(R)},complete:()=>{f=!0,_(),a=$e(y,r),N.complete()}}),sn(D).subscribe(o))})(s)}}function $e(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new dr({next:()=>{r.unsubscribe(),t()}});return sn(e(...n)).subscribe(r)}function ht(t,e){return le((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Ee(r,u=>{i?.unsubscribe();let d=0;const f=s++;sn(t(u,f)).subscribe(i=Ee(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Nt(t,e=rn){return t=t??vn,le((n,r)=>{let i,s=!0;n.subscribe(Ee(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function vn(t,e){return t===e}function ge(t){for(let e in t)if(t[e]===ge)return e;throw Error("Could not find renamed property on target object.")}function vt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(vt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ci(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const oc=ge({__forward_ref__:ge});function L(t){return t.__forward_ref__=L,t.toString=function(){return vt(this())},t}function A(t){return ee(t)?t():t}function ee(t){return"function"==typeof t&&t.hasOwnProperty(oc)&&t.__forward_ref__===L}function me(t){return t&&!!t.\u0275providers}const Je="https://g.co/ng/security#xss";class W extends Error{constructor(e,n){super(function Jt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function _e(t){return"string"==typeof t?t:null==t?"":String(t)}function Pa(t,e){throw new W(-201,!1)}function fr(t,e){null==t&&function Ae(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function we(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Hn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ma(t){return bd(t,xa)||bd(t,lg)}function bd(t,e){return t.hasOwnProperty(e)?t[e]:null}function qi(t){return t&&(t.hasOwnProperty(Na)||t.hasOwnProperty(Rd))?t[Na]:null}const xa=ge({\u0275prov:ge}),Na=ge({\u0275inj:ge}),lg=ge({ngInjectableDef:ge}),Rd=ge({ngInjectorDef:ge});var qe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(qe||{});let Oa;function dg(){return Oa}function zn(t){const e=Oa;return Oa=t,e}function hg(t,e,n){const r=Ma(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&qe.Optional?null:void 0!==e?e:void Pa(vt(t))}const ft=globalThis,Gi={},oi="__NG_DI_FLAG__",wo="ngTempTokenPath",Ai=/\n/gm,uc="__source";let To;function ds(t){const e=To;return To=t,e}function kd(t,e=qe.Default){if(void 0===To)throw new W(-203,!1);return null===To?hg(t,void 0,e):To.get(t,e&qe.Optional?null:void 0,e)}function G(t,e=qe.Default){return(dg()||kd)(A(t),e)}function oe(t,e=qe.Default){return G(t,Si(e))}function Si(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Fd(t){const e=[];for(let n=0;n<t.length;n++){const r=A(t[n]);if(Array.isArray(r)){if(0===r.length)throw new W(900,!1);let i,s=qe.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Va(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(G(i,s))}else e.push(G(r))}return e}function Fa(t,e){return t[oi]=e,t.prototype[oi]=e,t}function Va(t){return t[oi]}function Rn(t){return{toString:t}.toString()}var Wi=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Wi||{}),qn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(qn||{});const ai={},ot=[],La=ge({\u0275cmp:ge}),Ld=ge({\u0275dir:ge}),hs=ge({\u0275pipe:ge}),vg=ge({\u0275mod:ge}),Wr=ge({\u0275fac:ge}),Do=ge({__NG_ELEMENT_ID__:ge}),Ud=ge({__NG_ENV_ID__:ge});function cc(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function pr(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];Ig(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function jd(t){return 3===t||4===t||6===t}function Ig(t){return 64===t.charCodeAt(0)}function $s(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ua(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ua(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const Bd="ng-template";function Eg(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==cc(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function wg(t){return 4===t.type&&t.value!==Bd}function $d(t,e,n){return e===(4!==t.type||n?t.value:Bd)}function Hd(t,e,n){let r=4;const i=t.attrs||[],s=function zd(t){for(let e=0;e<t.length;e++)if(jd(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!$d(t,u,n)||""===u&&1===e.length){if(Mr(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Eg(t.attrs,d,n)){if(Mr(r))return!1;o=!0}continue}const g=lc(8&r?"class":u,i,wg(t),n);if(-1===g){if(Mr(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==cc(y,d,0)||2&r&&d!==_){if(Mr(r))return!1;o=!0}}}}else{if(!o&&!Mr(r)&&!Mr(u))return!1;if(o&&Mr(u))continue;o=!1,r=u|1&r}}return Mr(r)||o}function Mr(t){return 0==(1&t)}function lc(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Dg(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function dc(t,e,n=!1){for(let r=0;r<e.length;r++)if(Hd(t,e[r],n))return!0;return!1}function qd(t,e){e:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function ja(t,e){return t?":not("+e.trim()+")":e}function Gd(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Mr(o)&&(e+=ja(s,i),i=""),r=o,s=s||!Mr(r);n++}return""!==i&&(e+=ja(s,i)),e}function Gn(t){return Rn(()=>{const e=Ag(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Wi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||qn.Emulated,styles:t.styles||ot,_:null,schemas:t.schemas||null,tView:null,id:""};hc(n);const r=t.dependencies;return n.directiveDefs=fc(r,!1),n.pipeDefs=fc(r,!0),n.id=function Sg(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Kv(t){return Xe(t)||dn(t)}function Kd(t){return null!==t}function gr(t){return Rn(()=>({type:t.type,bootstrap:t.bootstrap||ot,declarations:t.declarations||ot,imports:t.imports||ot,exports:t.exports||ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Co(t,e){if(null==t)return ai;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Pn(t){return Rn(()=>{const e=Ag(t);return hc(e),e})}function Wn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Xe(t){return t[La]||null}function dn(t){return t[Ld]||null}function Mn(t){return t[hs]||null}function rr(t,e){const n=t[vg]||null;if(!n&&!0===e)throw new Error(`Type ${vt(t)} does not have '\u0275mod' property.`);return n}function Ag(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ai,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ot,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Co(t.inputs,e),outputs:Co(t.outputs)}}function hc(t){t.features?.forEach(e=>e(t))}function fc(t,e){if(!t)return null;const n=e?Mn:Kv;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Kd)}const Ht=0,he=1,xe=2,kt=3,xr=4,Ba=5,Zn=6,fs=7,tn=8,ps=9,gs=10,Ne=11,Hs=12,bg=13,ms=14,nn=15,zs=16,So=17,Zr=18,$a=19,pc=20,_s=21,ui=22,gc=23,mc=24,Ze=25,Jd=1,qs=2,ci=7,bo=9,xn=11;function Nr(t){return Array.isArray(t)&&"object"==typeof t[Jd]}function Or(t){return Array.isArray(t)&&!0===t[Jd]}function Pg(t){return 0!=(4&t.flags)}function Zi(t){return t.componentOffset>-1}function yc(t){return 1==(1&t.flags)}function li(t){return!!t.template}function Mg(t){return 0!=(512&t[xe])}function Po(t,e){return t.hasOwnProperty(Wr)?t[Wr]:null}const qa=Symbol("SIGNAL");function bi(t,e,n={}){return e[qa]=t,Object.assign(e,n)}function Fg(t,e){return(null===t||"object"!=typeof t)&&Object.is(t,e)}let Ga=ft.WeakRef??class Qv{constructor(e){this.ref=e}deref(){return this.ref}},Jv=0,Kr=null,vc=!1;function on(t){const e=Kr;return Kr=t,e}class Ic{constructor(){this.id=Jv++,this.ref=function Yv(t){return new Ga(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const r=n.producerNode.deref();if(null!=r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=vc;vc=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();null!=i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{vc=e}}producerAccessed(){if(vc)throw new Error("");if(null===Kr)return;let e=Kr.producers.get(this.id);void 0===e?(e={consumerNode:Kr.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Kr.trackingVersion},Kr.producers.set(this.id,e),this.consumers.set(Kr.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=Kr.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Kr?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}function Vg(t,e){const n=new Lg(t,e?.equal??Fg);return bi(n,n.signal.bind(n))}const Ec=Symbol("UNSET"),eh=Symbol("COMPUTING"),Gs=Symbol("ERRORED");class Lg extends Ic{constructor(e,n){super(),this.computation=e,this.equal=n,this.value=Ec,this.error=null,this.stale=!0,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){this.stale||(this.stale=!0,this.producerMayHaveChanged())}onProducerUpdateValueVersion(){if(this.stale){if(this.value!==Ec&&this.value!==eh&&!this.consumerPollProducersForChange())return void(this.stale=!1);this.recomputeValue()}}recomputeValue(){if(this.value===eh)throw new Error("Detected cycle in computations.");const e=this.value;this.value=eh,this.trackingVersion++;const n=on(this);let r;try{r=this.computation()}catch(i){r=Gs,this.error=i}finally{on(n)}this.stale=!1,e!==Ec&&e!==Gs&&r!==Gs&&this.equal(e,r)?this.value=e:(this.value=r,this.valueVersion++)}signal(){if(this.onProducerUpdateValueVersion(),this.producerAccessed(),this.value===Gs)throw this.error;return this.value}}let Za=function Wa(){throw new Error};function th(){Za()}class rh extends Ic{constructor(e,n){super(),this.value=e,this.equal=n,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){}onProducerUpdateValueVersion(){}set(e){this.producerUpdatesAllowed||th(),this.equal(this.value,e)||(this.value=e,this.valueVersion++,this.producerMayHaveChanged())}update(e){this.producerUpdatesAllowed||th(),this.set(e(this.value))}mutate(e){this.producerUpdatesAllowed||th(),e(this.value),this.valueVersion++,this.producerMayHaveChanged()}asReadonly(){return void 0===this.readonlySignal&&(this.readonlySignal=bi(this,()=>this.signal())),this.readonlySignal}signal(){return this.producerAccessed(),this.value}}function ih(t){const e=on(null);try{return t()}finally{on(e)}}const Bg=()=>{};class Xv extends Ic{constructor(e,n,r){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=Bg,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=on(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Bg,this.watch(this.registerOnCleanup)}finally{on(e)}}cleanup(){this.cleanupFn()}}class sS{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Qr(){return $g}function $g(t){return t.type.prototype.ngOnChanges&&(t.setInput=tI),eI}function eI(){const t=zg(this),e=t?.current;if(e){const n=t.previous;if(n===ai)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function tI(t,e,n,r){const i=this.declaredInputs[n],s=zg(t)||function wc(t,e){return t[Hg]=e}(t,{previous:ai,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new sS(u&&u.currentValue,e,a===ai),t[r]=e}Qr.ngInherit=!0;const Hg="__ngSimpleChanges__";function zg(t){return t[Hg]||null}const Ri=function(t,e,n){};function Ct(t){for(;Array.isArray(t);)t=t[Ht];return t}function Dc(t,e){return Ct(e[t])}function mr(t,e){return Ct(e[t.index])}function Wg(t,e){return t.data[e]}function kr(t,e){const n=e[t];return Nr(n)?n:n[Ht]}function ys(t,e){return null==e?null:t[e]}function Cc(t){t[So]=0}function sI(t){1024&t[xe]||(t[xe]|=1024,Qa(t,1))}function Ac(t){1024&t[xe]&&(t[xe]&=-1025,Qa(t,-1))}function Qa(t,e){let n=t[kt];if(null===n)return;n[Ba]+=e;let r=n;for(n=n[kt];null!==n&&(1===e&&1===r[Ba]||-1===e&&0===r[Ba]);)n[Ba]+=e,r=n,n=n[kt]}function Sc(t,e){if(256==(256&t[xe]))throw new W(911,!1);null===t[_s]&&(t[_s]=[]),t[_s].push(e)}const Se={lFrame:Xg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Zg(){return Se.bindingsEnabled}function vs(){return null!==Se.skipHydrationRootTNode}function J(){return Se.lFrame.lView}function tt(){return Se.lFrame.tView}function Nn(){let t=Oo();for(;null!==t&&64===t.type;)t=t.parent;return t}function Oo(){return Se.lFrame.currentTNode}function Pi(t,e){const n=Se.lFrame;n.currentTNode=t,n.isParent=e}function Ja(){return Se.lFrame.isParent}function Xa(){Se.lFrame.isParent=!1}function ko(){return Se.lFrame.bindingIndex++}function fh(t,e){const n=Se.lFrame;n.bindingIndex=n.bindingRootIndex=t,ph(e)}function ph(t){Se.lFrame.currentDirectiveIndex=t}function tu(t){Se.lFrame.currentQueryIndex=t}function Rc(t){const e=t[he];return 2===e.type?e.declTNode:1===e.type?t[Zn]:null}function Pc(t,e,n){if(n&qe.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&qe.Host||(i=Rc(s),null===i||(s=s[ms],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Se.lFrame=xc();return r.currentTNode=e,r.lView=t,!0}function Mc(t){const e=xc(),n=t[he];Se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function xc(){const t=Se.lFrame,e=null===t?null:t.child;return null===e?Xg(t):e}function Xg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function gh(){const t=Se.lFrame;return Se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const mh=gh;function Nc(){const t=gh();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function On(){return Se.lFrame.selectedIndex}function Ws(t){Se.lFrame.selectedIndex=t}let tm=!0;function Zs(){return tm}function Is(t){tm=t}function Oc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=f&&(t.destroyHooks??=[]).push(n,f)}}function kc(t,e,n){nm(t,e,3,n)}function Fc(t,e,n,r){(3&t[xe])===n&&nm(t,e,n,r)}function vh(t,e){let n=t[xe];(3&n)===e&&(n&=8191,n+=1,t[xe]=n)}function nm(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[So]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[So]+=65536),(a<s||-1==s)&&(Ih(t,n,e,u),t[So]=(4294901760&t[So])+u+2),u++}function rm(t,e){Ri(4,t,e);const n=on(null);try{e.call(t)}finally{on(n),Ri(5,t,e)}}function Ih(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[xe]>>13<t[So]>>16&&(3&t[xe])===e&&(t[xe]+=8192,rm(a,s)):rm(a,s)}const Fo=-1;class nu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function wh(t){return t!==Fo}function Ks(t){return 32767&t}function ru(t,e){let n=function Th(t){return t>>16}(t),r=e;for(;n>0;)r=r[ms],n--;return r}let iu=!0;function Vc(t){const e=iu;return iu=t,e}const im=255,Lc=5;let DI=0;const Ki={};function su(t,e){const n=Ch(t,e);if(-1!==n)return n;const r=e[he];r.firstCreatePass&&(t.injectorIndex=e.length,Vo(r.data,t),Vo(e,null),Vo(r.blueprint,null));const i=ou(t,e),s=t.injectorIndex;if(wh(i)){const o=Ks(i),a=ru(i,e),u=a[he].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Vo(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ch(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ou(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=jc(i),null===r)return Fo;if(n++,i=i[ms],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Fo}function Ah(t,e,n){!function Dh(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Do)&&(r=n[Do]),null==r&&(r=n[Do]=DI++);const i=r&im;e.data[t+(i>>Lc)]|=1<<i}(t,e,n)}function sm(t,e,n){if(n&qe.Optional||void 0!==t)return t;Pa()}function om(t,e,n,r){if(n&qe.Optional&&void 0===r&&(r=null),!(n&(qe.Self|qe.Host))){const i=t[ps],s=zn(void 0);try{return i?i.get(e,r,n&qe.Optional):hg(e,r,n&qe.Optional)}finally{zn(s)}}return sm(r,0,n)}function am(t,e,n,r=qe.Default,i){if(null!==t){if(2048&e[xe]&&!(r&qe.Self)){const o=function RI(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[xe]&&!(512&o[xe]);){const a=Sh(s,o,n,r|qe.Self,Ki);if(a!==Ki)return a;let u=s.parent;if(!u){const d=o[pc];if(d){const f=d.get(n,Ki,r);if(f!==Ki)return f}u=jc(o),o=o[ms]}s=u}return i}(t,e,n,r,Ki);if(o!==Ki)return o}const s=Sh(t,e,n,r,Ki);if(s!==Ki)return s}return om(e,n,r,i)}function Sh(t,e,n,r,i){const s=function SI(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Do)?t[Do]:void 0;return"number"==typeof e?e>=0?e&im:bI:e}(n);if("function"==typeof s){if(!Pc(e,t,r))return r&qe.Host?sm(i,0,r):om(e,n,r,i);try{let o;if(o=s(r),null!=o||r&qe.Optional)return o;Pa()}finally{mh()}}else if("number"==typeof s){let o=null,a=Ch(t,e),u=Fo,d=r&qe.Host?e[nn][Zn]:null;for((-1===a||r&qe.SkipSelf)&&(u=-1===a?ou(t,e):e[a+8],u!==Fo&&Uc(r,!1)?(o=e[he],a=Ks(u),e=ru(u,e)):a=-1);-1!==a;){const f=e[he];if(um(s,a,f.data)){const g=AI(a,e,n,o,r,d);if(g!==Ki)return g}u=e[a+8],u!==Fo&&Uc(r,e[he].data[a+8]===d)&&um(s,a,e)?(o=f,a=Ks(u),e=ru(u,e)):a=-1}}return i}function AI(t,e,n,r,i,s){const o=e[he],a=o.data[t+8],f=function bh(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,f=s>>20,_=i?a+f:t.directiveEnd;for(let y=r?a:a+f;y<_;y++){const E=o[y];if(y<u&&n===E||y>=u&&E.type===n)return y}if(i){const y=o[u];if(y&&li(y)&&y.type===n)return u}return null}(a,o,n,null==r?Zi(a)&&iu:r!=o&&0!=(3&a.type),i&qe.Host&&s===a);return null!==f?Fr(e,o,f,a):Ki}function Fr(t,e,n,r){let i=t[n];const s=e.data;if(function vI(t){return t instanceof nu}(i)){const o=i;o.resolving&&function Eo(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,`Circular dependency in DI detected for ${t}${n}`)}(function We(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_e(t)}(s[n]));const a=Vc(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?zn(o.injectImpl):null;Pc(t,r,qe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function yI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=$g(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&zn(d),Vc(a),o.resolving=!1,mh()}}return i}function um(t,e,n){return!!(n[e+(t>>Lc)]&1<<t)}function Uc(t,e){return!(t&qe.Self||t&qe.Host&&e)}class ir{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return am(this._tNode,this._lView,e,Si(r),n)}}function bI(){return new ir(Nn(),J())}function uu(t){return Rn(()=>{const e=t.prototype.constructor,n=e[Wr]||Ph(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Wr]||Ph(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ph(t){return ee(t)?()=>{const e=Ph(A(t));return e&&e()}:Po(t)}function jc(t){const e=t[he],n=e.type;return 2===n?e.declTNode:1===n?t[Zn]:null}const Uo="__parameters__";function Es(t,e,n){return Rn(()=>{const r=function Bc(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,f){const g=u.hasOwnProperty(Uo)?u[Uo]:Object.defineProperty(u,Uo,{value:[]})[Uo];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function $o(t,e){t.forEach(n=>Array.isArray(n)?$o(n,e):e(n))}function xh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $c(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function du(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function sr(t,e,n){let r=Ho(t,e);return r>=0?t[1|r]=n:(r=~r,function fm(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Hc(t,e){const n=Ho(t,e);if(n>=0)return t[1|n]}function Ho(t,e){return function mm(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Fh=Fa(Es("Inject",t=>({token:t})),-1),Yr=Fa(Es("Optional"),8),zc=Fa(Es("SkipSelf"),4);function Cm(t){return 128==(128&t.flags)}var Go=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Go||{});const W2=/^>|^->|<!--|-->|--!>|<!-$/g,Z2=/(<|>)/,K2="\u200b$1\u200b";const zI=new Map;let Q2=0;const GI="__ngContext__";function yr(t,e){Nr(e)?(t[GI]=e[$a],function J2(t){zI.set(t[$a],t)}(e)):t[GI]=e}let WI;function ZI(t,e){return WI(t,e)}function Hh(t){const e=t[kt];return Or(e)?e[kt]:e}function DS(t){return AS(t[Hs])}function CS(t){return AS(t[xr])}function AS(t){for(;null!==t&&!Or(t);)t=t[xr];return t}function Kc(t,e,n,r,i){if(null!=r){let s,o=!1;Or(r)?s=r:Nr(r)&&(o=!0,r=r[Ht]);const a=Ct(r);0===t&&null!==n?null==i?PS(e,n,a):gu(e,n,a,i||null,!0):1===t&&null!==n?gu(e,n,a,i||null,!0):2===t?function xm(t,e,n){const r=Pm(t,e);r&&function _U(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function IU(t,e,n,r,i){const s=n[ci];s!==Ct(n)&&Kc(e,t,r,s,i);for(let a=xn;a<n.length;a++){const u=n[a];qh(u[he],u,t,e,r,s)}}(e,t,s,n,i)}}function KI(t,e){return t.createComment(function mS(t){return t.replace(W2,e=>e.replace(Z2,K2))}(e))}function bm(t,e,n){return t.createElement(e,n)}function bS(t,e){const n=t[bo],r=n.indexOf(e);Ac(e),n.splice(r,1)}function Rm(t,e){if(t.length<=xn)return;const n=xn+e,r=t[n];if(r){const i=r[zs];null!==i&&i!==t&&bS(i,r),e>0&&(t[n-1][xr]=r[xr]);const s=$c(t,xn+e);!function cU(t,e){qh(t,e,e[Ne],2,null,null),e[Ht]=null,e[Zn]=null}(r[he],r);const o=s[Zr];null!==o&&o.detachView(s[he]),r[kt]=null,r[xr]=null,r[xe]&=-129}return r}function QI(t,e){if(!(256&e[xe])){const n=e[Ne];e[gc]?.destroy(),e[mc]?.destroy(),n.destroyNode&&qh(t,e,n,3,null,null),function hU(t){let e=t[Hs];if(!e)return YI(t[he],t);for(;e;){let n=null;if(Nr(e))n=e[Hs];else{const r=e[xn];r&&(n=r)}if(!n){for(;e&&!e[xr]&&e!==t;)Nr(e)&&YI(e[he],e),e=e[kt];null===e&&(e=t),Nr(e)&&YI(e[he],e),n=e&&e[xr]}e=n}}(e)}}function YI(t,e){if(!(256&e[xe])){e[xe]&=-129,e[xe]|=256,function mU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof nu)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Ri(4,a,u);try{u.call(a)}finally{Ri(5,a,u)}}else{Ri(4,i,s);try{s.call(i)}finally{Ri(5,i,s)}}}}}(t,e),function gU(t,e){const n=t.cleanup,r=e[fs];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[fs]=null);const i=e[_s];if(null!==i){e[_s]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[he].type&&e[Ne].destroy();const n=e[zs];if(null!==n&&Or(e[kt])){n!==e[kt]&&bS(n,e);const r=e[Zr];null!==r&&r.detachView(t)}!function X2(t){zI.delete(t[$a])}(e)}}function JI(t,e,n){return function RS(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Ht];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===qn.None||s===qn.Emulated)return null}return mr(r,n)}}(t,e.parent,n)}function gu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function PS(t,e,n){t.appendChild(e,n)}function MS(t,e,n,r,i){null!==r?gu(t,e,n,r,i):PS(t,e,n)}function Pm(t,e){return t.parentNode(e)}function xS(t,e,n){return OS(t,e,n)}let XI,rE,OS=function NS(t,e,n){return 40&t.type?mr(t,n):null};function Mm(t,e,n,r){const i=JI(t,r,e),s=e[Ne],a=xS(r.parent||e[Zn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)MS(s,i,n[u],a,!1);else MS(s,i,n,a,!1);void 0!==XI&&XI(s,r,e,n,i)}function zh(t,e){if(null!==e){const n=e.type;if(3&n)return mr(e,t);if(4&n)return eE(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return zh(t,r);{const i=t[e.index];return Or(i)?eE(-1,i):Ct(i)}}if(32&n)return ZI(e,t)()||Ct(t[e.index]);{const r=FS(t,e);return null!==r?Array.isArray(r)?r[0]:zh(Hh(t[nn]),r):zh(t,e.next)}}return null}function FS(t,e){return null!==e?t[nn][Zn].projection[e.projection]:null}function eE(t,e){const n=xn+t+1;if(n<e.length){const r=e[n],i=r[he].firstChild;if(null!==i)return zh(r,i)}return e[ci]}function tE(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&yr(Ct(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)tE(t,e,n.child,r,i,s,!1),Kc(e,t,i,a,s);else if(32&u){const d=ZI(n,r);let f;for(;f=d();)Kc(e,t,i,f,s);Kc(e,t,i,a,s)}else 16&u?LS(t,e,r,n,i,s):Kc(e,t,i,a,s);n=o?n.projectionNext:n.next}}function qh(t,e,n,r,i,s){tE(n,r,t.firstChild,e,i,s,!1)}function LS(t,e,n,r,i,s){const o=n[nn],u=o[Zn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Kc(e,t,i,u[d],s);else{let d=u;const f=o[kt];Cm(r)&&(d.flags|=128),tE(t,e,d,f,i,s,!0)}}function US(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function jS(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&pr(t,e,r),null!==i&&US(t,e,i),null!==s&&function wU(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class zS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Je})`}}function Wo(t){return t instanceof zS?t.changingThisBreaksApplicationSecurity:t}const FU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Jc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Jc||{});function cE(t){const e=function Zh(){const t=J();return t&&t[gs].sanitizer}();return e?e.sanitize(Jc.URL,t)||"":function Gh(t,e){const n=function xU(t){return t instanceof zS&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Je})`)}return n===e}(t,"URL")?Wo(t):function sE(t){return(t=String(t)).match(FU)?t:"unsafe:"+t}(_e(t))}class te{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=we({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const mu=new te("ENVIRONMENT_INITIALIZER"),XS=new te("INJECTOR",-1),eb=new te("INJECTOR_DEF_TYPES");class lE{get(e,n=Gi){if(n===Gi){const r=new Error(`NullInjectorError: No provider for ${vt(e)}!`);throw r.name="NullInjectorError",r}return n}}function KU(...t){return{\u0275providers:nb(0,t),\u0275fromNgModule:!0}}function nb(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return $o(e,o=>{const a=o;Fm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&rb(i,s),n}function rb(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];dE(i,s=>{e(s,r)})}}function Fm(t,e,n,r){if(!(t=A(t)))return!1;let i=null,s=qi(t);const o=!s&&Xe(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=qi(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)Fm(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{$o(s.imports,f=>{Fm(f,e,n,r)&&(d||=[],d.push(f))})}finally{}void 0!==d&&rb(d,e)}if(!a){const d=Po(i)||(()=>new i);e({provide:i,useFactory:d,deps:ot},i),e({provide:eb,useValue:i,multi:!0},i),e({provide:mu,useValue:()=>G(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=t;dE(u,f=>{e(f,d)})}}}return i!==t&&void 0!==t.providers}function dE(t,e){for(let n of t)me(n)&&(n=n.\u0275providers),Array.isArray(n)?dE(n,e):e(n)}const QU=ge({provide:String,useValue:ge});function hE(t){return null!==t&&"object"==typeof t&&QU in t}function _u(t){return"function"==typeof t}const fE=new te("Set Injector scope."),Vm={},JU={};let pE;function Lm(){return void 0===pE&&(pE=new lE),pE}class Ni{}class Um extends Ni{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mE(e,o=>this.processProvider(o)),this.records.set(XS,Xc(void 0,this)),i.has("environment")&&this.records.set(Ni,Xc(void 0,this));const s=this.records.get(fE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(eb.multi,ot,qe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=ds(this),r=zn(void 0);try{return e()}finally{ds(n),zn(r)}}get(e,n=Gi,r=qe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ud))return e[Ud](this);r=Si(r);const s=ds(this),o=zn(void 0);try{if(!(r&qe.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function rj(t){return"function"==typeof t||"object"==typeof t&&t instanceof te}(e)&&Ma(e);u=d&&this.injectableDefInScope(d)?Xc(gE(e),Vm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&qe.Self?Lm():this.parent).get(e,n=r&qe.Optional&&n===Gi?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[wo]=a[wo]||[]).unshift(vt(e)),s)throw a;return function zA(t,e,n,r){const i=t[wo];throw e[uc]&&i.unshift(e[uc]),t.message=function Vd(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=vt(e);if(Array.isArray(e))i=e.map(vt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):vt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ai,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[wo]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{zn(o),ds(s)}}resolveInjectorInitializers(){const e=ds(this),n=zn(void 0);try{const i=this.get(mu.multi,ot,qe.Self);for(const s of i)s()}finally{ds(e),zn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){let n=_u(e=A(e))?e:A(e&&e.provide);const r=function ej(t){return hE(t)?Xc(void 0,t.useValue):Xc(ob(t),Vm)}(e);if(_u(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Xc(void 0,Vm,!0),i.factory=()=>Fd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Vm&&(n.value=JU,n.value=n.factory()),"object"==typeof n.value&&n.value&&function nj(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=A(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function gE(t){const e=Ma(t),n=null!==e?e.factory:Po(t);if(null!==n)return n;if(t instanceof te)throw new W(204,!1);if(t instanceof Function)return function XU(t){const e=t.length;if(e>0)throw du(e,"?"),new W(204,!1);const n=function Gv(t){return t&&(t[xa]||t[lg])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new W(204,!1)}function ob(t,e,n){let r;if(_u(t)){const i=A(t);return Po(i)||gE(i)}if(hE(t))r=()=>A(t.useValue);else if(function sb(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Fd(t.deps||[]));else if(function ib(t){return!(!t||!t.useExisting)}(t))r=()=>G(A(t.useExisting));else{const i=A(t&&(t.useClass||t.provide));if(!function tj(t){return!!t.deps}(t))return Po(i)||gE(i);r=()=>new i(...Fd(t.deps))}return r}function Xc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function mE(t,e){for(const n of t)Array.isArray(n)?mE(n,e):n&&me(n)?mE(n.\u0275providers,e):e(n)}const jm=new te("AppId",{providedIn:"root",factory:()=>ij}),ij="ng",ab=new te("Platform Initializer"),Ys=new te("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ub=new te("CSP nonce",{providedIn:"root",factory:()=>function Yc(){if(void 0!==rE)return rE;if(typeof document<"u")return document;throw new W(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let lb=(t,e,n)=>null;function TE(t,e,n=!1){return lb(t,e,n)}class pj{}class fb{}class mj{resolveComponentFactory(e){throw function gj(t){const e=Error(`No component factory found for ${vt(t)}.`);return e.ngComponent=t,e}(e)}}let Gm=(()=>{class t{static#e=this.NULL=new mj}return t})();function _j(){return tl(Nn(),J())}function tl(t,e){return new Zo(mr(t,e))}let Zo=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=_j}return t})();class gb{}let Ij=(()=>{class t{static#e=this.\u0275prov=we({token:t,providedIn:"root",factory:()=>null})}return t})();class Jh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const mb=new Jh("16.2.1"),AE={};function Ib(t,e=null,n=null,r){const i=Eb(t,e,n,r);return i.resolveInjectorInitializers(),i}function Eb(t,e=null,n=null,r,i=new Set){const s=[n||ot,KU(t)];return r=r||("object"==typeof t?void 0:vt(t)),new Um(s,e||Lm(),r||null,i)}let Oi=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Gi;static#t=this.NULL=new lE;static create(n,r){if(Array.isArray(n))return Ib({name:""},r,n,"");{const i=n.name??"";return Ib({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=we({token:t,providedIn:"any",factory:()=>G(XS)});static#r=this.__NG_ELEMENT_ID__=-1}return t})(),nl=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Sj;static#t=this.__NG_ENV_ID__=n=>n}return t})();class Aj extends nl{constructor(e){super(),this._lView=e}onDestroy(e){return Sc(this._lView,e),()=>function oI(t,e){if(null===t[_s])return;const n=t[_s].indexOf(e);-1!==n&&t[_s].splice(n,1)}(this._lView,e)}}function Sj(){return new Aj(J())}function Js(t){return t instanceof Function?t():t}let SE=(()=>{class t{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new W(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const n of this.callbacks)n.invoke()}finally{this.runningCallbacks=!1;for(const n of this.deferredCallbacks)this.callbacks.add(n);this.deferredCallbacks.clear()}}register(n){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(n)}unregister(n){this.callbacks.delete(n),this.deferredCallbacks.delete(n)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}static#e=this.\u0275prov=we({token:t,providedIn:"root",factory:()=>new t})}return t})();function Xh(t){for(;t;){t[xe]|=64;const e=Hh(t);if(Mg(t)&&!e)return t;t=e}return null}function bE(t){return t.ngOriginalError}class Ko{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&bE(e);for(;n&&bE(n);)n=bE(n);return n||null}}const Ab=new te("",{providedIn:"root",factory:()=>!1});class Pb extends Ic{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){Xh(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,r){const i=on(this);this.trackingVersion++;try{e(n,r)}finally{on(i)}}destroy(){this.trackingVersion++}}let Qm=null;function Mb(){return Qm??=new Pb,Qm}function xb(t,e){return t[e]??Mb()}function Nb(t,e){const n=Mb();n.hasReadASignal&&(t[e]=Qm,n.lView=t,Qm=new Pb)}const Ue={};function ws(t){Ob(tt(),J(),On()+t,!1)}function Ob(t,e,n,r){if(!r)if(3==(3&e[xe])){const s=t.preOrderCheckHooks;null!==s&&kc(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Fc(e,s,0,n)}Ws(n)}function Ce(t,e=qe.Default){const n=J();return null===n?G(t,e):am(Nn(),n,A(t),e)}function Ym(t,e,n,r,i,s,o,a,u,d,f){const g=e.blueprint.slice();return g[Ht]=i,g[xe]=140|r,(null!==d||t&&2048&t[xe])&&(g[xe]|=2048),Cc(g),g[kt]=g[ms]=t,g[tn]=n,g[gs]=o||t&&t[gs],g[Ne]=a||t&&t[Ne],g[ps]=u||t&&t[ps]||null,g[Zn]=s,g[$a]=function Y2(){return Q2++}(),g[ui]=f,g[pc]=d,g[nn]=2==e.type?t[nn]:g,g}function sl(t,e,n,r,i){let s=t.data[e];if(null===s)s=function RE(t,e,n,r,i){const s=Oo(),o=Ja(),u=t.data[e]=function zj(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return vs()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function hI(){return Se.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Ya(){const t=Se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Pi(s,!0),s}function ef(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Fb(t,e,n,r,i){const s=xb(e,gc),o=On(),a=2&r;try{if(Ws(-1),a&&e.length>Ze&&Ob(t,e,Ze,!1),Ri(a?2:0,i),a)s.runInContext(n,r,i);else{const d=on(null);try{n(r,i)}finally{on(d)}}}finally{a&&null===e[gc]&&Nb(e,gc),Ws(o),Ri(a?3:1,i)}}function PE(t,e,n){if(Pg(e)){const r=on(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{on(r)}}}function ME(t,e,n){Zg()&&(function Yj(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;Zi(n)&&function iB(t,e,n){const r=mr(e,t),i=Vb(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Jm(t,Ym(t,i,null,o,r,e,null,t[gs].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||su(n,e),yr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],d=Fr(e,t,a,n);yr(d,e),null!==o&&sB(0,a-i,d,u,0,o),li(u)&&(kr(n.index,e)[tn]=Fr(e,t,a,n))}}(t,e,n,mr(n,e)),64==(64&n.flags)&&$b(t,e,n))}function xE(t,e,n=mr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Vb(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=NE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function NE(t,e,n,r,i,s,o,a,u,d,f){const g=Ze+r,_=g+i,y=function Lj(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ue);return n}(g,_),E="function"==typeof d?d():d;return y[he]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:f}}let Lb=t=>null;function Ub(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?jb(n,e,i,s):r.hasOwnProperty(i)&&jb(n,e,r[i],s)}return n}function jb(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function OE(t,e,n,r){if(Zg()){const i=null===r?null:{"":-1},s=function Xj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(dc(e,o.selectors,!1))if(r||(r=[]),li(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),kE(t,e,a.length)}else r.unshift(o),kE(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Bb(t,e,n,o,i,a),i&&function eB(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new W(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=$s(n.mergedAttrs,n.attrs)}function Bb(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Ah(su(n,e),t,r[d].type);!function nB(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=ef(t,e,r.length,null);for(let d=0;d<r.length;d++){const f=r[d];n.mergedAttrs=$s(n.mergedAttrs,f.hostAttrs),rB(t,n,e,u,f),tB(u,f,i),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function qj(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,d=null;for(let f=e.directiveStart;f<i;f++){const g=s[f],_=n?n.get(g):null,E=_?_.outputs:null;u=Ub(g.inputs,f,u,_?_.inputs:null),d=Ub(g.outputs,f,d,E);const D=null===u||null===o||wg(e)?null:oB(u,f,o);a.push(D)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,s)}function $b(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function fI(){return Se.lFrame.currentDirectiveIndex}();try{Ws(s);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];ph(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Jj(u,d)}}finally{Ws(-1),ph(o)}}function Jj(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function kE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function tB(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;li(e)&&(n[""]=t)}}function rB(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Po(i.type)),o=new nu(s,li(i),Ce);t.blueprint[r]=o,n[r]=o,function Kj(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function Qj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,ef(t,n,i.hostVars,Ue),i)}function sB(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)Hb(r,n,o[a++],o[a++],o[a++])}function Hb(t,e,n,r,i){const s=on(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{on(s)}}function oB(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function zb(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function qb(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];tu(n[r]),o.contentQueries(2,e[s],s)}}}function Jm(t,e){return t[Hs]?t[bg][xr]=e:t[Hs]=e,t[bg]=e,e}function VE(t,e,n){tu(0);const r=on(null);try{e(t,n)}finally{on(r)}}function Kb(t,e){const n=t[ps],r=n?n.get(Ko,null):null;r&&r.handleError(e)}function LE(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];Hb(t.data[o],e[o],r,a,i)}}function aB(t,e){const n=kr(e,t),r=n[he];!function uB(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Ht];null!==i&&null===n[ui]&&(n[ui]=TE(i,n[ps])),UE(r,n,n[tn])}function UE(t,e,n){Mc(e);try{const r=t.viewQuery;null!==r&&VE(1,r,n);const i=t.template;null!==i&&Fb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&qb(t,e),t.staticViewQueries&&VE(2,t.viewQuery,n);const s=t.components;null!==s&&function cB(t,e){for(let n=0;n<e.length;n++)aB(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[xe]&=-5,Nc()}}let Qb=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=new Xv(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=we({token:t,providedIn:"root",factory:()=>new t})}return t})();function Xm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Ci(i,a):2==s&&(r=Ci(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function tf(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Ct(s)),Or(s)){for(let a=xn;a<s.length;a++){const u=s[a],d=u[he].firstChild;null!==d&&tf(u[he],u,d,r)}s[ci]!==s[Ht]&&r.push(s[ci])}const o=n.type;if(8&o)tf(t,e,n.child,r);else if(32&o){const a=ZI(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=FS(e,n);if(Array.isArray(a))r.push(...a);else{const u=Hh(e[nn]);tf(u[he],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function e_(t,e,n,r=!0){const i=e[gs],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{Yb(t,e,t.template,n)}catch(u){throw r&&Kb(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function Yb(t,e,n,r){const i=e[xe];if(256!=(256&i)){e[gs].effectManager?.flush(),Mc(e);try{Cc(e),function Qg(t){return Se.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Fb(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&kc(e,d,null)}else{const d=t.preOrderHooks;null!==d&&Fc(e,d,0,null),vh(e,0)}if(function hB(t){for(let e=DS(t);null!==e;e=CS(e)){if(!e[qs])continue;const n=e[bo];for(let r=0;r<n.length;r++){sI(n[r])}}}(e),Jb(e,2),null!==t.contentQueries&&qb(t,e),o){const d=t.contentCheckHooks;null!==d&&kc(e,d)}else{const d=t.contentHooks;null!==d&&Fc(e,d,1),vh(e,1)}!function Vj(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=xb(e,mc);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)Ws(~s);else{const o=s,a=n[++i],u=n[++i];fh(a,o),r.runInContext(u,2,e[o])}}}finally{null===e[mc]&&Nb(e,mc),Ws(-1)}}(t,e);const a=t.components;null!==a&&eR(e,a,0);const u=t.viewQuery;if(null!==u&&VE(2,u,r),o){const d=t.viewCheckHooks;null!==d&&kc(e,d)}else{const d=t.viewHooks;null!==d&&Fc(e,d,2),vh(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[xe]&=-73,Ac(e)}finally{Nc()}}}function Jb(t,e){for(let n=DS(t);null!==n;n=CS(n))for(let r=xn;r<n.length;r++)Xb(n[r],e)}function fB(t,e,n){Xb(kr(e,t),n)}function Xb(t,e){if(!function iI(t){return 128==(128&t[xe])}(t))return;const n=t[he];if(80&t[xe]&&0===e||1024&t[xe]||2===e)Yb(n,t,n.template,t[tn]);else if(t[Ba]>0){Jb(t,1);const i=t[he].components;null!==i&&eR(t,i,1)}}function eR(t,e,n){for(let r=0;r<e.length;r++)fB(t,e[r],n)}class nf{get rootNodes(){const e=this._lView,n=e[he];return tf(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tn]}set context(e){this._lView[tn]=e}get destroyed(){return 256==(256&this._lView[xe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[kt];if(Or(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Rm(e,r),$c(n,r))}this._attachedToViewContainer=!1}QI(this._lView[he],this._lView)}onDestroy(e){Sc(this._lView,e)}markForCheck(){Xh(this._cdRefInjectingView||this._lView)}detach(){this._lView[xe]&=-129}reattach(){this._lView[xe]|=128}detectChanges(){e_(this._lView[he],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dU(t,e){qh(t,e,e[Ne],2,null,null)}(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e}}class pB extends nf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;e_(e[he],e,e[tn],!1)}checkNoChanges(){}get context(){return null}}class tR extends Gm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Xe(e);return new rf(n,this.ngModule)}}function nR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class mB{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Si(r);const i=this.injector.get(e,AE,r);return i!==AE||n===AE?i:this.parentInjector.get(e,n,r)}}class rf extends fb{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=nR(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return nR(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Cg(t){return t.map(Gd).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Ni?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new mB(e,s):e,a=o.get(gb,null);if(null===a)throw new W(407,!1);const g={rendererFactory:a,sanitizer:o.get(Ij,null),effectManager:o.get(Qb,null),afterRenderEventManager:o.get(SE,null)},_=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function Uj(t,e,n,r){const s=r.get(Ab,!1)||n===qn.ShadowDom,o=t.selectRootElement(e,s);return function jj(t){Lb(t)}(o),o}(_,r,this.componentDef.encapsulation,o):bm(_,y,function gB(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),N=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=TE(E,o,!0));const U=NE(0,null,null,1,0,null,null,null,null,null,null),re=Ym(null,U,null,N,null,null,g,_,o,null,R);let de,Fe;Mc(re);try{const yt=this.componentDef;let Un,sg=null;yt.findHostDirectiveDefs?(Un=[],sg=new Map,yt.findHostDirectiveDefs(yt,Un,sg),Un.push(yt)):Un=[yt];const Uv=function yB(t,e){const n=t[he],r=Ze;return t[r]=e,sl(n,r,2,"#host",null)}(re,E),xJ=function vB(t,e,n,r,i,s,o){const a=i[he];!function IB(t,e,n,r){for(const i of t)e.mergedAttrs=$s(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Xm(e,e.mergedAttrs,!0),null!==n&&jS(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=TE(e,i[ps]));const d=s.rendererFactory.createRenderer(e,n);let f=16;n.signals?f=4096:n.onPush&&(f=64);const g=Ym(i,Vb(n),null,f,i[t.index],t,s,d,null,null,u);return a.firstCreatePass&&kE(a,t,r.length-1),Jm(i,g),i[t.index]=g}(Uv,E,yt,Un,re,g,_);Fe=Wg(U,Ze),E&&function wB(t,e,n,r){if(r)pr(t,n,["ng-version",mb.full]);else{const{attrs:i,classes:s}=function Wd(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Mr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&pr(t,n,i),s&&s.length>0&&US(t,n,s.join(" "))}}(_,yt,E,r),void 0!==n&&function TB(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Fe,this.ngContentSelectors,n),de=function EB(t,e,n,r,i,s){const o=Nn(),a=i[he],u=mr(o,i);Bb(a,i,o,n,null,r);for(let f=0;f<n.length;f++)yr(Fr(i,a,o.directiveStart+f,o),i);$b(a,i,o),u&&yr(u,i);const d=Fr(i,a,o.directiveStart+o.componentOffset,o);if(t[tn]=i[tn]=d,null!==s)for(const f of s)f(d,e);return PE(a,o,t),d}(xJ,yt,Un,sg,re,[DB]),UE(U,re,null)}finally{Nc()}return new _B(this.componentType,de,tl(Fe,re),re,Fe)}}class _B extends pj{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new pB(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;LE(s[he],s,i,e,n),this.previousInputValues.set(e,n),Xh(kr(this._tNode.index,s))}}get injector(){return new ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function DB(){const t=Nn();Oc(J()[he],t)}function n_(t){return!!function jE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function vr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function WE(t,e,n,r,i,s,o,a){const u=J(),d=tt(),f=t+Ze,g=d.firstCreatePass?function XB(t,e,n,r,i,s,o,a,u){const d=e.consts,f=sl(e,t,4,o||null,ys(d,a));OE(e,n,f,ys(d,u)),Oc(e,f);const g=f.tView=NE(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,d,u,e,n,r,i,s,o):d.data[f];Pi(g,!1);const _=ER(d,u,g,t);Zs()&&Mm(d,u,_,g),yr(_,u),Jm(u,u[f]=zb(_,u,_,g)),yc(g)&&ME(d,u,g),null!=o&&xE(u,g,a)}let ER=function wR(t,e,n,r){return Is(!0),e[Ne].createComment("")};function lf(t,e,n){const r=J();return vr(r,ko(),e)&&function hi(t,e,n,r,i,s,o,a){const u=mr(e,n);let f,d=e.inputs;!a&&null!=d&&(f=d[r])?(LE(t,n,f,r,i),Zi(e)&&function Wj(t,e){const n=kr(e,t);16&n[xe]||(n[xe]|=64)}(n,e.index)):3&e.type&&(r=function Gj(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(tt(),function zt(){const t=Se.lFrame;return Wg(t.tView,t.selectedIndex)}(),r,t,e,r[Ne],n,!1),lf}function ZE(t,e,n,r,i){const o=i?"class":"style";LE(t,n,e.inputs[o],o,r)}function pt(t,e,n,r){const i=J(),s=tt(),o=Ze+t,a=i[Ne],u=s.firstCreatePass?function i$(t,e,n,r,i,s){const o=e.consts,u=sl(e,t,2,r,ys(o,i));return OE(e,n,u,ys(o,s)),null!==u.attrs&&Xm(u,u.attrs,!1),null!==u.mergedAttrs&&Xm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],d=TR(s,i,u,a,e,t);i[o]=d;const f=yc(u);return Pi(u,!0),jS(a,d,u),32!=(32&u.flags)&&Zs()&&Mm(s,i,d,u),0===function uh(){return Se.lFrame.elementDepthCount}()&&yr(d,i),function aI(){Se.lFrame.elementDepthCount++}(),f&&(ME(s,i,u),PE(s,u,i)),null!==r&&xE(i,u),pt}function nt(){let t=Nn();Ja()?Xa():(t=t.parent,Pi(t,!1));const e=t;(function Kg(t){return Se.skipHydrationRootTNode===t})(e)&&function dI(){Se.skipHydrationRootTNode=null}(),function uI(){Se.lFrame.elementDepthCount--}();const n=tt();return n.firstCreatePass&&(Oc(n,t),Pg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function EI(t){return 0!=(8&t.flags)}(e)&&ZE(n,e,J(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function wI(t){return 0!=(16&t.flags)}(e)&&ZE(n,e,J(),e.stylesWithoutHost,!1),nt}function qt(t,e,n,r){return pt(t,e,n,r),nt(),qt}let TR=(t,e,n,r,i,s)=>(Is(!0),bm(r,i,function yh(){return Se.lFrame.currentNamespace}()));function vu(t,e,n){const r=J(),i=tt(),s=t+Ze,o=i.firstCreatePass?function a$(t,e,n,r,i){const s=e.consts,o=ys(s,r),a=sl(e,t,8,"ng-container",o);return null!==o&&Xm(a,o,!0),OE(e,n,a,ys(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];Pi(o,!0);const a=CR(i,r,o,t);return r[s]=a,Zs()&&Mm(i,r,a,o),yr(a,r),yc(o)&&(ME(i,r,o),PE(i,o,r)),null!=n&&xE(r,o),vu}function Iu(){let t=Nn();const e=tt();return Ja()?Xa():(t=t.parent,Pi(t,!1)),e.firstCreatePass&&(Oc(e,t),Pg(t)&&e.queries.elementEnd(t)),Iu}let CR=(t,e,n,r)=>(Is(!0),KI(e[Ne],""));function a_(t){return!!t&&"function"==typeof t.then}function AR(t){return!!t&&"function"==typeof t.subscribe}function Yi(t,e,n,r){const i=J(),s=tt(),o=Nn();return function bR(t,e,n,r,i,s,o){const a=yc(r),d=t.firstCreatePass&&function Wb(t){return t.cleanup||(t.cleanup=[])}(t),f=e[tn],g=function Gb(t){return t[fs]||(t[fs]=[])}(e);let _=!0;if(3&r.type||o){const D=mr(r,e),S=o?o(D):D,N=g.length,R=o?re=>o(Ct(re[r.index])):r.index;let U=null;if(!o&&a&&(U=function d$(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[fs],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==U)(U.__ngLastListenerFn__||U).__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,_=!1;else{s=PR(r,e,f,s,!1);const re=n.listen(S,i,s);g.push(s,re),d&&d.push(i,R,N,N+1)}}else s=PR(r,e,f,s,!1);const y=r.outputs;let E;if(_&&null!==y&&(E=y[i])){const D=E.length;if(D)for(let S=0;S<D;S+=2){const de=e[E[S]][E[S+1]].subscribe(s),Fe=g.length;g.push(s,de),d&&d.push(i,r.index,Fe,-(Fe+1))}}}(s,i,i[Ne],o,t,e,r),Yi}function RR(t,e,n,r){try{return Ri(6,e,n),!1!==n(r)}catch(i){return Kb(t,i),!1}finally{Ri(7,e,n)}}function PR(t,e,n,r,i){return function s(o){if(o===Function)return r;Xh(t.componentOffset>-1?kr(t.index,e):e);let u=RR(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=RR(e,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function f$(t,e){let n=null;const r=function Tg(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?dc(t,s,!0):qd(r,s))return i}else n=i}return n}function u_(t,e=0,n){const r=J(),i=tt(),s=sl(i,Ze+t,16,null,n||null);null===s.projection&&(s.projection=e),Xa(),(!r[ui]||vs())&&32!=(32&s.flags)&&function vU(t,e,n){LS(e[Ne],0,e,n,JI(t,n,e),xS(n.parent||e[Zn],n,e))}(i,r,s)}function c_(t,e){return t<<17|e<<2}function Qo(t){return t>>17&32767}function QE(t){return 2|t}function Eu(t){return(131068&t)>>2}function YE(t,e){return-131069&t|e<<2}function JE(t){return 1|t}function BR(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Qo(s):Eu(s),u=!1;for(;0!==a&&(!1===u||o);){const f=t[a+1];v$(t[a],e)&&(u=!0,t[a+1]=r?JE(f):QE(f)),a=r?Qo(f):Eu(f)}u&&(t[n+1]=r?QE(s):JE(s))}function v$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ho(t,e)>=0}const Fn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $R(t){return t.substring(Fn.key,Fn.keyEnd)}function HR(t,e){const n=Fn.textEnd;return n===e?-1:(e=Fn.keyEnd=function T$(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Fn.key=e,n),gl(t,e,n))}function gl(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function QR(t){!function Xi(t,e,n,r){const i=tt(),s=function di(t){const e=Se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);i.firstUpdatePass&&function JR(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[On()],o=YR(t,n);nP(s,r)&&null===e&&!o&&(e=!1),e=function S$(t,e,n,r){const i=function eu(t){const e=Se.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=df(n=XE(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=XE(i,t,e,n,r),null===s){let u=function b$(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Eu(r))return t[Qo(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=XE(null,t,e,u[1],r),u=df(u,e.attrs,r),function R$(t,e,n,r){t[Qo(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function P$(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=df(r,t[s].hostAttrs,n);return df(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function _$(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Qo(o),u=Eu(o);t[r]=n;let f,d=!1;if(Array.isArray(n)?(f=n[1],(null===f||Ho(n,f)>0)&&(d=!0)):f=n,i)if(0!==u){const _=Qo(t[a+1]);t[r+1]=c_(_,a),0!==_&&(t[_+1]=YE(t[_+1],r)),t[a+1]=function g$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=c_(a,0),0!==a&&(t[a+1]=YE(t[a+1],r)),a=r;else t[r+1]=c_(u,0),0===a?a=r:t[u+1]=YE(t[u+1],r),u=r;d&&(t[r+1]=QE(t[r+1])),BR(t,f,r,!0),BR(t,f,r,!1),function y$(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Ho(s,e)>=0&&(n[r+1]=JE(n[r+1]))}(e,f,t,r,s),o=c_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(i,null,s,r);const o=J();if(n!==Ue&&vr(o,s,n)){const a=i.data[On()];if(nP(a,r)&&!YR(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=Ci(u,n||"")),ZE(i,a,o,n,r)}else!function N$(t,e,n,r,i,s,o,a){i===Ue&&(i=ot);let u=0,d=0,f=0<i.length?i[0]:null,g=0<s.length?s[0]:null;for(;null!==f||null!==g;){const _=u<i.length?i[u+1]:void 0,y=d<s.length?s[d+1]:void 0;let D,E=null;f===g?(u+=2,d+=2,_!==y&&(E=g,D=y)):null===g||null!==f&&f<g?(u+=2,E=f):(d+=2,E=g,D=y),null!==E&&eP(t,e,n,r,E,D,o,a),f=u<i.length?i[u]:null,g=d<s.length?s[d]:null}}(i,a,o,o[Ne],o[s+1],o[s+1]=function M$(t,e,n){if(null==n||""===n)return ot;const r=[],i=Wo(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,s)}}(x$,As,t,!0)}function As(t,e){for(let n=function E$(t){return function qR(t){Fn.key=0,Fn.keyEnd=0,Fn.value=0,Fn.valueEnd=0,Fn.textEnd=t.length}(t),HR(t,gl(t,0,Fn.textEnd))}(e);n>=0;n=HR(e,n))sr(t,$R(e),!0)}function YR(t,e){return e>=t.expandoStartIndex}function XE(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=df(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function df(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),sr(t,o,!!n||e[++s]))}return void 0===t?null:t}function x$(t,e,n){const r=String(e);""!==r&&!r.includes(" ")&&sr(t,r,n)}function eP(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],f=function m$(t){return 1==(1&t)}(d)?tP(u,e,n,i,Eu(d),o):void 0;l_(f)||(l_(s)||function p$(t){return 2==(2&t)}(d)&&(s=tP(u,null,n,i,a,o)),function EU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Go.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Go.Important),t.setStyle(n,r,i,s))}}(r,o,Dc(On(),n),i,s))}function tP(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),f=d?u[1]:u,g=null===f;let _=n[i+1];_===Ue&&(_=g?ot:void 0);let y=g?Hc(_,r):f===r?_:void 0;if(d&&!l_(y)&&(y=Hc(u,r)),l_(y)&&(a=y,o))return a;const E=t[i+1];i=o?Qo(E):Eu(E)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Hc(u,r))}return a}function l_(t){return void 0!==t}function nP(t,e){return 0!=(t.flags&(e?8:16))}function rt(t,e=""){const n=J(),r=tt(),i=t+Ze,s=r.firstCreatePass?sl(r,i,1,e,null):r.data[i],o=rP(r,n,s,e,t);n[i]=o,Zs()&&Mm(r,n,o,s),Pi(s,!1)}let rP=(t,e,n,r,i)=>(Is(!0),function Sm(t,e){return t.createText(e)}(e[Ne],r));function ml(t){return _l("",t,""),ml}function _l(t,e,n){const r=J(),i=function al(t,e,n,r){return vr(t,ko(),n)?e+_e(n)+r:Ue}(r,t,e,n);return i!==Ue&&function Xs(t,e,n){const r=Dc(e,t);!function SS(t,e,n){t.setValue(e,n)}(t[Ne],r,n)}(r,On(),i),_l}const vl="en-US";let CP=vl;function nw(t,e,n,r,i){if(t=A(t),Array.isArray(t))for(let s=0;s<t.length;s++)nw(t[s],e,n,r,i);else{const s=tt(),o=J(),a=Nn();let u=_u(t)?t:A(t.provide);const d=ob(t),f=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(_u(t)||!t.multi){const y=new nu(d,i,Ce),E=iw(u,e,i?f:f+_,g);-1===E?(Ah(su(a,o),s,u),rw(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[E]=y,o[E]=y)}else{const y=iw(u,e,f+_,g),E=iw(u,e,f,f+_),S=E>=0&&n[E];if(i&&!S||!i&&!(y>=0&&n[y])){Ah(su(a,o),s,u);const N=function tz(t,e,n,r,i){const s=new nu(t,n,Ce);return s.multi=[],s.index=e,s.componentProviders=0,QP(s,i,r&&!n),s}(i?ez:XH,n.length,i,r,d);!i&&S&&(n[E].providerFactory=N),rw(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(N),o.push(N)}else rw(s,t,y>-1?y:E,QP(n[i?E:y],d,!i&&r));!i&&r&&S&&n[E].componentProviders++}}}function rw(t,e,n,r){const i=_u(e),s=function YU(t){return!!t.useClass}(e);if(i||s){const u=(s?A(e.useClass):e).prototype.ngOnDestroy;if(u){const d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const f=d.indexOf(n);-1===f?d.push(n,[r,u]):d[f+1].push(r,u)}else d.push(n,u)}}}function QP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function iw(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function XH(t,e,n,r){return sw(this.multi,[])}function ez(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Fr(n,n[he],this.providerFactory.index,r);s=a.slice(0,o),sw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],sw(i,s);return s}function sw(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ow(t,e=[]){return n=>{n.providersResolver=(r,i)=>function JH(t,e,n){const r=tt();if(r.firstCreatePass){const i=li(t);nw(n,r.data,r.blueprint,i,!0),nw(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Tu{}class YP{}class aw extends Tu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tR(this);const i=rr(e);this._bootstrapComponents=Js(i.bootstrap),this._r3Injector=Eb(e,n,[{provide:Tu,useValue:this},{provide:Gm,useValue:this.componentFactoryResolver},...r],vt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class uw extends YP{constructor(e){super(),this.moduleType=e}create(e){return new aw(this.moduleType,e,[])}}class JP extends Tu{constructor(e){super(),this.componentFactoryResolver=new tR(this),this.instance=null;const n=new Um([...e.providers,{provide:Tu,useValue:this},{provide:Gm,useValue:this.componentFactoryResolver}],e.parent||Lm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function cw(t,e,n=null){return new JP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let iz=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=nb(0,n.type),i=r.length>0?cw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=we({token:t,providedIn:"environment",factory:()=>new t(G(Ni))})}return t})();function XP(t){t.getStandaloneInjector=e=>e.get(iz).getOrCreateStandaloneInjector(t)}function oM(t,e,n,r,i,s){const o=e+n;return vr(t,o,i)?function Ds(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function _f(t,e){const n=t[e];return n===Ue?void 0:n}(t,o+1)}function hM(t,e,n){const r=t+Ze,i=J(),s=function Mo(t,e){return t[e]}(i,r);return function yf(t,e){return t[he].data[e].pure}(i,r)?oM(i,function Kn(){const t=Se.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function dw(t){return e=>{setTimeout(t,void 0,e)}}const Ur=class bz extends B{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=dw(s),i&&(i=dw(i)),o&&(o=dw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ct&&e.add(a),a}};function Mz(t,e,n,r=!0){const i=e[he];if(function fU(t,e,n,r){const i=xn+r,s=n.length;r>0&&(n[i-1][xr]=e),r<s-xn?(e[xr]=n[i],xh(n,xn+r,e)):(n.push(e),e[xr]=null),e[kt]=n;const o=e[zs];null!==o&&n!==o&&function pU(t,e){const n=t[bo];e[nn]!==e[kt][kt][nn]&&(t[qs]=!0),null===n?t[bo]=[e]:n.push(e)}(o,e);const a=e[Zr];null!==a&&a.insertView(t),e[xe]|=128}(i,e,t,n),r){const s=eE(n,t),o=e[Ne],a=Pm(o,t[ci]);null!==a&&function lU(t,e,n,r,i,s){r[Ht]=i,r[Zn]=e,qh(t,r,n,1,i,s)}(i,t[Zn],o,e,a,s)}}Symbol;let eo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Oz}return t})();const xz=eo,Nz=class extends xz{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Pz(t,e,n,r){const i=e.tView,a=Ym(t,i,n,4096&t[xe]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[zs]=t[e.index];const d=t[Zr];return null!==d&&(a[Zr]=d.createEmbeddedView(i)),UE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new nf(i)}};function Oz(){return function g_(t,e){return 4&t.type?new Nz(e,t,tl(t,e)):null}(Nn(),J())}let es=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=jz}return t})();function jz(){return function vM(t,e){let n;const r=e[t.index];return Or(r)?n=r:(n=zb(r,e,null,t),e[t.index]=n,Jm(e,n)),IM(n,e,t,r),new _M(n,t,e)}(Nn(),J())}const Bz=es,_M=class extends Bz{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return tl(this._hostTNode,this._hostLView)}get injector(){return new ir(this._hostTNode,this._hostLView)}get parentInjector(){const e=ou(this._hostTNode,this._hostLView);if(wh(e)){const n=ru(e,this._hostLView),r=Ks(e);return new ir(n[he].data[r+8],n)}return new ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=yM(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-xn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function lu(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const D=n||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}const u=o?e:new rf(Xe(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const S=(o?d:this.parentInjector).get(Ni,null);S&&(s=S)}Xe(u.componentType??{});const y=u.create(d,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function ah(t){return Or(t[kt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[kt],f=new _M(d,d[Zn],d[kt]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return Mz(a,i,o,!r),e.attachToViewContainerRef(),xh(fw(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=yM(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Rm(this._lContainer,n);r&&($c(fw(this._lContainer),n),QI(r[he],r))}detach(e){const n=this._adjustIndex(e,-1),r=Rm(this._lContainer,n);return r&&null!=$c(fw(this._lContainer),n)?new nf(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function yM(t){return t[8]}function fw(t){return t[8]||(t[8]=[])}let IM=function EM(t,e,n,r){if(t[ci])return;let i;i=8&n.type?Ct(r):function $z(t,e){const n=t[Ne],r=n.createComment(""),i=mr(e,t);return gu(n,Pm(n,i),r,function yU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[ci]=i};const Dw=new te("Application Initializer");let Cw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=oe(Dw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(a_(s))n.push(s);else if(AR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),GM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const to=new te("LocaleId",{providedIn:"root",factory:()=>oe(to,qe.Optional|qe.SkipSelf)||function v4(){return typeof $localize<"u"&&$localize.locale||vl}()});let WM=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class w4{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let ZM=(()=>{class t{compileModuleSync(n){return new uw(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Js(rr(n).declarations).reduce((o,a)=>{const u=Xe(a);return u&&o.push(new rf(u)),o},[]);return new w4(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function JM(...t){}class It{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ur(!1),this.onMicrotaskEmpty=new Ur(!1),this.onStable=new Ur(!1),this.onError=new Ur(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function $4(){const t="function"==typeof ft.requestAnimationFrame;let e=ft[t?"requestAnimationFrame":"setTimeout"],n=ft[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function q4(t){const e=()=>{!function z4(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ft,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Rw(t),t.isCheckStableRunning=!0,bw(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Rw(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return XM(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),ex(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return XM(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),ex(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Rw(t),bw(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!It.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(It.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,H4,JM,JM);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const H4={};function bw(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Rw(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function XM(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ex(t){t._nesting--,bw(t)}class G4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ur,this.onMicrotaskEmpty=new Ur,this.onStable=new Ur,this.onError=new Ur}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const tx=new te("",{providedIn:"root",factory:nx});function nx(){const t=oe(It);let e=!0;return x(new Qe(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Qe(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{It.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Pe()))}const rx=new te(""),v_=new te("");let xw,Pw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xw||(function W4(t){xw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(G(It),G(Mw),G(v_))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})(),Mw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return xw?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Yo=null;const ix=new te("AllowMultipleToken"),Nw=new te("PlatformDestroyListeners"),Ow=new te("appBootstrapListener");class ox{constructor(e,n){this.name=e,this.token=n}}function ux(t,e,n=[]){const r=`Platform: ${e}`,i=new te(r);return(s=[])=>{let o=kw();if(!o||o.injector.get(ix,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Q4(t){if(Yo&&!Yo.get(ix,!1))throw new W(400,!1);(function sx(){!function nh(t){Za=t}(()=>{throw new W(600,!1)})})(),Yo=t;const e=t.get(lx);(function ax(t){t.get(ab,null)?.forEach(n=>n())})(t)}(function cx(t=[],e){return Oi.create({name:e,providers:[{provide:fE,useValue:"platform"},{provide:Nw,useValue:new Set([()=>Yo=null])},...t]})}(a,r))}return function J4(t){const e=kw();if(!e)throw new W(401,!1);return e}()}}function kw(){return Yo?.get(lx)??null}let lx=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function X4(t="zone.js",e){return"noop"===t?new G4:"zone.js"===t?new It(e):t}(r?.ngZone,function dx(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function rz(t,e,n){return new aw(t,e,n)}(n.moduleType,this.injector,function mx(t){return[{provide:It,useFactory:t},{provide:mu,multi:!0,useFactory:()=>{const e=oe(tq,{optional:!0});return()=>e.initialize()}},{provide:gx,useFactory:eq},{provide:tx,useFactory:nx}]}(()=>i)),o=s.injector.get(Ko,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{I_(this._modules,s),a.unsubscribe()})}),function hx(t,e,n){try{const r=n();return a_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Cw);return a.runInitializers(),a.donePromise.then(()=>(function AP(t){fr(t,"Expected localeId to be defined"),"string"==typeof t&&(CP=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(to,vl)||vl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=fx({},r);return function Z4(t,e,n){const r=new uw(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(wl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new W(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Nw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(G(Oi))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function fx(t,e){return Array.isArray(e)?e.reduce(fx,t):{...t,...e}}let wl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe(gx),this.zoneIsStable=oe(tx),this.componentTypes=[],this.components=[],this.isStable=oe(WM).hasPendingTasks.pipe(ht(n=>n?z(!1):this.zoneIsStable),Nt(),Pe()),this._injector=oe(Ni)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof fb;if(!this._injector.get(Cw).done)throw!i&&function Ao(t){const e=Xe(t)||dn(t)||Mn(t);return null!==e&&e.standalone}(n),new W(405,!1);let o;o=i?n:this._injector.get(Gm).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function K4(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Tu),d=o.create(Oi.NULL,[],r||o.selector,a),f=d.location.nativeElement,g=d.injector.get(rx,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),I_(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new W(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;I_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Ow,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>I_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function I_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const gx=new te("",{providedIn:"root",factory:()=>oe(Ko).handleError.bind(void 0)});function eq(){const t=oe(It),e=oe(Ko);return n=>t.runOutsideAngular(()=>e.handleError(n))}let tq=(()=>{class t{constructor(){this.zone=oe(It),this.applicationRef=oe(wl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Vw=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=rq}return t})();function rq(t){return function iq(t,e,n){if(Zi(t)&&!n){const r=kr(t.index,e);return new nf(r,r)}return 47&t.type?new nf(e[nn],e):null}(Nn(),J(),16==(16&t))}class Ix{constructor(){}supports(e){return n_(e)}create(e){return new lq(e)}}const cq=(t,e)=>e;class lq{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||cq}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<wx(r,i,s)?n:r,a=wx(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,f=u-i;if(d!=f){for(let _=0;_<d;_++){const y=_<s.length?s[_]:s[_]=0,E=y+_;f<=E&&E<d&&(s[_]=y+1)}s[o.previousIndex]=f-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!n_(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function kB(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new dq(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ex),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ex),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class dq{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hq{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Ex{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new hq,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wx(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Dx(){return new T_([new Ix])}let T_=(()=>{class t{static#e=this.\u0275prov=we({token:t,providedIn:"root",factory:Dx});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Dx()),deps:[[t,new zc,new Yr]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new W(901,!1)}}return t})();const _q=ux(null,"core",[]);let yq=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(G(wl))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({})}return t})(),zw=null;function Tl(){return zw}class xq{}const Fi=new te("DocumentToken");let qw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:function(){return oe(Oq)},providedIn:"platform"})}return t})();const Nq=new te("Location Initialized");let Oq=(()=>{class t extends qw{constructor(){super(),this._doc=oe(Fi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Tl().getBaseHref(this._doc)}onPopState(n){const r=Tl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Tl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function Gw(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Nx(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function no(t){return t&&"?"!==t[0]?"?"+t:t}let Cu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:function(){return oe(kx)},providedIn:"root"})}return t})();const Ox=new te("appBaseHref");let kx=(()=>{class t extends Cu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??oe(Fi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Gw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+no(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+no(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+no(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(G(qw),G(Ox,8))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kq=(()=>{class t extends Cu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Gw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+no(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+no(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(G(qw),G(Ox,8))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})(),Ww=(()=>{class t{constructor(n){this._subject=new Ur,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function Lq(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(Nx(Fx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+no(r))}normalize(n){return t.stripTrailingSlash(function Vq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,Fx(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+no(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+no(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=no;static#t=this.joinWithSlash=Gw;static#n=this.stripTrailingSlash=Nx;static#r=this.\u0275fac=function(r){return new(r||t)(G(Cu))};static#i=this.\u0275prov=we({token:t,factory:function(){return function Fq(){return new Ww(G(Cu))}()},providedIn:"root"})}return t})();function Fx(t){return t.replace(/\/index.html$/,"")}class C9{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let iT=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new C9(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),Wx(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{Wx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Ce(es),Ce(eo),Ce(T_))};static#t=this.\u0275dir=Pn({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function Wx(t,e){t.context.$implicit=e.item}class P9{createSubscription(e,n){return ih(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){ih(()=>e.unsubscribe())}}class M9{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const x9=new M9,N9=new P9;let Qx=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(a_(n))return x9;if(AR(n))return N9;throw function ns(t,e){return new W(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(Ce(Vw,16))};static#t=this.\u0275pipe=Wn({name:"async",type:t,pure:!1,standalone:!0})}return t})(),Y9=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({})}return t})();function k_(t){return"server"===t}let t6=(()=>{class t{static#e=this.\u0275prov=we({token:t,providedIn:"root",factory:()=>new n6(G(Fi),window)})}return t})();class n6{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function r6(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class S6 extends xq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class dT extends S6{static makeCurrent(){!function Mq(t){zw||(zw=t)}(new dT)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function b6(){return Cf=Cf||document.querySelector("base"),Cf?Cf.getAttribute("href"):null}();return null==n?null:function R6(t){L_=L_||document.createElement("a"),L_.setAttribute("href",t);const e=L_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Cf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function w9(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let L_,Cf=null,M6=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();const hT=new te("EventManagerPlugins");let rN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(G(hT),G(It))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();class iN{constructor(e){this._doc=e}}const fT="ng-app-id";let sN=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=k_(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${fT}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(fT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(fT,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(G(Fi),G(jm),G(ub,8),G(Ys))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();const pT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gT=/%COMP%/g,k6=new te("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function aN(t,e){return e.map(n=>n.replace(gT,t))}let uN=(()=>{class t{constructor(n,r,i,s,o,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=k_(a),this.defaultRenderer=new mT(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===qn.ShadowDom&&(r={...r,encapsulation:qn.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof lN?i.applyToHost(n):i instanceof _T&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case qn.Emulated:s=new lN(u,d,r,this.appId,f,o,a,g);break;case qn.ShadowDom:return new U6(u,d,n,r,o,a,this.nonce,g);default:s=new _T(u,d,r,f,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(G(rN),G(sN),G(jm),G(k6),G(Fi),G(Ys),G(It),G(ub))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();class mT{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(pT[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(cN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(cN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=pT[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=pT[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Go.DashCase|Go.Important)?e.style.setProperty(n,r,i&Go.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Go.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Tl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function cN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class U6 extends mT{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=aN(i.id,i.styles);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class _T extends mT{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?aN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class lN extends _T{constructor(e,n,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,n,r,s,o,a,u,d),this.contentAttr=function F6(t){return"_ngcontent-%COMP%".replace(gT,t)}(d),this.hostAttr=function V6(t){return"_nghost-%COMP%".replace(gT,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let j6=(()=>{class t extends iN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(G(Fi))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();const dN=["alt","control","meta","shift"],B6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$6={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let H6=(()=>{class t extends iN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tl().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),dN.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=B6[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),dN.forEach(o=>{o!==i&&(0,$6[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(G(Fi))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();const fN=[{provide:Ys,useValue:"browser"},{provide:ab,useValue:function z6(){dT.makeCurrent()},multi:!0},{provide:Fi,useFactory:function G6(){return function AU(t){rE=t}(document),document},deps:[]}],W6=ux(_q,"browser",fN),Z6=new te(""),pN=[{provide:v_,useClass:class P6{addToWindow(e){ft.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new W(5103,!1);return s},ft.getAllAngularTestabilities=()=>e.getAllTestabilities(),ft.getAllAngularRootElements=()=>e.getAllRootElements(),ft.frameworkStabilizers||(ft.frameworkStabilizers=[]),ft.frameworkStabilizers.push(r=>{const i=ft.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Tl().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:rx,useClass:Pw,deps:[It,Mw,v_]},{provide:Pw,useClass:Pw,deps:[It,Mw,v_]}],gN=[{provide:fE,useValue:"root"},{provide:Ko,useFactory:function q6(){return new Ko},deps:[]},{provide:hT,useClass:j6,multi:!0,deps:[Fi,It,Ys]},{provide:hT,useClass:H6,multi:!0,deps:[Fi]},uN,sN,rN,{provide:gb,useExisting:uN},{provide:class i6{},useClass:M6,deps:[]},[]];let K6=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:jm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(G(Z6,12))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({providers:[...gN,...pN],imports:[Y9,yq]})}return t})(),mN=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(G(Fi))};static#t=this.\u0275prov=we({token:t,factory:function(r){let i=null;return i=r?new r:function Y6(){return new mN(G(Fi))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:rG}=Array,{getPrototypeOf:iG,prototype:sG,keys:oG}=Object;const{isArray:cG}=Array;function vT(...t){const e=Di(t),n=Sa(t),{args:r,keys:i}=function aG(t){if(1===t.length){const e=t[0];if(rG(e))return{args:e,keys:null};if(function uG(t){return t&&"object"==typeof t&&iG(t)===sG}(e)){const n=oG(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return F([],e);const s=new Qe(function fG(t,e,n=rn){return r=>{IN(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)IN(e,()=>{const d=F(t[u],e);let f=!1;d.subscribe(Ee(r,g=>{s[u]=g,f||(f=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function hG(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,o):rn));return n?s.pipe(function dG(t){return ie(e=>function lG(t,e){return cG(e)?t(...e):t(e)}(t,e))}(n)):s}function IN(t,e,n){t?nr(n,t,e):e()}const U_=be(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function IT(...t){return function pG(){return hr(1)}()(F(t,Di(t)))}function EN(t){return new Qe(e=>{sn(t()).subscribe(e)})}function Cl(t,e){const n=I(t)?t:()=>t,r=i=>i.error(n());return new Qe(e?i=>e.schedule(r,0,i):r)}function ET(){return le((t,e)=>{let n=null;t._refCount++;const r=Ee(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class wN extends Qe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct;const n=this.getSubject();e.add(this.source.subscribe(Ee(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.EMPTY)}return e}refCount(){return ET()(this)}}function Au(t){return t<=0?()=>Sn:le((e,n)=>{let r=0;e.subscribe(Ee(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function j_(...t){const e=Di(t);return le((n,r)=>{(e?IT(t,n,e):IT(t,n)).subscribe(r)})}function pi(t,e){return le((n,r)=>{let i=0;n.subscribe(Ee(r,s=>t.call(e,s,i++)&&r.next(s)))})}function B_(t){return le((e,n)=>{let r=!1;e.subscribe(Ee(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function TN(t=gG){return le((e,n)=>{let r=!1;e.subscribe(Ee(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function gG(){return new U_}function Xo(t,e){const n=arguments.length>=2;return r=>r.pipe(t?pi((i,s)=>t(i,s,r)):rn,Au(1),n?B_(e):TN(()=>new U_))}function Af(t,e){return I(e)?xt(t,e,1):xt(t,1)}function Ir(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ee(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):rn}function ea(t){return le((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Ee(n,void 0,void 0,o=>{s=sn(t(o,ea(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Sf(t,e){return le(function mG(t,e,n,r,i){return(s,o)=>{let a=n,u=e,d=0;s.subscribe(Ee(o,f=>{const g=d++;u=a?t(u,f,g):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function wT(t){return t<=0?()=>Sn:le((e,n)=>{let r=[];e.subscribe(Ee(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function TT(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const He="primary",bf=Symbol("RouteTitle");class vG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Al(t){return new vG(t)}function IG(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ss(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!DN(t[i],e[i]))return!1;return!0}function DN(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function CN(t){return t.length>0?t[t.length-1]:null}function ta(t){return function nG(t){return!!t&&(t instanceof Qe||I(t.lift)&&I(t.subscribe))}(t)?t:a_(t)?F(Promise.resolve(t)):z(t)}const wG={exact:function bN(t,e,n){if(!Su(t.segments,e.segments)||!$_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!bN(t.children[r],e.children[r],n))return!1;return!0},subset:RN},AN={exact:function TG(t,e){return Ss(t,e)},subset:function DG(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>DN(t[n],e[n]))},ignored:()=>!0};function SN(t,e,n){return wG[n.paths](t.root,e.root,n.matrixParams)&&AN[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function RN(t,e,n){return PN(t,e,e.segments,n)}function PN(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Su(i,n)||e.hasChildren()||!$_(i,n,r))}if(t.segments.length===n.length){if(!Su(t.segments,n)||!$_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!RN(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(Su(t.segments,i)&&$_(t.segments,i,r)&&t.children[He])&&PN(t.children[He],e,s,r)}}function $_(t,e,n){return e.every((r,i)=>AN[n](t[i].parameters,r.parameters))}class Sl{constructor(e=new Et([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Al(this.queryParams)),this._queryParamMap}toString(){return SG.serialize(this)}}class Et{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return H_(this)}}class Rf{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Al(this.parameters)),this._parameterMap}toString(){return NN(this)}}function Su(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Pf=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:function(){return new DT},providedIn:"root"})}return t})();class DT{parse(e){const n=new LG(e);return new Sl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Mf(e.root,!0)}`,r=function PG(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${z_(n)}=${z_(i)}`).join("&"):`${z_(n)}=${z_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function bG(t){return encodeURI(t)}(e.fragment)}`:""}`}}const SG=new DT;function H_(t){return t.segments.map(e=>NN(e)).join("/")}function Mf(t,e){if(!t.hasChildren())return H_(t);if(e){const n=t.children[He]?Mf(t.children[He],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==He&&r.push(`${i}:${Mf(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function AG(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===He&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==He&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===He?[Mf(t.children[He],!1)]:[`${i}:${Mf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[He]?`${H_(t)}/${n[0]}`:`${H_(t)}/(${n.join("//")})`}}function MN(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function z_(t){return MN(t).replace(/%3B/gi,";")}function CT(t){return MN(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function q_(t){return decodeURIComponent(t)}function xN(t){return q_(t.replace(/\+/g,"%20"))}function NN(t){return`${CT(t.path)}${function RG(t){return Object.keys(t).map(e=>`;${CT(e)}=${CT(t[e])}`).join("")}(t.parameters)}`}const MG=/^[^\/()?;#]+/;function AT(t){const e=t.match(MG);return e?e[0]:""}const xG=/^[^\/()?;=#]+/,OG=/^[^=?&#]+/,FG=/^[^&#]+/;class LG{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[He]=new Et(e,n)),r}parseSegment(){const e=AT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new Rf(q_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function NG(t){const e=t.match(xG);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=AT(this.remaining);i&&(r=i,this.capture(r))}e[q_(n)]=q_(r)}parseQueryParam(e){const n=function kG(t){const e=t.match(OG);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function VG(t){const e=t.match(FG);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=xN(n),s=xN(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=AT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=He);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[He]:new Et([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}}function ON(t){return t.segments.length>0?new Et([],{[He]:t}):t}function kN(t){const e={};for(const r of Object.keys(t.children)){const s=kN(t.children[r]);if(r===He&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function UG(t){if(1===t.numberOfChildren&&t.children[He]){const e=t.children[He];return new Et(t.segments.concat(e.segments),e.children)}return t}(new Et(t.segments,e))}function bu(t){return t instanceof Sl}function FN(t){let e;const i=ON(function n(s){const o={};for(const u of s.children){const d=n(u);o[u.outlet]=d}const a=new Et(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function VN(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return ST(i,i,i,n,r);const s=function BG(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new UN(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new UN(n,e,r)}(e);if(s.toRoot())return ST(i,i,new Et([],{}),n,r);const o=function $G(t,e,n){if(t.isAbsolute)return new W_(e,!0,0);if(!n)return new W_(e,!1,NaN);if(null===n.parent)return new W_(n,!0,0);const r=G_(t.commands[0])?0:1;return function HG(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new W_(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Nf(o.segmentGroup,o.index,s.commands):jN(o.segmentGroup,o.index,s.commands);return ST(i,o.segmentGroup,a,n,r)}function G_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function xf(t){return"object"==typeof t&&null!=t&&t.outlets}function ST(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),o=t===e?n:LN(t,e,n);const a=ON(kN(o));return new Sl(a,s,i)}function LN(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:LN(s,e,n)}),new Et(t.segments,r)}class UN{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&G_(r[0]))throw new W(4003,!1);const i=r.find(xf);if(i&&i!==CN(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class W_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function jN(t,e,n){if(t||(t=new Et([],{})),0===t.segments.length&&t.hasChildren())return Nf(t,e,n);const r=function qG(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(xf(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!$N(u,d,o))return s;r+=2}else{if(!$N(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Et(t.segments.slice(0,r.pathIndex),{});return s.children[He]=new Et(t.segments.slice(r.pathIndex),t.children),Nf(s,0,i)}return r.match&&0===i.length?new Et(t.segments,{}):r.match&&!t.hasChildren()?bT(t,e,n):r.match?Nf(t,0,i):bT(t,e,n)}function Nf(t,e,n){if(0===n.length)return new Et(t.segments,{});{const r=function zG(t){return xf(t[0])?t[0].outlets:{[He]:t}}(n),i={};if(Object.keys(r).some(s=>s!==He)&&t.children[He]&&1===t.numberOfChildren&&0===t.children[He].segments.length){const s=Nf(t.children[He],e,n);return new Et(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=jN(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Et(t.segments,i)}}function bT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(xf(s)){const u=GG(s.outlets);return new Et(r,u)}if(0===i&&G_(n[0])){r.push(new Rf(t.segments[e].path,BN(n[0]))),i++;continue}const o=xf(s)?s.outlets[He]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&G_(a)?(r.push(new Rf(o,BN(a))),i+=2):(r.push(new Rf(o,{})),i++)}return new Et(r,{})}function GG(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=bT(new Et([],{}),0,r))}),e}function BN(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function $N(t,e,n){return t==n.path&&Ss(e,n.parameters)}const Of="imperative";class bs{constructor(e,n){this.id=e,this.url=n}}class RT extends bs{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ru extends bs{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Z_ extends bs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kf extends bs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class PT extends bs{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class WG extends bs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZG extends bs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KG extends bs{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class QG extends bs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YG extends bs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JG{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class XG{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class e3{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t3{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n3{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r3{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HN{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class i3{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ff,this.attachRef=null}}let Ff=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new i3,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class zN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=MT(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=MT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=xT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return xT(e,this._root).map(n=>n.value)}}function MT(t,e){if(t===e.value)return e;for(const n of e.children){const r=MT(t,n);if(r)return r}return null}function xT(t,e){if(t===e.value)return[e];for(const n of e.children){const r=xT(t,n);if(r.length)return r.unshift(e),r}return[]}class so{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function bl(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class qN extends zN{constructor(e,n){super(e),this.snapshot=n,NT(this,e)}toString(){return this.snapshot.toString()}}function GN(t,e){const n=function s3(t,e){const o=new K_([],{},{},"",{},He,e,null,{});return new ZN("",new so(o,[]))}(0,e),r=new $([new Rf("",{})]),i=new $({}),s=new $({}),o=new $({}),a=new $(""),u=new Rl(r,i,o,a,s,He,e,n.root);return u.snapshot=n.root,new qN(new so(u,[]),n)}class Rl{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(d=>d[bf]))??z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ie(e=>Al(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ie(e=>Al(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WN(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function o3(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class K_{get title(){return this.data?.[bf]}constructor(e,n,r,i,s,o,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Al(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Al(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ZN extends zN{constructor(e,n){super(n),this.url=e,NT(this,n)}toString(){return KN(this._root)}}function NT(t,e){e.value._routerState=t,e.children.forEach(n=>NT(t,n))}function KN(t){const e=t.children.length>0?` { ${t.children.map(KN).join(", ")} } `:"";return`${t.value}${e}`}function OT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ss(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ss(e.params,n.params)||t.paramsSubject.next(n.params),function EG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ss(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Ss(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function kT(t,e){const n=Ss(t.params,e.params)&&function CG(t,e){return Su(t,e)&&t.every((n,r)=>Ss(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||kT(t.parent,e.parent))}let FT=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=He,this.activateEvents=new Ur,this.deactivateEvents=new Ur,this.attachEvents=new Ur,this.detachEvents=new Ur,this.parentContexts=oe(Ff),this.location=oe(es),this.changeDetector=oe(Vw),this.environmentInjector=oe(Ni),this.inputBinder=oe(Q_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new a3(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Pn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Qr]})}return t})();class a3{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Rl?this.route:e===Ff?this.childContexts:this.parent.get(e,n)}}const Q_=new te("");let QN=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=vT([r.queryParams,r.params,r.data]).pipe(ht(([s,o,a],u)=>(a={...s,...o,...a},0===u?z(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function Pq(t){const e=Xe(t);if(!e)return null;const n=new rf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();function Vf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function c3(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Vf(t,r,i);return Vf(t,r)})}(t,e,n);return new so(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Vf(t,a)),o}}const r=function l3(t){return new Rl(new $(t.url),new $(t.params),new $(t.queryParams),new $(t.fragment),new $(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Vf(t,s));return new so(r,i)}}const VT="ngNavigationCancelingError";function YN(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=bu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=JN(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function JN(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[VT]=!0,r.cancellationCode=e,n&&(r.url=n),r}function XN(t){return eO(t)&&bu(t.url)}function eO(t){return t&&t[VT]}let tO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Gn({type:t,selectors:[["ng-component"]],standalone:!0,features:[XP],decls:1,vars:0,template:function(r,i){1&r&&qt(0,"router-outlet")},dependencies:[FT],encapsulation:2})}return t})();function LT(t){const e=t.children&&t.children.map(LT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==He&&(n.component=tO),n}function rs(t){return t.outlet||He}function Lf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class _3{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),OT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=bl(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=bl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=bl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=bl(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new r3(s.value.snapshot))}),e.children.length&&this.forwardEvent(new t3(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(OT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),OT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Lf(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class nO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Y_{constructor(e,n){this.component=e,this.route=n}}function y3(t,e,n){const r=t._root;return Uf(r,e?e._root:null,n,[r.value])}function Pl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function qv(t){return null!==Ma(t)}(t)?e.get(t):t:r}function Uf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=bl(e);return t.children.forEach(o=>{(function I3(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function E3(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Su(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Su(t.url,e.url)||!Ss(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kT(t,e)||!Ss(t.queryParams,e.queryParams);default:return!kT(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new nO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Uf(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Y_(a.outlet.component,o))}else o&&jf(e,a,i),i.canActivateChecks.push(new nO(r)),Uf(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>jf(a,n.getContext(o),i)),i}function jf(t,e,n){const r=bl(t),i=t.value;Object.entries(r).forEach(([s,o])=>{jf(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new Y_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Bf(t){return"function"==typeof t}function rO(t){return t instanceof U_||"EmptyError"===t?.name}const J_=Symbol("INITIAL_VALUE");function Ml(){return ht(t=>vT(t.map(e=>e.pipe(Au(1),j_(J_)))).pipe(ie(e=>{for(const n of e)if(!0!==n){if(n===J_)return J_;if(!1===n||n instanceof Sl)return n}return!0}),pi(e=>e!==J_),Au(1)))}function iO(t){return function Ii(...t){return Ei(t)}(Ir(e=>{if(bu(e))throw YN(0,e)}),ie(e=>!0===e))}class X_{constructor(e){this.segmentGroup=e||null}}class sO{constructor(e){this.urlTree=e}}function xl(t){return Cl(new X_(t))}function oO(t){return Cl(new sO(t))}class B3{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new W(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return z(r);if(i.numberOfChildren>1||!i.children[He])return Cl(new W(4e3,!1));i=i.children[He]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Sl(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Et(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const UT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $3(t,e,n,r,i){const s=jT(t,e,n);return s.matched?(r=function d3(t,e){return t.providers&&!t._injector&&(t._injector=cw(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function L3(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?z(i.map(o=>{const a=Pl(o,t);return ta(function S3(t){return t&&Bf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Ml(),iO()):z(!0)}(r,e,n).pipe(ie(o=>!0===o?s:{...UT}))):z(s)}function jT(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...UT}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||IG)(n,t,e);if(!i)return{...UT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function aO(t,e,n,r){return n.length>0&&function q3(t,e,n){return n.some(r=>ey(t,e,r)&&rs(r)!==He)}(t,n,r)?{segmentGroup:new Et(e,z3(r,new Et(n,t.children))),slicedSegments:[]}:0===n.length&&function G3(t,e,n){return n.some(r=>ey(t,e,r))}(t,n,r)?{segmentGroup:new Et(t.segments,H3(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Et(t.segments,t.children),slicedSegments:n}}function H3(t,e,n,r,i){const s={};for(const o of r)if(ey(t,n,o)&&!i[rs(o)]){const a=new Et([],{});s[rs(o)]=a}return{...i,...s}}function z3(t,e){const n={};n[He]=e;for(const r of t)if(""===r.path&&rs(r)!==He){const i=new Et([],{});n[rs(r)]=i}return n}function ey(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Q3{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new B3(this.urlSerializer,this.urlTree)}noMatchError(e){return new W(4002,!1)}recognize(){const e=aO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,He).pipe(ea(n=>{if(n instanceof sO)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof X_?this.noMatchError(n):n}),ie(n=>{const r=new K_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},He,this.rootComponentType,null,{}),i=new so(r,n),s=new ZN("",i),o=function jG(t,e,n=null,r=null){return VN(FN(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,He).pipe(ea(r=>{throw r instanceof X_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=WN(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return F(i).pipe(Af(s=>{const o=r.children[s],a=function g3(t,e){const n=t.filter(r=>rs(r)===e);return n.push(...t.filter(r=>rs(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),Sf((s,o)=>(s.push(...o),s)),B_(null),function _G(t,e){const n=arguments.length>=2;return r=>r.pipe(t?pi((i,s)=>t(i,s,r)):rn,wT(1),n?B_(e):TN(()=>new U_))}(),xt(s=>{if(null===s)return xl(r);const o=uO(s);return function Y3(t){t.sort((e,n)=>e.value.outlet===He?-1:n.value.outlet===He?1:e.value.outlet.localeCompare(n.value.outlet))}(o),z(o)}))}processSegment(e,n,r,i,s,o){return F(n).pipe(Af(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(ea(u=>{if(u instanceof X_)return z(null);throw u}))),Xo(a=>!!a),ea(a=>{if(rO(a))return function Z3(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?z([]):xl(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function W3(t,e,n,r){return!!(rs(t)===r||r!==He&&ey(e,n,t))&&("**"===t.path||jT(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):xl(i):xl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oO(s):this.applyRedirects.lineralizeSegments(r,s).pipe(xt(o=>{const a=new Et(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:f}=jT(n,i,s);if(!a)return xl(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?oO(g):this.applyRedirects.lineralizeSegments(i,g).pipe(xt(_=>this.processSegment(e,r,n,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?CN(i).parameters:{};a=z({snapshot:new K_(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cO(r),rs(r),r.component??r._loadedComponent??null,r,lO(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=$3(n,r,i,e).pipe(ie(({matched:u,consumedSegments:d,remainingSegments:f,parameters:g})=>u?{snapshot:new K_(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cO(r),rs(r),r.component??r._loadedComponent??null,r,lO(r)),consumedSegments:d,remainingSegments:f}:null));return a.pipe(ht(u=>null===u?xl(n):this.getChildConfig(e=r._injector??e,r,i).pipe(ht(({routes:d})=>{const f=r._loadedInjector??e,{snapshot:g,consumedSegments:_,remainingSegments:y}=u,{segmentGroup:E,slicedSegments:D}=aO(n,_,y,d);if(0===D.length&&E.hasChildren())return this.processChildren(f,d,E).pipe(ie(N=>null===N?null:[new so(g,N)]));if(0===d.length&&0===D.length)return z([new so(g,[])]);const S=rs(r)===s;return this.processSegment(f,d,E,D,S?He:s,!0).pipe(ie(N=>[new so(g,N)]))}))))}getChildConfig(e,n,r){return n.children?z({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?z({routes:n._loadedRoutes,injector:n._loadedInjector}):function V3(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?z(!0):z(i.map(o=>{const a=Pl(o,t);return ta(function T3(t){return t&&Bf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Ml(),iO())}(e,n,r).pipe(xt(i=>i?this.configLoader.loadChildren(e,n).pipe(Ir(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function j3(t){return Cl(JN(!1,3))}())):z({routes:[],injector:e})}}function J3(t){const e=t.value.routeConfig;return e&&""===e.path}function uO(t){const e=[],n=new Set;for(const r of t){if(!J3(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=uO(r.children);e.push(new so(r.value,i))}return e.filter(r=>!n.has(r))}function cO(t){return t.data||{}}function lO(t){return t.resolve||{}}function dO(t){return"string"==typeof t.title||null===t.title}function BT(t){return ht(e=>{const n=t(e);return n?F(n).pipe(ie(()=>e)):z(e)})}const Nl=new te("ROUTES");let $T=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=oe(ZM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return z(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ta(n.loadComponent()).pipe(ie(hO),Ir(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),TT(()=>{this.componentLoaders.delete(n)})),i=new wN(r,()=>new B).pipe(ET());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ie(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,d;return Array.isArray(a)?d=a:(u=a.create(n).injector,d=u.get(Nl,[],qe.Self|qe.Optional).flat()),{routes:d.map(LT),injector:u}}),TT(()=>{this.childrenLoaders.delete(r)})),o=new wN(s,()=>new B).pipe(ET());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return ta(n()).pipe(ie(hO),xt(r=>r instanceof YP||Array.isArray(r)?z(r):F(this.compiler.compileModuleAsync(r))))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hO(t){return function s5(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let ty=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new B,this.configLoader=oe($T),this.environmentInjector=oe(Ni),this.urlSerializer=oe(Pf),this.rootContexts=oe(Ff),this.inputBindingEnabled=null!==oe(Q_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new XG(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new JG(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new $({id:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Of,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pi(r=>0!==r.id),ie(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),ht(r=>{let i=!1,s=!1;return z(r).pipe(Ir(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ht(o=>{const a=n.browserUrlTree.toString(),u=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!u&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const f="";return this.events.next(new kf(o.id,n.serializeUrl(r.rawUrl),f,0)),n.rawUrlTree=o.rawUrl,o.resolve(null),Sn}if(n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return fO(o.source)&&(n.browserUrlTree=o.extractedUrl),z(o).pipe(ht(f=>{const g=this.transitions?.getValue();return this.events.next(new RT(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Sn:Promise.resolve(f)}),function X3(t,e,n,r,i,s){return xt(o=>function K3(t,e,n,r,i,s,o="emptyOnly"){return new Q3(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(ie(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Ir(f=>{if(r.targetSnapshot=f.targetSnapshot,r.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},"eager"===n.urlUpdateStrategy){if(!f.extras.skipLocationChange){const _=n.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);n.setBrowserUrl(_,f)}n.browserUrlTree=f.urlAfterRedirects}const g=new WG(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(u&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:f,extractedUrl:g,source:_,restoredState:y,extras:E}=o,D=new RT(f,this.urlSerializer.serialize(g),_,y);this.events.next(D);const S=GN(0,this.rootComponentType).snapshot;return z(r={...o,targetSnapshot:S,urlAfterRedirects:g,extras:{...E,skipLocationChange:!1,replaceUrl:!1}})}{const f="";return this.events.next(new kf(o.id,n.serializeUrl(r.extractedUrl),f,1)),n.rawUrlTree=o.rawUrl,o.resolve(null),Sn}}),Ir(o=>{const a=new ZG(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ie(o=>r={...o,guards:y3(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function R3(t,e){return xt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?z({...n,guardsResult:!0}):function P3(t,e,n,r){return F(t).pipe(xt(i=>function F3(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?z(s.map(a=>{const u=Lf(e)??i,d=Pl(a,u);return ta(function A3(t){return t&&Bf(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):u.runInContext(()=>d(t,e,n,r))).pipe(Xo())})).pipe(Ml()):z(!0)}(i.component,i.route,n,e,r)),Xo(i=>!0!==i,!0))}(o,r,i,t).pipe(xt(a=>a&&function w3(t){return"boolean"==typeof t}(a)?function M3(t,e,n,r){return F(e).pipe(Af(i=>IT(function N3(t,e){return null!==t&&e&&e(new e3(t)),z(!0)}(i.route.parent,r),function x3(t,e){return null!==t&&e&&e(new n3(t)),z(!0)}(i.route,r),function k3(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function v3(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>EN(()=>z(o.guards.map(u=>{const d=Lf(o.node)??n,f=Pl(u,d);return ta(function C3(t){return t&&Bf(t.canActivateChild)}(f)?f.canActivateChild(r,t):d.runInContext(()=>f(r,t))).pipe(Xo())})).pipe(Ml())));return z(s).pipe(Ml())}(t,i.path,n),function O3(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return z(!0);const i=r.map(s=>EN(()=>{const o=Lf(e)??n,a=Pl(s,o);return ta(function D3(t){return t&&Bf(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(Xo())}));return z(i).pipe(Ml())}(t,i.route,n))),Xo(i=>!0!==i,!0))}(r,s,t,e):z(a)),ie(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Ir(o=>{if(r.guardsResult=o.guardsResult,bu(o.guardsResult))throw YN(0,o.guardsResult);const a=new KG(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),pi(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),BT(o=>{if(o.guards.canActivateChecks.length)return z(o).pipe(Ir(a=>{const u=new QG(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),ht(a=>{let u=!1;return z(a).pipe(function e5(t,e){return xt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return z(n);let s=0;return F(i).pipe(Af(o=>function t5(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!dO(i)&&(s[bf]=i.title),function n5(t,e,n,r){const i=function r5(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return z({});const s={};return F(i).pipe(xt(o=>function i5(t,e,n,r){const i=Lf(e)??r,s=Pl(t,i);return ta(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(Xo(),Ir(a=>{s[o]=a}))),wT(1),function yG(t){return ie(()=>t)}(s),ea(o=>rO(o)?Sn:Cl(o)))}(s,t,e,r).pipe(ie(o=>(t._resolvedData=o,t.data=WN(t,n).resolve,i&&dO(i)&&(t.data[bf]=i.title),null)))}(o.route,r,t,e)),Ir(()=>s++),wT(1),xt(o=>s===i.length?z(n):Sn))})}(n.paramsInheritanceStrategy,this.environmentInjector),Ir({next:()=>u=!0,complete:()=>{u||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Ir(a=>{const u=new YG(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),BT(o=>{const a=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ir(f=>{u.component=f}),ie(()=>{})));for(const f of u.children)d.push(...a(f));return d};return vT(a(o.targetSnapshot.root)).pipe(B_(),Au(1))}),BT(()=>this.afterPreactivation()),ie(o=>{const a=function u3(t,e,n){const r=Vf(t,e._root,n?n._root:void 0);return new qN(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),Ir(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((t,e,n,r)=>ie(i=>(new _3(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Au(1),Ir({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new Ru(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),TT(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ea(o=>{if(s=!0,eO(o)){XN(o)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new Z_(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),XN(o)){const u=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||fO(r.source)};n.scheduleNavigation(u,Of,null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new PT(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(o))}catch(u){r.reject(u)}}return Sn}))}))}cancelNavigationTransition(n,r,i){const s=new Z_(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fO(t){return t!==Of}let pO=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===He);return r}getResolvedTitleForRoute(n){return n.data[bf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:function(){return oe(o5)},providedIn:"root"})}return t})(),o5=(()=>{class t extends pO{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(G(mN))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),a5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:function(){return oe(c5)},providedIn:"root"})}return t})();class u5{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let c5=(()=>{class t extends u5{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=uu(t)))(i||t)}}();static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ny=new te("",{providedIn:"root",factory:()=>({})});let l5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:function(){return oe(d5)},providedIn:"root"})}return t})(),d5=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $f=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}($f||{});function gO(t,e){t.events.pipe(pi(n=>n instanceof Ru||n instanceof Z_||n instanceof PT||n instanceof kf),ie(n=>n instanceof Ru||n instanceof kf?$f.COMPLETE:n instanceof Z_&&(0===n.code||1===n.code)?$f.REDIRECTING:$f.FAILED),pi(n=>n!==$f.REDIRECTING),Au(1)).subscribe(()=>{e()})}function h5(t){throw t}function f5(t,e,n){return e.parse("/")}const p5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},g5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gi=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=oe(GM),this.isNgZoneEnabled=!1,this.options=oe(ny,{optional:!0})||{},this.pendingTasks=oe(WM),this.errorHandler=this.options.errorHandler||h5,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||f5,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=oe(l5),this.routeReuseStrategy=oe(a5),this.titleStrategy=oe(pO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=oe(Nl,{optional:!0})?.flat()??[],this.navigationTransitions=oe(ty),this.urlSerializer=oe(Pf),this.location=oe(Ww),this.componentInputBindingEnabled=!!oe(Q_,{optional:!0}),this.isNgZoneEnabled=oe(It)instanceof It&&It.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Sl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=GN(0,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Of,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(LT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let g,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{g=FN(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return VN(g,n,f,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=bu(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Of,null,r)}navigate(n,r={skipLocationChange:!1}){return function m5(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new W(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...p5}:!1===r?{...g5}:r,bu(n))return SN(this.currentUrlTree,n,i);const s=this.parseUrl(n);return SN(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,u=_});const f=this.pendingTasks.add();return gO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class mO{}let v5=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(pi(n=>n instanceof Ru),Af(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=cw(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return F(i).pipe(hr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):z(null);const s=i.pipe(xt(o=>null===o?z(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?F([s,this.loader.loadComponent(r)]).pipe(hr()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(G(gi),G(ZM),G(Ni),G(mO),G($T))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const zT=new te("");let _O=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof RT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ru?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof kf&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof HN&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new HN(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function kb(){throw new Error("invalid")}()};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();function oo(t,e){return{\u0275kind:t,\u0275providers:e}}function vO(){const t=oe(Oi);return e=>{const n=t.get(wl);if(e!==n.components[0])return;const r=t.get(gi),i=t.get(IO);1===t.get(qT)&&r.initialNavigation(),t.get(EO,null,qe.Optional)?.setUpPreloading(),t.get(zT,null,qe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const IO=new te("",{factory:()=>new B}),qT=new te("",{providedIn:"root",factory:()=>1}),EO=new te("");function T5(t){return oo(0,[{provide:EO,useExisting:v5},{provide:mO,useExisting:t}])}const wO=new te("ROUTER_FORROOT_GUARD"),C5=[Ww,{provide:Pf,useClass:DT},gi,Ff,{provide:Rl,useFactory:function yO(t){return t.routerState.root},deps:[gi]},$T,[]];function A5(){return new ox("Router",gi)}let TO=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[C5,[],{provide:Nl,multi:!0,useValue:n},{provide:wO,useFactory:P5,deps:[[gi,new Yr,new zc]]},{provide:ny,useValue:r||{}},r?.useHash?{provide:Cu,useClass:kq}:{provide:Cu,useClass:kx},{provide:zT,useFactory:()=>{const t=oe(t6),e=oe(It),n=oe(ny),r=oe(ty),i=oe(Pf);return n.scrollOffset&&t.setOffset(n.scrollOffset),new _O(i,r,t,e,n)}},r?.preloadingStrategy?T5(r.preloadingStrategy).\u0275providers:[],{provide:ox,multi:!0,useFactory:A5},r?.initialNavigation?M5(r):[],r?.bindToComponentInputs?oo(8,[QN,{provide:Q_,useExisting:QN}]).\u0275providers:[],[{provide:DO,useFactory:vO},{provide:Ow,multi:!0,useExisting:DO}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Nl,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(G(wO,8))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({})}return t})();function P5(t){return"guarded"}function M5(t){return["disabled"===t.initialNavigation?oo(3,[{provide:Dw,multi:!0,useFactory:()=>{const e=oe(gi);return()=>{e.setUpLocationChangeListener()}}},{provide:qT,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?oo(2,[{provide:qT,useValue:0},{provide:Dw,multi:!0,deps:[Oi],useFactory:e=>{const n=e.get(Nq,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(gi),s=e.get(IO);gO(i,()=>{r(!0)}),e.get(ty).afterPreactivation=()=>(r(!0),s.closed?z(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const DO=new te("");let N5=(()=>{class t{constructor(n){this.customClass=n}static#e=this.\u0275fac=function(r){return new(r||t)(function cu(t){return function CI(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(jd(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(Nn(),t)}("custom-style"))};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-custom-button"]],decls:2,vars:2,consts:[["href",""]],template:function(r,i){1&r&&(pt(0,"a",0),rt(1," \u6309\u9215\u6e2c\u8a66\n"),nt()),2&r&&QR(i.customClass)},styles:[".black[_ngcontent-%COMP%]{color:#000}.red[_ngcontent-%COMP%]{color:red}.blue[_ngcontent-%COMP%]{color:#00f}"]})}return t})(),O5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-demo-buttons"]],decls:7,vars:0,consts:[["custom-style","black"],["custom-style","red"],["custom-style","blue"]],template:function(r,i){1&r&&(pt(0,"h2"),rt(1,"Attribute Demo"),nt(),qt(2,"app-custom-button",0)(3,"br")(4,"app-custom-button",1)(5,"br")(6,"app-custom-button",2))},dependencies:[N5]})}return t})();function k5(t,e){if(1&t&&(vu(0),pt(1,"a",1),rt(2),nt(),qt(3,"br"),Iu()),2&t){const n=e.$implicit;ws(1),lf("href",null==n?null:n.path,cE),ws(1),_l(" ",null==n?null:n.path," ")}}let F5=(()=>{class t{constructor(n){this.router=n,console.log(this.router?.config)}static#e=this.\u0275fac=function(r){return new(r||t)(Ce(gi))};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-default-template"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["target","_blank",3,"href"]],template:function(r,i){1&r&&WE(0,k5,4,2,"ng-container",0),2&r&&lf("ngForOf",null==i.router?null:i.router.config)},dependencies:[iT]})}return t})(),Pu=(()=>{class t{constructor(){this.size=0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ry=(()=>{class t{constructor(n){this.fontSizeService=n}static#e=this.\u0275fac=function(r){return new(r||t)(Ce(Pu))};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-child-element"]],decls:5,vars:1,template:function(r,i){1&r&&(pt(0,"p"),rt(1,"child-element works!"),nt(),rt(2),pt(3,"p"),rt(4,"child-element works! end"),nt()),2&r&&(ws(2),_l("\n",i.fontSizeService.size,"\n"))}})}return t})(),V5=(()=>{class t{constructor(n){this.fontSizeService=n}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(r){return new(r||t)(Ce(Pu))};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-aaa-element"]],features:[ow([Pu])],decls:10,vars:1,consts:[[3,"click"]],template:function(r,i){1&r&&(pt(0,"p"),rt(1),nt(),pt(2,"div",0),Yi("click",function(){return i.add()}),rt(3,"\u52a0\u52a0\u52a0\u52a0"),nt(),qt(4,"br"),pt(5,"div",0),Yi("click",function(){return i.minus()}),rt(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),nt(),qt(7,"hr"),rt(8,"\nchild\n------------\n"),qt(9,"app-child-element")),2&r&&(ws(1),ml(i.fontSizeService.size))},dependencies:[ry]})}return t})(),L5=(()=>{class t{constructor(n){this.fontSizeService=n}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(r){return new(r||t)(Ce(Pu))};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-bbb-element"]],features:[ow([Pu])],decls:9,vars:1,consts:[[3,"click"]],template:function(r,i){1&r&&(pt(0,"p"),rt(1),nt(),pt(2,"div",0),Yi("click",function(){return i.add()}),rt(3,"\u52a0\u52a0\u52a0\u52a0"),nt(),qt(4,"br"),pt(5,"div",0),Yi("click",function(){return i.minus()}),rt(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),nt(),rt(7,"\nchild\n------------\n"),qt(8,"app-child-element")),2&r&&(ws(1),ml(i.fontSizeService.size))},dependencies:[ry]})}return t})();const CO=new te("FONT_SIZE_SERVICE");let U5=(()=>{class t{constructor(n){this.fontSizeService=n}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(r){return new(r||t)(Ce(CO))};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-ccc-element"]],decls:10,vars:1,consts:[[3,"click"]],template:function(r,i){1&r&&(pt(0,"p"),rt(1),nt(),pt(2,"div",0),Yi("click",function(){return i.add()}),rt(3,"\u52a0\u52a0\u52a0\u52a0"),nt(),qt(4,"br"),pt(5,"div",0),Yi("click",function(){return i.minus()}),rt(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),nt(),qt(7,"hr"),rt(8,"\nchild\n------------\n"),qt(9,"app-child-element")),2&r&&(ws(1),ml(i.fontSizeService.size))},dependencies:[ry]})}return t})(),j5=(()=>{class t{constructor(n){this.fontSizeService=n}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(r){return new(r||t)(Ce(Pu))};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-ddd-element"]],decls:10,vars:1,consts:[[3,"click"]],template:function(r,i){1&r&&(pt(0,"p"),rt(1),nt(),pt(2,"div",0),Yi("click",function(){return i.add()}),rt(3,"\u52a0\u52a0\u52a0\u52a0"),nt(),qt(4,"br"),pt(5,"div",0),Yi("click",function(){return i.minus()}),rt(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),nt(),qt(7,"hr"),rt(8,"\nchild\n------------\n"),qt(9,"app-child-element")),2&r&&(ws(1),ml(i.fontSizeService.size))},dependencies:[ry]})}return t})();const B5=[{path:"element-injector-demo",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-demo-element-injector"]],decls:20,vars:0,consts:[[1,"demo-block"],[1,"demo-block__title"]],template:function(r,i){1&r&&(pt(0,"div",0)(1,"div",1),rt(2," \u5143\u7d20\u6ce8\u5165\u5668 (Element Injector) DEMO "),nt(),rt(3," app-aaa-element: "),qt(4,"app-aaa-element"),nt(),pt(5,"div",0)(6,"div",1),rt(7," \u5143\u7d20\u6ce8\u5165\u5668 (Element Injector) DEMO "),nt(),rt(8," app-bbb-element: "),qt(9,"app-bbb-element"),nt(),pt(10,"div",0)(11,"div",1),rt(12," Injection Token Injector "),nt(),rt(13," app-ccc-element: "),qt(14,"app-ccc-element"),nt(),pt(15,"div",0)(16,"div",1),rt(17," \u6a21\u7d44\u6ce8\u5165\u5668 (Module Injector) DEMO "),nt(),rt(18," app-ddd-element: "),qt(19,"app-ddd-element"),nt())},dependencies:[V5,L5,U5,j5]})}return t})()},{path:"demo-attribute",component:O5},{path:"**",component:F5}];let $5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({imports:[TO.forRoot(B5),TO]})}return t})();var Ol=Ve(534);(0,Ol.registerVersion)("firebase","10.7.2","app");class q5 extends ct{constructor(e,n){super()}schedule(e,n=0){return this}}const iy={setInterval(t,e,...n){const{delegate:r}=iy;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=iy;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class AO extends q5{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return iy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&iy.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Re(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const GT={now:()=>(GT.delegate||Date).now(),delegate:void 0};class Hf{constructor(e,n=Hf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Hf.now=GT.now;class SO extends Hf{constructor(e,n=Hf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const bO=new class W5 extends SO{}(class G5 extends AO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),RO=new SO(AO),PO=new Jh("ANGULARFIRE2_VERSION");class MO{constructor(){return((t,e)=>{const n=(0,Ol.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(K5)}}const K5="app-check";function kl(){}class xO{zone;delegate;constructor(e,n=bO){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class Q5{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",kl,{},kl,kl)),n.pipe(Ir({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let NO=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new xO(Zone.current)),this.insideAngular=n.run(()=>new xO(Zone.current,RO)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(G(It))};static \u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mi(t){return function J5(t){return function(n){return(n=n.lift(new Q5(t.ngZone))).pipe(Rr(t.outsideAngular),$n(t.insideAngular))}}(function Fl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var xu=Ve(106);xu.Z.registerVersion("firebase","10.7.2","app-compat");const n8=["ngOnDestroy"];class OO{constructor(e){return e}}const sy=new te("angularfire2.app.options"),oy=new te("angularfire2.app.name");function WT(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=xu.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>xu.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;s8("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new OO(o)}const s8=(t,...e)=>{},o8={provide:OO,useFactory:WT,deps:[sy,It,[new Yr,oy]]};let a8=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:sy,useValue:n},{provide:oy,useValue:r}]}}constructor(n){xu.Z.registerVersion("angularfire",PO.full,"core"),xu.Z.registerVersion("angularfire",PO.full,"app-compat"),xu.Z.registerVersion("angular",mb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(G(Ys))};static \u0275mod=gr({type:t});static \u0275inj=Hn({providers:[o8]})}return t})();function kO(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function u8(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(FO("error",`${e} was already initialized on the ${n} Firebase App with different settings.${c8?" You may need to reload as Firebase is not HMR aware.":""}`),FO("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const c8=typeof module<"u"&&!!module.hot,FO=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ve(230);class l8 extends B{constructor(e=1/0,n=1/0,r=GT){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function VO(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,Pe({connector:()=>new l8(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function LO(t,e){return I(e)?ht(()=>t,e):ht(()=>t)}const UO=new te("angularfire2.auth.use-emulator"),jO=new te("angularfire2.auth.settings"),BO=new te("angularfire2.auth.tenant-id"),$O=new te("angularfire2.auth.langugage-code"),HO=new te("angularfire2.auth.use-device-language"),zO=new te("angularfire.auth.persistence"),qO=(t,e,n,r,i,s,o,a)=>kO(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,f]of Object.entries(o))u.settings[d]=f;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let GO=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,d,f,g,_,y){const E=new B,D=z(void 0).pipe($n(o.outsideAngular),ht(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ve.bind(Ve,230)))),ie(()=>WT(n,s,r)),ie(S=>qO(S,s,a,d,f,g,u,_)),VO({bufferSize:1,refCount:!1}));if(k_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=z(null);else{D.pipe(Xo()).subscribe();const S=D.pipe(ht(U=>U.getRedirectResult().then(re=>re,()=>null)),mi,VO({bufferSize:1,refCount:!1})),N=D.pipe(ht(U=>new Qe(re=>({unsubscribe:s.runOutsideAngular(()=>U.onAuthStateChanged(de=>re.next(de),de=>re.error(de),()=>re.complete()))})))),R=D.pipe(ht(U=>new Qe(re=>({unsubscribe:s.runOutsideAngular(()=>U.onIdTokenChanged(de=>re.next(de),de=>re.error(de),()=>re.complete()))}))));this.authState=S.pipe(LO(N),Rr(o.outsideAngular),$n(o.insideAngular)),this.user=S.pipe(LO(R),Rr(o.outsideAngular),$n(o.insideAngular)),this.idToken=this.user.pipe(ht(U=>U?F(U.getIdToken()):z(null))),this.idTokenResult=this.user.pipe(ht(U=>U?F(U.getIdTokenResult()):z(null))),this.credential=x(S,E,this.authState.pipe(pi(U=>!U))).pipe(ie(U=>U?.user?U:null),Rr(o.outsideAngular),$n(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(n8.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(f=>{const g=f?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,D,s,{spy:{apply:(S,N,R)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&R.then(U=>E.next(U))}}})}static \u0275fac=function(r){return new(r||t)(G(sy),G(oy,8),G(Ys),G(It),G(NO),G(UO,8),G(jO,8),G(BO,8),G($O,8),G(HO,8),G(zO,8),G(MO,8))};static \u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function ZT(){return le((t,e)=>{let n,r=!1;t.subscribe(Ee(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var fe,Z=Ve(861),WO=Ve(537),Rs=Ve(879),_t=Ve(58),h8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},is={},KT=KT||{},Le=h8||self;function ay(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function zf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var QT="closure_uid_"+(1e9*Math.random()>>>0),p8=0;function g8(t,e,n){return t.call.apply(t.bind,arguments)}function m8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Er(t,e,n){return(Er=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g8:m8).apply(null,arguments)}function uy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Yn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function na(){this.s=this.s,this.o=this.o}na.prototype.s=!1,na.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function f8(t){Object.prototype.hasOwnProperty.call(t,QT)&&t[QT]||(t[QT]=++p8)}(this)},na.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZO=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function YT(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function KO(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ay(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function wr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}wr.prototype.h=function(){this.defaultPrevented=!0};var y8=function(){if(!Le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Le.addEventListener("test",n,e),Le.removeEventListener("test",n,e)}catch{}return t}();function qf(t){return/^[\s\xa0]*$/.test(t)}function cy(){var t=Le.navigator;return t&&(t=t.userAgent)?t:""}function Ps(t){return-1!=cy().indexOf(t)}function JT(t){return JT[" "](t),t}JT[" "]=function(){};var eD,t,I8=Ps("Opera"),Vl=Ps("Trident")||Ps("MSIE"),QO=Ps("Edge"),XT=QO||Vl,YO=Ps("Gecko")&&!(-1!=cy().toLowerCase().indexOf("webkit")&&!Ps("Edge"))&&!(Ps("Trident")||Ps("MSIE"))&&!Ps("Edge"),E8=-1!=cy().toLowerCase().indexOf("webkit")&&!Ps("Edge");function JO(){var t=Le.document;return t?t.documentMode:void 0}e:{var tD="",nD=(t=cy(),YO?/rv:([^\);]+)(\)|;)/.exec(t):QO?/Edge\/([\d\.]+)/.exec(t):Vl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):E8?/WebKit\/(\S+)/.exec(t):I8?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(nD&&(tD=nD?nD[1]:""),Vl){var rD=JO();if(null!=rD&&rD>parseFloat(tD)){eD=String(rD);break e}}eD=tD}var w8=Le.document&&Vl&&(JO()||parseInt(eD,10))||void 0;function Gf(t,e){if(wr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(YO){e:{try{JT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:T8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Gf.$.h.call(this)}}Yn(Gf,wr);var T8={2:"touch",3:"pen",4:"mouse"};Gf.prototype.h=function(){Gf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Wf="closure_listenable_"+(1e6*Math.random()|0),D8=0;function C8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++D8,this.fa=this.ia=!1}function ly(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function sD(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function ek(t){const e={};for(const n in t)e[n]=t[n];return e}const tk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nk(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<tk.length;s++)n=tk[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function dy(t){this.src=t,this.g={},this.h=0}function oD(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=ZO(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ly(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function aD(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}dy.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=aD(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new C8(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var uD="closure_lm_"+(1e6*Math.random()|0),cD={};function rk(t,e,n,r,i){if(r&&r.once)return sk(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)rk(t,e[s],n,r,i);return null}return n=fD(n),t&&t[Wf]?t.O(e,n,zf(r)?!!r.capture:!!r,i):ik(t,e,n,!1,r,i)}function ik(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=zf(i)?!!i.capture:!!i,a=dD(t);if(a||(t[uD]=a=new dy(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function S8(){const e=b8;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)y8||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ak(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function sk(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)sk(t,e[s],n,r,i);return null}return n=fD(n),t&&t[Wf]?t.P(e,n,zf(r)?!!r.capture:!!r,i):ik(t,e,n,!0,r,i)}function ok(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ok(t,e[s],n,r,i);else r=zf(r)?!!r.capture:!!r,n=fD(n),t&&t[Wf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=aD(s=t.g[e],n,r,i))&&(ly(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=dD(t))&&(e=t.g[e.toString()],t=-1,e&&(t=aD(e,n,r,i)),(n=-1<t?e[t]:null)&&lD(n))}function lD(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Wf])oD(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ak(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=dD(e))?(oD(n,t),0==n.h&&(n.src=null,e[uD]=null)):ly(t)}}}function ak(t){return t in cD?cD[t]:cD[t]="on"+t}function b8(t,e){if(t.fa)t=!0;else{e=new Gf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&lD(t),t=n.call(r,e)}return t}function dD(t){return(t=t[uD])instanceof dy?t:null}var hD="__closure_events_fn_"+(1e9*Math.random()>>>0);function fD(t){return"function"==typeof t?t:(t[hD]||(t[hD]=function(e){return t.handleEvent(e)}),t[hD])}function Jn(){na.call(this),this.i=new dy(this),this.S=this,this.J=null}function or(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new wr(e,t);else if(e instanceof wr)e.target=e.target||t;else{var i=e;nk(e=new wr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=hy(o,r,!0,e)&&i}if(i=hy(o=e.g=t,r,!0,e)&&i,i=hy(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=hy(o=e.g=n[s],r,!1,e)&&i}function hy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&oD(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Yn(Jn,na),Jn.prototype[Wf]=!0,Jn.prototype.removeEventListener=function(t,e,n,r){ok(this,t,e,n,r)},Jn.prototype.N=function(){if(Jn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ly(n[r]);delete t.g[e],t.h--}}this.J=null},Jn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Jn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var pD=Le.JSON.stringify;function P8(){var t=gD;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var uk=new class R8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new x8,t=>t.reset());class x8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function N8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function O8(t){Le.setTimeout(()=>{throw t},0)}let Zf,Kf=!1,gD=new class M8{constructor(){this.h=this.g=null}add(e,n){const r=uk.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},ck=()=>{const t=Le.Promise.resolve(void 0);Zf=()=>{t.then(k8)}};var k8=()=>{for(var t;t=P8();){try{t.h.call(t.g)}catch(n){O8(n)}var e=uk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Kf=!1};function fy(t,e){Jn.call(this),this.h=t||1,this.g=e||Le,this.j=Er(this.qb,this),this.l=Date.now()}function mD(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function _D(t,e,n){if("function"==typeof t)n&&(t=Er(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Er(t.handleEvent,t)}return 2147483647<Number(e)?-1:Le.setTimeout(t,e||0)}function lk(t){t.g=_D(()=>{t.g=null,t.i&&(t.i=!1,lk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Yn(fy,Jn),(fe=fy.prototype).ga=!1,fe.T=null,fe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),or(this,"tick"),this.ga&&(mD(this),this.start()))}},fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.N=function(){fy.$.N.call(this),mD(this),delete this.g};class F8 extends na{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lk(this)}N(){super.N(),this.g&&(Le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qf(t){na.call(this),this.h=t,this.g={}}Yn(Qf,na);var dk=[];function hk(t,e,n,r){Array.isArray(n)||(n&&(dk[0]=n.toString()),n=dk);for(var i=0;i<n.length;i++){var s=rk(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function fk(t){sD(t.g,function(e,n){this.g.hasOwnProperty(n)&&lD(e)},t),t.g={}}function py(){this.g=!0}function Ll(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function j8(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return pD(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Qf.prototype.N=function(){Qf.$.N.call(this),fk(this)},Qf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},py.prototype.Ea=function(){this.g=!1},py.prototype.info=function(){};var Nu={},pk=null;function gy(){return pk=pk||new Jn}function gk(t){wr.call(this,Nu.Ta,t)}function Yf(t){const e=gy();or(e,new gk(e))}function mk(t,e){wr.call(this,Nu.STAT_EVENT,t),this.stat=e}function $r(t){const e=gy();or(e,new mk(e,t))}function _k(t,e){wr.call(this,Nu.Ua,t),this.size=e}function Jf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Le.setTimeout(function(){t()},e)}Nu.Ta="serverreachability",Yn(gk,wr),Nu.STAT_EVENT="statevent",Yn(mk,wr),Nu.Ua="timingevent",Yn(_k,wr);var my={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function yD(){}function Ik(){}yD.prototype.h=null;var ED,Xf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vD(){wr.call(this,"d")}function ID(){wr.call(this,"c")}function _y(){}function ep(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Qf(this),this.P=B8,this.V=new fy(t=XT?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ek}function Ek(){this.i=null,this.g="",this.h=!1}Yn(vD,wr),Yn(ID,wr),Yn(_y,yD),_y.prototype.g=function(){return new XMLHttpRequest},_y.prototype.i=function(){return{}},ED=new _y;var B8=45e3,wk={},wD={};function TD(t,e,n){t.L=1,t.A=Ey(ao(e)),t.u=n,t.S=!0,Tk(t,null)}function Tk(t,e){t.G=Date.now(),tp(t),t.B=ao(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Nk(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Ek,t.g=r1(t.l,n?e:null,!t.u),0<t.O&&(t.M=new F8(Er(t.Pa,t,t.g),t.O)),hk(t.U,t.g,"readystatechange",t.nb),e=t.I?ek(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Yf(),function V8(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var f=d[0];d=d[1];var g=f.split("_");o=2<=g.length&&"type"==g[1]?o+(f+"=")+d+"&":o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function Dk(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function Ck(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=$8(t,n),i==wD){4==e&&(t.s=4,$r(14),r=!1),Ll(t.j,t.m,null,"[Incomplete Response]");break}if(i==wk){t.s=4,$r(15),Ll(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Ll(t.j,t.m,i,null),DD(t,i)}Dk(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,$r(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),MD(e),e.M=!0,$r(11))):(Ll(t.j,t.m,n,"[Invalid Chunked Response]"),Ou(t),np(t))}function $8(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?wD:(n=Number(e.substring(n,r)),isNaN(n)?wk:(r+=1)+n>e.length?wD:(e=e.slice(r,r+n),t.o=r+n,e))}function tp(t){t.Y=Date.now()+t.P,Ak(t,t.P)}function Ak(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Jf(Er(t.lb,t),e)}function yy(t){t.C&&(Le.clearTimeout(t.C),t.C=null)}function np(t){0==t.l.H||t.J||Xk(t.l,t)}function Ou(t){yy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,mD(t.V),fk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function DD(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||CD(n.i,t)))if(!t.K&&CD(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Sy(n),Cy(n)}PD(n),$r(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Jf(Er(n.ib,n),6e3));if(1>=Fk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Fu(n,11)}else if((t.K||n.g==t)&&Sy(n),!qf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const f=d[3];null!=f&&(n.ra=f,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(AD(s,s.h),s.h=null))}if(r.F){const D=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;D&&(r.Da=D,Gt(r.I,r.F,D))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=n1(r,r.J?r.pa:null,r.Y),o.K){Vk(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(yy(a),tp(a)),r.g=o}else Yk(r);0<n.j.length&&Ay(n)}else"stop"!=d[0]&&"close"!=d[0]||Fu(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?Fu(n,7):RD(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}Yf()}catch{}}function Sk(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ay(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function z8(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ay(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function H8(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(ay(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(fe=ep.prototype).setTimeout=function(t){this.P=t},fe.nb=function(t){t=t.target;const e=this.M;e&&3==Ms(t)?e.l():this.Pa(t)},fe.Pa=function(t){try{if(t==this.g)e:{const f=Ms(this.g);var e=this.g.Ia();if(this.g.da(),!(3>f)&&(3!=f||XT||this.g&&(this.h.h||this.g.ja()||qk(this.g)))){this.J||4!=f||7==e||Yf(),yy(this);var n=this.g.da();this.ca=n;t:if(Dk(this)){var r=qk(this.g);t="";var i=r.length,s=4==Ms(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ou(this),np(this);var o="";break t}this.h.i=new Le.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function L8(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,f,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qf(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.s=3,$r(12),Ou(this),np(this);break e}Ll(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,DD(this,n)}this.S?(Ck(this,f,o),XT&&this.i&&3==f&&(hk(this.U,this.V,"tick",this.mb),this.V.start())):(Ll(this.j,this.m,o,null),DD(this,o)),4==f&&Ou(this),this.i&&!this.J&&(4==f?Xk(this.l,this):(this.i=!1,tp(this)))}else(function uW(t){const e={};t=(t.g&&2<=Ms(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(qf(t[r]))continue;var n=N8(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function A8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,$r(12)):(this.s=0,$r(13)),Ou(this),np(this)}}}catch{}},fe.mb=function(){if(this.g){var t=Ms(this.g),e=this.g.ja();this.o<e.length&&(yy(this),Ck(this,t,e),this.i&&4!=t&&tp(this))}},fe.cancel=function(){this.J=!0,Ou(this)},fe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function U8(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Yf(),$r(17)),Ou(this),this.s=2,np(this)):Ak(this,this.Y-t)};var bk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ku(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ku){this.h=t.h,vy(this,t.j),this.s=t.s,this.g=t.g,Iy(this,t.m),this.l=t.l;var e=t.i,n=new sp;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Rk(this,n),this.o=t.o}else t&&(e=String(t).match(bk))?(this.h=!1,vy(this,e[1]||"",!0),this.s=rp(e[2]||""),this.g=rp(e[3]||"",!0),Iy(this,e[4]),this.l=rp(e[5]||"",!0),Rk(this,e[6]||"",!0),this.o=rp(e[7]||"")):(this.h=!1,this.i=new sp(null,this.h))}function ao(t){return new ku(t)}function vy(t,e,n){t.j=n?rp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Iy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Rk(t,e,n){e instanceof sp?(t.i=e,function Y8(t,e){e&&!t.j&&(ra(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Mk(this,r),Nk(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=ip(e,K8)),t.i=new sp(e,t.h))}function Gt(t,e,n){t.i.set(e,n)}function Ey(t){return Gt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function rp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ip(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,G8),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function G8(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ku.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ip(e,Pk,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ip(e,Pk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(ip(n,"/"==n.charAt(0)?Z8:W8,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ip(n,Q8)),t.join("")};var Pk=/[#\/\?@]/g,W8=/[#\?:]/g,Z8=/[#\?]/g,K8=/[#\?@]/g,Q8=/#/g;function sp(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ra(t){t.g||(t.g=new Map,t.h=0,t.i&&function q8(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Mk(t,e){ra(t),e=Ul(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function xk(t,e){return ra(t),e=Ul(t,e),t.g.has(e)}function Nk(t,e,n){Mk(t,e),0<n.length&&(t.i=null,t.g.set(Ul(t,e),YT(n)),t.h+=n.length)}function Ul(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ok(t){this.l=t||X8,t=Le.PerformanceNavigationTiming?0<(t=Le.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Le.g&&Le.g.Ka&&Le.g.Ka()&&Le.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=sp.prototype).add=function(t,e){ra(this),this.i=null,t=Ul(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(t,e){ra(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},fe.ta=function(){ra(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},fe.Z=function(t){ra(this);let e=[];if("string"==typeof t)xk(this,t)&&(e=e.concat(this.g.get(Ul(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},fe.set=function(t,e){return ra(this),this.i=null,xk(this,t=Ul(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},fe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var X8=10;function kk(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Fk(t){return t.h?1:t.g?t.g.size:0}function CD(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function AD(t,e){t.g?t.g.add(e):t.h=e}function Vk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Lk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return YT(t.i)}Ok.prototype.cancel=function(){if(this.i=Lk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var eW=class{stringify(t){return Le.JSON.stringify(t,void 0)}parse(t){return Le.JSON.parse(t,void 0)}};function tW(){this.g=new eW}function nW(t,e,n){const r=n||"";try{Sk(t,function(i,s){let o=i;zf(i)&&(o=pD(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function op(t){this.l=t.ec||null,this.j=t.ob||!1}function Ty(t,e){Jn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=SD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yn(op,yD),op.prototype.g=function(){return new Ty(this.l,this.j)},op.prototype.i=function(t){return function(){return t}}({}),Yn(Ty,Jn);var SD=0;function Uk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function ap(t){t.readyState=4,t.l=null,t.j=null,t.A=null,up(t)}function up(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(fe=Ty.prototype).open=function(t,e){if(this.readyState!=SD)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,up(this)},fe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ap(this)),this.readyState=SD},fe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,up(this)),this.g&&(this.readyState=3,up(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Uk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},fe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ap(this):up(this),3==this.readyState&&Uk(this)}},fe.Za=function(t){this.g&&(this.response=this.responseText=t,ap(this))},fe.Ya=function(t){this.g&&(this.response=t,ap(this))},fe.ka=function(){this.g&&ap(this)},fe.setRequestHeader=function(t,e){this.v.append(t,e)},fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ty.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var iW=Le.JSON.parse;function un(t){Jn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jk,this.L=this.M=!1}Yn(un,Jn);var jk="",sW=/^https?$/i,oW=["POST","PUT"];function Bk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,$k(t),Dy(t)}function $k(t){t.F||(t.F=!0,or(t,"complete"),or(t,"error"))}function Hk(t){if(t.h&&typeof KT<"u"&&(!t.C[1]||4!=Ms(t)||2!=t.da()))if(t.v&&4==Ms(t))_D(t.La,0,t);else if(or(t,"readystatechange"),4==Ms(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(bk)[1]||null;!i&&Le.self&&Le.self.location&&(i=Le.self.location.protocol.slice(0,-1)),r=!sW.test(i?i.toLowerCase():"")}n=r}if(n)or(t,"complete"),or(t,"success");else{t.m=6;try{var s=2<Ms(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",$k(t)}}finally{Dy(t)}}}function Dy(t,e){if(t.g){zk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||or(t,"ready");try{n.onreadystatechange=r}catch{}}}function zk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Le.clearTimeout(t.A),t.A=null)}function Ms(t){return t.g?t.g.readyState:0}function qk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case jk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Gk(t){let e="";return sD(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function bD(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Gt(t,e,n))}function cp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wk(t){this.Ga=0,this.j=[],this.l=new py,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cp("baseRetryDelayMs",5e3,t),this.hb=cp("retryDelaySeedMs",1e4,t),this.eb=cp("forwardChannelMaxRetries",2,t),this.xa=cp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Ok(t&&t.concurrentRequestLimit),this.Ja=new tW,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function RD(t){if(Zk(t),3==t.H){var e=t.W++,n=ao(t.I);if(Gt(n,"SID",t.K),Gt(n,"RID",e),Gt(n,"TYPE","terminate"),lp(t,n),(e=new ep(t,t.l,e)).L=2,e.A=Ey(ao(n)),n=!1,Le.navigator&&Le.navigator.sendBeacon)try{n=Le.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Le.Image&&((new Image).src=e.A,n=!0),n||(e.g=r1(e.l,null),e.g.ha(e.A)),e.G=Date.now(),tp(e)}t1(t)}function Cy(t){t.g&&(MD(t),t.g.cancel(),t.g=null)}function Zk(t){Cy(t),t.u&&(Le.clearTimeout(t.u),t.u=null),Sy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Le.clearTimeout(t.m),t.m=null)}function Ay(t){if(!kk(t.i)&&!t.m){t.m=!0;var e=t.Na;Zf||ck(),Kf||(Zf(),Kf=!0),gD.add(e,t),t.C=0}}function Kk(t,e){var n;n=e?e.m:t.W++;const r=ao(t.I);Gt(r,"SID",t.K),Gt(r,"RID",n),Gt(r,"AID",t.V),lp(t,r),t.o&&t.s&&bD(r,t.o,t.s),n=new ep(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Qk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),AD(t.i,n),TD(n,r,e)}function lp(t,e){t.na&&sD(t.na,function(n,r){Gt(e,r,n)}),t.h&&Sk({},function(n,r){Gt(e,r,n)})}function Qk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Er(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const f=i[u].map;if(d-=s,0>d)s=Math.max(0,i[u].g-100),a=!1;else try{nW(f,o,"req"+d+"_")}catch{r&&r(f)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Yk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Zf||ck(),Kf||(Zf(),Kf=!0),gD.add(e,t),t.A=0}}function PD(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Jf(Er(t.Ma,t),e1(t,t.A)),t.A++,0))}function MD(t){null!=t.B&&(Le.clearTimeout(t.B),t.B=null)}function Jk(t){t.g=new ep(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=ao(t.wa);Gt(e,"RID","rpc"),Gt(e,"SID",t.K),Gt(e,"AID",t.V),Gt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Gt(e,"TO",t.qa),Gt(e,"TYPE","xmlhttp"),lp(t,e),t.o&&t.s&&bD(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Ey(ao(e)),n.u=null,n.S=!0,Tk(n,t)}function Sy(t){null!=t.v&&(Le.clearTimeout(t.v),t.v=null)}function Xk(t,e){var n=null;if(t.g==e){Sy(t),MD(t),t.g=null;var r=2}else{if(!CD(t.i,e))return;n=e.F,Vk(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;or(r=gy(),new _k(r,n)),Ay(t)}else Yk(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function cW(t,e){return!(Fk(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Jf(Er(t.Na,t,e),e1(t,t.C)),t.C++,0)))}(t,e)||2==r&&PD(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Fu(t,5);break;case 4:Fu(t,10);break;case 3:Fu(t,6);break;default:Fu(t,2)}}function e1(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Fu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Er(t.pb,t);n||(n=new ku("//www.google.com/images/cleardot.gif"),Le.location&&"http"==Le.location.protocol||vy(n,"https"),Ey(n)),function rW(t,e){const n=new py;if(Le.Image){const r=new Image;r.onload=uy(wy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=uy(wy,n,r,"TestLoadImage: error",!1,e),r.onabort=uy(wy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=uy(wy,n,r,"TestLoadImage: timeout",!1,e),Le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else $r(2);t.H=0,t.h&&t.h.za(e),t1(t),Zk(t)}function t1(t){if(t.H=0,t.ma=[],t.h){const e=Lk(t.i);(0!=e.length||0!=t.j.length)&&(KO(t.ma,e),KO(t.ma,t.j),t.i.i.length=0,YT(t.j),t.j.length=0),t.h.ya()}}function n1(t,e,n){var r=n instanceof ku?ao(n):new ku(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Iy(r,r.m);else{var i=Le.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ku(null);r&&vy(s,r),e&&(s.g=e),i&&Iy(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Gt(r,n,e),Gt(r,"VER",t.ra),lp(t,r),r}function r1(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new un(t.Ha&&!t.va?new op({ob:n}):t.va)).Oa(t.J),e}function i1(){}function by(){if(Vl&&!(10<=Number(w8)))throw Error("Environmental error: no available transport.")}function _i(t,e){Jn.call(this),this.g=new Wk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!qf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new jl(this)}function s1(t){vD.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function o1(){ID.call(this),this.status=1}function jl(t){this.g=t}function ss(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function xD(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function wt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(fe=un.prototype).Oa=function(t){this.M=t},fe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ED.g(),this.C=function vk(t){return t.h||(t.h=t.i())}(this.u?this.u:ED),this.g.onreadystatechange=Er(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void Bk(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Le.FormData&&t instanceof Le.FormData,!(0<=ZO(oW,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zk(this),0<this.B&&((this.L=function aW(t){return Vl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Er(this.ua,this)):this.A=_D(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Bk(this,s)}},fe.ua=function(){typeof KT<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,or(this,"timeout"),this.abort(8))},fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,or(this,"complete"),or(this,"abort"),Dy(this))},fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dy(this,!0)),un.$.N.call(this)},fe.La=function(){this.s||(this.G||this.v||this.l?Hk(this):this.kb())},fe.kb=function(){Hk(this)},fe.isActive=function(){return!!this.g},fe.da=function(){try{return 2<Ms(this)?this.g.status:-1}catch{return-1}},fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),iW(e)}},fe.Ia=function(){return this.m},fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=Wk.prototype).ra=8,fe.H=1,fe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new ep(this,this.l,t);let s=this.s;if(this.U&&(s?(s=ek(s),nk(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Qk(this,i,e),Gt(n=ao(this.I),"RID",t),Gt(n,"CVER",22),this.F&&Gt(n,"X-HTTP-Session-Id",this.F),lp(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Gk(s)))+"&"+e:this.o&&bD(n,this.o,s)),AD(this.i,i),this.bb&&Gt(n,"TYPE","init"),this.P?(Gt(n,"$req",e),Gt(n,"SID","null"),i.aa=!0,TD(i,n,null)):TD(i,n,e),this.H=2}}else 3==this.H&&(t?Kk(this,t):0==this.j.length||kk(this.i)||Kk(this))},fe.Ma=function(){if(this.u=null,Jk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Jf(Er(this.jb,this),t)}},fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$r(10),Cy(this),Jk(this))},fe.ib=function(){null!=this.v&&(this.v=null,Cy(this),PD(this),$r(19))},fe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),$r(2)):(this.l.info("Failed to ping google.com"),$r(1))},fe.isActive=function(){return!!this.h&&this.h.isActive(this)},(fe=i1.prototype).Ba=function(){},fe.Aa=function(){},fe.za=function(){},fe.ya=function(){},fe.isActive=function(){return!0},fe.Va=function(){},by.prototype.g=function(t,e){return new _i(t,e)},Yn(_i,Jn),_i.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;$r(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=n1(t,null,t.Y),Ay(t)},_i.prototype.close=function(){RD(this.g)},_i.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=pD(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Ay(e)},_i.prototype.N=function(){this.g.h=null,delete this.j,RD(this.g),delete this.g,_i.$.N.call(this)},Yn(s1,vD),Yn(o1,ID),Yn(jl,i1),jl.prototype.Ba=function(){or(this.g,"a")},jl.prototype.Aa=function(t){or(this.g,new s1(t))},jl.prototype.za=function(t){or(this.g,new o1)},jl.prototype.ya=function(){or(this.g,"b")},Yn(ss,function lW(){this.blockSize=-1}),ss.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ss.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)xD(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){xD(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){xD(this,r),i=0;break}}this.h=i,this.i+=e},ss.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var dW={};function ND(t){return-128<=t&&128>t?function v8(t,e){var n=dW;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new wt([0|e],0>e?-1:0)}):new wt([0|t],0>t?-1:0)}function xs(t){if(isNaN(t)||!isFinite(t))return Bl;if(0>t)return ar(xs(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=OD;return new wt(e,0)}var OD=4294967296,Bl=ND(0),kD=ND(1),u1=ND(16777216);function uo(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Ui(t){return-1==t.h}function ar(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new wt(n,~t.h).add(kD)}function Ry(t,e){return t.add(ar(e))}function Py(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function dp(t,e){this.g=t,this.h=e}function My(t,e){if(uo(e))throw Error("division by zero");if(uo(t))return new dp(Bl,Bl);if(Ui(t))return e=My(ar(t),e),new dp(ar(e.g),ar(e.h));if(Ui(e))return e=My(t,ar(e)),new dp(ar(e.g),e.h);if(30<t.g.length){if(Ui(t)||Ui(e))throw Error("slowDivide_ only works with positive integers.");for(var n=kD,r=e;0>=r.X(t);)n=c1(n),r=c1(r);var i=$l(n,1),s=$l(r,1);for(r=$l(r,2),n=$l(n,2);!uo(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=$l(r,1),n=$l(n,1)}return e=Ry(t,i.R(e)),new dp(i,e)}for(i=Bl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=xs(n)).R(e);Ui(o)||0<o.X(t);)o=(s=xs(n-=r)).R(e);uo(s)&&(s=kD),i=i.add(s),t=Ry(t,o)}return new dp(i,t)}function c1(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new wt(n,t.h)}function $l(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new wt(i,t.h)}(fe=wt.prototype).ea=function(){if(Ui(this))return-ar(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:OD+r)*e,e*=OD}return t},fe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(uo(this))return"0";if(Ui(this))return"-"+ar(this).toString(t);for(var e=xs(Math.pow(t,6)),n=this,r="";;){var i=My(n,e).g,s=((0<(n=Ry(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(uo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},fe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},fe.X=function(t){return Ui(t=Ry(this,t))?-1:uo(t)?0:1},fe.abs=function(){return Ui(this)?ar(this):this},fe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new wt(n,-2147483648&n[n.length-1]?-1:0)},fe.R=function(t){if(uo(this)||uo(t))return Bl;if(Ui(this))return Ui(t)?ar(this).R(ar(t)):ar(ar(this).R(t));if(Ui(t))return ar(this.R(ar(t)));if(0>this.X(u1)&&0>t.X(u1))return xs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,Py(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Py(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Py(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Py(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new wt(n,0)},fe.gb=function(t){return My(this,t).h},fe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new wt(n,this.h&t.h)},fe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new wt(n,this.h|t.h)},fe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new wt(n,this.h^t.h)},by.prototype.createWebChannel=by.prototype.g,_i.prototype.send=_i.prototype.u,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,my.NO_ERROR=0,my.TIMEOUT=8,my.HTTP_ERROR=6,yk.COMPLETE="complete",Ik.EventType=Xf,Xf.OPEN="a",Xf.CLOSE="b",Xf.ERROR="c",Xf.MESSAGE="d",Jn.prototype.listen=Jn.prototype.O,un.prototype.listenOnce=un.prototype.P,un.prototype.getLastError=un.prototype.Sa,un.prototype.getLastErrorCode=un.prototype.Ia,un.prototype.getStatus=un.prototype.da,un.prototype.getResponseJson=un.prototype.Wa,un.prototype.getResponseText=un.prototype.ja,un.prototype.send=un.prototype.ha,un.prototype.setWithCredentials=un.prototype.Oa,ss.prototype.digest=ss.prototype.l,ss.prototype.reset=ss.prototype.reset,ss.prototype.update=ss.prototype.j,wt.prototype.add=wt.prototype.add,wt.prototype.multiply=wt.prototype.R,wt.prototype.modulo=wt.prototype.gb,wt.prototype.compare=wt.prototype.X,wt.prototype.toNumber=wt.prototype.ea,wt.prototype.toString=wt.prototype.toString,wt.prototype.getBits=wt.prototype.D,wt.fromNumber=xs,wt.fromString=function a1(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return ar(a1(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=xs(Math.pow(e,8)),r=Bl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=xs(Math.pow(e,s)),r=r.R(s).add(xs(o))):r=(r=r.R(n)).add(xs(o))}return r};var hW=is.createWebChannelTransport=function(){return new by},fW=is.getStatEventTarget=function(){return gy()},FD=is.ErrorCode=my,pW=is.EventType=yk,gW=is.Event=Nu,l1=is.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xy=(is.FetchXmlHttpFactory=op,is.WebChannel=Ik),mW=is.XhrIo=un,_W=is.Md5=ss,Hl=is.Integer=wt;const d1="@firebase/firestore";class Xn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");let zl="10.7.2";const ia=new Rs.Yd("@firebase/firestore");function ql(){return ia.logLevel}function ne(t,...e){if(ia.logLevel<=Rs.in.DEBUG){const n=e.map(VD);ia.debug(`Firestore (${zl}): ${t}`,...n)}}function gn(t,...e){if(ia.logLevel<=Rs.in.ERROR){const n=e.map(VD);ia.error(`Firestore (${zl}): ${t}`,...n)}}function ti(t,...e){if(ia.logLevel<=Rs.in.WARN){const n=e.map(VD);ia.warn(`Firestore (${zl}): ${t}`,...n)}}function VD(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function pe(t="Unexpected state"){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+t;throw gn(e),new Error(e)}function Te(t,e){t||pe()}function ue(t,e){return t}const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends _t.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class h1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xn.UNAUTHENTICATED))}shutdown(){}}class EW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wW{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Vn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,Z.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te("string"==typeof r.accessToken),new h1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Te(null===e||"string"==typeof e),new Xn(e)}}class TW{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class DW{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new TW(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CW{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te("string"==typeof n.token),this.R=n.token,new f1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function AW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class p1{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=AW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Gl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function g1(t){return t+"\0"}class Xt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class De{constructor(e){this.timestamp=e}static fromTimestamp(e){return new De(e)}static min(){return new De(new Xt(0,0))}static max(){return new De(new Xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hp{constructor(e,n,r){void 0===n?n=0:n>e.length&&pe(),void 0===r?r=e.length-n:r>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===hp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class it extends hp{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new it(n)}static emptyPath(){return new it([])}}const SW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends hp{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return SW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new X(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new X(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new X(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new X(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(it.fromString(e))}static fromName(e){return new ce(it.fromString(e).popFirst(5))}static empty(){return new ce(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===it.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new it(e.slice()))}}class Wl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function LD(t){return t.fields.find(e=>2===e.kind)}function Vu(t){return t.fields.filter(e=>2!==e.kind)}Wl.UNKNOWN_ID=-1;class Lu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Zl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Zl(0,yi.min())}}function m1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(1e9===r?new Xt(n+1,0):new Xt(n,r));return new yi(i,ce.empty(),e)}function _1(t){return new yi(t.readTime,t.key,-1)}class yi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yi(De.min(),ce.empty(),-1)}static max(){return new yi(De.max(),ce.empty(),-1)}}function UD(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ce.comparator(t.documentKey,e.documentKey),0!==n?n:ke(t.largestBatchId,e.largestBatchId))}const y1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function sa(t){return jD.apply(this,arguments)}function jD(){return jD=(0,Z.Z)(function*(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==y1)throw t;ne("LocalStore","Unexpectedly lost primary lease")}),jD.apply(this,arguments)}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class Ny{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Vn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new fp(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=BD(r.target.error);this.V.reject(new fp(e,i))}}static open(e,n,r,i){try{return new Ny(n,e.transaction(i,r))}catch(s){throw new fp(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new MW(n)}}class ji{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===ji.S((0,_t.z$)())&&gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),Uu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,_t.hl)())return!1;if(ji.C())return!0;const e=(0,_t.z$)(),n=ji.S(e),r=0<n&&n<10,i=ji.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,Z.Z)(function*(){return n.db||(ne("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new fp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new X(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new X(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new fp(e,a))},s.onupgradeneeded=o=>{ne("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{ne("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,Z.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=Ny.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),M.reject(f))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,f="FirebaseError"!==d.name&&a<3;if(ne("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),s.close(),!f)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class PW{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Uu(this.k.delete())}}class fp extends X{constructor(e,n){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function oa(t){return"IndexedDbTransactionError"===t.name}class MW{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ne("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Uu(r)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),Uu(this.store.add(e))}get(e){return Uu(this.store.get(e)).next(n=>(void 0===n&&(n=null),ne("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),Uu(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),Uu(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,u)=>{o.push(u)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=BD(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new PW(a),d=n(a.primaryKey,a.value,u);if(d instanceof M){const f=d.catch(g=>(u.done(),M.reject(g)));r.push(f)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>M.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Uu(t){return new M((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=BD(r.target.error);n(i)}})}let I1=!1;function BD(t){const e=ji.S((0,_t.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return I1||(I1=!0,setTimeout(()=>{throw r},0)),r}}return t}class xW{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ne("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Z.Z)(function*(){n.task=null;try{ne("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(r){oa(r)?ne("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield sa(r)}yield n.ee(6e4)}))}}class NW{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Z.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ne("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ne("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=_1(s);UD(o,r)>0&&(r=o)}),new yi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let vi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function pp(t){return null==t}function gp(t){return 0===t&&1/t==-1/0}function E1(t){return"number"==typeof t&&Number.isInteger(t)&&!gp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Tr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=w1(e)),e=OW(t.get(n),e);return w1(e)}function OW(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function w1(t){return t+"\x01\x01"}function Ns(t){const e=t.length;if(Te(e>=2),2===e)return Te("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),it.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&pe(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:pe()}s=o+2}return new it(r)}const T1=["userId","batchId"];function Oy(t,e){return[t,Tr(e)]}function D1(t,e,n){return[t,Tr(e),n]}const kW={},FW=["prefixPath","collectionGroup","readTime","documentId"],VW=["prefixPath","collectionGroup","documentId"],LW=["collectionGroup","readTime","prefixPath","documentId"],UW=["canonicalId","targetId"],jW=["targetId","path"],BW=["path","targetId"],$W=["collectionId","parent"],HW=["indexId","uid"],zW=["uid","sequenceNumber"],qW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GW=["indexId","uid","orderedDocumentKey"],WW=["userId","collectionPath","documentId"],ZW=["userId","collectionPath","largestBatchId"],KW=["userId","collectionGroup","largestBatchId"],C1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QW=[...C1,"documentOverlays"],A1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],S1=A1,YW=[...S1,"indexConfiguration","indexState","indexEntries"];class $D extends v1{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function er(t,e){const n=ue(t);return ji.M(n.ae,e)}function b1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function aa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function R1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Lt{constructor(e,n){this.comparator=e,this.root=n||ur.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ky(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ky(this.root,e,this.comparator,!1)}getReverseIterator(){return new ky(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ky(this.root,e,this.comparator,!0)}}class ky{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ur(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1,ur.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class At{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P1(this.data.getIterator())}getIteratorFrom(e){return new P1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class P1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kl(t){return t.hasNext()?t.getNext():void 0}class ni{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new ni([])}unionWith(e){let n=new At(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class M1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new M1("Invalid base64 string: "+s):s}}(e);return new Ln(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ln(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const XW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ua(t){if(Te(!!t),"string"==typeof t){let e=0;const n=XW.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cn(t.seconds),nanos:cn(t.nanos)}}function cn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function co(t){return"string"==typeof t?Ln.fromBase64String(t):Ln.fromUint8Array(t)}function Fy(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vy(t){const e=t.mapValue.fields.__previous_value__;return Fy(e)?Vy(e):e}function mp(t){const e=ua(t.mapValue.fields.__local_write_time__.timestampValue);return new Xt(e.seconds,e.nanos)}class e7{constructor(e,n,r,i,s,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class ca{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ca("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ca&&e.projectId===this.projectId&&e.database===this.database}}const la={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ly={nullValue:"NULL_VALUE"};function da(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fy(t)?4:k1(t)?9007199254740991:10:pe()}function Os(t,e){if(t===e)return!0;const n=da(t);if(n!==da(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mp(t).isEqual(mp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ua(i.timestampValue),a=ua(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,co(t.bytesValue).isEqual(co(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return cn(i.geoPointValue.latitude)===cn(s.geoPointValue.latitude)&&cn(i.geoPointValue.longitude)===cn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return cn(i.integerValue)===cn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=cn(i.doubleValue),a=cn(s.doubleValue);return o===a?gp(o)===gp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Gl(t.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(b1(o)!==b1(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Os(o[u],a[u])))return!1;return!0}(t,e);default:return pe()}var s}function _p(t,e){return void 0!==(t.values||[]).find(n=>Os(n,e))}function ha(t,e){if(t===e)return 0;const n=da(t),r=da(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=cn(s.integerValue||s.doubleValue),u=cn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return x1(t.timestampValue,e.timestampValue);case 4:return x1(mp(t),mp(e));case 5:return ke(t.stringValue,e.stringValue);case 6:return function(s,o){const a=co(s),u=co(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=ke(a[d],u[d]);if(0!==f)return f}return ke(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ke(cn(s.latitude),cn(o.latitude));return 0!==a?a:ke(cn(s.longitude),cn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let d=0;d<a.length&&d<u.length;++d){const f=ha(a[d],u[d]);if(f)return f}return ke(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===la.mapValue&&o===la.mapValue)return 0;if(s===la.mapValue)return 1;if(o===la.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const _=ke(u[g],f[g]);if(0!==_)return _;const y=ha(a[u[g]],d[f[g]]);if(0!==y)return y}return ke(u.length,f.length)}(t.mapValue,e.mapValue);default:throw pe()}}function x1(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ke(t,e);const n=ua(t),r=ua(e),i=ke(n.seconds,r.seconds);return 0!==i?i:ke(n.nanos,r.nanos)}function Ql(t){return HD(t)}function HD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ua(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?co(t.bytesValue).toBase64():"referenceValue"in t?ce.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=HD(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${HD(n.fields[o])}`;return i+"}"}(t.mapValue):pe()}function ju(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zD(t){return!!t&&"integerValue"in t}function yp(t){return!!t&&"arrayValue"in t}function N1(t){return!!t&&"nullValue"in t}function O1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jy(t){return!!t&&"mapValue"in t}function vp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return aa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function k1(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function t7(t){return"nullValue"in t?Ly:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ju(ca.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:pe()}function n7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ju(ca.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?la:pe()}function F1(t,e){const n=ha(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function V1(t,e){const n=ha(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class cr{constructor(e){this.value=e}static empty(){return new cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vp(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=vp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());jy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){aa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cr(vp(this.value))}}function L1(t){const e=[];return aa(t.fields,(n,r)=>{const i=new Wt([n]);if(jy(r)){const s=L1(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ni(e)}class Zt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Zt(e,0,De.min(),De.min(),De.min(),cr.empty(),0)}static newFoundDocument(e,n,r,i){return new Zt(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new Zt(e,2,n,De.min(),De.min(),cr.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,De.min(),De.min(),cr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fa{constructor(e,n){this.position=e,this.inclusive=n}}function U1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ce.comparator(ce.fromName(o.referenceValue),n.key):ha(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function j1(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Os(t.position[n],e.position[n]))return!1;return!0}class Ip{constructor(e,n="asc"){this.field=e,this.dir=n}}function r7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class B1{}class st extends B1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new i7(e,n,r):"array-contains"===n?new a7(e,r):"in"===n?new W1(e,r):"not-in"===n?new u7(e,r):"array-contains-any"===n?new c7(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new s7(e,r):new o7(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(ha(n,this.value)):null!==n&&da(this.value)===da(n)&&this.matchesComparison(ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends B1{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Tt(e,n)}matches(e){return Yl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Yl(t){return"and"===t.op}function qD(t){return"or"===t.op}function GD(t){return $1(t)&&Yl(t)}function $1(t){for(const e of t.filters)if(e instanceof Tt)return!1;return!0}function WD(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Ql(t.value);if(GD(t))return t.filters.map(e=>WD(e)).join(",");{const e=t.filters.map(n=>WD(n)).join(",");return`${t.op}(${e})`}}function H1(t,e){return t instanceof st?(r=t,(i=e)instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&Os(r.value,i.value)):t instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&H1(o,i.filters[a]),!0)}(t,e):void pe();var r,i}function z1(t,e){const n=t.filters.concat(e);return Tt.create(n,t.op)}function q1(t){return t instanceof st?`${(n=t).field.canonicalString()} ${n.op} ${Ql(n.value)}`:t instanceof Tt?function(n){return n.op.toString()+" {"+n.getFilters().map(q1).join(" ,")+"}"}(t):"Filter";var n}class i7 extends st{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class s7 extends st{constructor(e,n){super(e,"in",n),this.keys=G1(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class o7 extends st{constructor(e,n){super(e,"not-in",n),this.keys=G1(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function G1(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class a7 extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yp(n)&&_p(n.arrayValue,this.value)}}class W1 extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&_p(this.value.arrayValue,n)}}class u7 extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(_p(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!_p(this.value.arrayValue,n)}}class c7 extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_p(this.value.arrayValue,r))}}class l7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function ZD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new l7(t,e,n,r,i,s,o)}function Bu(t){const e=ue(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>WD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),pp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ql(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ql(r)).join(",")),e.ce=n}return e.ce}function Ep(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!H1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!j1(t.startAt,e.startAt)&&j1(t.endAt,e.endAt)}function By(t){return ce.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function $y(t,e){return t.filters.filter(n=>n instanceof st&&n.field.isEqual(e))}function Z1(t,e,n){let r=Ly,i=!0;for(const s of $y(t,e)){let o=Ly,a=!0;switch(s.op){case"<":case"<=":o=t7(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Ly}F1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];F1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function K1(t,e,n){let r=la,i=!0;for(const s of $y(t,e)){let o=la,a=!0;switch(s.op){case">=":case">":o=n7(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=la}V1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];V1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class lo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function Q1(t,e,n,r,i,s,o,a){return new lo(t,e,n,r,i,s,o,a)}function Jl(t){return new lo(t)}function Y1(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function KD(t){return null!==t.collectionGroup}function Xl(t){const e=ue(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new At(Wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Ip(s,r))}),n.has(Wt.keyField().canonicalString())||e.le.push(new Ip(Wt.keyField(),r))}return e.le}function Hr(t){const e=ue(t);return e.he||(e.he=function J1(t,e){if("F"===t.limitType)return ZD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new Ip(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new fa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fa(t.startAt.position,t.startAt.inclusive):null;return ZD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Xl(t))),e.he}function QD(t,e){const n=t.filters.concat([e]);return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hy(t,e,n){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wp(t,e){return Ep(Hr(t),Hr(e))&&t.limitType===e.limitType}function X1(t){return`${Bu(Hr(t))}|lt:${t.limitType}`}function ed(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>q1(i)).join(", ")}]`),pp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ql(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ql(i)).join(",")),`Target(${r})`}(Hr(t))}; limitType=${t.limitType})`}function Tp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Xl(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const d=U1(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Xl(r),i)||r.endAt&&!function(o,a,u){const d=U1(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Xl(r),i)));var r,i}function eF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tF(t){return(e,n)=>{let r=!1;for(const i of Xl(t)){const s=d7(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function d7(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?ha(u,d):pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){aa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return R1(this.inner)}size(){return this.innerSize}}const h7=new Lt(ce.comparator);function ri(){return h7}const nF=new Lt(ce.comparator);function Dp(...t){let e=nF;for(const n of t)e=e.insert(n.key,n);return e}function rF(t){let e=nF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ks(){return Cp()}function iF(){return Cp()}function Cp(){return new ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const f7=new Lt(ce.comparator),p7=new At(ce.comparator);function ze(...t){let e=p7;for(const n of t)e=e.add(n);return e}const g7=new At(ke);function YD(){return g7}function sF(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gp(e)?"-0":e}}function oF(t){return{integerValue:""+t}}function aF(t,e){return E1(e)?oF(e):sF(t,e)}class zy{constructor(){this._=void 0}}function m7(t,e,n){return t instanceof td?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Fy(s)&&(s=Vy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof $u?cF(t,e):t instanceof Hu?lF(t,e):function(i,s){const o=uF(i,s),a=dF(o)+dF(i.Ie);return zD(o)&&zD(i.Ie)?oF(a):sF(i.serializer,a)}(t,e)}function _7(t,e,n){return t instanceof $u?cF(t,e):t instanceof Hu?lF(t,e):n}function uF(t,e){return t instanceof nd?zD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class td extends zy{}class $u extends zy{constructor(e){super(),this.elements=e}}function cF(t,e){const n=hF(e);for(const r of t.elements)n.some(i=>Os(i,r))||n.push(r);return{arrayValue:{values:n}}}class Hu extends zy{constructor(e){super(),this.elements=e}}function lF(t,e){let n=hF(e);for(const r of t.elements)n=n.filter(i=>!Os(i,r));return{arrayValue:{values:n}}}class nd extends zy{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function dF(t){return cn(t.integerValue||t.doubleValue)}function hF(t){return yp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Ap{constructor(e,n){this.field=e,this.transform=n}}class v7{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qy(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Gy{}function fF(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new id(t.key,en.none()):new rd(t.key,t.data,en.none());{const n=t.data,r=cr.empty();let i=new At(Wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new fo(t.key,r,new ni(i.toArray()),en.none())}}function I7(t,e,n){t instanceof rd?function(i,s,o){const a=i.value.clone(),u=mF(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fo?function(i,s,o){if(!qy(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=mF(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(gF(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Sp(t,e,n,r){return t instanceof rd?function(s,o,a,u){if(!qy(s.precondition,o))return a;const d=s.value.clone(),f=_F(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof fo?function(s,o,a,u){if(!qy(s.precondition,o))return a;const d=_F(s.fieldTransforms,u,o),f=o.data;return f.setAll(gF(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,qy(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function E7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=uF(r.transform,i||null);null!=s&&(null===n&&(n=cr.empty()),n.set(r.field,s))}return n||null}function pF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Gl(r,i,(s,o)=>function y7(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof $u&&i instanceof $u||r instanceof Hu&&i instanceof Hu?Gl(r.elements,i.elements,Os):r instanceof nd&&i instanceof nd?Os(r.Ie,i.Ie):r instanceof td&&i instanceof td);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class rd extends Gy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fo extends Gy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mF(t,e,n){const r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_7(o,a,n[i]))}return r}function _F(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,m7(s,o,e))}return r}class id extends Gy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JD extends Gy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&I7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iF();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=fF(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Gl(this.mutations,e.mutations,(n,r)=>pF(n,r))&&Gl(this.baseMutations,e.baseMutations,(n,r)=>pF(n,r))}}class e0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=f7;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new e0(e,n,r,i)}}class t0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class T7{constructor(e,n){this.count=e,this.unchangedNames=n}}var En,ut;function yF(t){switch(t){default:return pe();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function vF(t){if(void 0===t)return gn("GRPC error has no .code"),k.UNKNOWN;switch(t){case En.OK:return k.OK;case En.CANCELLED:return k.CANCELLED;case En.UNKNOWN:return k.UNKNOWN;case En.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case En.INTERNAL:return k.INTERNAL;case En.UNAVAILABLE:return k.UNAVAILABLE;case En.UNAUTHENTICATED:return k.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case En.NOT_FOUND:return k.NOT_FOUND;case En.ALREADY_EXISTS:return k.ALREADY_EXISTS;case En.PERMISSION_DENIED:return k.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case En.ABORTED:return k.ABORTED;case En.OUT_OF_RANGE:return k.OUT_OF_RANGE;case En.UNIMPLEMENTED:return k.UNIMPLEMENTED;case En.DATA_LOSS:return k.DATA_LOSS;default:return pe()}}(ut=En||(En={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";function IF(){return new TextEncoder}const D7=new Hl([4294967295,4294967295],0);function EF(t){const e=IF().encode(t),n=new _W;return n.update(e),new Uint8Array(n.digest())}function wF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hl([n,r],0),new Hl([i,s],0)]}class n0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bp(`Invalid padding: ${n}`);if(r<0)throw new bp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new bp(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new bp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Hl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Hl.fromNumber(r)));return 1===i.compare(D7)&&(i=new Hl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=EF(e),[r,i]=wF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=EF(e),[r,i]=wF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class bp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Pp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rp(De.min(),i,new Lt(ke),ri(),ze())}}class Pp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pp(r,n,ze(),ze(),ze())}}class Zy{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class TF{constructor(e,n){this.targetId=e,this.fe=n}}class DF{constructor(e,n,r=Ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class CF{constructor(){this.ge=0,this.pe=SF(),this.ye=Ln.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ze(),n=ze(),r=ze();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe()}}),new Pp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=SF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Te(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class C7{constructor(e){this.Le=e,this.ke=new Map,this.qe=ri(),this.Qe=AF(),this.Ke=new Lt(ke)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(By(s))if(0===r){const o=new ce(s.path);this.We(n,o,Zt.newNoDocument(o,De.min()))}else Te(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=co(r).toUint8Array()}catch(u){if(u instanceof M1)return ti("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new n0(o,i,s)}catch(u){return ti(u instanceof bp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&By(a.target)){const u=new ce(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,Zt.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=ze();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Rp(e,n,this.Ke,this.qe,r);return this.qe=ri(),this.Qe=AF(),this.Ke=new Lt(ke),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new CF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new At(ke),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new CF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function AF(){return new Lt(ce.comparator)}function SF(){return new Lt(ce.comparator)}const A7={asc:"ASCENDING",desc:"DESCENDING"},S7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b7={and:"AND",or:"OR"};class R7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function r0(t,e){return t.useProto3Json||pp(e)?e:{value:e}}function sd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function P7(t,e){return sd(t,e.toTimestamp())}function mn(t){return Te(!!t),De.fromTimestamp(function(n){const r=ua(n);return new Xt(r.seconds,r.nanos)}(t))}function s0(t,e){return o0(t,e).canonicalString()}function o0(t,e){const n=(i=t,new it(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function RF(t){const e=it.fromString(t);return Te(UF(e)),e}function Mp(t,e){return s0(t.databaseId,e.path)}function Fs(t,e){const n=RF(e);if(n.get(1)!==t.databaseId.projectId)throw new X(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(xF(n))}function PF(t,e){return s0(t.databaseId,e)}function MF(t){const e=RF(t);return 4===e.length?it.emptyPath():xF(e)}function a0(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xF(t){return Te(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function NF(t,e,n){return{name:Mp(t,e),fields:n.value.mapValue.fields}}function OF(t,e,n){const r=Fs(t,e.name),i=mn(e.updateTime),s=e.createTime?mn(e.createTime):De.min(),o=new cr({mapValue:{fields:e.fields}}),a=Zt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function xp(t,e){let n;if(e instanceof rd)n={update:NF(t,e.key,e.value)};else if(e instanceof id)n={delete:Mp(t,e.key)};else if(e instanceof fo)n={update:NF(t,e.key,e.data),updateMask:L7(e.fieldMask)};else{if(!(e instanceof JD))return pe();n={verify:Mp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof td)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $u)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nd)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw pe()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:P7(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:pe()),n;var s}function u0(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?en.updateTime(mn(s.updateTime)):void 0!==s.exists?en.exists(s.exists):en.none():en.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Te("REQUEST_TIME"===a.setToServerValue),u=new td):"appendMissingElements"in a?u=new $u(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Hu(a.removeAllFromArray.values||[]):"increment"in a?u=new nd(o,a.increment):pe();const d=Wt.fromServerFormat(a.fieldPath);return new Ap(d,u)}(t,i)):[];var s;if(e.update){const i=Fs(t,e.update.name),s=new cr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ni((e.updateMask.fieldPaths||[]).map(f=>Wt.fromServerFormat(f)));return new fo(i,s,o,n,r)}return new rd(i,s,n,r)}if(e.delete){const i=Fs(t,e.delete);return new id(i,n)}if(e.verify){const i=Fs(t,e.verify);return new JD(i,n)}return pe()}function kF(t,e){return{documents:[PF(t,e.path)]}}function c0(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PF(t,i);const s=function(d){if(0!==d.length)return LF(Tt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(f=>{return{field:pa((_=f).field),direction:k7(_.dir)};var _})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=r0(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ut:n,parent:i};var d}function FF(t){let e=MF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(1===r);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const _=VF(g);return _ instanceof Tt&&GD(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(_=>{return new Ip(od((E=_).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,pp(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new fa((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new fa(g.values||[],!g.before)}(n.endAt)),Q1(e,i,o,s,a,"F",u,d)}function VF(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=od(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=od(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=od(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=od(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):void 0!==t.fieldFilter?st.create(od((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Tt.create(n.compositeFilter.filters.map(r=>VF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe();var n}function k7(t){return A7[t]}function F7(t){return S7[t]}function V7(t){return b7[t]}function pa(t){return{fieldPath:t.canonicalString()}}function od(t){return Wt.fromServerFormat(t.fieldPath)}function LF(t){return t instanceof st?function(n){if("=="===n.op){if(O1(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NAN"}};if(N1(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(O1(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NOT_NAN"}};if(N1(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(n.field),op:F7(n.op),value:n.value}}}(t):t instanceof Tt?function(n){const r=n.getFilters().map(i=>LF(i));return 1===r.length?r[0]:{compositeFilter:{op:V7(n.op),filters:r}}}(t):pe()}function L7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class po{constructor(e,n,r,i,s=De.min(),o=De.min(),a=Ln.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jF{constructor(e){this.ct=e}}function BF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ky(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Mp(s=t.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:sd(s,o.version.toTimestamp()),createTime:sd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zu(e.version)};else{if(!e.isUnknownDocument())return pe();r.unknownDocument={path:n.path.toArray(),version:zu(e.version)}}var s,o;return r}function Ky(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qu(t){const e=new Xt(t.seconds,t.nanoseconds);return De.fromTimestamp(e)}function Gu(t,e){const n=(e.baseMutations||[]).map(s=>u0(t.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>u0(t.ct,s)),i=Xt.fromMillis(e.localWriteTimeMs);return new XD(e.batchId,i,n,r)}function Np(t){const e=qu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?qu(t.lastLimboFreeSnapshotVersion):De.min();let r;return r=void 0!==t.query.documents?(Te(1===(s=t.query).documents.length),Hr(Jl(MF(s.documents[0])))):function(s){return Hr(FF(s))}(t.query),new po(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ln.fromBase64String(t.resumeToken));var s}function $F(t,e){const n=zu(e.snapshotVersion),r=zu(e.lastLimboFreeSnapshotVersion);let i;i=By(e.target)?kF(t.ct,e.target):c0(t.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bu(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function l0(t){const e=FF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Hy(e,e.limit,"L"):e}function d0(t,e){return new t0(e.largestBatchId,u0(t.ct,e.overlayMutation))}function HF(t,e){const n=e.path.lastSegment();return[t,Tr(e.path.popLast()),n]}function zF(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:zu(r.readTime),documentKey:Tr(r.documentKey.path),largestBatchId:r.largestBatchId}}class j7{getBundleMetadata(e,n){return qF(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:qu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return qF(e).put({bundleId:(i=n).id,createTime:zu(mn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return GF(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:l0(s.bundledQuery),readTime:qu(s.readTime)};var s})}saveNamedQuery(e,n){return GF(e).put({name:(i=n).name,readTime:zu(mn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function qF(t){return er(t,"bundles")}function GF(t){return er(t,"namedQueries")}class Qy{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new Qy(e,n.uid||"")}getOverlay(e,n){return Op(e).get(HF(this.userId,n)).next(r=>r?d0(this.serializer,r):null)}getOverlays(e,n){const r=ks();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new t0(n,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Tr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Op(e).H("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ks(),s=Tr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Op(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=d0(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ks();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Op(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const g=d0(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):f.done()}).next(()=>s)}ht(e,n){return Op(e).put(function(i,s,o){const[a,u,d]=HF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:xp(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Op(t){return er(t,"documentOverlays")}class Wu{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(cn(e.integerValue));else if("doubleValue"in e){const r=cn(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),gp(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),"string"==typeof r?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(co(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?k1(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):pe()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),ce.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function B7(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function WF(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=B7(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Wu.bt=new Wu;class $7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){const n=this.Lt(e),r=WF(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Lt(e),r=WF(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class H7{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class z7{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class kp{constructor(){this.Gt=new $7,this.zt=new H7(this.Gt),this.jt=new z7(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Zu{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zu(this.indexId,this.documentKey,this.arrayValue,r)}}function ga(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=ZF(t.arrayValue,e.arrayValue),0!==n?n:(n=ZF(t.directionalValue,e.directionalValue),0!==n?n:ce.comparator(t.documentKey,e.documentKey)))}function ZF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class KF{constructor(e){this.Yt=new At((n,r)=>Wt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Te(e.collectionGroup===this.collectionId),this.en)return!1;const n=LD(e);if(void 0!==n&&!this.nn(n))return!1;const r=Vu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new At(Wt.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Lu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Lu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Lu(r.field,"asc"===r.dir?0:1)));return new Wl(Wl.UNKNOWN_ID,this.collectionId,n,Zl.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function QF(t){var e,n;if(Te(t instanceof st||t instanceof Tt),t instanceof st){if(t instanceof W1){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>st.create(t.field,"==",s)))||[];return Tt.create(i,"or")}return t}const r=t.filters.map(i=>QF(i));return Tt.create(r,t.op)}function q7(t){if(0===t.getFilters().length)return[];const e=p0(QF(t));return Te(YF(e)),h0(e)||f0(e)?[e]:e.getFilters()}function h0(t){return t instanceof st}function f0(t){return t instanceof Tt&&GD(t)}function YF(t){return h0(t)||f0(t)||function(n){if(n instanceof Tt&&qD(n)){for(const r of n.getFilters())if(!h0(r)&&!f0(r))return!1;return!0}return!1}(t)}function p0(t){if(Te(t instanceof st||t instanceof Tt),t instanceof st)return t;if(1===t.filters.length)return p0(t.filters[0]);const e=t.filters.map(r=>p0(r));let n=Tt.create(e,t.op);return n=Yy(n),YF(n)?n:(Te(n instanceof Tt),Te(Yl(n)),Te(n.filters.length>1),n.filters.reduce((r,i)=>g0(r,i)))}function g0(t,e){let n;return Te(t instanceof st||t instanceof Tt),Te(e instanceof st||e instanceof Tt),n=t instanceof st?e instanceof st?Tt.create([t,e],"and"):JF(t,e):e instanceof st?JF(e,t):function(i,s){if(Te(i.filters.length>0&&s.filters.length>0),Yl(i)&&Yl(s))return z1(i,s.getFilters());const o=qD(i)?i:s,a=qD(i)?s:i,u=o.filters.map(d=>g0(d,a));return Tt.create(u,"or")}(t,e),Yy(n)}function JF(t,e){if(Yl(e))return z1(e,t.getFilters());{const n=e.filters.map(r=>g0(t,r));return Tt.create(n,"or")}}function Yy(t){if(Te(t instanceof st||t instanceof Tt),t instanceof st)return t;const e=t.getFilters();if(1===e.length)return Yy(e[0]);if($1(t))return t;const n=e.map(i=>Yy(i)),r=[];return n.forEach(i=>{i instanceof st?r.push(i):i instanceof Tt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Tt.create(r,t.op)}class G7{constructor(){this._n=new m0}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(yi.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(yi.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class m0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new At(it.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new At(it.comparator)).toArray()}}const Jy=new Uint8Array(0);class W7{constructor(e,n){this.databaseId=n,this.an=new m0,this.un=new ho(r=>Bu(r),(r,i)=>Ep(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:Tr(i)};return XF(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[g1(n),""],!1,!0);return XF(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Ns(o.parent))}return r})}addFieldIndex(e,n){const r=Fp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=ud(e);return s.next(a=>{o.put(zF(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Fp(e),i=ud(e),s=ad(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Fp(e),r=ad(e),i=ud(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return M.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new KF(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ad(e);let i=!0;const s=new Map;return M.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ze();const a=[];return M.forEach(s,(u,d)=>{var U;ne("IndexedDbIndexManager",`Using index ${U=u,`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(re=>`${re.fieldPath}:${re.kind}`).join(",")}`} to execute ${Bu(n)}`);const f=function(U,re){const de=LD(re);if(void 0===de)return null;for(const Fe of $y(U,de.fieldPath))switch(Fe.op){case"array-contains-any":return Fe.value.arrayValue.values||[];case"array-contains":return[Fe.value]}return null}(d,u),g=function(U,re){const de=new Map;for(const Fe of Vu(re))for(const yt of $y(U,Fe.fieldPath))switch(yt.op){case"==":case"in":de.set(Fe.fieldPath.canonicalString(),yt.value);break;case"not-in":case"!=":return de.set(Fe.fieldPath.canonicalString(),yt.value),Array.from(de.values())}return null}(d,u),_=function(U,re){const de=[];let Fe=!0;for(const yt of Vu(re)){const Un=0===yt.kind?Z1(U,yt.fieldPath,U.startAt):K1(U,yt.fieldPath,U.startAt);de.push(Un.value),Fe&&(Fe=Un.inclusive)}return new fa(de,Fe)}(d,u),y=function(U,re){const de=[];let Fe=!0;for(const yt of Vu(re)){const Un=0===yt.kind?K1(U,yt.fieldPath,U.endAt):Z1(U,yt.fieldPath,U.endAt);de.push(Un.value),Fe&&(Fe=Un.inclusive)}return new fa(de,Fe)}(d,u),E=this.hn(u,d,_),D=this.hn(u,d,y),S=this.Pn(u,d,g),N=this.In(u.indexId,f,E,_.inclusive,D,y.inclusive,S);return M.forEach(N,R=>r.j(R,n.limit).next(U=>{U.forEach(re=>{const de=ce.fromSegments(re.documentKey);o.has(de)||(o=o.add(de),a.push(de))})}))}).next(()=>a)}return M.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:q7(Tt.create(e.filters,"and")).map(r=>ZD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),d=u/(null!=n?n.length:1),f=[];for(let g=0;g<u;++g){const _=n?this.Tn(n[g/d]):Jy,y=this.En(e,_,r[g%d],i),E=this.dn(e,_,s[g%d],o),D=a.map(S=>this.En(e,_,S,!0));f.push(...this.createRange(y,E,D))}return f}En(e,n,r,i){const s=new Zu(e,ce.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new Zu(e,ce.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new KF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return M.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new At(Wt.comparator),f=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}An(e,n){const r=new kp;for(const i of Vu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Wu.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new kp;return Wu.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new kp;return Wu.bt.Pt(ju(this.databaseId,n),r.Ht(function(s){const o=Vu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(null===r)return[];let i=[];i.push(new kp);let s=0;for(const o of Vu(e)){const a=r[s++];for(const u of i)if(this.Vn(n,o.fieldPath)&&yp(a))i=this.mn(i,o,a);else{const d=u.Ht(o.kind);Wu.bt.Pt(a,d)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new kp;u.seed(a.Wt()),Wu.bt.Pt(o,u.Ht(n.kind)),s.push(u)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof st&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Fp(e),i=ud(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,g){const _=g?new Zl(g.sequenceNumber,new yi(qu(g.readTime),new ce(Ns(g.documentKey)),g.largestBatchId)):Zl.empty(),y=f.fields.map(([E,D])=>new Lu(Wt.fromServerFormat(E),D));return new Wl(f.indexId,f.collectionGroup,y,_)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:ke(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Fp(e),s=ud(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,u=>s.put(zF(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,u=>this.pn(e,i,u).next(d=>{const f=this.yn(s,u);return d.isEqual(f)?M.resolve():this.wn(e,s,u,d,f)}))))})}Sn(e,n,r,i){return ad(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return ad(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=ad(e);let s=new At(ga);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new Zu(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new At(ga);const i=this.An(n,e);if(null==i)return r;const s=LD(n);if(null!=s){const o=e.data.field(s.fieldPath);if(yp(o))for(const a of o.arrayValue.values||[])r=r.add(new Zu(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Zu(n.indexId,e.key,Jy,i));return r}wn(e,n,r,i,s){ne("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,d,f,g,_){const y=u.getIterator(),E=d.getIterator();let D=Kl(y),S=Kl(E);for(;D||S;){let N=!1,R=!1;if(D&&S){const U=f(D,S);U<0?R=!0:U>0&&(N=!0)}else null!=D?R=!0:N=!0;N?(g(S),S=Kl(E)):R?(_(D),D=Kl(y)):(D=Kl(y),S=Kl(E))}}(i,s,ga,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),M.waitFor(o)}gn(e){let n=1;return ud(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ga(o,a)).filter((o,a,u)=>!a||0!==ga(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=ga(o,e),u=ga(o,n);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Jy,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Jy,[]]))}return s}Dn(e,n){return ga(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(eV)}getMinOffset(e,n){return M.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||pe())).next(eV)}}function XF(t){return er(t,"collectionParents")}function ad(t){return er(t,"indexEntries")}function Fp(t){return er(t,"indexConfiguration")}function ud(t){return er(t,"indexState")}function eV(t){Te(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;UD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new yi(e.readTime,e.documentKey,n)}const tV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Dr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Dr(e,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nV(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(f,g,_)=>(a++,_.delete()));s.push(u.next(()=>{Te(1===a)}));const d=[];for(const f of n.mutations){const g=D1(e,f.key.path,n.batchId);s.push(i.delete(g)),d.push(f.key)}return M.waitFor(s).next(()=>d)}function Xy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pe();e=t.noDocument}return JSON.stringify(e).length}Dr.DEFAULT_COLLECTION_PERCENTILE=10,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dr.DEFAULT=new Dr(41943040,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dr.DISABLED=new Dr(-1,0,0);class ev{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){Te(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new ev(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ma(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=cd(e),o=ma(e);return o.add({}).next(a=>{Te("number"==typeof a);const u=new XD(a,n,r,i),d=function(y,E,D){const S=D.baseMutations.map(R=>xp(y.ct,R)),N=D.mutations.map(R=>xp(y.ct,R));return{userId:E,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:S,mutations:N}}(this.serializer,this.userId,u),f=[];let g=new At((_,y)=>ke(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=D1(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),f.push(o.put(d)),f.push(s.put(y,kW))}return g.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),M.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return ma(e).get(n).next(r=>r?(Te(r.userId===this.userId),Gu(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?M.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ma(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Te(a.batchId>=r),s=Gu(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ma(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ma(e).W("userMutationsIndex",n).next(r=>r.map(i=>Gu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Oy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return cd(e).Y({range:i},(o,a,u)=>{const[d,f,g]=o,_=Ns(f);if(d===this.userId&&n.path.isEqual(_))return ma(e).get(g).next(y=>{if(!y)throw pe();Te(y.userId===this.userId),s.push(Gu(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(ke);const i=[];return n.forEach(s=>{const o=Oy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=cd(e).Y({range:a},(d,f,g)=>{const[_,y,E]=d,D=Ns(y);_===this.userId&&s.path.isEqual(D)?r=r.add(E):g.done()});i.push(u)}),M.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Oy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new At(ke);return cd(e).Y({range:o},(u,d,f)=>{const[g,_,y]=u,E=Ns(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ma(e).get(s).next(o=>{if(null===o)throw pe();Te(o.userId===this.userId),r.push(Gu(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return nV(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return cd(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Ns(s[1]);i.push(u)}else a.done()}).next(()=>{Te(0===i.length)})})}containsKey(e,n){return rV(e,this.userId,n)}xn(e){return iV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rV(t,e,n){const r=Oy(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return cd(t).Y({range:s,J:!0},(a,u,d)=>{const[f,g,_]=a;f===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function ma(t){return er(t,"mutations")}function cd(t){return er(t,"documentMutations")}function iV(t){return er(t,"mutationQueues")}class Ku{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ku(0)}static Bn(){return new Ku(-1)}}class Z7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{const r=new Ku(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>De.fromTimestamp(new Xt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ld(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(Te(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ld(e).Y((o,a)=>{const u=Np(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ld(e).Y((r,i)=>{const s=Np(i);n(s)})}Ln(e){return sV(e).get("targetGlobalKey").next(n=>(Te(null!==n),n))}kn(e,n){return sV(e).put("targetGlobalKey",n)}qn(e,n){return ld(e).put($F(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Bu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ld(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=Np(a);Ep(n,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=_a(e);return n.forEach(o=>{const a=Tr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=_a(e);return M.forEach(n,s=>{const o=Tr(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=_a(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=_a(e);let s=ze();return i.Y({range:r,J:!0},(o,a,u)=>{const d=Ns(o[1]),f=new ce(d);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=Tr(n.path),i=IDBKeyRange.bound([r],[g1(r)],!1,!0);let s=0;return _a(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return ld(e).get(n).next(r=>r?Np(r):null)}}function ld(t){return er(t,"targets")}function sV(t){return er(t,"targetGlobal")}function _a(t){return er(t,"targetDocuments")}function oV([t,e],[n,r]){const i=ke(t,n);return 0===i?ke(e,r):i}class K7{constructor(e){this.Kn=e,this.buffer=new At(oV),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();oV(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Z.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){oa(r)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield sa(r)}yield n.zn(3e5)}))}}class Q7{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return M.resolve(vi._e);const r=new K7(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(tV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tV):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),ql()<=Rs.in.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class Y7{constructor(e,n){this.db=e,this.garbageCollector=function uV(t,e){return new Q7(t,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return tv(e,r)}removeReference(e,n,r){return tv(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return tv(e,n)}er(e,n){return function(i,s){let o=!1;return iV(i).Z(a=>rV(i,a,s).next(u=>(u&&(o=!0),M.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const u=this.er(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,De.min()),_a(e).delete([0,Tr(o.path)])))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return tv(e,n)}Xn(e,n){const r=_a(e);let i,s=vi._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==vi._e&&n(new ce(Ns(i)),s),s=d,i=u):s=vi._e}).next(()=>{s!==vi._e&&n(new ce(Ns(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tv(t,e){return _a(t).put((i=t.currentSequenceNumber,{targetId:0,path:Tr(e.path),sequenceNumber:i}));var i}class cV{constructor(){this.changes=new ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class J7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Qu(e).put(r)}removeEntry(e,n,r){return Qu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ky(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Zt.newInvalidDocument(n);return Qu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vp(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:Zt.newInvalidDocument(n)};return Qu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vp(n))},(i,s)=>{r={document:this.nr(n,s),size:Xy(s)}}).next(()=>r)}getEntries(e,n){let r=ri();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=ri(),i=new Lt(ce.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Xy(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return M.resolve();let i=new At(fV);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Vp(i.first()),Vp(i.last())),o=i.getIterator();let a=o.getNext();return Qu(e).Y({index:"documentKeyIndex",range:s},(u,d,f)=>{const g=ce.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&fV(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?f.U(Vp(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ky(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qu(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let f=ri();for(const g of d){const _=this.nr(ce.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(Tp(n,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=ri();const o=hV(n,r),a=hV(n,yi.max());return Qu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,f)=>{const g=this.nr(ce.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new X7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return dV(e).get("remoteDocumentGlobalKey").next(n=>(Te(!!n),n))}tr(e,n){return dV(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=function U7(t,e){let n;if(e.document)n=OF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),i=qu(e.noDocument.readTime);n=Zt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe();{const r=ce.fromSegments(e.unknownDocument.path),i=qu(e.unknownDocument.version);n=Zt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Xt(i[0],i[1]);return De.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(De.min()))return r}return Zt.newInvalidDocument(e)}}function lV(t){return new J7(t)}class X7 extends cV{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ho(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new At((s,o)=>ke(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=BF(this.ar.serializer,o);i=i.add(s.path.popLast());const d=Xy(u);r+=d-a.size,n.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=BF(this.ar.serializer,o.convertToNoDocument(De.min()));n.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function dV(t){return er(t,"remoteDocumentGlobal")}function Qu(t){return er(t,"remoteDocumentsV14")}function Vp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hV(t,e){const n=e.documentKey.path.toArray();return[t,Ky(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function fV(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ke(n[s],r[s]),i)return i;return i=ke(n.length,r.length),i||(i=ke(n[n.length-2],r[r.length-2]),i||ke(n[n.length-1],r[r.length-1]))}class eZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class pV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Sp(r.mutation,i,ni.empty(),Xt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ze()){const i=ks();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Dp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ri();const o=Cp(),a=Cp();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof fo)?s=s.insert(d.key,d):void 0!==f?(o.set(d.key,f.mutation.getFieldMask()),Sp(f.mutation,d,f.mutation.getFieldMask(),Xt.now())):o.set(d.key,ni.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return a.set(d,new eZ(f,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Cp();let i=new Lt((o,a)=>o-a),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let f=r.get(u)||ni.empty();f=a.applyToLocalView(d,f),r.set(u,f);const g=(i.get(a.batchId)||ze()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,g=iF();f.forEach(_=>{if(!s.has(_)){const y=fF(n.get(_),r.get(_));null!==y&&g.set(_,y),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ce.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):KD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(ks());let a=-1,u=s;return o.next(d=>M.forEach(d,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ze())).next(f=>({batchId:a,changes:rF(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=Dp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Dp();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,u=>{const d=(g=n,_=u.child(s),new lo(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();null===o.get(f)&&(o=o.insert(f,Zt.newInvalidDocument(f)))});let a=Dp();return o.forEach((u,d)=>{const f=s.get(u);void 0!==f&&Sp(f.mutation,d,ni.empty(),Xt.now()),Tp(n,d)&&(a=a.insert(u,d))}),a})}}class tZ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:mn(i.createTime)}),M.resolve();var i}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:l0(i.bundledQuery),readTime:mn(i.readTime)}),M.resolve();var i}}class nZ{constructor(){this.overlays=new Lt(ce.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ks();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=ks(),s=n.length+1,o=new ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Lt((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);null===f&&(f=ks(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=ks(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new t0(n,r));let s=this.hr.get(n);void 0===s&&(s=ze(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}class _0{constructor(){this.Pr=new At(tr.Ir),this.Tr=new At(tr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new tr(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new tr(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ce(new it([])),r=new tr(n,e),i=new tr(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ce(new it([])),r=new tr(n,e),i=new tr(n,e+1);let s=ze();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new tr(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class tr{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ce.comparator(e.key,n.key)||ke(e.pr,n.pr)}static Er(e,n){return ke(e.pr,n.pr)||ce.comparator(e.key,n.key)}}class rZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new At(tr.Ir)}checkEmpty(e){return M.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++;const o=new XD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new tr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tr(n,0),i=new tr(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(ke);return n.forEach(i=>{const s=new tr(i,0),o=new tr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ce.isDocumentKey(s)||(s=s.child(""));const o=new tr(new ce(s),0);let a=new At(ke);return this.wr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.pr)),!0)},o),M.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Te(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return M.forEach(n.mutations,i=>{const s=new tr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new tr(n,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return M.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class iZ{constructor(e){this.vr=e,this.docs=new Lt(ce.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=ri();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ri();const o=n.path,a=new ce(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||UD(_1(f),r)<=0||(i.has(f.key)||Tp(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){pe()}Fr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sZ(this)}getSize(e){return M.resolve(this.size)}}class sZ extends cV{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class oZ{constructor(e){this.persistence=e,this.Mr=new ho(n=>Bu(n),Ep),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.Or=0,this.Nr=new _0,this.targetCount=0,this.Br=Ku.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Ku(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}}class y0{constructor(e,n){this.Lr={},this.overlays={},this.kr=new vi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new oZ(this),this.indexManager=new G7,this.remoteDocumentCache=new iZ(r=>this.referenceDelegate.Kr(r)),this.serializer=new jF(n),this.$r=new tZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new rZ(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new aZ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return M.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class aZ extends v1{constructor(e){super(),this.currentSequenceNumber=e}}class nv{constructor(e){this.persistence=e,this.zr=new _0,this.jr=null}static Hr(e){return new nv(e)}get Jr(){if(this.jr)return this.jr;throw pe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{const i=ce.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,De.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class uZ{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Ny("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T1,{unique:!0}),u.createObjectStore("documentMutations"),gV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),gV(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").W().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T1,{unique:!0});const g=d.store("mutations"),_=f.map(y=>g.put(y));return M.waitFor(_)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:WW});d.createIndex("collectionPathOverlayIndex",ZW,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",KW,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:FW});d.createIndex("documentKeyIndex",VW),d.createIndex("collectionGroupIndex",LW)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:HW}).createIndex("sequenceNumberIndex",zW,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:qW}).createIndex("documentKeyIndex",GW,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Xy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>M.forEach(a,u=>{Te(u.userId===s.userId);const d=Gu(this.serializer,u);return nV(e,s.userId,d).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new it(o),d=[0,Tr(u)];s.push(n.get(d).next(f=>f?M.resolve():n.put({targetId:0,path:Tr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>M.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:$W});const r=n.store("collectionParents"),i=new m0,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Tr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new it(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],d)=>{const f=Ns(a);return s(f.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Np(i),o=$F(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new ce(it.fromString(g.document.name).popFirst(5)):g.noDocument?ce.fromSegments(g.noDocument.path):g.unknownDocument?ce.fromSegments(g.unknownDocument.path):pe()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>M.waitFor(i))}si(e,n){const r=n.store("mutations"),i=lV(this.serializer),s=new y0(nv.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var d;let f=null!==(d=a.get(u.userId))&&void 0!==d?d:ze();Gu(this.serializer,u).keys().forEach(g=>f=f.add(g)),a.set(u.userId,f)}),M.forEach(a,(u,d)=>{const f=new Xn(d),g=Qy.lt(this.serializer,f),_=s.getIndexManager(f),y=ev.lt(f,this.serializer,_,s.referenceDelegate);return new pV(i,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new $D(n,vi._e),u).next()})})}}function gV(t){t.createObjectStore("targetDocuments",{keyPath:jW}).createIndex("documentTargetsIndex",BW,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",UW,{unique:!0}),t.createObjectStore("targetGlobal")}const v0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class I0{constructor(e,n,r,i,s,o,a,u,d,f,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=d,this.ai=f,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=_=>Promise.resolve(),!I0.D())throw new X(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Y7(this,i),this.Ti=n+"main",this.serializer=new jF(u),this.Ei=new ji(this.Ti,this.ui,new uZ(this.serializer)),this.Qr=new Z7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lV(this.serializer),this.$r=new j7,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&gn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(k.FAILED_PRECONDITION,v0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new vi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var r=(0,Z.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var n=(0,Z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,Z.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>iv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(oa(e))return ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Lp(e).get("owner").next(n=>M.resolve(this.Si(n)))}bi(e){return iv(e).delete(this.clientId)}Di(){var e=this;return(0,Z.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=er(r,"clientMetadata");return i.W().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return M.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of n)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?M.resolve(!0):Lp(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new X(k.FAILED_PRECONDITION,v0);return!1}}return!(!this.networkEnabled||!this.inForeground)||iv(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ne("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Z.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new $D(n,vi._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Bi()})()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>iv(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return ev.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new W7(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Qy.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){ne("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ui)?YW:14===u?S1:13===u?A1:12===u?QW:11===u?C1:void pe();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new $D(a,this.kr?this.kr.next():vi._e),"readwrite-primary"===n?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new X(k.FAILED_PRECONDITION,y1);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Lp(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new X(k.FAILED_PRECONDITION,v0)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lp(e).put("owner",n)}static D(){return ji.D()}yi(e){const n=Lp(e);return n.get("owner").next(r=>this.Si(r)?(ne("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n||e>r&&(gn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,_t.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){gn("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lp(t){return er(t,"owner")}function iv(t){return er(t,"clientMetadata")}function E0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class w0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ze(),i=ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new w0(e,n.fromCache,r,i)}}class cZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mV{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,_t.G6)()?8:ji.v((0,_t.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cZ;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(ql()<=Rs.in.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ed(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(ql()<=Rs.in.DEBUG&&ne("QueryEngine","Query:",ed(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ql()<=Rs.in.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ed(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(n))):M.resolve())}ji(e,n){if(Y1(n))return M.resolve(null);let r=Hr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Hy(n,null,"F"),r=Hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ze(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Zi(n,a);return this.Xi(n,d,o,u.readTime)?this.ji(e,Hy(n,null,"F")):this.es(e,d,n,u)}))})))}Hi(e,n,r,i){return Y1(n)||i.isEqual(De.min())?M.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?M.resolve(null):(ql()<=Rs.in.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ed(n)),this.es(e,o,n,m1(i,-1)).next(a=>a))})}Zi(e,n){let r=new At(tF(e));return n.forEach((i,s)=>{Tp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return ql()<=Rs.in.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ed(n)),this.zi.getDocumentsMatchingQuery(e,n,yi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class lZ{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Lt(ke),this.rs=new ho(s=>Bu(s),Ep),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pV(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function _V(t,e,n,r){return new lZ(t,e,n,r)}function yV(t,e){return T0.apply(this,arguments)}function T0(){return T0=(0,Z.Z)(function*(t,e){const n=ue(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ze();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({us:d,removedBatchIds:o,addedBatchIds:a}))})})}),T0.apply(this,arguments)}function vV(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function IV(t,e,n){let r=ze(),i=ze();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ri();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(De.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{cs:o,ls:i}})}function fZ(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dd(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new po(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function hd(t,e,n){return D0.apply(this,arguments)}function D0(){return D0=(0,Z.Z)(function*(t,e,n){const r=ue(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!oa(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),D0.apply(this,arguments)}function sv(t,e,n){const r=ue(t);let i=De.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const g=ue(u),_=g.rs.get(f);return void 0!==_?M.resolve(g.ns.get(_)):g.Qr.getTargetData(d,f)}(r,o,Hr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:De.min(),n?s:ze())).next(a=>(TV(r,eF(e),a),{documents:a,hs:s})))}function EV(t,e){const n=ue(t),r=ue(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function wV(t,e){const n=ue(t),r=n.ss.get(e)||De.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,m1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(TV(n,e,i),i))}function TV(t,e,n){let r=t.ss.get(e)||De.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function C0(){return C0=(0,Z.Z)(function*(t,e,n,r){const i=ue(t);let s=ze(),o=ri();for(const d of n){const f=e.Ps(d.metadata.name);d.document&&(s=s.add(f));const g=e.Is(d);g.setReadTime(e.Ts(d.metadata.readTime)),o=o.insert(f,g)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield dd(i,(f=r,Hr(Jl(it.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>IV(d,a,o).next(f=>(a.apply(d),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Qr.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.cs,f.ls)).next(()=>f.cs)))}),C0.apply(this,arguments)}function gZ(t,e){return A0.apply(this,arguments)}function A0(){return A0=(0,Z.Z)(function*(t,e,n=ze()){const r=yield dd(t,Hr(l0(e.bundledQuery))),i=ue(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=mn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Ln.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}),A0.apply(this,arguments)}function DV(t,e){return`firestore_clients_${t}_${e}`}function CV(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function S0(t,e){return`firestore_targets_${t}_${e}`}class ov{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new X(i.error.code,i.error.message))),o?new ov(e,n,i.state,s):(gn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Up{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new X(r.error.code,r.error.message))),s?new Up(e,r.state,i):(gn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class av{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=YD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=E1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new av(e,s):(gn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class b0{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new b0(n.clientId,n.onlineState):(gn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class R0{constructor(){this.activeTargetIds=YD()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class P0{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Lt(ke),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=DV(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new R0),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Z.Z)(function*(){const n=yield e.syncEngine.Li();for(const i of n){if(i===e.Vs)continue;const s=e.getItem(DV(e.persistenceKey,i));if(s){const o=av.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(S0(this.persistenceKey,e));if(r){const i=Up.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(S0(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ne("SharedClientState","READ",e,n),n}setItem(e,n){ne("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,Z.Z)(function*(){if(n.started){if(null!==r.key)if(n.bs.test(r.key)){if(null==r.newValue){const i=n.$s(r.key);return n.Us(i,null)}{const i=n.Ws(r.key,r.newValue);if(i)return n.Us(i.clientId,i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.Gs(r.key,r.newValue);if(i)return n.zs(i)}}else if(n.Cs.test(r.key)){if(null!==r.newValue){const i=n.js(r.key,r.newValue);if(i)return n.Hs(i)}}else if(r.key===n.vs){if(null!==r.newValue){const i=n.xs(r.newValue);if(i)return n.Os(i)}}else if(r.key===n.Ss){const i=function(o){let a=vi._e;if(null!=o)try{const u=JSON.parse(o);Te("number"==typeof u),a=u}catch(u){gn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==vi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.Fs){const i=n.Js(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Ys(s)))}}else n.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){const i=new ov(this.currentUser,e,n,r),s=CV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Ls(e){const n=CV(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,r){const i=S0(this.persistenceKey,e),s=new Up(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return av.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return ov.Es(new Xn(void 0!==r[2]?r[2]:null),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Up.Es(i,n)}xs(e){return b0.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,Z.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=YD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class AV{constructor(){this.no=new R0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new R0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mZ{io(e){}shutdown(){}}class SV{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uv=null;function M0(){return null===uv?uv=268435456+Math.round(2147483648*Math.random()):uv++,"0x"+uv.toString(16)}const _Z={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yZ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Cr="WebChannelConnection";class vZ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=M0(),u=this.bo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(d,s,o),this.Co(n,u,d,i).then(f=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw ti("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+zl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){return`${this.fo}/v1/${r}:${_Z[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=M0();return new Promise((o,a)=>{const u=new mW;u.setWithCredentials(!0),u.listenOnce(pW.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case FD.NO_ERROR:const f=u.getResponseJson();ne(Cr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case FD.TIMEOUT:ne(Cr,`RPC '${e}' ${s} timed out`),a(new X(k.DEADLINE_EXCEEDED,"Request time out"));break;case FD.HTTP_ERROR:const g=u.getStatus();if(ne(Cr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const E=function(S){const N=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(N)>=0?N:k.UNKNOWN}(y.status);a(new X(E,y.message))}else a(new X(k.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new X(k.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{ne(Cr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);ne(Cr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Fo(e,n,r){const i=M0(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hW(),a=fW(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ne(Cr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let _=!1,y=!1;const E=new yZ({lo:S=>{y?ne(Cr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(ne(Cr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),ne(Cr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},ho:()=>g.close()}),D=(S,N,R)=>{S.listen(N,U=>{try{R(U)}catch(re){setTimeout(()=>{throw re},0)}})};return D(g,xy.EventType.OPEN,()=>{y||ne(Cr,`RPC '${e}' stream ${i} transport opened.`)}),D(g,xy.EventType.CLOSE,()=>{y||(y=!0,ne(Cr,`RPC '${e}' stream ${i} transport closed`),E.Vo())}),D(g,xy.EventType.ERROR,S=>{y||(y=!0,ti(Cr,`RPC '${e}' stream ${i} transport errored:`,S),E.Vo(new X(k.UNAVAILABLE,"The operation could not be completed")))}),D(g,xy.EventType.MESSAGE,S=>{var N;if(!y){const R=S.data[0];Te(!!R);const re=R.error||(null===(N=R[0])||void 0===N?void 0:N.error);if(re){ne(Cr,`RPC '${e}' stream ${i} received error:`,re);const de=re.status;let Fe=function(sg){const Uv=En[sg];if(void 0!==Uv)return vF(Uv)}(de),yt=re.message;void 0===Fe&&(Fe=k.INTERNAL,yt="Unknown error status: "+de+" with message "+re.message),y=!0,E.Vo(new X(Fe,yt)),g.close()}else ne(Cr,`RPC '${e}' stream ${i} received:`,R),E.mo(R)}}),D(a,gW.STAT_EVENT,S=>{S.stat===l1.PROXY?ne(Cr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===l1.NOPROXY&&ne(Cr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ro()},0),E}}function bV(){return typeof window<"u"?window:null}function cv(){return typeof document<"u"?document:null}function jp(t){return new R7(t,!0)}class x0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class RV{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new x0(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,Z.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,Z.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var r=this;return(0,Z.Z)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(gn(n.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):n&&n.code===k.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new X(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,Z.Z)(function*(){e.state=0,e.start()}))}__(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IZ extends RV{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function x7(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:pe(),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Te(void 0===f||"string"==typeof f),Ln.fromBase64String(f||"")):(Te(void 0===f||f instanceof Uint8Array),Ln.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=void 0===d.code?k.UNKNOWN:vF(d.code);return new X(f,d.message||"")}(o);n=new DF(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Fs(t,r.document.name),s=mn(r.document.updateTime),o=r.document.createTime?mn(r.document.createTime):De.min(),a=new cr({mapValue:{fields:r.document.fields}}),u=Zt.newFoundDocument(i,s,o,a);n=new Zy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Fs(t,r.document),s=r.readTime?mn(r.readTime):De.min(),o=Zt.newNoDocument(i,s);n=new Zy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Fs(t,r.document);n=new Zy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return pe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new T7(i,s);n=new TF(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?mn(o.readTime):De.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=a0(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=By(u)?{documents:kF(s,u)}:{query:c0(s,u).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bF(s,o.resumeToken);const d=r0(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=sd(s,o.snapshotVersion.toTimestamp());const d=r0(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function O7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=a0(this.serializer),n.removeTarget=e,this.t_(n)}}class EZ extends RV{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function N7(t,e){return t&&t.length>0?(Te(void 0!==e),t.map(n=>function(i,s){let o=mn(i.updateTime?i.updateTime:s);return o.isEqual(De.min())&&(o=mn(s)),new v7(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.T_(r,n)}return Te(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=a0(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>xp(this.serializer,r))};this.t_(n)}}class wZ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new X(k.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,o0(n,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(k.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,o0(n,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(k.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class DZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(gn(n),this.g_=!1):ne("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class CZ{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(a=>{r.enqueueAndForget((0,Z.Z)(function*(){var u;ya(o)&&(ne("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Z.Z)(function*(f){const g=ue(f);g.v_.add(4),yield fd(g),g.x_.set("Unknown"),g.v_.delete(4),yield Bp(g)}),function d(f){return u.apply(this,arguments)})(o))}))}),this.x_=new DZ(r,i)}}function Bp(t){return O0.apply(this,arguments)}function O0(){return O0=(0,Z.Z)(function*(t){if(ya(t))for(const e of t.F_)yield e(!0)}),O0.apply(this,arguments)}function fd(t){return k0.apply(this,arguments)}function k0(){return k0=(0,Z.Z)(function*(t){for(const e of t.F_)yield e(!1)}),k0.apply(this,arguments)}function lv(t,e){const n=ue(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),L0(n)?V0(n):gd(n).Jo()&&F0(n,e))}function $p(t,e){const n=ue(t),r=gd(n);n.C_.delete(e),r.Jo()&&PV(n,e),0===n.C_.size&&(r.Jo()?r.Xo():ya(n)&&n.x_.set("Unknown"))}function F0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gd(t).c_(e)}function PV(t,e){t.O_.Oe(e),gd(t).l_(e)}function V0(t){t.O_=new C7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),gd(t).start(),t.x_.p_()}function L0(t){return ya(t)&&!gd(t).Ho()&&t.C_.size>0}function ya(t){return 0===ue(t).v_.size}function MV(t){t.O_=void 0}function AZ(t){return U0.apply(this,arguments)}function U0(){return U0=(0,Z.Z)(function*(t){t.C_.forEach((e,n)=>{F0(t,e)})}),U0.apply(this,arguments)}function SZ(t,e){return j0.apply(this,arguments)}function j0(){return j0=(0,Z.Z)(function*(t,e){MV(t),L0(t)?(t.x_.S_(e),V0(t)):t.x_.set("Unknown")}),j0.apply(this,arguments)}function bZ(t,e,n){return B0.apply(this,arguments)}function B0(){return B0=(0,Z.Z)(function*(t,e,n){if(t.x_.set("Online"),e instanceof DF&&2===e.state&&e.cause)try{yield(r=(0,Z.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.C_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.C_.delete(u),s.O_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dv(t,r)}else if(e instanceof Zy?t.O_.$e(e):e instanceof TF?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(De.min()))try{const r=yield vV(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.C_.get(d);f&&s.C_.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=s.C_.get(u);if(!f)return;s.C_.set(u,f.withResumeToken(Ln.EMPTY_BYTE_STRING,f.snapshotVersion)),PV(s,u);const g=new po(f.target,u,d,f.sequenceNumber);F0(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),yield dv(t,r)}var r}),B0.apply(this,arguments)}function dv(t,e,n){return $0.apply(this,arguments)}function $0(){return $0=(0,Z.Z)(function*(t,e,n){if(!oa(e))throw e;t.v_.add(1),yield fd(t),t.x_.set("Offline"),n||(n=()=>vV(t.localStore)),t.asyncQueue.enqueueRetryable((0,Z.Z)(function*(){ne("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Bp(t)}))}),$0.apply(this,arguments)}function xV(t,e){return e().catch(n=>dv(t,n,e))}function pd(t){return H0.apply(this,arguments)}function H0(){return H0=(0,Z.Z)(function*(t){const e=ue(t),n=va(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;RZ(e);)try{const i=yield fZ(e.localStore,r);if(null===i){0===e.D_.length&&n.Xo();break}r=i.batchId,PZ(e,i)}catch(i){yield dv(e,i)}NV(e)&&OV(e)}),H0.apply(this,arguments)}function RZ(t){return ya(t)&&t.D_.length<10}function PZ(t,e){t.D_.push(e);const n=va(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function NV(t){return ya(t)&&!va(t).Ho()&&t.D_.length>0}function OV(t){va(t).start()}function MZ(t){return z0.apply(this,arguments)}function z0(){return z0=(0,Z.Z)(function*(t){va(t).d_()}),z0.apply(this,arguments)}function xZ(t){return q0.apply(this,arguments)}function q0(){return q0=(0,Z.Z)(function*(t){const e=va(t);for(const n of t.D_)e.I_(n.mutations)}),q0.apply(this,arguments)}function NZ(t,e,n){return G0.apply(this,arguments)}function G0(){return G0=(0,Z.Z)(function*(t,e,n){const r=t.D_.shift(),i=e0.from(r,e,n);yield xV(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield pd(t)}),G0.apply(this,arguments)}function OZ(t,e){return W0.apply(this,arguments)}function W0(){return W0=(0,Z.Z)(function*(t,e){var n;e&&va(t).P_&&(yield(n=(0,Z.Z)(function*(i,s){if(yF(a=s.code)&&a!==k.ABORTED){const o=i.D_.shift();va(i).Zo(),yield xV(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield pd(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),NV(t)&&OV(t)}),W0.apply(this,arguments)}function kV(t,e){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,Z.Z)(function*(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=ya(n);n.v_.add(3),yield fd(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Bp(n)}),Z0.apply(this,arguments)}function K0(t,e){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,Z.Z)(function*(t,e){const n=ue(t);e?(n.v_.delete(2),yield Bp(n)):e||(n.v_.add(2),yield fd(n),n.x_.set("Unknown"))}),Q0.apply(this,arguments)}function gd(t){return t.N_||(t.N_=function(n,r,i){const s=ue(n);return s.R_(),new IZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:AZ.bind(null,t),To:SZ.bind(null,t),u_:bZ.bind(null,t)}),t.F_.push(function(){var e=(0,Z.Z)(function*(n){n?(t.N_.Zo(),L0(t)?V0(t):t.x_.set("Unknown")):(yield t.N_.stop(),MV(t))});return function(n){return e.apply(this,arguments)}}())),t.N_}function va(t){return t.B_||(t.B_=function(n,r,i){const s=ue(n);return s.R_(),new EZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:MZ.bind(null,t),To:OZ.bind(null,t),E_:xZ.bind(null,t),T_:NZ.bind(null,t)}),t.F_.push(function(){var e=(0,Z.Z)(function*(n){n?(t.B_.Zo(),yield pd(t)):(yield t.B_.stop(),t.D_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))});return function(n){return e.apply(this,arguments)}}())),t.B_}class Y0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Y0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new X(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function md(t,e){if(gn("AsyncQueue",`${e}: ${t}`),oa(t))return new X(k.UNAVAILABLE,`${e}: ${t}`);throw t}class _d{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=Dp(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new _d(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _d)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new _d;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class FV{constructor(){this.L_=new Lt(ce.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(n):1===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):pe():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class yd{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new yd(e,n,_d.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class kZ{constructor(){this.q_=void 0,this.Q_=[]}}class FZ{constructor(){this.queries=new ho(e=>X1(e),wp),this.onlineState="Unknown",this.K_=new Set}}function J0(t,e){return X0.apply(this,arguments)}function X0(){return X0=(0,Z.Z)(function*(t,e){const n=ue(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new kZ),i)try{s.q_=yield n.onListen(r)}catch(o){const a=md(o,`Initialization of query '${ed(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&nC(n)}),X0.apply(this,arguments)}function eC(t,e){return tC.apply(this,arguments)}function tC(){return tC=(0,Z.Z)(function*(t,e){const n=ue(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),tC.apply(this,arguments)}function VZ(t,e){const n=ue(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&nC(n)}function LZ(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function nC(t){t.K_.forEach(e=>{e.next()})}class rC{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new yd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class UZ{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}class VV{constructor(e){this.serializer=e}Ps(e){return Fs(this.serializer,e)}Is(e){return e.metadata.exists?OF(this.serializer,e.document,!1):Zt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return mn(e)}}class jZ{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LV(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const r=it.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,r=new VV(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ze()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,Z.Z)(function*(){const n=yield function pZ(t,e,n,r){return C0.apply(this,arguments)}(e.localStore,new VV(e.serializer),e.documents,e.ta.id),r=e.ra(e.documents);for(const i of e.queries)yield gZ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:n}})()}}function LV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class UV{constructor(e){this.key=e}}class jV{constructor(e){this.key=e}}class BV{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=ze(),this.mutatedKeys=ze(),this.ua=tF(e),this.ca=new _d(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new FV,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const _=i.get(f),y=Tp(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),D=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;_&&y?_.data.isEqual(y.data)?E!==D&&(r.track({type:3,doc:y}),S=!0):this.Ia(_,y)||(r.track({type:2,doc:y}),S=!0,(u&&this.ua(y,u)>0||d&&this.ua(y,d)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),S=!0):_&&!y&&(r.track({type:1,doc:_}),S=!0,(u||d)&&(a=!0)),S&&(y?(o=o.add(y),s=D?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((f,g)=>function(y,E){const D=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return D(y)-D(E)}(f.type,g.type)||this.ua(f.doc,g.doc)),this.Ta(r),i=null!=i&&i;const a=n&&!i?this.Ea():[],u=0===this.aa.size&&this.current&&!i?1:0,d=u!==this._a;return this._a=u,0!==o.length||d?{snapshot:new yd(this.query,e.ca,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new FV,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=ze(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new jV(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new UV(r))}),n}Ra(e){this.oa=e.hs,this.aa=ze();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return yd.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class BZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $Z{constructor(e){this.key=e,this.ma=!1}}class HZ{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new ho(a=>X1(a),wp),this.pa=new Map,this.ya=new Set,this.wa=new Lt(ce.comparator),this.Sa=new Map,this.ba=new _0,this.Da={},this.Ca=new Map,this.va=Ku.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function zZ(t,e){return iC.apply(this,arguments)}function iC(){return iC=(0,Z.Z)(function*(t,e){const n=SC(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=yield dd(n.localStore,Hr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield sC(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&lv(n.remoteStore,o)}return i}),iC.apply(this,arguments)}function sC(t,e,n,r,i){return oC.apply(this,arguments)}function oC(){return oC=(0,Z.Z)(function*(t,e,n,r,i){t.Ma=(g,_,y)=>{return(E=(0,Z.Z)(function*(S,N,R,U){let re=N.view.ha(R);re.Xi&&(re=yield sv(S.localStore,N.query,!1).then(({documents:Un})=>N.view.ha(Un,re)));const de=U&&U.targetChanges.get(N.targetId),Fe=U&&null!=U.targetMismatches.get(N.targetId),yt=N.view.applyChanges(re,S.isPrimaryClient,de,Fe);return mC(S,N.targetId,yt.da),yt.snapshot}),function D(S,N,R,U){return E.apply(this,arguments)})(t,g,_,y);var E};const s=yield sv(t.localStore,e,!0),o=new BV(e,s.hs),a=o.ha(s.documents),u=Pp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,u);mC(t,n,d.da);const f=new BZ(e,n,o);return t.ga.set(e,f),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),d.snapshot}),oC.apply(this,arguments)}function qZ(t,e){return aC.apply(this,arguments)}function aC(){return aC=(0,Z.Z)(function*(t,e){const n=ue(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!wp(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield hd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),$p(n.remoteStore,r.targetId),vd(n,r.targetId)}).catch(sa))):(vd(n,r.targetId),yield hd(n.localStore,r.targetId,!0))}),aC.apply(this,arguments)}function uC(){return uC=(0,Z.Z)(function*(t,e,n){const r=bC(t);try{const i=yield function(o,a){const u=ue(o),d=Xt.now(),f=a.reduce((y,E)=>y.add(E.key),ze());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=ri(),D=ze();return u.os.getEntries(y,f).next(S=>{E=S,E.forEach((N,R)=>{R.isValidDocument()||(D=D.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(S=>{g=S;const N=[];for(const R of a){const U=E7(R,g.get(R.key).overlayedDocument);null!=U&&N.push(new fo(R.key,U,L1(U.value.mapValue),en.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,N,a)}).next(S=>{_=S;const N=S.applyToLocalDocumentSet(g,D);return u.documentOverlayCache.saveOverlays(y,S.batchId,N)})}).then(()=>({batchId:_.batchId,changes:rF(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Da[o.currentUser.toKey()];d||(d=new Lt(ke)),d=d.insert(a,u),o.Da[o.currentUser.toKey()]=d}(r,i.batchId,n),yield go(r,i.changes),yield pd(r.remoteStore)}catch(i){const s=md(i,"Failed to persist write");n.reject(s)}}),uC.apply(this,arguments)}function $V(t,e){return cC.apply(this,arguments)}function cC(){return cC=(0,Z.Z)(function*(t,e){const n=ue(t);try{const r=yield function hZ(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((f,g)=>{const _=i.get(g);if(!_)return;a.push(n.Qr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(s,f.addedDocuments,g)));let y=_.withSequenceNumber(s.currentSequenceNumber);var D,S,N;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Ln.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(g,y),S=y,N=f,(0===(D=_).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(s,y))});let u=ri(),d=ze();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(IV(s,o,e.documentUpdates).next(f=>{u=f.cs,d=f.ls})),!r.isEqual(De.min())){const f=n.Qr.getLastRemoteSnapshotVersion(s).next(g=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.ns=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Te(o.ma):i.removedDocuments.size>0&&(Te(o.ma),o.ma=!1))}),yield go(n,r,e)}catch(r){yield sa(r)}}),cC.apply(this,arguments)}function HV(t,e,n){const r=ue(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ue(o);u.onlineState=a;let d=!1;u.queries.forEach((f,g)=>{for(const _ of g.Q_)_.U_(a)&&(d=!0)}),d&&nC(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WZ(t,e,n){return lC.apply(this,arguments)}function lC(){return lC=(0,Z.Z)(function*(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Lt(ce.comparator);o=o.insert(s,Zt.newNoDocument(s,De.min()));const a=ze().add(s),u=new Rp(De.min(),new Map,new Lt(ke),o,a);yield $V(r,u),r.wa=r.wa.remove(s),r.Sa.delete(e),_C(r)}else yield hd(r.localStore,e,!1).then(()=>vd(r,e,n)).catch(sa)}),lC.apply(this,arguments)}function ZZ(t,e){return dC.apply(this,arguments)}function dC(){return dC=(0,Z.Z)(function*(t,e){const n=ue(t),r=e.batch.batchId;try{const i=yield function dZ(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const g=d.batch,_=g.keys();let y=M.resolve();return _.forEach(E=>{y=y.next(()=>f.getEntry(u,E)).next(D=>{const S=d.docVersions.get(E);Te(null!==S),D.version.compareTo(S)<0&&(g.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),f.addEntry(D)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ze();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);gC(n,r,null),pC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield go(n,i)}catch(i){yield sa(i)}}),dC.apply(this,arguments)}function KZ(t,e,n){return hC.apply(this,arguments)}function hC(){return hC=(0,Z.Z)(function*(t,e,n){const r=ue(t);try{const i=yield function(o,a){const u=ue(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(Te(null!==g),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);gC(r,e,n),pC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield go(r,i)}catch(i){yield sa(i)}}),hC.apply(this,arguments)}function fC(){return fC=(0,Z.Z)(function*(t,e){const n=ue(t);ya(n.remoteStore)||ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ue(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){const i=md(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),fC.apply(this,arguments)}function pC(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function gC(t,e,n){const r=ue(t);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function vd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||zV(t,r)})}function zV(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&($p(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),_C(t))}function mC(t,e,n){for(const r of n)r instanceof UV?(t.ba.addReference(r.key,e),YZ(t,r)):r instanceof jV?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||zV(t,r.key)):pe()}function YZ(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.ya.add(r),_C(t))}function _C(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new ce(it.fromString(e)),r=t.va.next();t.Sa.set(r,new $Z(n)),t.wa=t.wa.insert(n,r),lv(t.remoteStore,new po(Hr(Jl(n.path)),r,"TargetPurposeLimboResolution",vi._e))}}function go(t,e,n){return yC.apply(this,arguments)}function yC(){return yC=(0,Z.Z)(function*(t,e,n){const r=ue(t),i=[],s=[],o=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{o.push(r.Ma(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const f=w0.Ki(u.targetId,d);s.push(f)}}))}),yield Promise.all(o),r.fa.u_(i),yield(a=(0,Z.Z)(function*(d,f){const g=ue(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>M.forEach(f,y=>M.forEach(y.qi,E=>g.persistence.referenceDelegate.addReference(_,y.targetId,E)).next(()=>M.forEach(y.Qi,E=>g.persistence.referenceDelegate.removeReference(_,y.targetId,E)))))}catch(_){if(!oa(_))throw _;ne("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const E=g.ns.get(y),S=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ns=g.ns.insert(y,S)}}}),function u(d,f){return a.apply(this,arguments)})(r.localStore,s))}),yC.apply(this,arguments)}function JZ(t,e){return vC.apply(this,arguments)}function vC(){return vC=(0,Z.Z)(function*(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=yield yV(n.localStore,e);n.currentUser=e,(s=n).Ca.forEach(a=>{a.forEach(u=>{u.reject(new X(k.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield go(n,r.us)}var s}),vC.apply(this,arguments)}function XZ(t,e){const n=ue(t),r=n.Sa.get(e);if(r&&r.ma)return ze().add(r.key);{let i=ze();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function eK(t,e){return IC.apply(this,arguments)}function IC(){return IC=(0,Z.Z)(function*(t,e){const n=ue(t),r=yield sv(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&mC(n,e.targetId,i.da),i}),IC.apply(this,arguments)}function tK(t,e){return EC.apply(this,arguments)}function EC(){return EC=(0,Z.Z)(function*(t,e){const n=ue(t);return wV(n.localStore,e).then(r=>go(n,r))}),EC.apply(this,arguments)}function nK(t,e,n,r){return wC.apply(this,arguments)}function wC(){return wC=(0,Z.Z)(function*(t,e,n,r){const i=ue(t),s=yield function(a,u){const d=ue(a),f=ue(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.vn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):M.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield pd(i.remoteStore):"acknowledged"===n||"rejected"===n?(gC(i,e,r||null),pC(i,e),u=e,ue(ue(i.localStore).mutationQueue).Mn(u)):pe(),yield go(i,s)):ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),wC.apply(this,arguments)}function TC(){return TC=(0,Z.Z)(function*(t,e){const n=ue(t);if(SC(n),bC(n),!0===e&&!0!==n.Fa){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield qV(n,r.toArray());n.Fa=!0,yield K0(n.remoteStore,!0);for(const s of i)lv(n.remoteStore,s)}else if(!1===e&&!1!==n.Fa){const r=[];let i=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(vd(n,o),hd(n.localStore,o,!0))),$p(n.remoteStore,o)}),yield i,yield qV(n,r),function(o){const a=ue(o);a.Sa.forEach((u,d)=>{$p(a.remoteStore,d)}),a.ba.mr(),a.Sa=new Map,a.wa=new Lt(ce.comparator)}(n),n.Fa=!1,yield K0(n.remoteStore,!1)}}),TC.apply(this,arguments)}function qV(t,e,n){return DC.apply(this,arguments)}function DC(){return DC=(0,Z.Z)(function*(t,e,n){const r=ue(t),i=[],s=[];for(const o of e){let a;const u=r.pa.get(o);if(u&&0!==u.length){a=yield dd(r.localStore,Hr(u[0]));for(const d of u){const f=r.ga.get(d),g=yield eK(r,f);g.snapshot&&s.push(g.snapshot)}}else{const d=yield EV(r.localStore,o);a=yield dd(r.localStore,d),yield sC(r,GV(d),o,!1,a.resumeToken)}i.push(a)}return r.fa.u_(s),i}),DC.apply(this,arguments)}function GV(t){return Q1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function iK(t){return n=ue(t).localStore,ue(ue(n).persistence).Li();var n}function sK(t,e,n,r){return CC.apply(this,arguments)}function CC(){return CC=(0,Z.Z)(function*(t,e,n,r){const i=ue(t);if(i.Fa)return void ne("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield wV(i.localStore,eF(s[0])),a=Rp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Ln.EMPTY_BYTE_STRING);yield go(i,o,a);break}case"rejected":yield hd(i.localStore,e,!0),vd(i,e,r);break;default:pe()}}),CC.apply(this,arguments)}function oK(t,e,n){return AC.apply(this,arguments)}function AC(){return AC=(0,Z.Z)(function*(t,e,n){const r=SC(t);if(r.Fa){for(const i of e){if(r.pa.has(i)){ne("SyncEngine","Adding an already active target "+i);continue}const s=yield EV(r.localStore,i),o=yield dd(r.localStore,s);yield sC(r,GV(s),o.targetId,!1,o.resumeToken),lv(r.remoteStore,o)}for(const i of n)r.pa.has(i)&&(yield hd(r.localStore,i,!1).then(()=>{$p(r.remoteStore,i),vd(r,i)}).catch(sa))}}),AC.apply(this,arguments)}function SC(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$V.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WZ.bind(null,e),e.fa.u_=VZ.bind(null,e.eventManager),e.fa.xa=LZ.bind(null,e.eventManager),e}function bC(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KZ.bind(null,e),e}class Hp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Z.Z)(function*(){n.serializer=jp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return _V(this.persistence,new mV,e.initialUser,this.serializer)}createPersistence(e){return new y0(nv.Hr,this.serializer)}createSharedClientState(e){return new AV}terminate(){var e=this;return(0,Z.Z)(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class RC extends Hp{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,Z.Z)(function*(){yield n().call(r,e),yield r.Na.initialize(r,e),yield bC(r.Na.syncEngine),yield pd(r.Na.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return _V(this.persistence,new mV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new aV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new NW(n,this.persistence);return new xW(e.asyncQueue,r)}createPersistence(e){const n=E0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Dr.withCacheSize(this.cacheSizeBytes):Dr.DEFAULT;return new I0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,bV(),cv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new AV}}class WV extends RC{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,Z.Z)(function*(){yield n().call(r,e);const i=r.Na.syncEngine;r.sharedClientState instanceof P0&&(r.sharedClientState.syncEngine={Zs:nK.bind(null,i),Xs:sK.bind(null,i),eo:oK.bind(null,i),Li:iK.bind(null,i),Ys:tK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,Z.Z)(function*(o){yield function rK(t,e){return TC.apply(this,arguments)}(r.Na.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=bV();if(!P0.D(n))throw new X(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=E0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new P0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Id{initialize(e,n){var r=this;return(0,Z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>HV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=JZ.bind(null,r.syncEngine),yield K0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new FZ}createDatastore(e){const n=jp(e.databaseInfo.databaseId),r=new vZ(e.databaseInfo);return new wZ(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>HV(this.syncEngine,n,0),a=SV.D()?new SV:new mZ,new CZ(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,d,f){const g=new HZ(i,s,o,a,u,d);return f&&(g.Fa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,Z.Z)(function*(){var n,r;yield(r=(0,Z.Z)(function*(s){const o=ue(s);ne("RemoteStore","RemoteStore shutting down."),o.v_.add(5),yield fd(o),o.M_.shutdown(),o.x_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function ZV(t,e=10240){let n=0;return{read:()=>(0,Z.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,Z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class hv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class cK{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Vn,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,Z.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,Z.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,Z.Z)(function*(){const n=yield e.Ka();if(null===n)return null;const r=e.qa.decode(n),i=Number(r);isNaN(i)&&e.$a(`length string (${r}) is not valid number`);const s=yield e.Ua(i);return new UZ(JSON.parse(s),n.length+i)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,Z.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const n=e.Wa();n<0&&e.$a("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ua(e){var n=this;return(0,Z.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ga())&&n.$a("Reached the end of bundle when more is expected.");const r=n.qa.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,Z.Z)(function*(){const n=yield e.ka.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class lK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Z.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new X(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,Z.Z)(function*(o,a){const u=ue(o),d={documents:a.map(y=>Mp(u.serializer,y))},f=yield u.vo("BatchGetDocuments",u.serializer.databaseId,it.emptyPath(),d,a.length),g=new Map;f.forEach(y=>{const E=function M7(t,e){return"found"in e?function(r,i){Te(!!i.found);const s=Fs(r,i.found.name),o=mn(i.found.updateTime),a=i.found.createTime?mn(i.found.createTime):De.min(),u=new cr({mapValue:{fields:i.found.fields}});return Zt.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){Te(!!i.missing),Te(!!i.readTime);const s=Fs(r,i.missing),o=mn(i.readTime);return Zt.newNoDocument(s,o)}(t,e):pe()}(u.serializer,y);g.set(E.key.toString(),E)});const _=[];return a.forEach(y=>{const E=g.get(y.toString());Te(!!E),_.push(E)}),_}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new id(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=ce.fromPath(i);e.mutations.push(new JD(s,e.precondition(s)))}),yield(r=(0,Z.Z)(function*(s,o){const a=ue(s),u={writes:o.map(d=>xp(a.serializer,d))};yield a.So("Commit",a.serializer.databaseId,it.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw pe();n=De.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new X(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(De.min())?en.exists(!1):en.updateTime(n):en.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(De.min()))throw new X(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return en.updateTime(n)}return en.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class dK{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.jo=new x0(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,Z.Z)(function*(){const n=new lK(e.datastore),r=e.Ja(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ya(s)}))}).catch(i=>{e.Ya(i)})}))}Ja(e){try{const n=this.updateFunction(e);return!pp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!yF(n)}return!1}}class hK{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xn.UNAUTHENTICATED,this.clientId=p1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,Z.Z)(function*(a){ne("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=md(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function fv(t,e){return PC.apply(this,arguments)}function PC(){return PC=(0,Z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,Z.Z)(function*(s){r.isEqual(s)||(yield yV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),PC.apply(this,arguments)}function MC(t,e){return xC.apply(this,arguments)}function xC(){return xC=(0,Z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield NC(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>kV(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>kV(e.remoteStore,i)),t._onlineComponents=e}),xC.apply(this,arguments)}function KV(t){return"FirebaseError"===t.name?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function NC(t){return OC.apply(this,arguments)}function OC(){return OC=(0,Z.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!KV(n))throw n;ti("Error using user provided cache. Falling back to memory cache: "+n),yield fv(t,new Hp)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),yield fv(t,new Hp);return t._offlineComponents}),OC.apply(this,arguments)}function pv(t){return kC.apply(this,arguments)}function kC(){return kC=(0,Z.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield MC(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),yield MC(t,new Id))),t._onlineComponents}),kC.apply(this,arguments)}function QV(t){return NC(t).then(e=>e.persistence)}function Ed(t){return NC(t).then(e=>e.localStore)}function YV(t){return pv(t).then(e=>e.remoteStore)}function FC(t){return pv(t).then(e=>e.syncEngine)}function wd(t){return VC.apply(this,arguments)}function VC(){return VC=(0,Z.Z)(function*(t){const e=yield pv(t),n=e.eventManager;return n.onListen=zZ.bind(null,e.syncEngine),n.onUnlisten=qZ.bind(null,e.syncEngine),n}),VC.apply(this,arguments)}function XV(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(s,o,a,u,d){const f=new hv({next:_=>{o.enqueueAndForget(()=>eC(s,g));const y=_.docs.has(a);!y&&_.fromCache?d.reject(new X(k.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&u&&"server"===u.source?d.reject(new X(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new rC(Jl(a.path),f,{includeMetadataChanges:!0,Z_:!0});return J0(s,g)}(yield wd(t),t.asyncQueue,e,n,r)})),r.promise}function eL(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(s,o,a,u,d){const f=new hv({next:_=>{o.enqueueAndForget(()=>eC(s,g)),_.fromCache&&"server"===u.source?d.reject(new X(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new rC(a,f,{includeMetadataChanges:!0,Z_:!0});return J0(s,g)}(yield wd(t),t.asyncQueue,e,n,r)})),r.promise}function tL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const nL=new Map;function LC(t,e,n){if(!n)throw new X(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rL(t,e,n,r){if(!0===e&&!0===r)throw new X(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iL(t){if(!ce.isDocumentKey(t))throw new X(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sL(t){if(ce.isDocumentKey(t))throw new X(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":pe()}function et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gv(t);throw new X(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function oL(t,e){if(e<=0)throw new X(k.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class aL{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new X(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new X(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=tL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new X(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new X(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new IW;switch(r.type){case"firstParty":return new DW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=nL.get(n);r&&(ne("ComponentProvider","Removing Datastore"),nL.delete(n),r.terminate())}(this),Promise.resolve()}}class lr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lr(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class Vs extends lr{constructor(e,n,r){super(e,n,Jl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ce(e))}withConverter(e){return new Vs(this.firestore,e,this._path)}}function cL(t,e,...n){if(t=(0,_t.m9)(t),LC("collection","path",e),t instanceof zp){const r=it.fromString(e,...n);return sL(r),new Vs(t,null,r)}{if(!(t instanceof Kt||t instanceof Vs))throw new X(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return sL(r),new Vs(t.firestore,null,r)}}function mv(t,e,...n){if(t=(0,_t.m9)(t),1===arguments.length&&(e=p1.newId()),LC("doc","path",e),t instanceof zp){const r=it.fromString(e,...n);return iL(r),new Kt(t,null,new ce(r))}{if(!(t instanceof Kt||t instanceof Vs))throw new X(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return iL(r),new Kt(t.firestore,t instanceof Vs?t.converter:null,new ce(r))}}function lL(t,e){return t=(0,_t.m9)(t),e=(0,_t.m9)(e),(t instanceof Kt||t instanceof Vs)&&(e instanceof Kt||e instanceof Vs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function UC(t,e){return t=(0,_t.m9)(t),e=(0,_t.m9)(e),t instanceof lr&&e instanceof lr&&t.firestore===e.firestore&&wp(t._query,e._query)&&t.converter===e.converter}class DK{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new x0(this,"async_queue_retry"),this._u=()=>{const n=cv();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=cv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=cv();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Vn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,Z.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(n){if(!oa(n))throw n;ne("AsyncQueue","Operation failed with retryable error: "+n)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,gn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const i=Y0.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&pe()}verifyOperationInProgress(){}hu(){var e=this;return(0,Z.Z)(function*(){let n;do{n=e.Xa,yield n}while(n!==e.Xa)})()}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function jC(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class CK{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ut extends zp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new DK,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||dL(this),this._firestoreClient.terminate()}}function ln(t){return t._firestoreClient||dL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dL(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new e7(t._databaseId,u,t._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,tL(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;t._firestoreClient=new hK(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function hL(t,e,n){const r=new Vn;return t.asyncQueue.enqueue((0,Z.Z)(function*(){try{yield fv(t,n),yield MC(t,e),r.resolve()}catch(i){const s=i;if(!KV(s))throw s;ti("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function fL(t){if(t._initialized||t._terminated)throw new X(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ls{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ls(Ln.fromBase64String(e))}catch(n){throw new X(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ls(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class mo{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new X(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yu{constructor(e){this._methodName=e}}class _v{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}const FK=/^__.*__$/;class VK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new rd(e,this.data,n,this.fieldTransforms)}}class pL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class yv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new yv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Ev(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(gL(this.du)&&FK.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class LK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jp(e)}Su(e,n,r,i=!1){return new yv({du:e,methodName:n,wu:r,path:Wt.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ju(t){const e=t._freezeSettings(),n=jp(t._databaseId);return new LK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vv(t,e,n,r,i,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,i);WC("Data must be an object, but it was:",o,r);const a=yL(r,o);let u,d;if(s.merge)u=new ni(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const _=Wp(e,g,n);if(!o.contains(_))throw new X(k.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);IL(f,_)||f.push(_)}u=new ni(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new VK(new cr(a),u,d)}class Gp extends Yu{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gp}}function mL(t,e,n){return new yv({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class BC extends Yu{_toFieldTransform(e){return new Ap(e.path,new td)}isEqual(e){return e instanceof BC}}class $C extends Yu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=mL(this,e,!0),r=this.bu.map(s=>Xu(s,n)),i=new $u(r);return new Ap(e.path,i)}isEqual(e){return e instanceof $C&&(0,_t.vZ)(this.bu,e.bu)}}class HC extends Yu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=mL(this,e,!0),r=this.bu.map(s=>Xu(s,n)),i=new Hu(r);return new Ap(e.path,i)}isEqual(e){return e instanceof HC&&(0,_t.vZ)(this.bu,e.bu)}}class zC extends Yu{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){const n=new nd(e.serializer,aF(e.serializer,this.Du));return new Ap(e.path,n)}isEqual(e){return e instanceof zC&&this.Du===e.Du}}function qC(t,e,n,r){const i=t.Su(1,e,n);WC("Data must be an object, but it was:",i,r);const s=[],o=cr.empty();aa(r,(u,d)=>{const f=Iv(e,u,n);d=(0,_t.m9)(d);const g=i.fu(f);if(d instanceof Gp)s.push(f);else{const _=Xu(d,g);null!=_&&(s.push(f),o.set(f,_))}});const a=new ni(s);return new pL(o,a,i.fieldTransforms)}function GC(t,e,n,r,i,s){const o=t.Su(1,e,n),a=[Wp(e,r,n)],u=[i];if(s.length%2!=0)throw new X(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(Wp(e,s[_])),u.push(s[_+1]);const d=[],f=cr.empty();for(let _=a.length-1;_>=0;--_)if(!IL(d,a[_])){const y=a[_];let E=u[_];E=(0,_t.m9)(E);const D=o.fu(y);if(E instanceof Gp)d.push(y);else{const S=Xu(E,D);null!=S&&(d.push(y),f.set(y,S))}}const g=new ni(d);return new pL(f,g,o.fieldTransforms)}function _L(t,e,n,r=!1){return Xu(n,t.Su(r?4:3,e))}function Xu(t,e){if(vL(t=(0,_t.m9)(t)))return WC("Unsupported field value:",e,t),yL(t,e);if(t instanceof Yu)return function(r,i){if(!gL(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Xu(a,i.gu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,_t.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return aF(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Xt.fromDate(r);return{timestampValue:sd(i.serializer,s)}}if(r instanceof Xt){const s=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sd(i.serializer,s)}}if(r instanceof _v)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ls)return{bytesValue:bF(i.serializer,r._byteString)};if(r instanceof Kt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:s0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${gv(r)}`)}(t,e)}function yL(t,e){const n={};return R1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):aa(t,(r,i)=>{const s=Xu(i,e.Ru(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function vL(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xt||t instanceof _v||t instanceof Ls||t instanceof Kt||t instanceof Yu)}function WC(t,e,n){if(!vL(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=gv(n);throw e.pu("an object"===r?t+" a custom object":t+" "+r)}var i}function Wp(t,e,n){if((e=(0,_t.m9)(e))instanceof mo)return e._internalPath;if("string"==typeof e)return Iv(t,e);throw Ev("Field path arguments must be of type string or ",t,!1,void 0,n)}const UK=new RegExp("[~\\*/\\[\\]]");function Iv(t,e,n){if(e.search(UK)>=0)throw Ev(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mo(...e.split("."))._internalPath}catch{throw Ev(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ev(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new X(k.INVALID_ARGUMENT,a+t+u)}function IL(t,e){return t.some(n=>n.isEqual(e))}class Zp{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class jK extends Zp{data(){return super.data()}}function wv(t,e){return"string"==typeof e?Iv(t,e):e instanceof mo?e._internalPath:e._delegate._internalPath}function EL(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new X(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZC{}class Kp extends ZC{}function Ia(t,e,...n){let r=[];e instanceof ZC&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Td).length,a=s.filter(u=>u instanceof Qp).length;if(o>1||o>0&&a>0)throw new X(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qp extends Kp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qp(e,n,r)}_apply(e){const n=this._parse(e);return CL(e._query,n),new lr(e.firestore,e.converter,QD(e._query,n))}_parse(e){const n=Ju(e.firestore);return function(s,o,a,u,d,f,g){let _;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new X(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){DL(g,f);const y=[];for(const E of g)y.push(TL(u,s,E));_={arrayValue:{values:y}}}else _=TL(u,s,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||DL(g,f),_=_L(a,"where",g,"in"===f||"not-in"===f);return st.create(d,f,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Td extends ZC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Td(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Tt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)CL(o,u),o=QD(o,u)}(e._query,n),new lr(e.firestore,e.converter,QD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class KC extends Kp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new KC(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new X(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new X(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ip(s,o)}(e._query,this._field,this._direction);return new lr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new lo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class Tv extends Kp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Tv(e,n,r)}_apply(e){return new lr(e.firestore,e.converter,Hy(e._query,this._limit,this._limitType))}}class Dv extends Kp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Dv(e,n,r)}_apply(e){const n=wL(e,this.type,this._docOrFields,this._inclusive);return new lr(e.firestore,e.converter,(s=n,new lo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Cv extends Kp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Cv(e,n,r)}_apply(e){const n=wL(e,this.type,this._docOrFields,this._inclusive);return new lr(e.firestore,e.converter,(s=n,new lo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function wL(t,e,n,r){if(n[0]=(0,_t.m9)(n[0]),n[0]instanceof Zp)return function(s,o,a,u,d){if(!u)throw new X(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of Xl(s))if(g.field.isKeyField())f.push(ju(o,u.key));else{const _=u.data.field(g.field);if(Fy(_))throw new X(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=g.field.canonicalString();throw new X(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(_)}return new fa(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Ju(t.firestore);return function(o,a,u,d,f,g){const _=o.explicitOrderBy;if(f.length>_.length)throw new X(k.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<f.length;E++){const D=f[E];if(_[E].field.isKeyField()){if("string"!=typeof D)throw new X(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof D}`);if(!KD(o)&&-1!==D.indexOf("/"))throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${D}' contains a slash.`);const S=o.path.child(it.fromString(D));if(!ce.isDocumentKey(S))throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const N=new ce(S);y.push(ju(a,N))}else{const S=_L(u,d,D);y.push(S)}}return new fa(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function TL(t,e,n){if("string"==typeof(n=(0,_t.m9)(n))){if(""===n)throw new X(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KD(e)&&-1!==n.indexOf("/"))throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!ce.isDocumentKey(r))throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ju(t,new ce(r))}if(n instanceof Kt)return ju(t,n._key);throw new X(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gv(n)}.`)}function DL(t,e){if(!Array.isArray(t)||0===t.length)throw new X(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CL(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new X(k.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QC{convertValue(e,n="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return aa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new _v(cn(e.latitude),cn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vy(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mp(e));default:return null}}convertTimestamp(e){const n=ua(e);return new Xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Te(UF(r));const i=new ca(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(n)||gn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Av(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class KK extends QC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ls(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}class ec{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends Zp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yp extends _o{data(e={}){return super.data(e)}}class Ea{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ec(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yp(this._firestore,this._userDataWriter,r.key,r,new ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Yp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ec(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Yp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ec(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:YK(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}function SL(t,e){return t instanceof _o&&e instanceof _o?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ea&&e instanceof Ea&&t._firestore===e._firestore&&UC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class wa extends QC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ls(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function bL(t,e,n){t=et(t,Kt);const r=et(t.firestore,Ut),i=Av(t.converter,e,n);return Dd(r,[vv(Ju(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,en.none())])}function RL(t,e,n,...r){t=et(t,Kt);const i=et(t.firestore,Ut),s=Ju(i);let o;return o="string"==typeof(e=(0,_t.m9)(e))||e instanceof mo?GC(s,"updateDoc",t._key,e,n,r):qC(s,"updateDoc",t._key,e),Dd(i,[o.toMutation(t._key,en.exists(!0))])}function PL(t,...e){var n,r,i;t=(0,_t.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||jC(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(jC(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,f;if(t instanceof Kt)d=et(t.firestore,Ut),f=Jl(t._key.path),u={next:g=>{e[o]&&e[o](YC(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=et(t,lr);d=et(g.firestore,Ut),f=g._query;const _=new wa(d);u={next:y=>{e[o]&&e[o](new Ea(d,_,g,y))},error:e[o+1],complete:e[o+2]},EL(t._query)}return function(_,y,E,D){const S=new hv(D),N=new rC(y,S,E);return _.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return J0(yield wd(_),N)})),()=>{S.La(),_.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return eC(yield wd(_),N)}))}}(ln(d),f,a,u)}function Dd(t,e){return function(r,i){const s=new Vn;return r.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function GZ(t,e,n){return uC.apply(this,arguments)}(yield FC(r),i,s)})),s.promise}(ln(t),e)}function YC(t,e,n){const r=n.docs.get(e._key),i=new wa(t);return new _o(t,i,e._key,r,new ec(n.hasPendingWrites,n.fromCache),e.converter)}const gQ={maxAttempts:5};class ML{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ju(e)}set(e,n,r){this._verifyNotCommitted();const i=Ta(e,this._firestore),s=Av(i.converter,n,r),o=vv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,en.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ta(e,this._firestore);let o;return o="string"==typeof(n=(0,_t.m9)(n))||n instanceof mo?GC(this._dataReader,"WriteBatch.update",s._key,n,r,i):qC(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,en.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ta(e,this._firestore);return this._mutations=this._mutations.concat(new id(n._key,en.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ta(t,e){if((t=(0,_t.m9)(t)).firestore!==e)throw new X(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class mQ extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ju(n)}get(n){const r=Ta(n,this._firestore),i=new KK(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return pe();const o=s[0];if(o.isFoundDocument())return new Zp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Zp(this._firestore,i,r._key,null,r.converter);throw pe()})}set(n,r,i){const s=Ta(n,this._firestore),o=Av(s.converter,r,i),a=vv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ta(n,this._firestore);let a;return a="string"==typeof(r=(0,_t.m9)(r))||r instanceof mo?GC(this._dataReader,"Transaction.update",o._key,r,i,s):qC(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ta(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ta(e,this._firestore),r=new wa(this._firestore);return super.get(e).then(i=>new _o(this._firestore,r,n._key,i._document,new ec(!1,!1),n.converter))}}function XC(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new X("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function kL(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function FL(){if(!function JW(){return typeof atob<"u"}())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){zl=Ol.SDK_VERSION,(0,Ol._registerComponent)(new WO.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ut(new wW(r.getProvider("auth-internal")),new CW(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ca(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Ol.registerVersion)(d1,"4.4.1",e),(0,Ol.registerVersion)(d1,"4.4.1","esm2017")}();class Jp{constructor(e){this._delegate=e}static fromBase64String(e){return FL(),new Jp(Ls.fromBase64String(e))}static fromUint8Array(e){return kL(),new Jp(Ls.fromUint8Array(e))}toBase64(){return FL(),this._delegate.toBase64()}toUint8Array(){return kL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eA(t){return function AQ(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class SQ{enableIndexedDbPersistence(e,n){return function SK(t,e){fL(t=et(t,Ut));const n=ln(t);if(n._uninitializedComponentsProvider)throw new X(k.FAILED_PRECONDITION,"SDK cache is already specified.");ti("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Id;return hL(n,i,new RC(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function bK(t){fL(t=et(t,Ut));const e=ln(t);if(e._uninitializedComponentsProvider)throw new X(k.FAILED_PRECONDITION,"SDK cache is already specified.");ti("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Id;return hL(e,r,new WV(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function RK(t){if(t._initialized&&!t._terminated)throw new X(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{yield(n=(0,Z.Z)(function*(i){if(!ji.D())return Promise.resolve();const s=i+"main";yield ji.delete(s)}),function r(i){return n.apply(this,arguments)})(E0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class VL{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ca||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ti("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function uL(t,e,n,r={}){var i;const s=(t=et(t,zp))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Xn.MOCK_USER;else{a=(0,_t.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new X(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Xn(d)}t._authCredentials=new EW(new h1(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function MK(t){return function fK(t){return t.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield QV(t),n=yield YV(t);return e.setNetworkEnabled(!0),function(i){const s=ue(i);return s.v_.delete(0),Bp(s)}(n)}))}(ln(t=et(t,Ut)))}(this._delegate)}disableNetwork(){return function xK(t){return function pK(t){return t.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield QV(t),n=yield YV(t);return e.setNetworkEnabled(!1),(r=(0,Z.Z)(function*(s){const o=ue(s);o.v_.add(0),yield fd(o),o.x_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(ln(t=et(t,Ut)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function PK(t){return function(n){const r=new Vn;return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function QZ(t,e){return fC.apply(this,arguments)}(yield FC(n),r)})),r.promise}(ln(t=et(t,Ut)))}(this._delegate)}onSnapshotsInSync(e){return function oQ(t,e){return function _K(t,e){const n=new hv(e);return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield wd(t),s=n,ue(i).K_.add(s),void s.next();var i,s})),()=>{n.La(),t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield wd(t),s=n,void ue(i).K_.delete(s);var i,s}))}}(ln(t=et(t,Ut)),jC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cd(this,cL(this._delegate,e))}catch(n){throw zr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Bi(this,mv(this._delegate,e))}catch(n){throw zr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qr(this,function TK(t,e){if(t=et(t,zp),LC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(k.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new lr(t,null,(r=e,new lo(it.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw zr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _Q(t,e,n){t=et(t,Ut);const r=Object.assign(Object.assign({},gQ),n);return function(s){if(s.maxAttempts<1)throw new X(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Vn;return s.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){const d=yield function JV(t){return pv(t).then(e=>e.datastore)}(s);new dK(s.asyncQueue,d,a,o,u).ja()})),u.promise}(ln(t),i=>e(new mQ(t,i)),r)}(this._delegate,n=>e(new LL(this,n)))}batch(){return ln(this._delegate),new UL(new ML(this._delegate,e=>Dd(this._delegate,e)))}loadBundle(e){return function NK(t,e){const n=ln(t=et(t,Ut)),r=new CK;return function yK(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?IF().encode(o):o,f=function(f,g){if(f instanceof Uint8Array)return ZV(f,g);if(f instanceof ArrayBuffer)return ZV(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new cK(f,a);var f}(n,jp(e));t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){!function aK(t,e,n){const r=ue(t);var i;(i=(0,Z.Z)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(E,D){const S=ue(E),N=mn(D.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",R=>S.$r.getBundleMetadata(R,D.id)).then(R=>!!R&&R.createTime.compareTo(N)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(LV(d));const f=new jZ(d,o.localStore,a.serializer);let g=yield a.Oa();for(;g;){const y=yield f.na(g);y&&u._updateProgress(y),g=yield a.Oa()}const _=yield f.complete();return yield go(o,_.sa,void 0),yield function(E,D){const S=ue(E);return S.persistence.runTransaction("Save bundle","readwrite",N=>S.$r.saveBundleMetadata(N,D))}(o.localStore,d),u._completeWith(_.progress),Promise.resolve(_.ia)}catch(d){return ti("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield FC(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function OK(t,e){return function vK(t,e){return t.asyncQueue.enqueue((0,Z.Z)(function*(){return function(r,i){const s=ue(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Ed(t),e)}))}(ln(t=et(t,Ut)),e).then(n=>n?new lr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new qr(this,n):null)}}class bv extends QC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jp(new Ls(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Bi.forKey(n,this.firestore,null)}}class LL{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new bv(e)}get(e){const n=nc(e);return this._delegate.get(n).then(r=>new Xp(this._firestore,new _o(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=nc(e);return r?(XC("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=nc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=nc(e);return this._delegate.delete(n),this}}class UL{constructor(e){this._delegate=e}set(e,n,r){const i=nc(e);return r?(XC("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=nc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=nc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class tc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Yp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eg(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=tc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new tc(e,new bv(e),n),i.set(n,s)),s}}tc.INSTANCES=new WeakMap;class Bi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new bv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bi(n,new Kt(n._delegate,r,new ce(e)))}static forKey(e,n,r){return new Bi(n,new Kt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cd(this.firestore,cL(this._delegate,e))}catch(n){throw zr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,_t.m9)(e))instanceof Kt&&lL(this._delegate,e)}set(e,n){n=XC("DocumentReference.set",n);try{return n?bL(this._delegate,e,n):bL(this._delegate,e)}catch(r){throw zr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?RL(this._delegate,e):RL(this._delegate,e,n,...r)}catch(i){throw zr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function iQ(t){return Dd(et(t.firestore,Ut),[new id(t._key,en.none())])}(this._delegate)}onSnapshot(...e){const n=jL(e),r=BL(e,i=>new Xp(this.firestore,new _o(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return PL(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function XK(t){t=et(t,Kt);const e=et(t.firestore,Ut),n=ln(e),r=new wa(e);return function gK(t,e){const n=new Vn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(r=(0,Z.Z)(function*(s,o,a){try{const u=yield function(f,g){const _=ue(f);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new X(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=md(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Ed(t),e,n);var r})),n.promise}(n,t._key).then(i=>new _o(e,r,t._key,i,new ec(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function eQ(t){t=et(t,Kt);const e=et(t.firestore,Ut);return XV(ln(e),t._key,{source:"server"}).then(n=>YC(e,t,n))}(this._delegate):function JK(t){t=et(t,Kt);const e=et(t.firestore,Ut);return XV(ln(e),t._key).then(n=>YC(e,t,n))}(this._delegate),n.then(r=>new Xp(this.firestore,new _o(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Bi(this.firestore,this._delegate.withConverter(e?tc.getInstance(this.firestore,e):null))}}function zr(t,e,n){return t.message=t.message.replace(e,n),t}function jL(t){for(const e of t)if("object"==typeof e&&!eA(e))return e;return{}}function BL(t,e){var n,r;let i;return i=eA(t[0])?t[0]:eA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Xp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Bi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return SL(this._delegate,e._delegate)}}class eg extends Xp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function vW(t,e){t||pe()}(void 0!==n),n}}class qr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new bv(e)}where(e,n,r){try{return new qr(this.firestore,Ia(this._delegate,function BK(t,e,n){const r=e,i=wv("where",t);return Qp._create(i,r,n)}(e,n,r)))}catch(i){throw zr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new qr(this.firestore,Ia(this._delegate,function $K(t,e="asc"){const n=e,r=wv("orderBy",t);return KC._create(r,n)}(e,n)))}catch(r){throw zr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qr(this.firestore,Ia(this._delegate,function HK(t){return oL("limit",t),Tv._create("limit",t,"F")}(e)))}catch(n){throw zr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new qr(this.firestore,Ia(this._delegate,function zK(t){return oL("limitToLast",t),Tv._create("limitToLast",t,"L")}(e)))}catch(n){throw zr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qr(this.firestore,Ia(this._delegate,function qK(...t){return Dv._create("startAt",t,!0)}(...e)))}catch(n){throw zr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qr(this.firestore,Ia(this._delegate,function GK(...t){return Dv._create("startAfter",t,!1)}(...e)))}catch(n){throw zr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qr(this.firestore,Ia(this._delegate,function WK(...t){return Cv._create("endBefore",t,!1)}(...e)))}catch(n){throw zr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qr(this.firestore,Ia(this._delegate,function ZK(...t){return Cv._create("endAt",t,!0)}(...e)))}catch(n){throw zr(n,"endAt()","Query.endAt()")}}isEqual(e){return UC(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function nQ(t){t=et(t,lr);const e=et(t.firestore,Ut),n=ln(e),r=new wa(e);return function mK(t,e){const n=new Vn;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(r=(0,Z.Z)(function*(s,o,a){try{const u=yield sv(s,o,!0),d=new BV(o,u.hs),f=d.ha(u.documents),g=d.applyChanges(f,!1);a.resolve(g.snapshot)}catch(u){const d=md(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Ed(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Ea(e,r,t,i))}(this._delegate):"server"===e?.source?function rQ(t){t=et(t,lr);const e=et(t.firestore,Ut),n=ln(e),r=new wa(e);return eL(n,t._query,{source:"server"}).then(i=>new Ea(e,r,t,i))}(this._delegate):function tQ(t){t=et(t,lr);const e=et(t.firestore,Ut),n=ln(e),r=new wa(e);return EL(t._query),eL(n,t._query).then(i=>new Ea(e,r,t,i))}(this._delegate),n.then(r=>new tA(this.firestore,new Ea(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=jL(e),r=BL(e,i=>new tA(this.firestore,new Ea(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return PL(this._delegate,n,r)}withConverter(e){return new qr(this.firestore,this._delegate.withConverter(e?tc.getInstance(this.firestore,e):null))}}class RQ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new eg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new qr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new RQ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new eg(this._firestore,r))})}isEqual(e){return SL(this._delegate,e._delegate)}}class Cd extends qr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bi(this.firestore,e):null}doc(e){try{return new Bi(this.firestore,void 0===e?mv(this._delegate):mv(this._delegate,e))}catch(n){throw zr(n,"doc()","CollectionReference.doc()")}}add(e){return function sQ(t,e){const n=et(t.firestore,Ut),r=mv(t),i=Av(t.converter,e);return Dd(n,[vv(Ju(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Bi(this.firestore,n))}isEqual(e){return lL(this._delegate,e._delegate)}withConverter(e){return new Cd(this.firestore,this._delegate.withConverter(e?tc.getInstance(this.firestore,e):null))}}function nc(t){return et(t,Kt)}class nA{constructor(...e){this._delegate=new mo(...e)}static documentId(){return new nA(Wt.keyField().canonicalString())}isEqual(e){return(e=(0,_t.m9)(e))instanceof mo&&this._delegate._internalPath.isEqual(e._internalPath)}}class rc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function vQ(){return new BC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new rc(e)}static delete(){const e=function yQ(){return new Gp("deleteField")}();return e._methodName="FieldValue.delete",new rc(e)}static arrayUnion(...e){const n=function IQ(...t){return new $C("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new rc(n)}static arrayRemove(...e){const n=function EQ(...t){return new HC("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new rc(n)}static increment(e){const n=function wQ(t){return new zC("increment",t)}(e);return n._methodName="FieldValue.increment",new rc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const PQ={Firestore:VL,GeoPoint:_v,Timestamp:Xt,Blob:Jp,Transaction:LL,WriteBatch:UL,DocumentReference:Bi,DocumentSnapshot:Xp,Query:qr,QueryDocumentSnapshot:eg,QuerySnapshot:tA,CollectionReference:Cd,FieldPath:nA,FieldValue:rc,setLogLevel:function bQ(t){!function yW(t){ia.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function $L(t,e){return function NQ(t,e=RO){return new Qe(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function rA(t,e){return $L(t,e).pipe(ie(n=>({payload:n,type:"query"})))}!function xQ(t){(function MQ(t,e){t.INTERNAL.registerComponent(new WO.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},PQ)))})(t,(e,n)=>new VL(e,n,new SQ)),t.registerVersion("@firebase/firestore-compat","0.3.24")}(xu.Z);class HL{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=WL(r,n);return new GL(i,s,this.afs)}snapshotChanges(){return function OQ(t,e){return $L(t,e).pipe(j_(void 0),ZT(),ie(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(mi)}valueChanges(e={}){return this.snapshotChanges().pipe(ie(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return F(this.ref.get(e)).pipe(mi)}}function Rv(t,e){return rA(t,e).pipe(j_(void 0),ZT(),ie(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function zL(t,e,n){return Rv(t,n).pipe(Sf((r,i)=>function kQ(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function FQ(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return iA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return iA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Nt(),ie(r=>r.map(i=>({type:i.type,payload:i}))))}function iA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function qL(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class GL{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Rv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ie(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(j_(void 0),ZT(),pi(([r,i])=>i.length>0||!r),ie(([,r])=>r),mi)}auditTrail(e){return this.stateChanges(e).pipe(Sf((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=qL(e);return zL(this.query,n,this.afs.schedulers.outsideAngular).pipe(mi)}valueChanges(e={}){return rA(this.query,this.afs.schedulers.outsideAngular).pipe(ie(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),mi)}get(e){return F(this.query.get(e)).pipe(mi)}add(e){return this.ref.add(e)}doc(e){return new HL(this.ref.doc(e),this.afs)}}class VQ{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Rv(this.query,this.afs.schedulers.outsideAngular).pipe(ie(n=>n.filter(r=>e.indexOf(r.type)>-1)),pi(n=>n.length>0),mi):Rv(this.query,this.afs.schedulers.outsideAngular).pipe(mi)}auditTrail(e){return this.stateChanges(e).pipe(Sf((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=qL(e);return zL(this.query,n,this.afs.schedulers.outsideAngular).pipe(mi)}valueChanges(e={}){return rA(this.query,this.afs.schedulers.outsideAngular).pipe(ie(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),mi)}get(e){return F(this.query.get(e)).pipe(mi)}}const LQ=new te("angularfire2.enableFirestorePersistence"),UQ=new te("angularfire2.firestore.persistenceSettings"),jQ=new te("angularfire2.firestore.settings"),BQ=new te("angularfire2.firestore.use-emulator");function WL(t,e=(n=>n)){return{query:e(t),ref:t}}let $Q=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,d,f,g,_,y,E,D,S,N,R){this.schedulers=u;const U=WT(n,a,r),re=f;g&&qO(U,a,_,E,D,S,y,N),[this.firestore,this.persistenceEnabled$]=kO(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{const de=a.runOutsideAngular(()=>U.firestore());if(s&&de.settings(s),re&&de.useEmulator(...re),i&&!k_(o)){const Fe=()=>{try{return F(de.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(yt){return typeof console<"u"&&console.warn(yt),z(!1)}};return[de,a.runOutsideAngular(Fe)]}return[de,z(!1)]},[s,re,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=WL(i,r),a=this.schedulers.ngZone.run(()=>s);return new GL(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new VQ(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new HL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(G(sy),G(oy,8),G(LQ,8),G(jQ,8),G(Ys),G(It),G(NO),G(UQ,8),G(BQ,8),G(GO,8),G(UO,8),G(jO,8),G(BO,8),G($O,8),G(HO,8),G(zO,8),G(MO,8))};static \u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();const HQ=[[["","header",""]],"*",[["","footer",""]]],zQ=["[header]","*","[footer]"];let qQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-portal-layout"]],ngContentSelectors:zQ,decls:7,vars:0,consts:[[1,"portal-layout"],[1,"portal-layout__head"],[1,"portal-layout__body"],[1,"portal-layout__footer"]],template:function(r,i){1&r&&(function MR(t){const e=J()[nn][Zn];if(!e.projection){const r=e.projection=du(t?t.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=t?f$(s,t):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}(HQ),pt(0,"div",0)(1,"div",1),u_(2),nt(),pt(3,"main",2),u_(4,1),nt(),pt(5,"footer",3),u_(6,2),nt()())}})}return t})(),GQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-header"]],decls:2,vars:0,template:function(r,i){1&r&&(pt(0,"p"),rt(1,"header works!"),nt())}})}return t})(),WQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-footer"]],decls:2,vars:0,template:function(r,i){1&r&&(pt(0,"p"),rt(1,"footer works!"),nt())}})}return t})();function ZQ(t,e){if(1&t&&(pt(0,"li",3),rt(1),nt()),2&t){const n=e.$implicit;ws(1),_l(" ",null==n?null:n.listID," ")}}let KQ=(()=>{class t{constructor(n){this.title="open-lib",this.items=n.collection("items").valueChanges(),console.log(this.items),console.log(this.items)}static#e=this.\u0275fac=function(r){return new(r||t)(Ce($Q))};static#t=this.\u0275cmp=Gn({type:t,selectors:[["app-root"]],decls:14,vars:3,consts:[["header",""],["footer",""],["class","text",4,"ngFor","ngForOf"],[1,"text"]],template:function(r,i){1&r&&(pt(0,"app-portal-layout"),vu(1,0),qt(2,"app-header"),Iu(),vu(3),qt(4,"router-outlet"),Iu(),vu(5,1),qt(6,"app-footer"),Iu(),nt(),rt(7," \u6e2c\u8a66\u81ea\u52d5\u90e8\u7f72"),qt(8,"br"),rt(9,"\n\u6e2c\u8a66\u81ea\u52d5\u90e8\u7f72"),qt(10,"br"),pt(11,"ul"),WE(12,ZQ,2,1,"li",2),function dM(t,e){const n=tt();let r;const i=t+Ze;n.firstCreatePass?(r=function Tz(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Po(r.type)),a=zn(Ce);try{const u=Vc(!1),d=s();return Vc(u),function n$(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,J(),i,d),d}finally{zn(a)}}(13,"async"),nt()),2&r&&(ws(12),lf("ngForOf",hM(13,1,i.items)))},dependencies:[iT,FT,qQ,GQ,WQ,Qx]})}return t})();class eY extends Error{constructor(e,n){super(function tY(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function XL(t,e){const n=!e?.manualCleanup;n&&!e?.injector&&function Zm(t){if(!dg()&&!function Od(){return To}())throw new W(-203,!1)}();const r=n?e?.injector?.get(nl)??oe(nl):null;let i;i=function Ug(t,e){const n=new rh(t,e?.equal??Fg);return bi(n,n.signal.bind(n),{set:n.set.bind(n),update:n.update.bind(n),mutate:n.mutate.bind(n),asReadonly:n.asReadonly.bind(n)})}(e?.requireSync?{kind:0}:{kind:1,value:e?.initialValue});const s=t.subscribe({next:o=>i.set({kind:1,value:o}),error:o=>i.set({kind:2,error:o})});return r?.onDestroy(s.unsubscribe.bind(s)),Vg(()=>{const o=i();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new eY(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}globalThis;const tg={};function cA(t,e){return Object.defineProperty(e,"type",{value:t,writable:!1})}const t2="@ngrx/store/init";let ic=(()=>{class t extends ${constructor(){super({type:t2})}next(n){if("function"==typeof n)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof n>"u")throw new TypeError("Actions must be objects");if(typeof n.type>"u")throw new TypeError("Actions must have a type property");super.next(n)}complete(){}ngOnDestroy(){super.complete()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();const hY=[ic],dA=new te("@ngrx/store Internal Root Guard"),n2=new te("@ngrx/store Internal Initial State"),hA=new te("@ngrx/store Initial State"),r2=new te("@ngrx/store Reducer Factory"),i2=new te("@ngrx/store Internal Reducer Factory Provider"),s2=new te("@ngrx/store Initial Reducers"),fA=new te("@ngrx/store Internal Initial Reducers"),o2=new te("@ngrx/store Store Features"),a2=new te("@ngrx/store Internal Store Reducers"),pA=new te("@ngrx/store Internal Feature Reducers"),u2=new te("@ngrx/store Internal Feature Configs"),gA=new te("@ngrx/store Internal Store Features"),c2=new te("@ngrx/store Internal Feature Reducers Token"),mA=new te("@ngrx/store Feature Reducers"),l2=new te("@ngrx/store User Provided Meta Reducers"),Nv=new te("@ngrx/store Meta Reducers"),d2=new te("@ngrx/store Internal Resolved Meta Reducers"),h2=new te("@ngrx/store User Runtime Checks Config"),f2=new te("@ngrx/store Internal User Runtime Checks Config"),ng=new te("@ngrx/store Internal Runtime Checks"),rg=new te("@ngrx/store Check if Action types are unique");function yA(t,e={}){const n=Object.keys(t),r={};for(let s=0;s<n.length;s++){const o=n[s];"function"==typeof t[o]&&(r[o]=t[o])}const i=Object.keys(r);return function(o,a){o=void 0===o?e:o;let u=!1;const d={};for(let f=0;f<i.length;f++){const g=i[f],y=o[g],E=(0,r[g])(y,a);d[g]=E,u=u||E!==y}return u?d:o}}function g2(...t){return function(e){if(0===t.length)return e;const n=t[t.length-1];return t.slice(0,-1).reduceRight((i,s)=>s(i),n(e))}}function m2(t,e){return Array.isArray(e)&&e.length>0&&(t=g2.apply(null,[...e,t])),(n,r)=>{const i=t(n);return(s,o)=>i(s=void 0===s?r:s,o)}}new te("@ngrx/store Root Store Provider"),new te("@ngrx/store Feature State Provider");class Ov extends Qe{}class _2 extends ic{}let ig=(()=>{class t extends ${get currentReducers(){return this.reducers}constructor(n,r,i,s){super(s(i,r)),this.dispatcher=n,this.initialState=r,this.reducers=i,this.reducerFactory=s}addFeature(n){this.addFeatures([n])}addFeatures(n){const r=n.reduce((i,{reducers:s,reducerFactory:o,metaReducers:a,initialState:u,key:d})=>{const f="function"==typeof s?function pY(t){const e=Array.isArray(t)&&t.length>0?g2(...t):n=>n;return(n,r)=>(n=e(n),(i,s)=>n(i=void 0===i?r:i,s))}(a)(s,u):m2(o,a)(s,u);return i[d]=f,i},{});this.addReducers(r)}removeFeature(n){this.removeFeatures([n])}removeFeatures(n){this.removeReducers(n.map(r=>r.key))}addReducer(n,r){this.addReducers({[n]:r})}addReducers(n){this.reducers={...this.reducers,...n},this.updateReducers(Object.keys(n))}removeReducer(n){this.removeReducers([n])}removeReducers(n){n.forEach(r=>{this.reducers=function fY(t,e){return Object.keys(t).filter(n=>n!==e).reduce((n,r)=>Object.assign(n,{[r]:t[r]}),{})}(this.reducers,r)}),this.updateReducers(n)}updateReducers(n){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:n})}ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(r){return new(r||t)(G(_2),G(hA),G(s2),G(r2))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();const mY=[ig,{provide:Ov,useExisting:ig},{provide:_2,useExisting:ic}];let kv=(()=>{class t extends B{ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=uu(t)))(i||t)}}();static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();const _Y=[kv];class y2 extends Qe{}let v2=(()=>{class t extends ${static#e=this.INIT=t2;constructor(n,r,i,s){super(s);const a=n.pipe($n(bO)).pipe(function QQ(...t){const e=Sa(t);return le((n,r)=>{const i=t.length,s=new Array(i);let o=t.map(()=>!1),a=!1;for(let u=0;u<i;u++)sn(t[u]).subscribe(Ee(r,d=>{s[u]=d,!a&&!o[u]&&(o[u]=!0,(a=o.every(rn))&&(o=null))},ye));n.subscribe(Ee(r,u=>{if(a){const d=[u,...s];r.next(e?e(...d):d)}}))})}(r)),d=a.pipe(Sf(yY,{state:s}));this.stateSubscription=d.subscribe(({state:f,action:g})=>{this.next(f),i.next(g)}),this.state=XL(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static#t=this.\u0275fac=function(r){return new(r||t)(G(ic),G(Ov),G(kv),G(hA))};static#n=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();function yY(t={state:void 0},[e,n]){const{state:r}=t;return{state:n(r,e),action:e}}const vY=[v2,{provide:y2,useExisting:v2}];let Sd=(()=>{class t extends Qe{constructor(n,r,i){super(),this.actionsObserver=r,this.reducerManager=i,this.source=n,this.state=n.state}select(n,...r){return EY.call(null,n,...r)(this)}selectSignal(n,r){return Vg(()=>n(this.state()),{equal:r?.equal||((i,s)=>i===s)})}lift(n){const r=new t(this,this.actionsObserver,this.reducerManager);return r.operator=n,r}dispatch(n){this.actionsObserver.next(n)}next(n){this.actionsObserver.next(n)}error(n){this.actionsObserver.error(n)}complete(){this.actionsObserver.complete()}addReducer(n,r){this.reducerManager.addReducer(n,r)}removeReducer(n){this.reducerManager.removeReducer(n)}static#e=this.\u0275fac=function(r){return new(r||t)(G(y2),G(ic),G(ig))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac})}return t})();const IY=[Sd];function EY(t,e,...n){return function(i){let s;if("string"==typeof t){const o=[e,...n].filter(Boolean);s=i.pipe(function YQ(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return ie(n=>{let r=n;for(let i=0;i<e;i++){const s=r?.[t[i]];if(!(typeof s<"u"))return;r=s}return r})}(t,...o))}else{if("function"!=typeof t)throw new TypeError(`Unexpected type '${typeof t}' in select operator, expected 'string' or 'function'`);s=i.pipe(ie(o=>t(o,e)))}return s.pipe(Nt())}}const vA="https://ngrx.io/guide/store/configuration/runtime-checks";function I2(t){return void 0===t}function E2(t){return null===t}function w2(t){return Array.isArray(t)}function T2(t){return"object"==typeof t&&null!==t}function IA(t){return"function"==typeof t}function VY(t){return t instanceof te?oe(t):t}function LY(t,e){return e.map((n,r)=>{if(t[r]instanceof te){const i=oe(t[r]);return{key:n.key,reducerFactory:i.reducerFactory?i.reducerFactory:yA,metaReducers:i.metaReducers?i.metaReducers:[],initialState:i.initialState}}return n})}function UY(t){return t.map(e=>e instanceof te?oe(e):e)}function TA(t){return"function"==typeof t?t():t}function jY(t,e){return t.concat(e)}function BY(){if(oe(Sd,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function DA(t){Object.freeze(t);const e=IA(t);return Object.getOwnPropertyNames(t).forEach(n=>{if(!n.startsWith("\u0275")&&function SY(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,n)&&(!e||"caller"!==n&&"callee"!==n&&"arguments"!==n)){const r=t[n];(T2(r)||IA(r))&&!Object.isFrozen(r)&&DA(r)}}),t}function CA(t,e=[]){return(I2(t)||E2(t))&&0===e.length?{path:["root"],value:t}:Object.keys(t).reduce((r,i)=>{if(r)return r;const s=t[i];return function AY(t){return IA(t)&&t.hasOwnProperty("\u0275cmp")}(s)?r:!(I2(s)||E2(s)||function DY(t){return"number"==typeof t}(s)||function TY(t){return"boolean"==typeof t}(s)||function wY(t){return"string"==typeof t}(s)||w2(s))&&(function D2(t){if(!function CY(t){return T2(t)&&!w2(t)}(t))return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}(s)?CA(s,[...e,i]):{path:[...e,i],value:s})},!1)}function S2(t,e){if(!1===t)return;const n=t.path.join("."),r=new Error(`Detected unserializable ${e} at "${n}". ${vA}#strict${e}serializability`);throw r.value=t.value,r.unserializablePath=n,r}function qY(t){return{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function GY({strictActionSerializability:t,strictStateSerializability:e}){return n=>t||e?function HY(t,e){return function(n,r){e.action(r)&&S2(CA(r),"action");const i=t(n,r);return e.state()&&S2(CA(i),"state"),i}}(n,{action:r=>t&&!AA(r),state:()=>e}):n}function WY({strictActionImmutability:t,strictStateImmutability:e}){return n=>t||e?function $Y(t,e){return function(n,r){const i=e.action(r)?DA(r):r,s=t(n,i);return e.state()?DA(s):s}}(n,{action:r=>t&&!AA(r),state:()=>e}):n}function AA(t){return t.type.startsWith("@ngrx")}function ZY({strictActionWithinNgZone:t}){return e=>t?function zY(t,e){return function(n,r){if(e.action(r)&&!It.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${vA}#strictactionwithinngzone`);return t(n,r)}}(e,{action:n=>t&&!AA(n)}):e}function KY(t){return[{provide:f2,useValue:t},{provide:h2,useFactory:QY,deps:[f2]},{provide:ng,deps:[h2],useFactory:qY},{provide:Nv,multi:!0,deps:[ng],useFactory:WY},{provide:Nv,multi:!0,deps:[ng],useFactory:GY},{provide:Nv,multi:!0,deps:[ng],useFactory:ZY}]}function b2(){return[{provide:rg,multi:!0,deps:[ng],useFactory:YY}]}function QY(t){return t}function YY(t){if(!t.strictActionTypeUniqueness)return;const e=Object.entries(tg).filter(([,n])=>n>1).map(([n])=>n);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(n=>`"${n}"`).join(", ")}. ${vA}#strictactiontypeuniqueness`)}function R2(t={},e={}){return[{provide:dA,useFactory:BY},{provide:n2,useValue:e.initialState},{provide:hA,useFactory:TA,deps:[n2]},{provide:fA,useValue:t},{provide:a2,useExisting:t instanceof te?t:fA},{provide:s2,deps:[fA,[new Fh(a2)]],useFactory:VY},{provide:l2,useValue:e.metaReducers?e.metaReducers:[]},{provide:d2,deps:[Nv,l2],useFactory:jY},{provide:i2,useValue:e.reducerFactory?e.reducerFactory:yA},{provide:r2,deps:[i2,d2],useFactory:m2},hY,mY,_Y,vY,IY,KY(e.runtimeChecks),b2()]}function P2(t,e,n={}){return[{provide:u2,multi:!0,useValue:t instanceof Object?{}:n},{provide:o2,multi:!0,useValue:{key:t instanceof Object?t.name:t,reducerFactory:n instanceof te||!n.reducerFactory?yA:n.reducerFactory,metaReducers:n instanceof te||!n.metaReducers?[]:n.metaReducers,initialState:n instanceof te||!n.initialState?void 0:n.initialState}},{provide:gA,deps:[u2,o2],useFactory:LY},{provide:pA,multi:!0,useValue:t instanceof Object?t.reducer:e},{provide:c2,multi:!0,useExisting:e instanceof te?e:pA},{provide:mA,multi:!0,deps:[pA,[new Fh(c2)]],useFactory:UY},b2()]}let Fv=(()=>{class t{constructor(n,r,i,s,o,a){}static#e=this.\u0275fac=function(r){return new(r||t)(G(ic),G(Ov),G(kv),G(Sd),G(dA,8),G(rg,8))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({})}return t})(),SA=(()=>{class t{constructor(n,r,i,s,o){this.features=n,this.featureReducers=r,this.reducerManager=i;const a=n.map((u,d)=>{const g=r.shift()[d];return{...u,reducers:g,initialState:TA(u.initialState)}});i.addFeatures(a)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}static#e=this.\u0275fac=function(r){return new(r||t)(G(gA),G(mA),G(ig),G(Fv),G(rg,8))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({})}return t})(),nJ=(()=>{class t{static forRoot(n,r){return{ngModule:Fv,providers:[...R2(n,r)]}}static forFeature(n,r,i={}){return{ngModule:SA,providers:[...P2(n,r,i)]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({})}return t})();class yo{constructor(e,n,r){this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}observe(e){return M2(this,e)}do(e,n,r){const{kind:i,value:s,error:o}=this;return"N"===i?e?.(s):"E"===i?n?.(o):r?.()}accept(e,n,r){var i;return I(null===(i=e)||void 0===i?void 0:i.next)?this.observe(e):this.do(e,n,r)}toObservable(){const{kind:e,value:n,error:r}=this,i="N"===e?z(n):"E"===e?Cl(()=>r):"C"===e?Sn:0;if(!i)throw new TypeError(`Unexpected notification kind ${e}`);return i}static createNext(e){return new yo("N",e)}static createError(e){return new yo("E",void 0,e)}static createComplete(){return yo.completeNotification}}function M2(t,e){var n,r,i;const{kind:s,value:o,error:a}=t;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(n=e.next)||void 0===n||n.call(e,o):"E"===s?null===(r=e.error)||void 0===r||r.call(e,a):null===(i=e.complete)||void 0===i||i.call(e)}function x2(t,e,n,r){return le((i,s)=>{let o;e&&"function"!=typeof e?({duration:n,element:o,connector:r}=e):o=e;const a=new Map,u=E=>{a.forEach(E),E(s)},d=E=>u(D=>D.error(E));let f=0,g=!1;const _=new Yt(s,E=>{try{const D=t(E);let S=a.get(D);if(!S){a.set(D,S=r?r():new B);const N=function y(E,D){const S=new Qe(N=>{f++;const R=D.subscribe(N);return()=>{R.unsubscribe(),0==--f&&g&&_.unsubscribe()}});return S.key=E,S}(D,S);if(s.next(N),n){const R=Ee(S,()=>{S.complete(),R?.unsubscribe()},void 0,void 0,()=>a.delete(D));_.add(sn(n(N)).subscribe(R))}}S.next(o?o(E):E)}catch(D){d(D)}},()=>u(E=>E.complete()),d,()=>a.clear(),()=>(g=!0,0===f));i.subscribe(_)})}function N2(t,e){return e?n=>n.pipe(N2((r,i)=>sn(t(r,i)).pipe(ie((s,o)=>e(r,s,i,o))))):le((n,r)=>{let i=0,s=null,o=!1;n.subscribe(Ee(r,a=>{s||(s=Ee(r,void 0,()=>{s=null,o&&r.complete()}),sn(t(a,i++)).subscribe(s))},()=>{o=!0,!s&&r.complete()}))})}yo.completeNotification=new yo("C");const Vv="__@ngrx/effects_create__";function k2(t){return Object.getPrototypeOf(t)}function bA(t){return"function"==typeof t}function RA(t){return t.filter(bA)}function dJ(t,e,n){const r=k2(t),s=r&&"Object"!==r.constructor.name?r.constructor.name:null,o=function O2(t){return function uJ(t){return Object.getOwnPropertyNames(t).filter(r=>!(!t[r]||!t[r].hasOwnProperty(Vv))&&t[r][Vv].hasOwnProperty("dispatch")).map(r=>({propertyName:r,...t[r][Vv]}))}(t)}(t).map(({propertyName:a,dispatch:u,useEffectsErrorHandler:d})=>{const f="function"==typeof t[a]?t[a]():t[a],g=d?n(f,e):f;return!1===u?g.pipe(function rJ(){return le((t,e)=>{t.subscribe(Ee(e,ye))})}()):g.pipe(function sJ(){return le((t,e)=>{t.subscribe(Ee(e,n=>{e.next(yo.createNext(n))},()=>{e.next(yo.createComplete()),e.complete()},n=>{e.next(yo.createError(n)),e.complete()}))})}()).pipe(ie(y=>({effect:t[a],notification:y,propertyName:a,sourceName:s,sourceInstance:t})))});return x(...o)}function F2(t,e,n=10){return t.pipe(ea(r=>(e&&e.handleError(r),n<=1?t:F2(t,e,n-1))))}const V2=new te("@ngrx/effects Internal Root Guard"),Lv=new te("@ngrx/effects User Provided Effects"),PA=new te("@ngrx/effects Internal Root Effects"),L2=new te("@ngrx/effects Internal Root Effects Instances"),U2=new te("@ngrx/effects Internal Feature Effects"),j2=new te("@ngrx/effects Internal Feature Effects Instance Groups"),fJ=new te("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>F2}),B2="@ngrx/effects/init";!function e2(t,e){if(tg[t]=(tg[t]||0)+1,"function"==typeof e)return cA(t,(...r)=>({...e(...r),type:t}));switch(e?e._as:"empty"){case"empty":return cA(t,()=>({type:t}));case"props":return cA(t,r=>({...r,type:t}));default:throw new Error("Unexpected config.")}}(B2);function DJ(t){return MA(t,"ngrxOnInitEffects")}function MA(t,e){return t&&e in t&&"function"==typeof t[e]}let xA=(()=>{class t extends B{constructor(n,r){super(),this.errorHandler=n,this.effectsErrorHandler=r}addEffects(n){this.next(n)}toActions(){return this.pipe(x2(n=>function cJ(t){return!!t.constructor&&"Object"!==t.constructor.name&&"Function"!==t.constructor.name}(n)?k2(n):n),xt(n=>n.pipe(x2(CJ))),xt(n=>{const r=n.pipe(N2(s=>function AJ(t,e){return n=>{const r=dJ(n,t,e);return function wJ(t){return MA(t,"ngrxOnRunEffects")}(n)?n.ngrxOnRunEffects(r):r}}(this.errorHandler,this.effectsErrorHandler)(s)),ie(s=>(function gJ(t,e){if("N"===t.notification.kind){const n=t.notification.value;!function mJ(t){return"function"!=typeof t&&t&&t.type&&"string"==typeof t.type}(n)&&e.handleError(new Error(`Effect ${function _J({propertyName:t,sourceInstance:e,sourceName:n}){const r="function"==typeof e[t];return n?`"${n}.${String(t)}${r?"()":""}"`:`"${String(t)}()"`}(t)} dispatched an invalid action: ${function yJ(t){try{return JSON.stringify(t)}catch{return t}}(n)}`))}}(s,this.errorHandler),s.notification)),pi(s=>"N"===s.kind&&null!=s.value),function oJ(){return le((t,e)=>{t.subscribe(Ee(e,n=>M2(n,e)))})}());return x(r,n.pipe(Au(1),pi(DJ),ie(s=>s.ngrxOnInitEffects())))}))}static#e=this.\u0275fac=function(r){return new(r||t)(G(Ko),G(fJ))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function CJ(t){return function IJ(t){return MA(t,"ngrxOnIdentifyEffects")}(t)?t.ngrxOnIdentifyEffects():""}let NA=(()=>{class t{get isStarted(){return!!this.effectsSubscription}constructor(n,r){this.effectSources=n,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||t)(G(xA),G(Sd))};static#t=this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$2=(()=>{class t{constructor(n,r,i,s,o,a,u){this.sources=n,r.start();for(const d of s)n.addEffects(d);i.dispatch({type:B2})}addEffects(n){this.sources.addEffects(n)}static#e=this.\u0275fac=function(r){return new(r||t)(G(xA),G(NA),G(Sd),G(L2),G(Fv,8),G(SA,8),G(V2,8))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({})}return t})(),SJ=(()=>{class t{constructor(n,r,i,s){const o=r.flat();for(const a of o)n.addEffects(a)}static#e=this.\u0275fac=function(r){return new(r||t)(G($2),G(j2),G(Fv,8),G(SA,8))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({})}return t})(),bJ=(()=>{class t{static forFeature(...n){const r=n.flat(),i=RA(r);return{ngModule:SJ,providers:[i,{provide:U2,multi:!0,useValue:r},{provide:Lv,multi:!0,useValue:[]},{provide:j2,multi:!0,useFactory:H2,deps:[U2,Lv]}]}}static forRoot(...n){const r=n.flat(),i=RA(r);return{ngModule:$2,providers:[i,{provide:PA,useValue:[r]},{provide:V2,useFactory:RJ},{provide:Lv,multi:!0,useValue:[]},{provide:L2,useFactory:H2,deps:[PA,Lv]}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Hn({})}return t})();function H2(t,e){const n=[];for(const r of t)n.push(...r);for(const r of e)n.push(...r);return n.map(r=>function lJ(t){return t instanceof te||bA(t)}(r)?oe(r):r)}function RJ(){const t=oe(NA,{optional:!0,skipSelf:!0}),e=oe(PA,{self:!0});if((1!==e.length||0!==e[0].length)&&t)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}const PJ_firebase={apiKey:"AIzaSyDRuj9I1xrkcQy7PTWVtgq30VodzD0Ht-U",authDomain:"angular-demo-firebase-461e8.firebaseapp.com",projectId:"angular-demo-firebase-461e8",storageBucket:"angular-demo-firebase-461e8.appspot.com",messagingSenderId:"823612893482",appId:"1:823612893482:web:57ccd891a4342a377dd653",measurementId:"G-G7N7CGKH30"};let MJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t,bootstrap:[KQ]});static#n=this.\u0275inj=Hn({providers:[{provide:CO,useClass:Pu}],imports:[K6,$5,nJ.forRoot({},{}),bJ.forRoot([]),a8.initializeApp(PJ_firebase)]})}return t})();W6().bootstrapModule(MJ).catch(t=>console.error(t))},106:($i,wn,Ve)=>{Ve.d(wn,{Z:()=>Dn});var I=Ve(58),be=Ve(537),j=Ve(534),Re=Ve(879);class ct{constructor(Me,je){this._delegate=Me,this.firebase=je,(0,j._addComponent)(Me,new be.wA("app-compat",()=>this,"PUBLIC")),this.container=Me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this._delegate.automaticDataCollectionEnabled=Me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Me=>{this._delegate.checkDestroyed(),Me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(Me,je=j._DEFAULT_ENTRY_NAME){var Cn;this._delegate.checkDestroyed();const An=this._delegate.container.getProvider(Me);return!An.isInitialized()&&"EXPLICIT"===(null===(Cn=An.getComponent())||void 0===Cn?void 0:Cn.instantiationMode)&&An.initialize(),An.getImmediate({identifier:je})}_removeServiceInstance(Me,je=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Me).clearInstance(je)}_addComponent(Me){(0,j._addComponent)(this._delegate,Me)}_addOrOverwriteComponent(Me){(0,j._addOrOverwriteComponent)(this._delegate,Me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Qt=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function Ke(){const lt=function Tn(lt){const Me={},je={__esModule:!0,initializeApp:function Pt(Be,_n={}){const K=j.initializeApp(Be,_n);if((0,I.r3)(Me,K.name))return Me[K.name];const Bt=new lt(K,je);return Me[K.name]=Bt,Bt},app:An,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Dt(Be){const _n=Be.name,K=_n.replace("-compat","");if(j._registerComponent(Be)&&"PUBLIC"===Be.type){const Bt=(Mt=An())=>{if("function"!=typeof Mt[K])throw Qt.create("invalid-app-argument",{appName:_n});return Mt[K]()};void 0!==Be.serviceProps&&(0,I.ZB)(Bt,Be.serviceProps),je[K]=Bt,lt.prototype[K]=function(...Mt){return this._getService.bind(this,_n).apply(this,Be.multipleInstances?Mt:[])}}return"PUBLIC"===Be.type?je[K]:null},removeApp:function Cn(Be){delete Me[Be]},useAsService:function dr(Be,_n){return"serverAuth"===_n?null:_n},modularAPIs:j}};function An(Be){if(!(0,I.r3)(Me,Be=Be||j._DEFAULT_ENTRY_NAME))throw Qt.create("no-app",{appName:Be});return Me[Be]}return je.default=je,Object.defineProperty(je,"apps",{get:function dt(){return Object.keys(Me).map(Be=>Me[Be])}}),An.App=lt,je}(ct);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:Ke,extendNamespace:function Me(je){(0,I.ZB)(lt,je)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),lt}(),se=new Re.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Dn=Y;!function at(lt){(0,j.registerVersion)("@firebase/app-compat","0.2.26",lt)}()},534:($i,wn,Ve)=>{Ve.r(wn),Ve.d(wn,{FirebaseError:()=>Re.ZR,SDK_VERSION:()=>vo,_DEFAULT_ENTRY_NAME:()=>ii,_addComponent:()=>as,_addOrOverwriteComponent:()=>us,_apps:()=>br,_clearComponents:()=>hr,_components:()=>Ti,_getProvider:()=>cs,_registerComponent:()=>nr,_removeServiceInstance:()=>xt,deleteApp:()=>zi,getApp:()=>Sa,getApps:()=>Di,initializeApp:()=>Bs,onLog:()=>Io,registerVersion:()=>Rr,setLogLevel:()=>sc});var I=Ve(861),be=Ve(537),j=Ve(879),Re=Ve(58);const ct=(L,A)=>A.some(ee=>L instanceof ee);let jt,Qt;const Y=new WeakMap,se=new WeakMap,ye=new WeakMap,Ge=new WeakMap,at=new WeakMap;let Me={get(L,A,ee){if(L instanceof IDBTransaction){if("done"===A)return se.get(L);if("objectStoreNames"===A)return L.objectStoreNames||ye.get(L);if("store"===A)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return Pt(L[A])},set:(L,A,ee)=>(L[A]=ee,!0),has:(L,A)=>L instanceof IDBTransaction&&("done"===A||"store"===A)||A in L};function An(L){return"function"==typeof L?function Cn(L){return L!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ke(){return Qt||(Qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(L)?function(...A){return L.apply(dt(this),A),Pt(Y.get(this))}:function(...A){return Pt(L.apply(dt(this),A))}:function(A,...ee){const me=L.call(dt(this),A,...ee);return ye.set(me,A.sort?A.sort():[A]),Pt(me)}}(L):(L instanceof IDBTransaction&&function lt(L){if(se.has(L))return;const A=new Promise((ee,me)=>{const Oe=()=>{L.removeEventListener("complete",Je),L.removeEventListener("error",W),L.removeEventListener("abort",W)},Je=()=>{ee(),Oe()},W=()=>{me(L.error||new DOMException("AbortError","AbortError")),Oe()};L.addEventListener("complete",Je),L.addEventListener("error",W),L.addEventListener("abort",W)});se.set(L,A)}(L),ct(L,function Tn(){return jt||(jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(L,Me):L)}function Pt(L){if(L instanceof IDBRequest)return function Dn(L){const A=new Promise((ee,me)=>{const Oe=()=>{L.removeEventListener("success",Je),L.removeEventListener("error",W)},Je=()=>{ee(Pt(L.result)),Oe()},W=()=>{me(L.error),Oe()};L.addEventListener("success",Je),L.addEventListener("error",W)});return A.then(ee=>{ee instanceof IDBCursor&&Y.set(ee,L)}).catch(()=>{}),at.set(A,L),A}(L);if(Ge.has(L))return Ge.get(L);const A=An(L);return A!==L&&(Ge.set(L,A),at.set(A,L)),A}const dt=L=>at.get(L),Be=["get","getKey","getAll","getAllKeys","count"],_n=["put","add","delete","clear"],K=new Map;function Bt(L,A){if(!(L instanceof IDBDatabase)||A in L||"string"!=typeof A)return;if(K.get(A))return K.get(A);const ee=A.replace(/FromIndex$/,""),me=A!==ee,Oe=_n.includes(ee);if(!(ee in(me?IDBIndex:IDBObjectStore).prototype)||!Oe&&!Be.includes(ee))return;const Je=function(){var W=(0,I.Z)(function*(Jt,..._e){const We=this.transaction(Jt,Oe?"readwrite":"readonly");let Eo=We.store;return me&&(Eo=Eo.index(_e.shift())),(yield Promise.all([Eo[ee](..._e),Oe&&We.done]))[0]});return function(_e){return W.apply(this,arguments)}}();return K.set(A,Je),Je}!function je(L){Me=L(Me)}(L=>({...L,get:(A,ee,me)=>Bt(A,ee)||L.get(A,ee,me),has:(A,ee)=>!!Bt(A,ee)||L.has(A,ee)}));class Mt{constructor(A){this.container=A}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function rn(L){const A=L.getComponent();return"VERSION"===A?.type}(ee)){const me=ee.getImmediate();return`${me.library}/${me.version}`}return null}).filter(ee=>ee).join(" ")}}const Ii="@firebase/app",Qe=new j.Yd("@firebase/app"),ii="[DEFAULT]",Aa={[Ii]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},br=new Map,Ti=new Map;function as(L,A){try{L.container.addComponent(A)}catch(ee){Qe.debug(`Component ${A.name} failed to register with FirebaseApp ${L.name}`,ee)}}function us(L,A){L.container.addOrOverwriteComponent(A)}function nr(L){const A=L.name;if(Ti.has(A))return Qe.debug(`There were multiple attempts to register component ${A}.`),!1;Ti.set(A,L);for(const ee of br.values())as(ee,L);return!0}function cs(L,A){const ee=L.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),L.container.getProvider(A)}function xt(L,A,ee=ii){cs(L,A).clearInstance(ee)}function hr(){Ti.clear()}const si=new Re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gr{constructor(A,ee,me){this._isDeleted=!1,this._options=Object.assign({},A),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=me,this.container.addComponent(new be.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(A){this.checkDestroyed(),this._automaticDataCollectionEnabled=A}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(A){this._isDeleted=A}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}const vo="10.7.2";function Bs(L,A={}){let ee=L;"object"!=typeof A&&(A={name:A});const me=Object.assign({name:ii,automaticDataCollectionEnabled:!1},A),Oe=me.name;if("string"!=typeof Oe||!Oe)throw si.create("bad-app-name",{appName:String(Oe)});if(ee||(ee=(0,Re.aH)()),!ee)throw si.create("no-options");const Je=br.get(Oe);if(Je){if((0,Re.vZ)(ee,Je.options)&&(0,Re.vZ)(me,Je.config))return Je;throw si.create("duplicate-app",{appName:Oe})}const W=new be.H0(Oe);for(const _e of Ti.values())W.addComponent(_e);const Jt=new Gr(ee,me,W);return br.set(Oe,Jt),Jt}function Sa(L=ii){const A=br.get(L);if(!A&&L===ii&&(0,Re.aH)())return Bs();if(!A)throw si.create("no-app",{appName:L});return A}function Di(){return Array.from(br.values())}function zi(L){return $n.apply(this,arguments)}function $n(){return($n=(0,I.Z)(function*(L){const A=L.name;br.has(A)&&(br.delete(A),yield Promise.all(L.container.getProviders().map(ee=>ee.delete())),L.isDeleted=!0)})).apply(this,arguments)}function Rr(L,A,ee){var me;let Oe=null!==(me=Aa[L])&&void 0!==me?me:L;ee&&(Oe+=`-${ee}`);const Je=Oe.match(/\s|\//),W=A.match(/\s|\//);if(Je||W){const Jt=[`Unable to register library "${Oe}" with version "${A}":`];return Je&&Jt.push(`library name "${Oe}" contains illegal characters (whitespace or "/")`),Je&&W&&Jt.push("and"),W&&Jt.push(`version name "${A}" contains illegal characters (whitespace or "/")`),void Qe.warn(Jt.join(" "))}nr(new be.wA(`${Oe}-version`,()=>({library:Oe,version:A}),"VERSION"))}function Io(L,A){if(null!==L&&"function"!=typeof L)throw si.create("invalid-log-argument");(0,j.Am)(L,A)}function sc(L){(0,j.Ub)(L)}const ba="firebase-heartbeat-database",Ra=1,C="firebase-heartbeat-store";let w=null;function b(){return w||(w=function Dt(L,A,{blocked:ee,upgrade:me,blocking:Oe,terminated:Je}={}){const W=indexedDB.open(L,A),Jt=Pt(W);return me&&W.addEventListener("upgradeneeded",_e=>{me(Pt(W.result),_e.oldVersion,_e.newVersion,Pt(W.transaction),_e)}),ee&&W.addEventListener("blocked",_e=>ee(_e.oldVersion,_e.newVersion,_e)),Jt.then(_e=>{Je&&_e.addEventListener("close",()=>Je()),Oe&&_e.addEventListener("versionchange",We=>Oe(We.oldVersion,We.newVersion,We))}).catch(()=>{}),Jt}(ba,Ra,{upgrade:(L,A)=>{if(0===A)try{L.createObjectStore(C)}catch(ee){console.warn(ee)}}}).catch(L=>{throw si.create("idb-open",{originalErrorMessage:L.message})})),w}function x(){return(x=(0,I.Z)(function*(L){try{return yield(yield b()).transaction(C).objectStore(C).get($e(L))}catch(A){if(A instanceof Re.ZR)Qe.warn(A.message);else{const ee=si.create("idb-get",{originalErrorMessage:A?.message});Qe.warn(ee.message)}}})).apply(this,arguments)}function z(L,A){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,I.Z)(function*(L,A){try{const me=(yield b()).transaction(C,"readwrite");yield me.objectStore(C).put(A,$e(L)),yield me.done}catch(ee){if(ee instanceof Re.ZR)Qe.warn(ee.message);else{const me=si.create("idb-set",{originalErrorMessage:ee?.message});Qe.warn(me.message)}}})).apply(this,arguments)}function $e(L){return`${L.name}!${L.options.appId}`}class vn{constructor(A){this.container=A,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new vt(ee),this._heartbeatsCachePromise=this._storage.read().then(me=>(this._heartbeatsCache=me,me))}triggerHeartbeat(){var A=this;return(0,I.Z)(function*(){var ee,me;const Je=A.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),W=ge();if((null!=(null===(ee=A._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||(A._heartbeatsCache=yield A._heartbeatsCachePromise,null!=(null===(me=A._heartbeatsCache)||void 0===me?void 0:me.heartbeats)))&&A._heartbeatsCache.lastSentHeartbeatDate!==W&&!A._heartbeatsCache.heartbeats.some(Jt=>Jt.date===W))return A._heartbeatsCache.heartbeats.push({date:W,agent:Je}),A._heartbeatsCache.heartbeats=A._heartbeatsCache.heartbeats.filter(Jt=>{const _e=new Date(Jt.date).valueOf();return Date.now()-_e<=2592e6}),A._storage.overwrite(A._heartbeatsCache)})()}getHeartbeatsHeader(){var A=this;return(0,I.Z)(function*(){var ee;if(null===A._heartbeatsCache&&(yield A._heartbeatsCachePromise),null==(null===(ee=A._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===A._heartbeatsCache.heartbeats.length)return"";const me=ge(),{heartbeatsToSend:Oe,unsentEntries:Je}=function bn(L,A=1024){const ee=[];let me=L.slice();for(const Oe of L){const Je=ee.find(W=>W.agent===Oe.agent);if(Je){if(Je.dates.push(Oe.date),Ci(ee)>A){Je.dates.pop();break}}else if(ee.push({agent:Oe.agent,dates:[Oe.date]}),Ci(ee)>A){ee.pop();break}me=me.slice(1)}return{heartbeatsToSend:ee,unsentEntries:me}}(A._heartbeatsCache.heartbeats),W=(0,Re.L)(JSON.stringify({version:2,heartbeats:Oe}));return A._heartbeatsCache.lastSentHeartbeatDate=me,Je.length>0?(A._heartbeatsCache.heartbeats=Je,yield A._storage.overwrite(A._heartbeatsCache)):(A._heartbeatsCache.heartbeats=[],A._storage.overwrite(A._heartbeatsCache)),W})()}}function ge(){return(new Date).toISOString().substring(0,10)}class vt{constructor(A){this.app=A,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Re.hl)()&&(0,Re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var A=this;return(0,I.Z)(function*(){if(yield A._canUseIndexedDBPromise){const me=yield function F(L){return x.apply(this,arguments)}(A.app);return me?.heartbeats?me:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(A){var ee=this;return(0,I.Z)(function*(){var me;if(yield ee._canUseIndexedDBPromise){const Je=yield ee.read();return z(ee.app,{lastSentHeartbeatDate:null!==(me=A.lastSentHeartbeatDate)&&void 0!==me?me:Je.lastSentHeartbeatDate,heartbeats:A.heartbeats})}})()}add(A){var ee=this;return(0,I.Z)(function*(){var me;if(yield ee._canUseIndexedDBPromise){const Je=yield ee.read();return z(ee.app,{lastSentHeartbeatDate:null!==(me=A.lastSentHeartbeatDate)&&void 0!==me?me:Je.lastSentHeartbeatDate,heartbeats:[...Je.heartbeats,...A.heartbeats]})}})()}}function Ci(L){return(0,Re.L)(JSON.stringify({version:2,heartbeats:L})).length}!function oc(L){nr(new be.wA("platform-logger",A=>new Mt(A),"PRIVATE")),nr(new be.wA("heartbeat",A=>new vn(A),"PRIVATE")),Rr(Ii,"0.9.26",L),Rr(Ii,"0.9.26","esm2017"),Rr("fire-js","")}("")},537:($i,wn,Ve)=>{Ve.d(wn,{H0:()=>Tn,wA:()=>j});var I=Ve(861),be=Ve(58);class j{constructor(Y,se,ye){this.name=Y,this.instanceFactory=se,this.type=ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const Re="[DEFAULT]";class ct{constructor(Y,se){this.name=Y,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const se=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(se)){const ye=new be.BH;if(this.instancesDeferred.set(se,ye),this.isInitialized(se)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:se});Ge&&ye.resolve(Ge)}catch{}}return this.instancesDeferred.get(se).promise}getImmediate(Y){var se;const ye=this.normalizeInstanceIdentifier(Y?.identifier),Ge=null!==(se=Y?.optional)&&void 0!==se&&se;if(!this.isInitialized(ye)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ye})}catch(at){if(Ge)return null;throw at}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function Qt(Ke){return"EAGER"===Ke.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:Re})}catch{}for(const[se,ye]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(se);try{const at=this.getOrInitializeService({instanceIdentifier:Ge});ye.resolve(at)}catch{}}}}clearInstance(Y=Re){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,I.Z)(function*(){const se=Array.from(Y.instances.values());yield Promise.all([...se.filter(ye=>"INTERNAL"in ye).map(ye=>ye.INTERNAL.delete()),...se.filter(ye=>"_delete"in ye).map(ye=>ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=Re){return this.instances.has(Y)}getOptions(Y=Re){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:se={}}=Y,ye=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(ye))throw Error(`${this.name}(${ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ye,options:se});for(const[at,Dn]of this.instancesDeferred.entries())ye===this.normalizeInstanceIdentifier(at)&&Dn.resolve(Ge);return Ge}onInit(Y,se){var ye;const Ge=this.normalizeInstanceIdentifier(se),at=null!==(ye=this.onInitCallbacks.get(Ge))&&void 0!==ye?ye:new Set;at.add(Y),this.onInitCallbacks.set(Ge,at);const Dn=this.instances.get(Ge);return Dn&&Y(Dn,Ge),()=>{at.delete(Y)}}invokeOnInitCallbacks(Y,se){const ye=this.onInitCallbacks.get(se);if(ye)for(const Ge of ye)try{Ge(Y,se)}catch{}}getOrInitializeService({instanceIdentifier:Y,options:se={}}){let ye=this.instances.get(Y);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:(Ke=Y,Ke===Re?void 0:Ke),options:se}),this.instances.set(Y,ye),this.instancesOptions.set(Y,se),this.invokeOnInitCallbacks(ye,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,ye)}catch{}var Ke;return ye||null}normalizeInstanceIdentifier(Y=Re){return this.component?this.component.multipleInstances?Y:Re:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Tn{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const se=this.getProvider(Y.name);if(se.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);se.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const se=new ct(Y,this);return this.providers.set(Y,se),se}getProviders(){return Array.from(this.providers.values())}}},879:($i,wn,Ve)=>{Ve.d(wn,{Am:()=>Ke,Ub:()=>Tn,Yd:()=>Qt,in:()=>be});const I=[];var be=function(Y){return Y[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",Y}(be||{});const j={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},Re=be.INFO,ct={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},jt=(Y,se,...ye)=>{if(se<Y.logLevel)return;const Ge=(new Date).toISOString(),at=ct[se];if(!at)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[at](`[${Ge}]  ${Y.name}:`,...ye)};class Qt{constructor(se){this.name=se,this._logLevel=Re,this._logHandler=jt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in be))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?j[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...se),this._logHandler(this,be.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...se),this._logHandler(this,be.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,be.INFO,...se),this._logHandler(this,be.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,be.WARN,...se),this._logHandler(this,be.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...se),this._logHandler(this,be.ERROR,...se)}}function Tn(Y){I.forEach(se=>{se.setLogLevel(Y)})}function Ke(Y,se){for(const ye of I){let Ge=null;se&&se.level&&(Ge=j[se.level]),ye.userLogHandler=null===Y?null:(at,Dn,...lt)=>{const Me=lt.map(je=>{if(null==je)return null;if("string"==typeof je)return je;if("number"==typeof je||"boolean"==typeof je)return je.toString();if(je instanceof Error)return je.message;try{return JSON.stringify(je)}catch{return null}}).filter(je=>je).join(" ");Dn>=(Ge??at.logLevel)&&Y({level:be[Dn].toLowerCase(),message:Me,args:lt,type:at.name})}}}},230:($i,wn,Ve)=>{Ve.r(wn);var I=Ve(861),be=Ve(106),j=Ve(58),Re=Ve(534),ct=Ve(879),jt=Ve(582),Qt=Ve(537);const Ke={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Dn=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},lt=function at(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Me=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Cn=new ct.Yd("@firebase/auth");function Pt(h,...c){Cn.logLevel<=ct.in.ERROR&&Cn.error(`Auth (${Re.SDK_VERSION}): ${h}`,...c)}function dt(h,...c){throw _n(h,...c)}function Dt(h,...c){return _n(h,...c)}function dr(h,c,l){const p=Object.assign(Object.assign({},lt()),{[c]:l});return new j.LL("auth","Firebase",p).create(c,{appName:h.name})}function Be(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&dt(h,"argument-error"),dr(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _n(h,...c){if("string"!=typeof h){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=h.name),h._errorFactory.create(l,...p)}return Me.create(h,...c)}function K(h,c,...l){if(!h)throw _n(c,...l)}function Bt(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Pt(c),new Error(c)}function Mt(h,c){h||Bt(c)}function rn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function Ii(){return"http:"===Ei()||"https:"===Ei()}function Ei(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class wi{constructor(c,l){this.shortDelay=c,this.longDelay=l,Mt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Qe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ii()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function O(h,c){Mt(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class V{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const B={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},H=new wi(3e4,6e4);function $(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function Q(h,c,l,p){return le.apply(this,arguments)}function le(){return(le=(0,I.Z)(function*(h,c,l,p,m={}){return Ee(h,m,(0,I.Z)(function*(){let v={},T={};p&&("GET"===c?T=p:v={body:JSON.stringify(p)});const P=(0,j.xO)(Object.assign({key:h.config.apiKey},T)).slice(1),q=yield h._getAdditionalHeaders();return q["Content-Type"]="application/json",h.languageCode&&(q["X-Firebase-Locale"]=h.languageCode),V.fetch()($t(h,h.config.apiHost,l,P),Object.assign({method:c,headers:q,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function Ee(h,c,l){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,I.Z)(function*(h,c,l){h._canInitEmulator=!1;const p=Object.assign(Object.assign({},B),c);try{const m=new jn(h),v=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const T=yield v.json();if("needConfirmation"in T)throw yn(h,"account-exists-with-different-credential",T);if(v.ok&&!("errorMessage"in T))return T;{const P=v.ok?T.errorMessage:T.error.message,[q,ae]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===q)throw yn(h,"credential-already-in-use",T);if("EMAIL_EXISTS"===q)throw yn(h,"email-already-in-use",T);if("USER_DISABLED"===q)throw yn(h,"user-disabled",T);const ve=p[q]||q.toLowerCase().replace(/[_\s]+/g,"-");if(ae)throw dr(h,ve,ae);dt(h,ve)}}catch(m){if(m instanceof j.ZR)throw m;dt(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function ie(h,c,l,p){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,I.Z)(function*(h,c,l,p,m={}){const v=yield Q(h,c,l,p,m);return"mfaPendingCredential"in v&&dt(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function $t(h,c,l,p){const m=`${c}${l}?${p}`;return h.config.emulator?O(h.config,m):`${h.config.apiScheme}://${m}`}function St(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(Dt(this.auth,"network-request-failed")),H.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yn(h,c,l){const p={appName:h.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const m=Dt(h,c,p);return m.customData._tokenResponse=l,m}function Bn(h){return void 0!==h&&void 0!==h.getResponse}function Ar(h){return void 0!==h&&void 0!==h.enterprise}class Sr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return St(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Hi(){return(Hi=(0,I.Z)(function*(h){return(yield Q(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function os(h,c){return sn.apply(this,arguments)}function sn(){return(sn=(0,I.Z)(function*(h,c){return Q(h,"GET","/v2/recaptchaConfig",$(h,c))})).apply(this,arguments)}function ii(){return(ii=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function as(){return(as=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function us(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function xt(){return(xt=(0,I.Z)(function*(h,c=!1){const l=(0,j.m9)(h),p=yield l.getIdToken(c),m=Sn(p);K(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const v="object"==typeof m.firebase?m.firebase:void 0,T=v?.sign_in_provider;return{claims:m,token:p,authTime:us(hr(m.auth_time)),issuedAtTime:us(hr(m.iat)),expirationTime:us(hr(m.exp)),signInProvider:T||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function hr(h){return 1e3*Number(h)}function Sn(h){const[c,l,p]=h.split(".");if(void 0===c||void 0===l||void 0===p)return Pt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,j.tV)(l);return m?JSON.parse(m):(Pt("Failed to decode base64 JWT payload"),null)}catch(m){return Pt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function Gr(h,c){return vo.apply(this,arguments)}function vo(){return(vo=(0,I.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof j.ZR&&function Bs({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(p)&&h.auth.currentUser===h&&(yield h.auth.signOut()),p}})).apply(this,arguments)}class Sa{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,I.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Di{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=us(this.lastLoginAt),this.creationTime=us(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zi(h){return $n.apply(this,arguments)}function $n(){return $n=(0,I.Z)(function*(h){var c;const l=h.auth,p=yield h.getIdToken(),m=yield Gr(h,function Ti(h,c){return as.apply(this,arguments)}(l,{idToken:p}));K(m?.users.length,l,"internal-error");const v=m.users[0];h._notifyReloadListener(v);const T=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function ba(h){return h.map(c=>{var{providerId:l}=c,p=(0,jt._T)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],P=function sc(h,c){return[...h.filter(p=>!c.some(m=>m.providerId===p.providerId)),...c]}(h.providerData,T),ve=!!h.isAnonymous&&!(h.email&&v.passwordHash||P?.length),Ie={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:P,metadata:new Di(v.createdAt,v.lastLoginAt),isAnonymous:ve};Object.assign(h,Ie)}),$n.apply(this,arguments)}function Io(){return(Io=(0,I.Z)(function*(h){const c=(0,j.m9)(h);yield zi(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function C(){return(C=(0,I.Z)(function*(h,c){const l=yield Ee(h,{},(0,I.Z)(function*(){const p=(0,j.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:v}=h.config,T=$t(h,m,"/v1/token",`key=${v}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",V.fetch()(T,{method:"POST",headers:P,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function b(){return(b=(0,I.Z)(function*(h,c){return Q(h,"POST","/v2/accounts:revokeToken",$(h,c))})).apply(this,arguments)}class F{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){K(c.idToken,"internal-error"),K(typeof c.idToken<"u","internal-error"),K(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function si(h){const c=Sn(h);return K(c,"internal-error"),K(typeof c.exp<"u","internal-error"),K(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var p=this;return(0,I.Z)(function*(){return K(!p.accessToken||p.refreshToken,c,"user-token-expired"),l||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:v,expiresIn:T}=yield function Ra(h,c){return C.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(m,v,Number(T))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:m,expirationTime:v}=l,T=new F;return p&&(K("string"==typeof p,"internal-error",{appName:c}),T.refreshToken=p),m&&(K("string"==typeof m,"internal-error",{appName:c}),T.accessToken=m),v&&(K("number"==typeof v,"internal-error",{appName:c}),T.expirationTime=v),T}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new F,this.toJSON())}_performRefresh(){return Bt("not implemented")}}function x(h,c){K("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class z{constructor(c){var{uid:l,auth:p,stsTokenManager:m}=c,v=(0,jt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new Di(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,I.Z)(function*(){const p=yield Gr(l,l.stsTokenManager.getToken(l.auth,c));return K(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function cs(h){return xt.apply(this,arguments)}(this,c)}reload(){return function Rr(h){return Io.apply(this,arguments)}(this)}_assign(c){this!==c&&(K(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new z(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,I.Z)(function*(){let m=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield zi(p)),yield p.auth._persistUserIfCurrent(p),m&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,I.Z)(function*(){const l=yield c.getIdToken();return yield Gr(c,function Ca(h,c){return ii.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,m,v,T,P,q,ae,ve;const Ie=null!==(p=l.displayName)&&void 0!==p?p:void 0,bt=null!==(m=l.email)&&void 0!==m?m:void 0,xi=null!==(v=l.phoneNumber)&&void 0!==v?v:void 0,Uh=null!==(T=l.photoURL)&&void 0!==T?T:void 0,$I=null!==(P=l.tenantId)&&void 0!==P?P:void 0,wm=null!==(q=l._redirectEventId)&&void 0!==q?q:void 0,HI=null!==(ae=l.createdAt)&&void 0!==ae?ae:void 0,Tm=null!==(ve=l.lastLoginAt)&&void 0!==ve?ve:void 0,{uid:zo,emailVerified:pu,isAnonymous:jh,providerData:Wc,stsTokenManager:Bh}=l;K(zo&&Bh,c,"internal-error");const qo=F.fromJSON(this.name,Bh);K("string"==typeof zo,c,"internal-error"),x(Ie,c.name),x(bt,c.name),K("boolean"==typeof pu,c,"internal-error"),K("boolean"==typeof jh,c,"internal-error"),x(xi,c.name),x(Uh,c.name),x($I,c.name),x(wm,c.name),x(HI,c.name),x(Tm,c.name);const Zc=new z({uid:zo,auth:c,email:bt,emailVerified:pu,displayName:Ie,isAnonymous:jh,photoURL:Uh,phoneNumber:xi,tenantId:$I,stsTokenManager:qo,createdAt:HI,lastLoginAt:Tm});return Wc&&Array.isArray(Wc)&&(Zc.providerData=Wc.map(Dm=>Object.assign({},Dm))),wm&&(Zc._redirectEventId=wm),Zc}static _fromIdTokenResponse(c,l,p=!1){return(0,I.Z)(function*(){const m=new F;m.updateFromServerResponse(l);const v=new z({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:p});return yield zi(v),v})()}}const Pe=new Map;function $e(h){Mt(h instanceof Function,"Expected a class definition");let c=Pe.get(h);return c?(Mt(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Pe.set(h,c),c)}const Nt=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,p){var m=this;return(0,I.Z)(function*(){m.storage[l]=p})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=p.storage[l];return void 0===m?null:m})()}_remove(l){var p=this;return(0,I.Z)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return h.type="NONE",h})();function vn(h,c,l){return`firebase:${h}:${c}:${l}`}class ge{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:m,name:v}=this.auth;this.fullUserKey=vn(this.userKey,m.apiKey,v),this.fullPersistenceKey=vn("persistence",m.apiKey,v),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,I.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?z._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,I.Z)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,I.Z)(function*(){if(!l.length)return new ge($e(Nt),c,p);const m=(yield Promise.all(l.map(function(){var ae=(0,I.Z)(function*(ve){if(yield ve._isAvailable())return ve});return function(ve){return ae.apply(this,arguments)}}()))).filter(ae=>ae);let v=m[0]||$e(Nt);const T=vn(p,c.config.apiKey,c.name);let P=null;for(const ae of l)try{const ve=yield ae._get(T);if(ve){const Ie=z._fromJSON(c,ve);ae!==v&&(P=Ie),v=ae;break}}catch{}const q=m.filter(ae=>ae._shouldAllowMigration);return v._shouldAllowMigration&&q.length?(v=q[0],P&&(yield v._set(T,P.toJSON())),yield Promise.all(l.map(function(){var ae=(0,I.Z)(function*(ve){if(ve!==v)try{yield ve._remove(T)}catch{}});return function(ve){return ae.apply(this,arguments)}}())),new ge(v,c,p)):new ge(v,c,p)})()}}function bn(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(L(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(vt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ee(c))return"Blackberry";if(me(c))return"Webos";if(Ci(c))return"Safari";if((c.includes("chrome/")||oc(c))&&!c.includes("edge/"))return"Chrome";if(A(c))return"Android";{const p=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function vt(h=(0,j.z$)()){return/firefox\//i.test(h)}function Ci(h=(0,j.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function oc(h=(0,j.z$)()){return/crios\//i.test(h)}function L(h=(0,j.z$)()){return/iemobile/i.test(h)}function A(h=(0,j.z$)()){return/android/i.test(h)}function ee(h=(0,j.z$)()){return/blackberry/i.test(h)}function me(h=(0,j.z$)()){return/webos/i.test(h)}function Oe(h=(0,j.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function _e(h=(0,j.z$)()){return Oe(h)||A(h)||me(h)||ee(h)||/windows phone/i.test(h)||L(h)}function Eo(h,c=[]){let l;switch(h){case"Browser":l=bn((0,j.z$)());break;case"Worker":l=`${bn((0,j.z$)())}-${h}`;break;default:l=h}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Re.SDK_VERSION}/${p}`}class OA{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=v=>new Promise((T,P)=>{try{T(c(v))}catch(q){P(q)}});p.onAbort=l,this.queue.push(p);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const m of l.queue)yield m(c),m.onAbort&&p.push(m.onAbort)}catch(m){p.reverse();for(const v of p)try{v()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function Pa(){return(Pa=(0,I.Z)(function*(h,c={}){return Q(h,"GET","/v2/passwordPolicy",$(h,c))})).apply(this,arguments)}class kA{constructor(c){var l,p,m,v;const T=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=T.minPasswordLength)&&void 0!==l?l:6,T.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=T.maxPasswordLength),void 0!==T.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=T.containsLowercaseCharacter),void 0!==T.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=T.containsUppercaseCharacter),void 0!==T.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=T.containsNumericCharacter),void 0!==T.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=T.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,m,v,T,P;const q={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,q),this.validatePasswordCharacterOptions(c,q),q.isValid&&(q.isValid=null===(l=q.meetsMinPasswordLength)||void 0===l||l),q.isValid&&(q.isValid=null===(p=q.meetsMaxPasswordLength)||void 0===p||p),q.isValid&&(q.isValid=null===(m=q.containsLowercaseLetter)||void 0===m||m),q.isValid&&(q.isValid=null===(v=q.containsUppercaseLetter)||void 0===v||v),q.isValid&&(q.isValid=null===(T=q.containsNumericCharacter)||void 0===T||T),q.isValid&&(q.isValid=null===(P=q.containsNonAlphanumericCharacter)||void 0===P||P),q}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)p=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,m,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class Bv{constructor(c,l,p,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ls(this),this.idTokenSubscription=new ls(this),this.beforeStateQueue=new OA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Me,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=$e(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,v;if(!p._deleted&&(p.persistenceManager=yield ge.create(p,c),!p._deleted)){if(null!==(m=p._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,I.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,I.Z)(function*(){var p;const m=yield l.assertedPersistence.getCurrentUser();let v=m,T=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,q=v?._redirectEventId,ae=yield l.tryRedirectSignIn(c);(!P||P===q)&&ae?.user&&(v=ae.user,T=!0)}if(!v)return l.directlySetCurrentUser(null);if(!v._redirectEventId){if(T)try{yield l.beforeStateQueue.runMiddleware(v)}catch(P){v=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return v?l.reloadAndSetCurrentUserOrClear(v):l.directlySetCurrentUser(null)}return K(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===v._redirectEventId?l.directlySetCurrentUser(v):l.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var l=this;return(0,I.Z)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,I.Z)(function*(){try{yield zi(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function js(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,I.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,I.Z)(function*(){const p=c?(0,j.m9)(c):null;return p&&K(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,I.Z)(function*(){if(!p._deleted)return c&&K(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,I.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,I.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence($e(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,I.Z)(function*(){const l=yield function jv(h){return Pa.apply(this,arguments)}(c),p=new kA(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new j.LL("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,I.Z)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function w(h,c){return b.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,I.Z)(function*(){const m=yield p.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const p=c&&$e(c)||l._popupRedirectResolver;K(p,l,"argument-error"),l.redirectPersistenceManager=yield ge.create(l,[$e(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,I.Z)(function*(){var p,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,I.Z)(function*(){if(c===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,m){if(this._deleted)return()=>{};const v="function"==typeof l?l:l.next.bind(l);let T=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(P,this,"internal-error"),P.then(()=>{T||v(this.currentUser)}),"function"==typeof l){const q=c.addObserver(l,p,m);return()=>{T=!0,q()}}{const q=c.addObserver(l);return()=>{T=!0,q()}}}directlySetCurrentUser(c){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Eo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,I.Z)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(p["X-Firebase-Client"]=m);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,I.Z)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function An(h,...c){Cn.logLevel<=ct.in.WARN&&Cn.warn(`Auth (${Re.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Ot(h){return(0,j.m9)(h)}class ls{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,j.ne)(l=>this.observer=l)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function og(h){return new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",h),p.onload=c,p.onerror=m=>{const v=Dt("internal-error");v.customData=m,l(v)},p.type="text/javascript",p.charset="UTF-8",function FA(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(p)})}function $v(h){return`__${h}${Math.floor(1e6*Math.random())}`}class ag{constructor(c){this.type="recaptcha-enterprise",this.auth=Ot(c)}verify(c="verify",l=!1){var p=this;return(0,I.Z)(function*(){function v(){return v=(0,I.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var q=(0,I.Z)(function*(ae,ve){os(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ie=>{if(void 0!==Ie.recaptchaKey){const bt=new Sr(Ie);return null==P.tenantId?P._agentRecaptchaConfig=bt:P._tenantRecaptchaConfigs[P.tenantId]=bt,ae(bt.siteKey)}ve(new Error("recaptcha Enterprise site key undefined"))}).catch(Ie=>{ve(Ie)})});return function(ae,ve){return q.apply(this,arguments)}}())}),v.apply(this,arguments)}function T(P,q,ae){const ve=window.grecaptcha;Ar(ve)?ve.enterprise.ready(()=>{ve.enterprise.execute(P,{action:c}).then(Ie=>{q(Ie)}).catch(()=>{q("NO_RECAPTCHA")})}):ae(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,q)=>{(function m(P){return v.apply(this,arguments)})(p.auth).then(ae=>{if(!l&&Ar(window.grecaptcha))T(ae,P,q);else{if(typeof window>"u")return void q(new Error("RecaptchaVerifier is only supported in browser"));og("https://www.google.com/recaptcha/enterprise.js?render="+ae).then(()=>{T(ae,P,q)}).catch(ve=>{q(ve)})}}).catch(ae=>{q(ae)})})})()}}function zv(h,c,l){return fr.apply(this,arguments)}function fr(){return(fr=(0,I.Z)(function*(h,c,l,p=!1){const m=new ag(h);let v;try{v=yield m.verify(l)}catch{v=yield m.verify(l,!0)}const T=Object.assign({},c);return Object.assign(T,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T})).apply(this,arguments)}function Ae(h,c,l,p){return ug.apply(this,arguments)}function ug(){return ug=(0,I.Z)(function*(h,c,l,p){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield zv(h,c,l,"getOobCode"===l);return p(h,v)}return p(h,c).catch(function(){var v=(0,I.Z)(function*(T){if("auth/missing-recaptcha-token"===T.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield zv(h,c,l,"getOobCode"===l);return p(h,P)}return Promise.reject(T)});return function(T){return v.apply(this,arguments)}}())}),ug.apply(this,arguments)}function Ma(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function bd(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class qi{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Bt("not implemented")}_getIdTokenResponse(c){return Bt("not implemented")}_linkToIdToken(c,l){return Bt("not implemented")}_getReauthenticationResolver(c){return Bt("not implemented")}}function xa(h,c){return Na.apply(this,arguments)}function Na(){return(Na=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:resetPassword",$(h,c))})).apply(this,arguments)}function Rd(){return(Rd=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function qe(h,c){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function zn(){return(zn=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:update",$(h,c))})).apply(this,arguments)}function hg(h,c){return fg.apply(this,arguments)}function fg(){return(fg=(0,I.Z)(function*(h,c){return ie(h,"POST","/v1/accounts:signInWithPassword",$(h,c))})).apply(this,arguments)}function ft(h,c){return pg.apply(this,arguments)}function pg(){return(pg=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:sendOobCode",$(h,c))})).apply(this,arguments)}function ka(){return(ka=(0,I.Z)(function*(h,c){return ft(h,c)})).apply(this,arguments)}function Pd(h,c){return ac.apply(this,arguments)}function ac(){return(ac=(0,I.Z)(function*(h,c){return ft(h,c)})).apply(this,arguments)}function Md(h,c){return xd.apply(this,arguments)}function xd(){return(xd=(0,I.Z)(function*(h,c){return ft(h,c)})).apply(this,arguments)}function gg(){return(gg=(0,I.Z)(function*(h,c){return ft(h,c)})).apply(this,arguments)}function mg(){return(mg=(0,I.Z)(function*(h,c){return ie(h,"POST","/v1/accounts:signInWithEmailLink",$(h,c))})).apply(this,arguments)}function _g(){return(_g=(0,I.Z)(function*(h,c){return ie(h,"POST","/v1/accounts:signInWithEmailLink",$(h,c))})).apply(this,arguments)}class Gi extends qi{constructor(c,l,p,m=null){super("password",p),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new Gi(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new Gi(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return Ae(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",hg);case"emailLink":return function $A(h,c){return mg.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:dt(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,I.Z)(function*(){switch(p.signInMethod){case"password":return Ae(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qe);case"emailLink":return function HA(h,c){return _g.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:dt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function oi(h,c){return wo.apply(this,arguments)}function wo(){return(wo=(0,I.Z)(function*(h,c){return ie(h,"POST","/v1/accounts:signInWithIdp",$(h,c))})).apply(this,arguments)}class Ai extends qi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Ai(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):dt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m}=l,v=(0,jt._T)(l,["providerId","signInMethod"]);if(!p||!m)return null;const T=new Ai(p,m);return T.idToken=v.idToken||void 0,T.accessToken=v.accessToken||void 0,T.secret=v.secret,T.nonce=v.nonce,T.pendingToken=v.pendingToken||null,T}_getIdTokenResponse(c){return oi(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,oi(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,oi(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,j.xO)(l)}return c}}function uc(){return(uc=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:sendVerificationCode",$(h,c))})).apply(this,arguments)}function Od(){return(Od=(0,I.Z)(function*(h,c){return ie(h,"POST","/v1/accounts:signInWithPhoneNumber",$(h,c))})).apply(this,arguments)}function kd(){return(kd=(0,I.Z)(function*(h,c){const l=yield ie(h,"POST","/v1/accounts:signInWithPhoneNumber",$(h,c));if(l.temporaryProof)throw yn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const G={USER_NOT_FOUND:"user-not-found"};function oe(){return(oe=(0,I.Z)(function*(h,c){return ie(h,"POST","/v1/accounts:signInWithPhoneNumber",$(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),G)})).apply(this,arguments)}class Si extends qi{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new Si({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new Si({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function To(h,c){return Od.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function ds(h,c){return kd.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function yg(h,c){return oe.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}=c;return p||l||m||v?new Si({verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}):null}}class Va{constructor(c){var l,p,m,v,T,P;const q=(0,j.zd)((0,j.pd)(c)),ae=null!==(l=q.apiKey)&&void 0!==l?l:null,ve=null!==(p=q.oobCode)&&void 0!==p?p:null,Ie=function Fd(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=q.mode)&&void 0!==m?m:null);K(ae&&ve&&Ie,"argument-error"),this.apiKey=ae,this.operation=Ie,this.code=ve,this.continueUrl=null!==(v=q.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(T=q.languageCode)&&void 0!==T?T:null,this.tenantId=null!==(P=q.tenantId)&&void 0!==P?P:null}static parseLink(c){const l=function Fa(h){const c=(0,j.zd)((0,j.pd)(h)).link,l=c?(0,j.zd)((0,j.pd)(c)).deep_link_id:null,p=(0,j.zd)((0,j.pd)(h)).deep_link_id;return(p?(0,j.zd)((0,j.pd)(p)).link:null)||p||l||c||h}(c);try{return new Va(l)}catch{return null}}}let Vd=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,p){return Gi._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const m=Va.parseLink(p);return K(m,"argument-error"),Gi._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class Rn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Wi extends Rn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class qn extends Wi{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return K("providerId"in l&&"signInMethod"in l,"argument-error"),Ai._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return K(c.idToken||c.accessToken,"argument-error"),Ai._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return qn.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return qn.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:m,pendingToken:v,nonce:T,providerId:P}=c;if(!p&&!m&&!l&&!v||!P)return null;try{return new qn(P)._credential({idToken:l,accessToken:p,nonce:T,pendingToken:v})}catch{return null}}}let ai=(()=>{class h extends Wi{constructor(){super("facebook.com")}static credential(l){return Ai._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),ot=(()=>{class h extends Wi{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Ai._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:m}=l;if(!p&&!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),La=(()=>{class h extends Wi{constructor(){super("github.com")}static credential(l){return Ai._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class hs extends qi{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return oi(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,oi(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,oi(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m,pendingToken:v}=l;return p&&m&&v&&p===m?new hs(p,v):null}static _create(c,l){return new hs(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Wr extends Rn{constructor(c){K(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Wr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Wr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=hs.fromJSON(c);return K(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return hs._create(p,l)}catch{return null}}}let Do=(()=>{class h extends Wi{constructor(){super("twitter.com")}static credential(l,p){return Ai._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:m}=l;if(!p||!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function Ud(h,c){return cc.apply(this,arguments)}function cc(){return(cc=(0,I.Z)(function*(h,c){return ie(h,"POST","/v1/accounts:signUp",$(h,c))})).apply(this,arguments)}class pr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,m=!1){return(0,I.Z)(function*(){const v=yield z._fromIdTokenResponse(c,p,m),T=jd(p);return new pr({user:v,providerId:T,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,I.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const m=jd(p);return new pr({user:c,providerId:m,_tokenResponse:p,operationType:l})})()}}function jd(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function $s(){return($s=(0,I.Z)(function*(h){var c;const l=Ot(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new pr({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield Ud(l,{returnSecureToken:!0}),m=yield pr._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class Ua extends j.ZR{constructor(c,l,p,m){var v;super(l.code,l.message),this.operationType=p,this.user=m,Object.setPrototypeOf(this,Ua.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,m){return new Ua(c,l,p,m)}}function Bd(h,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?Ua._fromErrorAndOperation(h,v,c,p):v})}function Eg(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function $d(){return $d=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h);yield lc(!0,l,c);const{providerUserInfo:p}=yield function Aa(h,c){return br.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=Eg(p||[]);return l.providerData=l.providerData.filter(v=>m.has(v.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),$d.apply(this,arguments)}function Hd(h,c){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,I.Z)(function*(h,c,l=!1){const p=yield Gr(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return pr._forOperation(h,"link",p)})).apply(this,arguments)}function lc(h,c,l){return dc.apply(this,arguments)}function dc(){return(dc=(0,I.Z)(function*(h,c,l){yield zi(c);const m=!1===h?"provider-already-linked":"no-such-provider";K(Eg(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function Tg(h,c){return zd.apply(this,arguments)}function zd(){return(zd=(0,I.Z)(function*(h,c,l=!1){const{auth:p}=h,m="reauthenticate";try{const v=yield Gr(h,Bd(p,m,c,h),l);K(v.idToken,p,"internal-error");const T=Sn(v.idToken);K(T,p,"internal-error");const{sub:P}=T;return K(h.uid===P,p,"user-mismatch"),pr._forOperation(h,m,v)}catch(v){throw"auth/user-not-found"===v?.code&&dt(p,"user-mismatch"),v}})).apply(this,arguments)}function Dg(h,c){return qd.apply(this,arguments)}function qd(){return(qd=(0,I.Z)(function*(h,c,l=!1){const p="signIn",m=yield Bd(h,p,c),v=yield pr._fromIdTokenResponse(h,p,m);return l||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function ja(h,c){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,I.Z)(function*(h,c){return Dg(Ot(h),c)})).apply(this,arguments)}function Cg(h,c){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h);return yield lc(!1,l,c.providerId),Hd(l,c)})).apply(this,arguments)}function Gn(h,c){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,I.Z)(function*(h,c){return Tg((0,j.m9)(h),c)})).apply(this,arguments)}function Kd(){return(Kd=(0,I.Z)(function*(h,c){return ie(h,"POST","/v1/accounts:signInWithCustomToken",$(h,c))})).apply(this,arguments)}function Qd(){return Qd=(0,I.Z)(function*(h,c){const l=Ot(h),p=yield function Kv(h,c){return Kd.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield pr._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(m.user),m}),Qd.apply(this,arguments)}class Co{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?Pn._fromServerResponse(c,l):"totpInfo"in l?Wn._fromServerResponse(c,l):dt(c,"internal-error")}}class Pn extends Co{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new Pn(l)}}class Wn extends Co{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Wn(l)}}function Xe(h,c,l){var p;K((null===(p=l.url)||void 0===p?void 0:p.length)>0,h,"invalid-continue-uri"),K(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(K(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(K(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function dn(h){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,I.Z)(function*(h){const c=Ot(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function rr(){return(rr=(0,I.Z)(function*(h,c,l){const p=Ot(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Xe(p,m,l),yield Ae(p,m,"getOobCode",Pd)})).apply(this,arguments)}function hc(){return hc=(0,I.Z)(function*(h,c,l){yield xa((0,j.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&dn(h),m});return function(m){return p.apply(this,arguments)}}())}),hc.apply(this,arguments)}function Yd(){return Yd=(0,I.Z)(function*(h,c){yield function dg(h,c){return zn.apply(this,arguments)}((0,j.m9)(h),{oobCode:c})}),Yd.apply(this,arguments)}function Sg(h,c){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h),p=yield xa(l,{oobCode:c}),m=p.requestType;switch(K(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(p.mfaInfo,l,"internal-error");default:K(p.email,l,"internal-error")}let v=null;return p.mfaInfo&&(v=Co._fromServerResponse(Ot(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:m}})).apply(this,arguments)}function xe(){return(xe=(0,I.Z)(function*(h,c){const{data:l}=yield Sg((0,j.m9)(h),c);return l.email})).apply(this,arguments)}function xr(){return(xr=(0,I.Z)(function*(h,c,l){const p=Ot(h),T=yield Ae(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ud).catch(q=>{throw"auth/password-does-not-meet-requirements"===q.code&&dn(h),q}),P=yield pr._fromIdTokenResponse(p,"signIn",T);return yield p._updateCurrentUser(P.user),P})).apply(this,arguments)}function fs(){return(fs=(0,I.Z)(function*(h,c,l){const p=Ot(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(T,P){K(P.handleCodeInApp,p,"argument-error"),P&&Xe(p,T,P)})(m,l),yield Ae(p,m,"getOobCode",Md)})).apply(this,arguments)}function gs(){return(gs=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),m=Vd.credentialWithLink(c,l||rn());return K(m._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),ja(p,m)})).apply(this,arguments)}function Hs(){return(Hs=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:createAuthUri",$(h,c))})).apply(this,arguments)}function ms(){return ms=(0,I.Z)(function*(h,c){const p={identifier:c,continueUri:Ii()?rn():"http://localhost"},{signinMethods:m}=yield function Ne(h,c){return Hs.apply(this,arguments)}((0,j.m9)(h),p);return m||[]}),ms.apply(this,arguments)}function zs(){return zs=(0,I.Z)(function*(h,c){const l=(0,j.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&Xe(l.auth,m,c);const{email:v}=yield function BA(h,c){return ka.apply(this,arguments)}(l.auth,m);v!==h.email&&(yield h.reload())}),zs.apply(this,arguments)}function Zr(){return Zr=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&Xe(p.auth,v,l);const{email:T}=yield function Nd(h,c){return gg.apply(this,arguments)}(p.auth,v);T!==h.email&&(yield h.reload())}),Zr.apply(this,arguments)}function pc(){return(pc=(0,I.Z)(function*(h,c){return Q(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ui(){return ui=(0,I.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,j.m9)(h),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},T=yield Gr(p,function $a(h,c){return pc.apply(this,arguments)}(p.auth,v));p.displayName=T.displayName||null,p.photoURL=T.photoUrl||null;const P=p.providerData.find(({providerId:q})=>"password"===q);P&&(P.displayName=p.displayName,P.photoURL=p.photoURL),yield p._updateTokensIfNecessary(T)}),ui.apply(this,arguments)}function Ze(h,c,l){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,I.Z)(function*(h,c,l){const{auth:p}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),l&&(v.password=l);const T=yield Gr(h,function lg(h,c){return Rd.apply(this,arguments)}(p,v));yield h._updateTokensIfNecessary(T,!0)}),Rg.apply(this,arguments)}class qs{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class ci extends qs{constructor(c,l,p,m){super(c,l,p),this.username=m}}class _c extends qs{constructor(c,l){super(c,"facebook.com",l)}}class bo extends ci{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class Ha extends qs{constructor(c,l){super(c,"google.com",l)}}class xn extends ci{constructor(c,l,p){super(c,"twitter.com",l,p)}}function qA(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function Jd(h){var c,l;if(!h)return null;const{providerId:p}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!p&&h?.idToken){const T=null===(l=null===(c=Sn(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(T)return new qs(v,"anonymous"!==T&&"custom"!==T?T:null)}if(!p)return null;switch(p){case"facebook.com":return new _c(v,m);case"github.com":return new bo(v,m);case"google.com":return new Ha(v,m);case"twitter.com":return new xn(v,m,h.screenName||null);case"custom":case"anonymous":return new qs(v,null);default:return new qs(v,p,m)}}(l)}class Ro{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new Ro("enroll",c,l)}static _fromMfaPendingCredential(c){return new Ro("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return Ro._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return Ro._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Ng{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Ot(c),m=l.customData._serverResponse,v=(m.mfaInfo||[]).map(P=>Co._fromServerResponse(p,P));K(m.mfaPendingCredential,p,"internal-error");const T=Ro._fromMfaPendingCredential(m.mfaPendingCredential);return new Ng(T,v,function(){var P=(0,I.Z)(function*(q){const ae=yield q._process(p,T);delete m.mfaInfo,delete m.mfaPendingCredential;const ve=Object.assign(Object.assign({},m),{idToken:ae.idToken,refreshToken:ae.refreshToken});switch(l.operationType){case"signIn":const Ie=yield pr._fromIdTokenResponse(p,l.operationType,ve);return yield p._updateCurrentUser(Ie.user),Ie;case"reauthenticate":return K(l.user,p,"internal-error"),pr._forOperation(l.user,l.operationType,ve);default:dt(p,"internal-error")}});return function(q){return P.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,I.Z)(function*(){return l.signInResolver(c)})()}}class Og{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>Co._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Og(c)}getSession(){var c=this;return(0,I.Z)(function*(){return Ro._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,I.Z)(function*(){const m=c,v=yield p.getSession(),T=yield Gr(p.user,m._process(p.user.auth,v,l));return yield p.user._updateTokensIfNecessary(T),p.user.reload()})()}unenroll(c){var l=this;return(0,I.Z)(function*(){const p="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const v=yield Gr(l.user,function eS(h,c){return Q(h,"POST","/v2/accounts/mfaEnrollment:withdraw",$(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:T})=>T!==p),yield l.user._updateTokensIfNecessary(v),yield l.user.reload()}catch(v){throw v}})()}}const kg=new WeakMap,za="__sak";class Xd{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(za,"1"),this.storage.removeItem(za),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const qa=(()=>{class h extends Xd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function nS(){const h=(0,j.z$)();return Ci(h)||Oe(h)}()&&function We(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_e(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const m=this.storage.getItem(p),v=this.localCache[p];m!==v&&l(p,v,m)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((P,q,ae)=>{this.notifyListeners(P,ae)});const m=l.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!p)return}const v=()=>{const P=this.storage.getItem(m);!p&&this.localCache[m]===P||this.notifyListeners(m,P)},T=this.storage.getItem(m);!function Jt(){return(0,j.w1)()&&10===document.documentMode}()||T===l.newValue||l.newValue===l.oldValue?v():setTimeout(v,10)}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var m=()=>super._set,v=this;return(0,I.Z)(function*(){yield m().call(v,l,p),v.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,m=this;return(0,I.Z)(function*(){const v=yield p().call(m,l);return m.localCache[l]=JSON.stringify(v),v})()}_remove(l){var p=()=>super._remove,m=this;return(0,I.Z)(function*(){yield p().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),bi=(()=>{class h extends Xd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return h.type="SESSION",h})();let Qv=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(v=>v.isListeningto(l));if(p)return p;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,I.Z)(function*(){const m=l,{eventId:v,eventType:T,data:P}=m.data,q=p.handlersMap[T];if(!q?.size)return;m.ports[0].postMessage({status:"ack",eventId:v,eventType:T});const ae=Array.from(q).map(function(){var Ie=(0,I.Z)(function*(bt){return bt(m.origin,P)});return function(bt){return Ie.apply(this,arguments)}}()),ve=yield function Fg(h){return Promise.all(h.map(function(){var c=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(ae);m.ports[0].postMessage({status:"done",eventId:v,eventType:T,response:ve})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Ga(h="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return h+l}class Yv{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var m=this;return(0,I.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let T,P;return new Promise((q,ae)=>{const ve=Ga("",20);v.port1.start();const Ie=setTimeout(()=>{ae(new Error("unsupported_event"))},p);P={messageChannel:v,onMessage(bt){const xi=bt;if(xi.data.eventId===ve)switch(xi.data.status){case"ack":clearTimeout(Ie),T=setTimeout(()=>{ae(new Error("timeout"))},3e3);break;case"done":clearTimeout(T),q(xi.data.response);break;default:clearTimeout(Ie),clearTimeout(T),ae(new Error("invalid_response"))}}},m.handlers.add(P),v.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:c,eventId:ve,data:l},[v.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function hn(){return window}function Kr(){return typeof hn().WorkerGlobalScope<"u"&&"function"==typeof hn().importScripts}function on(){return(on=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ec="firebaseLocalStorageDb",Gs="firebaseLocalStorage",Lg="fbase_key";class Wa{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Za(h,c){return h.transaction([Gs],c?"readwrite":"readonly").objectStore(Gs)}function nh(){const h=indexedDB.open(Ec,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const p=h.result;try{p.createObjectStore(Gs,{keyPath:Lg})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const p=h.result;p.objectStoreNames.contains(Gs)?c(p):(p.close(),yield function th(){const h=indexedDB.deleteDatabase(Ec);return new Wa(h).toPromise()}(),c(yield nh()))}))})}function Ka(h,c,l){return rh.apply(this,arguments)}function rh(){return(rh=(0,I.Z)(function*(h,c,l){const p=Za(h,!0).put({[Lg]:c,value:l});return new Wa(p).toPromise()})).apply(this,arguments)}function jg(){return(jg=(0,I.Z)(function*(h,c){const l=Za(h,!1).get(c),p=yield new Wa(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function ih(h,c){const l=Za(h,!0).delete(c);return new Wa(l).toPromise()}const Qr=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield nh()),l.db})()}_withRetries(l){var p=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const v=yield p._openDb();return yield l(v)}catch(v){if(m++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return Kr()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=Qv._getInstance(function Vg(){return Kr()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,I.Z)(function*(m,v){return{keyProcessed:(yield l._poll()).includes(v.key)}});return function(m,v){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,I.Z)(function*(m,v){return["keyChanged"]});return function(m,v){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var p,m;if(l.activeServiceWorker=yield function vc(){return on.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new Yv(l.activeServiceWorker);const v=yield l.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(m=v[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,I.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Ic(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield nh();return yield Ka(l,za,"1"),yield ih(l,za),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,I.Z)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(v=>Ka(v,l,p)),m.localCache[l]=p,m.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=yield p._withRetries(v=>function Ug(h,c){return jg.apply(this,arguments)}(v,l));return p.localCache[l]=m,m})()}_remove(l){var p=this;return(0,I.Z)(function*(){return p._withPendingWrite((0,I.Z)(function*(){return yield p._withRetries(m=>ih(m,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const p=yield l._withRetries(T=>{const P=Za(T,!1).getAll();return new Wa(P).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const m=[],v=new Set;if(0!==p.length)for(const{fbase_key:T,value:P}of p)v.add(T),JSON.stringify(l.localCache[T])!==JSON.stringify(P)&&(l.notifyListeners(T,P),m.push(T));for(const T of Object.keys(l.localCache))l.localCache[T]&&!v.has(T)&&(l.notifyListeners(T,null),m.push(T));return m})()}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),wc=1e12;class sh{constructor(c){this.auth=c,this.counter=wc,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new nI(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||wc;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||wc))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,I.Z)(function*(){var p;return null===(p=l._widgets.get(c||wc))||void 0===p||p.execute(),""})()}}class nI{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;K(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ri(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<h;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Tc=$v("rcb"),qg=new wi(3e4,6e4);class rI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=hn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return K(function Dc(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&Bn(hn().grecaptcha)?Promise.resolve(hn().grecaptcha):new Promise((p,m)=>{const v=hn().setTimeout(()=>{m(Dt(c,"network-request-failed"))},qg.get());hn()[Tc]=()=>{hn().clearTimeout(v),delete hn()[Tc];const P=hn().grecaptcha;if(!P||!Bn(P))return void m(Dt(c,"internal-error"));const q=P.render;P.render=(ae,ve)=>{const Ie=q(ae,ve);return this.counter++,Ie},this.hostLanguage=l,p(P)},og(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Tc,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(v),m(Dt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=hn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mr{load(c){return(0,I.Z)(function*(){return new sh(c)})()}clearedOneInstance(){}}const Gg="recaptcha",Wg={theme:"light",type:"image"};class Mo{constructor(c,l,p=Object.assign({},Wg)){this.parameters=p,this.type=Gg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ot(c),this.isInvisible="invisible"===this.parameters.size,K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;K(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mr:new rI,this.validateStartingState()}verify(){var c=this;return(0,I.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(v=>{const T=P=>{P&&(c.tokenChangeListeners.delete(T),v(P))};c.tokenChangeListeners.add(T),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=hn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,I.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,I.Z)(function*(){K(Ii()&&!Kr(),c.auth,"internal-error"),yield function kr(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function Da(h){return Hi.apply(this,arguments)}(c.auth);K(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class oh{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=Si._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function ah(){return(ah=(0,I.Z)(function*(h,c,l){const p=Ot(h),m=yield Qa(p,c,(0,j.m9)(l));return new oh(m,v=>ja(p,v))})).apply(this,arguments)}function Cc(){return(Cc=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);yield lc(!1,p,"phone");const m=yield Qa(p.auth,c,(0,j.m9)(l));return new oh(m,v=>Cg(p,v))})).apply(this,arguments)}function Ac(){return(Ac=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h),m=yield Qa(p.auth,c,(0,j.m9)(l));return new oh(m,v=>Gn(p,v))})).apply(this,arguments)}function Qa(h,c,l){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,I.Z)(function*(h,c,l){var p;const m=yield l.verify();try{let v;if(K("string"==typeof m,h,"argument-error"),K(l.type===Gg,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const T=v.session;if("phoneNumber"in v)return K("enroll"===T.type,h,"internal-error"),(yield function YA(h,c){return Q(h,"POST","/v2/accounts/mfaEnrollment:start",$(h,c))}(h,{idToken:T.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{K("signin"===T.type,h,"internal-error");const P=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return K(P,h,"missing-multi-factor-info"),(yield function $g(h,c){return Q(h,"POST","/v2/accounts/mfaSignIn:start",$(h,c))}(h,{mfaPendingCredential:T.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:T}=yield function Zv(h,c){return uc.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:m});return T}}finally{l._reset()}}),Sc.apply(this,arguments)}function Se(){return(Se=(0,I.Z)(function*(h,c){yield Hd((0,j.m9)(h),c)})).apply(this,arguments)}let xo=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Ot(l)}verifyPhoneNumber(l,p){return Qa(this.auth,l,(0,j.m9)(p))}static credential(l,p){return Si._fromVerification(l,p)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:m}=l;return p&&m?Si._fromTokenResponse(p,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function No(h,c){return c?$e(c):(K(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class uh extends qi{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return oi(c,this._buildIdpRequest())}_linkToIdToken(c,l){return oi(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return oi(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function aI(h){return Dg(h.auth,new uh(h),h.bypassAuthState)}function uI(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),Tg(l,new uh(h),h.bypassAuthState)}function Zg(h){return vs.apply(this,arguments)}function vs(){return(vs=(0,I.Z)(function*(h){const{auth:c,user:l}=h;return K(l,c,"internal-error"),Hd(l,new uh(h),h.bypassAuthState)})).apply(this,arguments)}class Kg{constructor(c,l,p,m,v=!1){this.auth=c,this.resolver=p,this.user=m,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,I.Z)(function*(p,m){c.pendingPromise={resolve:p,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,I.Z)(function*(){const{urlResponse:p,sessionId:m,postBody:v,tenantId:T,error:P,type:q}=c;if(P)return void l.reject(P);const ae={auth:l.auth,requestUri:p,sessionId:m,tenantId:T||void 0,postBody:v||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(q)(ae))}catch(ve){l.reject(ve)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return aI;case"linkViaPopup":case"linkViaRedirect":return Zg;case"reauthViaPopup":case"reauthViaRedirect":return uI;default:dt(this.auth,"internal-error")}}resolve(c){Mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cI=new wi(2e3,1e4);function ch(){return(ch=(0,I.Z)(function*(h,c,l){const p=Ot(h);Be(h,c,Rn);const m=No(p,l);return new dh(p,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function J(){return(J=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);Be(p.auth,c,Rn);const m=No(p.auth,l);return new dh(p.auth,"reauthViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}function lh(){return(lh=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);Be(p.auth,c,Rn);const m=No(p.auth,l);return new dh(p.auth,"linkViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}let dh=(()=>{class h extends Kg{constructor(l,p,m,v,T){super(l,p,v,T),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const p=yield l.execute();return K(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,I.Z)(function*(){Mt(1===l.filter.length,"Popup operations only handle one event");const p=Ga();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(Dt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,m;this.pollId=null!==(m=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Dt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,cI.get())};l()}}return h.currentPopupAction=null,h})();const Nn="pendingRedirect",Oo=new Map;class Ya extends Kg{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,I.Z)(function*(){let p=Oo.get(l.auth._key());if(!p){try{const v=(yield function Pi(h,c){return Ja.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(v)}catch(m){p=()=>Promise.reject(m)}Oo.set(l.auth._key(),p)}return l.bypassAuthState||Oo.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,I.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const m=yield p.auth._redirectUserForId(c.eventId);if(m)return p.user=m,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function Ja(){return(Ja=(0,I.Z)(function*(h,c){const l=Mi(c),p=Kn(h);if(!(yield p._isAvailable()))return!1;const m="true"===(yield p._get(l));return yield p._remove(l),m})).apply(this,arguments)}function Xa(h,c){return hh.apply(this,arguments)}function hh(){return(hh=(0,I.Z)(function*(h,c){return Kn(h)._set(Mi(c),"true")})).apply(this,arguments)}function bc(h,c){Oo.set(h._key(),c)}function Kn(h){return $e(h._redirectPersistence)}function Mi(h){return vn(Nn,h.config.apiKey,h.name)}function Qg(h,c,l){return function ko(h,c,l){return di.apply(this,arguments)}(h,c,l)}function di(){return(di=(0,I.Z)(function*(h,c,l){const p=Ot(h);Be(h,c,Rn),yield p._initializationPromise;const m=No(p,l);return yield Xa(m,p),m._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function hI(h,c,l){return function Yg(h,c,l){return fh.apply(this,arguments)}(h,c,l)}function fh(){return(fh=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);Be(p.auth,c,Rn),yield p.auth._initializationPromise;const m=No(p.auth,l);yield Xa(m,p.auth);const v=yield Mc(p);return m._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function fI(h,c,l){return function ph(h,c,l){return eu.apply(this,arguments)}(h,c,l)}function eu(){return(eu=(0,I.Z)(function*(h,c,l){const p=(0,j.m9)(h);Be(p.auth,c,Rn),yield p.auth._initializationPromise;const m=No(p.auth,l);yield lc(!1,p,c.providerId),yield Xa(m,p.auth);const v=yield Mc(p);return m._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function tu(){return(tu=(0,I.Z)(function*(h,c){return yield Ot(h)._initializationPromise,Rc(h,c,!1)})).apply(this,arguments)}function Rc(h,c){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,I.Z)(function*(h,c,l=!1){const p=Ot(h),m=No(p,c),T=yield new Ya(p,m,l).execute();return T&&!l&&(delete T.user._redirectEventId,yield p._persistUserIfCurrent(T.user),yield p._setRedirectUser(null,c)),T})).apply(this,arguments)}function Mc(h){return xc.apply(this,arguments)}function xc(){return(xc=(0,I.Z)(function*(h){const c=Ga(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class gh{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function pI(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nc(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!Nc(c)){const m=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(Dt(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mh(c))}saveEventToCache(c){this.cachedEventUids.add(mh(c)),this.lastProcessedEventTime=Date.now()}}function mh(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function Nc({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function em(h){return On.apply(this,arguments)}function On(){return(On=(0,I.Z)(function*(h,c={}){return Q(h,"GET","/v1/projects",c)})).apply(this,arguments)}const Ws=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zt=/^https?/;function _h(){return(_h=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield em(h);for(const l of c)try{if(mI(l))return}catch{}dt(h,"unauthorized-domain")})).apply(this,arguments)}function mI(h){const c=rn(),{protocol:l,hostname:p}=new URL(c);if(h.startsWith("chrome-extension://")){const T=new URL(h);return""===T.hostname&&""===p?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&T.hostname===p}if(!zt.test(l))return!1;if(Ws.test(h))return p===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(p)}const _I=new wi(3e4,6e4);function yh(){const h=hn().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let Zs=null;const yI=new wi(5e3,15e3),Oc="__/auth/iframe",kc="emulator/auth/iframe",Fc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nm(h){const c=h.config;K(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?O(c,kc):`https://${h.config.authDomain}/${Oc}`,p={apiKey:c.apiKey,appName:h.name,v:Re.SDK_VERSION},m=vh.get(h.config.apiHost);m&&(p.eid=m);const v=h._getFrameworks();return v.length&&(p.fw=v.join(",")),`${l}?${(0,j.xO)(p).slice(1)}`}function Ih(){return Ih=(0,I.Z)(function*(h){const c=yield function Is(h){return Zs=Zs||function tm(h){return new Promise((c,l)=>{var p,m,v;function T(){yh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{yh(),l(Dt(h,"network-request-failed"))},timeout:_I.get()})}if(null!==(m=null===(p=hn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(v=hn().gapi)||void 0===v||!v.load){const P=$v("iframefcb");return hn()[P]=()=>{gapi.load?T():l(Dt(h,"network-request-failed"))},og(`https://apis.google.com/js/api.js?onload=${P}`).catch(q=>l(q))}T()}}).catch(c=>{throw Zs=null,c})}(h),Zs}(h),l=hn().gapi;return K(l,h,"internal-error"),c.open({where:document.body,url:nm(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fc,dontclear:!0},p=>new Promise(function(){var m=(0,I.Z)(function*(v,T){yield p.restyle({setHideOnLeave:!1});const P=Dt(h,"network-request-failed"),q=hn().setTimeout(()=>{T(P)},yI.get());function ae(){hn().clearTimeout(q),v(p)}p.ping(ae).then(ae,()=>{T(P)})});return function(v,T){return m.apply(this,arguments)}}()))}),Ih.apply(this,arguments)}const Fo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class II{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const uS="__/auth/handler",cS="emulator/auth/handler",wh=encodeURIComponent("fac");function Ks(h,c,l,p,m,v){return Th.apply(this,arguments)}function Th(){return(Th=(0,I.Z)(function*(h,c,l,p,m,v){K(h.config.authDomain,h,"auth-domain-config-required"),K(h.config.apiKey,h,"invalid-api-key");const T={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:p,v:Re.SDK_VERSION,eventId:m};if(c instanceof Rn){c.setDefaultLanguage(h.languageCode),T.providerId=c.providerId||"",(0,j.xb)(c.getCustomParameters())||(T.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ve,Ie]of Object.entries(v||{}))T[ve]=Ie}if(c instanceof Wi){const ve=c.getScopes().filter(Ie=>""!==Ie);ve.length>0&&(T.scopes=ve.join(","))}h.tenantId&&(T.tid=h.tenantId);const P=T;for(const ve of Object.keys(P))void 0===P[ve]&&delete P[ve];const q=yield h._getAppCheckToken(),ae=q?`#${wh}=${encodeURIComponent(q)}`:"";return`${function ru({config:h}){return h.emulator?O(h,cS):`https://${h.authDomain}/${uS}`}(h)}?${(0,j.xO)(P).slice(1)}${ae}`})).apply(this,arguments)}const iu="webStorageSupport",TI=class Vc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bi,this._completeRedirectFn=Rc,this._overrideRedirectResult=bc}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){var T;Mt(null===(T=v.eventManagers[c._key()])||void 0===T?void 0:T.manager,"_initialize() not called before _openPopup()");const P=yield Ks(c,l,p,rn(),m);return function EI(h,c,l,p=500,m=600){const v=Math.max((window.screen.availHeight-m)/2,0).toString(),T=Math.max((window.screen.availWidth-p)/2,0).toString();let P="";const q=Object.assign(Object.assign({},Fo),{width:p.toString(),height:m.toString(),top:v,left:T}),ae=(0,j.z$)().toLowerCase();l&&(P=oc(ae)?"_blank":l),vt(ae)&&(c=c||"http://localhost",q.scrollbars="yes");const ve=Object.entries(q).reduce((bt,[xi,Uh])=>`${bt}${xi}=${Uh},`,"");if(function W(h=(0,j.z$)()){var c;return Oe(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ae)&&"_self"!==P)return function wI(h,c){const l=document.createElement("a");l.href=h,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",P),new II(null);const Ie=window.open(c||"",P,ve);K(Ie,h,"popup-blocked");try{Ie.focus()}catch{}return new II(Ie)}(c,P,Ga())})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v._originValidation(c),function Jv(h){hn().location.href=h}(yield Ks(c,l,p,rn(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:v}=this.eventManagers[l];return m?Promise.resolve(m):(Mt(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,I.Z)(function*(){const p=yield function rm(h){return Ih.apply(this,arguments)}(c),m=new gh(c);return p.register("authEvent",v=>(K(v?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=p,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(iu,{type:iu},m=>{var v;const T=null===(v=m?.[0])||void 0===v?void 0:v[iu];void 0!==T&&l(!!T),dt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function gI(h){return _h.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return _e()||Ci()||Oe()}};class im{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Bt("unexpected MultiFactorSessionType")}}}class Lc extends im{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Lc(c)}_finalizeEnroll(c,l,p){return function JA(h,c){return Q(h,"POST","/v2/accounts/mfaEnrollment:finalize",$(h,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function eI(h,c){return Q(h,"POST","/v2/accounts/mfaSignIn:finalize",$(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let DI=(()=>{class h{constructor(){}static assertion(l){return Lc._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var Ch="@firebase/auth";class Ah{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fr(){return window}(0,j.Pz)("authIdTokenMaxAge"),function sm(h){(0,Re._registerComponent)(new Qt.wA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:T,authDomain:P}=p.options;K(T&&!T.includes(":"),"invalid-api-key",{appName:p.name});const q={apiKey:T,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Eo(h)},ae=new Bv(p,m,v,q);return function jA(h,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map($e);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(p,c?.popupRedirectResolver)}(ae,l),ae},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Re._registerComponent)(new Qt.wA("auth-internal",c=>{const l=Ot(c.getProvider("auth").getImmediate());return new Ah(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)(Ch,"1.5.1",function CI(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Re.registerVersion)(Ch,"1.5.1","esm2017")}("Browser");function Uc(){return Uc=(0,I.Z)(function*(h,c,l){var p;const{BuildInfo:m}=Fr();Mt(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function RI(h){return jc.apply(this,arguments)}(c.sessionId),T={};return Oe()?T.ibi=m.packageName:A()?T.apn=m.packageName:dt(h,"operation-not-supported-in-this-environment"),m.displayName&&(T.appDisplayName=m.displayName),T.sessionId=v,Ks(h,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,T)}),Uc.apply(this,arguments)}function Rh(){return(Rh=(0,I.Z)(function*(h){const{BuildInfo:c}=Fr(),l={};Oe()?l.iosBundleId=c.packageName:A()?l.androidPackageName=c.packageName:dt(h,"operation-not-supported-in-this-environment"),yield em(h,l)})).apply(this,arguments)}function uu(){return(uu=(0,I.Z)(function*(h,c,l){const{cordova:p}=Fr();let m=()=>{};try{yield new Promise((v,T)=>{let P=null;function q(){var Ie;v();const bt=null===(Ie=p.plugins.browsertab)||void 0===Ie?void 0:Ie.close;"function"==typeof bt&&bt(),"function"==typeof l?.close&&l.close()}function ae(){P||(P=window.setTimeout(()=>{T(Dt(h,"redirect-cancelled-by-user"))},2e3))}function ve(){"visible"===document?.visibilityState&&ae()}c.addPassiveListener(q),document.addEventListener("resume",ae,!1),A()&&document.addEventListener("visibilitychange",ve,!1),m=()=>{c.removePassiveListener(q),document.removeEventListener("resume",ae,!1),document.removeEventListener("visibilitychange",ve,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function jc(){return(jc=(0,I.Z)(function*(h){const c=function cu(h){if(Mt(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let p=0;p<h.length;p++)l[p]=h.charCodeAt(p);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Uo extends gh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,I.Z)(function*(){yield c.initPromise})()}}function Bc(h){return Es.apply(this,arguments)}function Es(){return(Es=(0,I.Z)(function*(h){const c=yield lm()._get(dm(h));return c&&(yield lm()._remove(dm(h))),c})).apply(this,arguments)}function PI(){const h=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return h.join("")}function lm(){return $e(qa)}function dm(h){return vn("authEvent",h.config.apiKey,h.name)}function Mh(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,j.zd)(l.join("?"))}const MI=class Bo{constructor(){this._redirectPersistence=bi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Rc,this._overrideRedirectResult=bc}_initialize(c){var l=this;return(0,I.Z)(function*(){const p=c._key();let m=l.eventManagers.get(p);return m||(m=new Uo(c),l.eventManagers.set(p,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){dt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){!function Ph(h){var c,l,p,m,v,T,P,q,ae,ve;const Ie=Fr();K("function"==typeof(null===(c=Ie?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(typeof(null===(l=Ie?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(v=null===(m=null===(p=Ie?.cordova)||void 0===p?void 0:p.plugins)||void 0===m?void 0:m.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(q=null===(P=null===(T=Ie?.cordova)||void 0===T?void 0:T.plugins)||void 0===P?void 0:P.browsertab)||void 0===q?void 0:q.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(ve=null===(ae=Ie?.cordova)||void 0===ae?void 0:ae.InAppBrowser)||void 0===ve?void 0:ve.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const T=yield v._initialize(c);yield T.initialized(),T.resetRedirect(),function oS(){Oo.clear()}(),yield v._originValidation(c);const P=function jo(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:PI(),postBody:null,tenantId:h.tenantId,error:Dt(h,"no-auth-event")}}(c,p,m);yield function cm(h,c){return lm()._set(dm(h),c)}(c,P);const q=yield function um(h,c,l){return Uc.apply(this,arguments)}(c,P,l),ae=yield function ir(h){const{cordova:c}=Fr();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let m=null;p?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function Je(h=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(q);return function bI(h,c,l){return uu.apply(this,arguments)}(c,T,ae)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function au(h){return Rh.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:m,BuildInfo:v}=Fr(),T=setTimeout((0,I.Z)(function*(){yield Bc(c),l.onEvent(hm())}),500),P=function(){var ve=(0,I.Z)(function*(Ie){clearTimeout(T);const bt=yield Bc(c);let xi=null;bt&&Ie?.url&&(xi=function lS(h,c){var l,p;const m=function hS(h){const c=Mh(h),l=c.link?decodeURIComponent(c.link):void 0,p=Mh(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Mh(m).link||m||p||l||h}(c);if(m.includes("/__/auth/callback")){const v=Mh(m),T=v.firebaseError?function dS(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,P=null===(p=null===(l=T?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],q=P?Dt(P):null;return q?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:q,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(bt,Ie.url)),l.onEvent(xi||hm())});return function(bt){return ve.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,P);const q=m,ae=`${v.packageName.toLowerCase()}://`;Fr().handleOpenURL=function(){var ve=(0,I.Z)(function*(Ie){if(Ie.toLowerCase().startsWith(ae)&&P({url:Ie}),"function"==typeof q)try{q(Ie)}catch(bt){console.error(bt)}});return function(Ie){return ve.apply(this,arguments)}}()}};function hm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Dt("no-auth-event")}}function Qn(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function xh(h=(0,j.z$)()){return!("file:"!==Qn()&&"ionic:"!==Qn()&&"capacitor:"!==Qn()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function fm(){try{const h=self.localStorage,c=Ga();if(h)return h.setItem(c,"1"),h.removeItem(c),!function pS(h=(0,j.z$)()){return function du(){return(0,j.w1)()&&11===document?.documentMode}()||function OI(h=(0,j.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,j.hl)()}catch{return pm()&&(0,j.hl)()}return!1}function pm(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function sr(){return(function $o(){return"http:"===Qn()||"https:"===Qn()}()||(0,j.ru)()||xh())&&!function $c(){return(0,j.b$)()||(0,j.UG)()}()&&fm()&&!pm()}function Hc(){return xh()&&typeof document<"u"}function gm(){return(gm=(0,I.Z)(function*(){return!!Hc()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const Vr={LOCAL:"local",NONE:"none",SESSION:"session"},hu=K,_m="persistence";function Nh(h){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,I.Z)(function*(h){yield h._initializationPromise;const c=fu(),l=vn(_m,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function fu(){var h;try{return(null===(h=function mm(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const Fh=K;class Yr{constructor(){this.browserResolver=$e(TI),this.cordovaResolver=$e(MI),this.underlyingResolver=null,this._redirectPersistence=bi,this._completeRedirectFn=Rc,this._overrideRedirectResult=bc}_initialize(c){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,l,p,m)})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,l,p,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Hc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,I.Z)(function*(){if(c.underlyingResolver)return;const l=yield function Ho(){return gm.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function ym(h){return h.unwrap()}function FI(h){return qc(h)}function qc(h){const{_tokenResponse:c}=h instanceof j.ZR?h.customData:h;if(!c)return null;if(!(h instanceof j.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return xo.credentialFromResult(h);const l=c.providerId;if(!l||l===Ke.PASSWORD)return null;let p;switch(l){case Ke.GOOGLE:p=ot;break;case Ke.FACEBOOK:p=ai;break;case Ke.GITHUB:p=La;break;case Ke.TWITTER:p=Do;break;default:const{oauthIdToken:m,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:P,nonce:q}=c;return v||T||m||P?P?l.startsWith("saml.")?hs._create(l,P):Ai._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:v}):new qn(l).credential({idToken:m,accessToken:v,rawNonce:q}):null}return h instanceof j.ZR?p.credentialFromError(h):p.credentialFromResult(h)}function kn(h,c){return c.catch(l=>{throw l instanceof j.ZR&&function vm(h,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new VI(h,function QA(h,c){var l;const p=(0,j.m9)(h),m=c;return K(c.customData.operationType,p,"argument-error"),K(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),Ng._fromError(p,m)}(h,c));else if(p){const m=qc(c),v=c;m&&(v.credential=m,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:FI(l),additionalUserInfo:qA(l),user:_r.getOrCreate(m)}})}function Gc(h,c){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,I.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>kn(h,l.confirm(p))}})).apply(this,arguments)}class VI{constructor(c,l){this.resolver=l,this.auth=function zc(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return kn(ym(this.auth),this.resolver.resolveSignIn(c))}}class _r{constructor(c){this._delegate=c,this.multiFactor=function tS(h){const c=(0,j.m9)(h);return kg.has(c)||kg.set(c,Og._fromUser(c)),kg.get(c)}(c)}static getOrCreate(c){return _r.USER_MAP.has(c)||_r.USER_MAP.set(c,new _r(c)),_r.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,I.Z)(function*(){return kn(l.auth,Cg(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,I.Z)(function*(){return Gc(p.auth,function ys(h,c,l){return Cc.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,I.Z)(function*(){return kn(l.auth,function tt(h,c,l){return lh.apply(this,arguments)}(l._delegate,c,Yr))})()}linkWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield Nh(Ot(l.auth)),fI(l._delegate,c,Yr)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,I.Z)(function*(){return kn(l.auth,Gn(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Gc(this.auth,function sI(h,c,l){return Ac.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return kn(this.auth,function dI(h,c,l){return J.apply(this,arguments)}(this._delegate,c,Yr))}reauthenticateWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield Nh(Ot(l.auth)),hI(l._delegate,c,Yr)})()}sendEmailVerification(c){return function nn(h,c){return zs.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,I.Z)(function*(){return yield function wg(h,c){return $d.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function gc(h,c){return Ze((0,j.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function mc(h,c){return Ze((0,j.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function oI(h,c){return Se.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function _s(h,c){return ui.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function So(h,c,l){return Zr.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_r.USER_MAP=new WeakMap;const Qi=K;let Im=(()=>{class h{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;Qi(m,"invalid-api-key",{appName:l.name}),Qi(m,"invalid-api-key",{appName:l.name});const v=typeof window<"u"?Yr:void 0;this._delegate=p.initialize({options:{persistence:Em(m,l.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(Dn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_r.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function Hn(h,c,l){const p=Ot(h);K(p._canInitEmulator,p,"emulator-config-failed"),K(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const m=!!l?.disableWarnings,v=Ma(c),{host:T,port:P}=function qv(h){const c=Ma(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(p);if(m){const v=m[1];return{host:v,port:bd(p.substr(v.length+1))}}{const[v,T]=p.split(":");return{host:v,port:bd(T)}}}(c);p.config.emulator={url:`${v}//${T}${null===P?"":`:${P}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:T,port:P,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function Gv(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,p)}applyActionCode(l){return function fc(h,c){return Yd.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Sg(this._delegate,l)}confirmPasswordReset(l,p){return function Ag(h,c,l){return hc.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var m=this;return(0,I.Z)(function*(){return kn(m._delegate,function kt(h,c,l){return xr.apply(this,arguments)}(m._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function bg(h,c){return ms.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function tn(h,c){const l=Va.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){Qi(sr(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function Jg(h,c){return tu.apply(this,arguments)}(l._delegate,Yr);return p?kn(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function fn(h,c){Ot(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,m){const{next:v,error:T,complete:P}=LI(l,p,m);return this._delegate.onAuthStateChanged(v,T,P)}onIdTokenChanged(l,p,m){const{next:v,error:T,complete:P}=LI(l,p,m);return this._delegate.onIdTokenChanged(v,T,P)}sendSignInLinkToEmail(l,p){return function Zn(h,c,l){return fs.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function Ao(h,c,l){return rr.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,I.Z)(function*(){let m;switch(function kI(h,c){hu(Object.values(Vr).includes(c),h,"invalid-persistence-type"),(0,j.b$)()?hu(c!==Vr.SESSION,h,"unsupported-persistence-type"):(0,j.UG)()?hu(c===Vr.NONE,h,"unsupported-persistence-type"):pm()?hu(c===Vr.NONE||c===Vr.LOCAL&&(0,j.hl)(),h,"unsupported-persistence-type"):hu(c===Vr.NONE||fm(),h,"unsupported-persistence-type")}(p._delegate,l),l){case Vr.SESSION:m=bi;break;case Vr.LOCAL:m=(yield $e(Qr)._isAvailable())?Qr:qa;break;case Vr.NONE:m=Nt;break;default:return dt("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return kn(this._delegate,function Ig(h){return $s.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return kn(this._delegate,ja(this._delegate,l))}signInWithCustomToken(l){return kn(this._delegate,function gr(h,c){return Qd.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return kn(this._delegate,function Ba(h,c,l){return ja((0,j.m9)(h),Vd.credential(c,l)).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&dn(h),m});return function(m){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return kn(this._delegate,function ps(h,c,l){return gs.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return Gc(this._delegate,function iI(h,c,l){return ah.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,I.Z)(function*(){return Qi(sr(),p._delegate,"operation-not-supported-in-this-environment"),kn(p._delegate,function lI(h,c,l){return ch.apply(this,arguments)}(p._delegate,l,Yr))})()}signInWithRedirect(l){var p=this;return(0,I.Z)(function*(){return Qi(sr(),p._delegate,"operation-not-supported-in-this-environment"),yield Nh(p._delegate),Qg(p._delegate,l,Yr)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function he(h,c){return xe.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=Vr,h})();function LI(h,c,l){let p=h;"function"!=typeof h&&({next:p,error:c,complete:l}=h);const m=p;return{next:T=>m(T&&_r.getOrCreate(T)),error:c,complete:l}}function Em(h,c){const l=function kh(h,c){const l=fu();if(!l)return[];const p=vn(_m,h,c);switch(l.getItem(p)){case Vr.NONE:return[Nt];case Vr.LOCAL:return[Qr,bi];case Vr.SESSION:return[bi];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(Qr)&&l.push(Qr),typeof window<"u")for(const p of[qa,bi])l.includes(p)||l.push(p);return l.includes(Nt)||l.push(Nt),l}class Lh{constructor(){this.providerId="phone",this._delegate=new xo(ym(be.Z.auth()))}static credential(c,l){return xo.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Lh.PHONE_SIGN_IN_METHOD=xo.PHONE_SIGN_IN_METHOD,Lh.PROVIDER_ID=xo.PROVIDER_ID;const gS=K;class UI{constructor(c,l,p=be.Z.app()){var m;gS(null===(m=p.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new Mo(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function BI(h){h.INTERNAL.registerComponent(new Qt.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new Im(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vd,FacebookAuthProvider:ai,GithubAuthProvider:La,GoogleAuthProvider:ot,OAuthProvider:qn,SAMLAuthProvider:Wr,PhoneAuthProvider:Lh,PhoneMultiFactorGenerator:DI,RecaptchaVerifier:UI,TwitterAuthProvider:Do,Auth:Im,AuthCredential:qi,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.1")}(be.Z)},861:($i,wn,Ve)=>{function I(j,Re,ct,jt,Qt,Tn,Ke){try{var Y=j[Tn](Ke),se=Y.value}catch(ye){return void ct(ye)}Y.done?Re(se):Promise.resolve(se).then(jt,Qt)}function be(j){return function(){var Re=this,ct=arguments;return new Promise(function(jt,Qt){var Tn=j.apply(Re,ct);function Ke(se){I(Tn,jt,Qt,Ke,Y,"next",se)}function Y(se){I(Tn,jt,Qt,Ke,Y,"throw",se)}Ke(void 0)})}}Ve.d(wn,{Z:()=>be})},582:($i,wn,Ve)=>{function Re(O,V){var B={};for(var H in O)Object.prototype.hasOwnProperty.call(O,H)&&V.indexOf(H)<0&&(B[H]=O[H]);if(null!=O&&"function"==typeof Object.getOwnPropertySymbols){var $=0;for(H=Object.getOwnPropertySymbols(O);$<H.length;$++)V.indexOf(H[$])<0&&Object.prototype.propertyIsEnumerable.call(O,H[$])&&(B[H[$]]=O[H[$]])}return B}function ye(O,V,B,H){return new(B||(B=Promise))(function(Q,le){function Ee(Ye){try{ie(H.next(Ye))}catch($t){le($t)}}function Yt(Ye){try{ie(H.throw(Ye))}catch($t){le($t)}}function ie(Ye){Ye.done?Q(Ye.value):function $(Q){return Q instanceof B?Q:new B(function(le){le(Q)})}(Ye.value).then(Ee,Yt)}ie((H=H.apply(O,V||[])).next())})}function Pt(O){return this instanceof Pt?(this.v=O,this):new Pt(O)}function dt(O,V,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $,H=B.apply(O,V||[]),Q=[];return $={},le("next"),le("throw"),le("return"),$[Symbol.asyncIterator]=function(){return this},$;function le(St){H[St]&&($[St]=function(jn){return new Promise(function(yn,Bn){Q.push([St,jn,yn,Bn])>1||Ee(St,jn)})})}function Ee(St,jn){try{!function Yt(St){St.value instanceof Pt?Promise.resolve(St.value.v).then(ie,Ye):$t(Q[0][2],St)}(H[St](jn))}catch(yn){$t(Q[0][3],yn)}}function ie(St){Ee("next",St)}function Ye(St){Ee("throw",St)}function $t(St,jn){St(jn),Q.shift(),Q.length&&Ee(Q[0][0],Q[0][1])}}function dr(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B,V=O[Symbol.asyncIterator];return V?V.call(O):(O=function lt(O){var V="function"==typeof Symbol&&Symbol.iterator,B=V&&O[V],H=0;if(B)return B.call(O);if(O&&"number"==typeof O.length)return{next:function(){return O&&H>=O.length&&(O=void 0),{value:O&&O[H++],done:!O}}};throw new TypeError(V?"Object is not iterable.":"Symbol.iterator is not defined.")}(O),B={},H("next"),H("throw"),H("return"),B[Symbol.asyncIterator]=function(){return this},B);function H(Q){B[Q]=O[Q]&&function(le){return new Promise(function(Ee,Yt){!function $(Q,le,Ee,Yt){Promise.resolve(Yt).then(function(ie){Q({value:ie,done:Ee})},le)}(Ee,Yt,(le=O[Q](le)).done,le.value)})}}}Ve.d(wn,{FC:()=>dt,KL:()=>dr,_T:()=>Re,mG:()=>ye,qq:()=>Pt}),"function"==typeof SuppressedError&&SuppressedError}},$i=>{$i($i.s=575)}]);