"use strict";(self.webpackChunkopen_lib=self.webpackChunkopen_lib||[]).push([[179],{9058:(Tt,Se,V)=>{V.d(Se,{BH:()=>pe,G6:()=>_i,L:()=>Ce,LL:()=>Pe,Pz:()=>Ne,Sg:()=>Ze,UG:()=>Ie,ZB:()=>se,ZR:()=>Ae,aH:()=>ge,b$:()=>Fr,eu:()=>ye,hl:()=>me,jU:()=>Mt,m9:()=>yi,ne:()=>kn,pd:()=>kt,r3:()=>ln,ru:()=>Yt,tV:()=>K,uI:()=>et,vZ:()=>Wr,w1:()=>fr,xO:()=>yr,xb:()=>ar,z$:()=>Je,zd:()=>St});const ue=function(J){const U=[];let $=0;for(let j=0;j<J.length;j++){let z=J.charCodeAt(j);z<128?U[$++]=z:z<2048?(U[$++]=z>>6|192,U[$++]=63&z|128):55296==(64512&z)&&j+1<J.length&&56320==(64512&J.charCodeAt(j+1))?(z=65536+((1023&z)<<10)+(1023&J.charCodeAt(++j)),U[$++]=z>>18|240,U[$++]=z>>12&63|128,U[$++]=z>>6&63|128,U[$++]=63&z|128):(U[$++]=z>>12|224,U[$++]=z>>6&63|128,U[$++]=63&z|128)}return U},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,U){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let z=0;z<J.length;z+=3){const re=J[z],Le=z+1<J.length,$e=Le?J[z+1]:0,jt=z+2<J.length,at=jt?J[z+2]:0;let An=(15&$e)<<2|at>>6,vi=63&at;jt||(vi=64,Le||(An=64)),j.push($[re>>2],$[(3&re)<<4|$e>>4],$[An],$[vi])}return j.join("")},encodeString(J,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(J):this.encodeByteArray(ue(J),U)},decodeString(J,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(J):function(J){const U=[];let $=0,j=0;for(;$<J.length;){const z=J[$++];if(z<128)U[j++]=String.fromCharCode(z);else if(z>191&&z<224){const re=J[$++];U[j++]=String.fromCharCode((31&z)<<6|63&re)}else if(z>239&&z<365){const jt=((7&z)<<18|(63&J[$++])<<12|(63&J[$++])<<6|63&J[$++])-65536;U[j++]=String.fromCharCode(55296+(jt>>10)),U[j++]=String.fromCharCode(56320+(1023&jt))}else{const re=J[$++],Le=J[$++];U[j++]=String.fromCharCode((15&z)<<12|(63&re)<<6|63&Le)}}return U.join("")}(this.decodeStringToByteArray(J,U))},decodeStringToByteArray(J,U){this.init_();const $=U?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let z=0;z<J.length;){const re=$[J.charAt(z++)],$e=z<J.length?$[J.charAt(z)]:0;++z;const at=z<J.length?$[J.charAt(z)]:64;++z;const Ft=z<J.length?$[J.charAt(z)]:64;if(++z,null==re||null==$e||null==at||null==Ft)throw new we;j.push(re<<2|$e>>4),64!==at&&(j.push($e<<4&240|at>>2),64!==Ft&&j.push(at<<6&192|Ft))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ce=function(J){return function(J){const U=ue(J);return oe.encodeByteArray(U,!0)}(J).replace(/\./g,"")},K=function(J){try{return oe.decodeString(J,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function se(J,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return U}for(const $ in U)!U.hasOwnProperty($)||!qe($)||(J[$]=se(J[$],U[$]));return J}function qe(J){return"__proto__"!==J}const ht=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const J=process.env.__FIREBASE_DEFAULTS__;return J?JSON.parse(J):void 0})()||(()=>{if(typeof document>"u")return;let J;try{J=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=J&&K(J[1]);return U&&JSON.parse(U)})()}catch(J){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${J}`)}},ge=()=>{var J;return null===(J=ht())||void 0===J?void 0:J.config},Ne=J=>{var U;return null===(U=ht())||void 0===U?void 0:U[`_${J}`]};class pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,$)=>{this.resolve=U,this.reject=$})}wrapCallback(U){return($,j)=>{$?this.reject($):this.resolve(j),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U($):U($,j))}}}function Ze(J,U){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=U||"demo-project",z=J.iat||0,re=J.sub||J.user_id;if(!re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Le=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:z,exp:z+3600,auth_time:z,sub:re,user_id:re,firebase:{sign_in_provider:"custom",identities:{}}},J);return[Ce(JSON.stringify({alg:"none",type:"JWT"})),Ce(JSON.stringify(Le)),""].join(".")}function Je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function et(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function Ie(){var J;const U=null===(J=ht())||void 0===J?void 0:J.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Mt(){return"object"==typeof self&&self.self===self}function Yt(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function Fr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function fr(){const J=Je();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function _i(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){try{return"object"==typeof indexedDB}catch{return!1}}function ye(){return new Promise((J,U)=>{try{let $=!0;const j="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(j);z.onsuccess=()=>{z.result.close(),$||self.indexedDB.deleteDatabase(j),J(!0)},z.onupgradeneeded=()=>{$=!1},z.onerror=()=>{var re;U((null===(re=z.error)||void 0===re?void 0:re.message)||"")}}catch($){U($)}})}class Ae extends Error{constructor(U,$,j){super($),this.code=U,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(U,$,j){this.service=U,this.serviceName=$,this.errors=j}create(U,...$){const j=$[0]||{},z=`${this.service}/${U}`,re=this.errors[U],Le=re?function pt(J,U){return J.replace(Ke,($,j)=>{const z=U[j];return null!=z?String(z):`<${j}?>`})}(re,j):"Error";return new Ae(z,`${this.serviceName}: ${Le} (${z}).`,j)}}const Ke=/\{\$([^}]+)}/g;function ln(J,U){return Object.prototype.hasOwnProperty.call(J,U)}function ar(J){for(const U in J)if(Object.prototype.hasOwnProperty.call(J,U))return!1;return!0}function Wr(J,U){if(J===U)return!0;const $=Object.keys(J),j=Object.keys(U);for(const z of $){if(!j.includes(z))return!1;const re=J[z],Le=U[z];if(Vn(re)&&Vn(Le)){if(!Wr(re,Le))return!1}else if(re!==Le)return!1}for(const z of j)if(!$.includes(z))return!1;return!0}function Vn(J){return null!==J&&"object"==typeof J}function yr(J){const U=[];for(const[$,j]of Object.entries(J))Array.isArray(j)?j.forEach(z=>{U.push(encodeURIComponent($)+"="+encodeURIComponent(z))}):U.push(encodeURIComponent($)+"="+encodeURIComponent(j));return U.length?"&"+U.join("&"):""}function St(J){const U={};return J.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[z,re]=j.split("=");U[decodeURIComponent(z)]=decodeURIComponent(re)}}),U}function kt(J){const U=J.indexOf("?");if(!U)return"";const $=J.indexOf("#",U);return J.substring(U,$>0?$:void 0)}function kn(J,U){const $=new qn(J,U);return $.subscribe.bind($)}class qn{constructor(U,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{U(this)}).catch(j=>{this.error(j)})}next(U){this.forEachObserver($=>{$.next(U)})}error(U){this.forEachObserver($=>{$.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,$,j){let z;if(void 0===U&&void 0===$&&void 0===j)throw new Error("Missing Observer.");z=function mn(J,U){if("object"!=typeof J||null===J)return!1;for(const $ of U)if($ in J&&"function"==typeof J[$])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:$,complete:j},void 0===z.next&&(z.next=Dn),void 0===z.error&&(z.error=Dn),void 0===z.complete&&(z.complete=Dn);const re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),re}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,U)}sendOne(U,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{$(this.observers[U])}catch(j){typeof console<"u"&&console.error&&console.error(j)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dn(){}function yi(J){return J&&J._delegate?J._delegate:J}},6788:(Tt,Se,V)=>{var w=V(6593),te=V(6387),b=V(5879);let ue=(()=>{class r{constructor(t){this.customClass=t}static#e=this.\u0275fac=function(s){return new(s||r)(b.$8M("custom-style"))};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-custom-button"]],decls:2,vars:2,consts:[["href",""]],template:function(s,a){1&s&&(b.TgZ(0,"a",0),b._uU(1," \u6309\u9215\u6e2c\u8a66\n"),b.qZA()),2&s&&b.Tol(a.customClass)},styles:[".black[_ngcontent-%COMP%]{color:#000}.red[_ngcontent-%COMP%]{color:red}.blue[_ngcontent-%COMP%]{color:#00f}"]})}return r})(),he=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-demo-buttons"]],decls:7,vars:0,consts:[["custom-style","black"],["custom-style","red"],["custom-style","blue"]],template:function(s,a){1&s&&(b.TgZ(0,"h2"),b._uU(1,"Attribute Demo"),b.qZA(),b._UZ(2,"app-custom-button",0)(3,"br")(4,"app-custom-button",1)(5,"br")(6,"app-custom-button",2))},dependencies:[ue]})}return r})();const oe=function(){return["page-one"]},we=function(){return["page-two"]},Ue=function(){return["page-three"]};let Ce=(()=>{class r{constructor(t){this.router=t,console.log(this.router?.config)}static#e=this.\u0275fac=function(s){return new(s||r)(b.Y36(te.F0))};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-default-template"]],decls:12,vars:6,consts:[[3,"routerLink"]],template:function(s,a){1&s&&(b._UZ(0,"br"),b.TgZ(1,"a",0),b._uU(2,"go one"),b.qZA(),b._UZ(3,"br")(4,"br"),b.TgZ(5,"a",0),b._uU(6,"go two"),b.qZA(),b._UZ(7,"br")(8,"br"),b.TgZ(9,"a",0),b._uU(10,"go three"),b.qZA(),b._UZ(11,"br")),2&s&&(b.xp6(1),b.Q6J("routerLink",b.DdM(3,oe)),b.xp6(4),b.Q6J("routerLink",b.DdM(4,we)),b.xp6(4),b.Q6J("routerLink",b.DdM(5,Ue)))},dependencies:[te.rH]})}return r})(),K=(()=>{class r{constructor(){this.size=0}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Y=(()=>{class r{constructor(t){this.fontSizeService=t}static#e=this.\u0275fac=function(s){return new(s||r)(b.Y36(K))};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-child-element"]],decls:5,vars:1,template:function(s,a){1&s&&(b.TgZ(0,"p"),b._uU(1,"child-element works!"),b.qZA(),b._uU(2),b.TgZ(3,"p"),b._uU(4,"child-element works! end"),b.qZA()),2&s&&(b.xp6(2),b.hij("\n",a.fontSizeService.size,"\n"))}})}return r})(),se=(()=>{class r{constructor(t){this.fontSizeService=t}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(s){return new(s||r)(b.Y36(K))};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-aaa-element"]],features:[b._Bn([K])],decls:10,vars:1,consts:[[3,"click"]],template:function(s,a){1&s&&(b.TgZ(0,"p"),b._uU(1),b.qZA(),b.TgZ(2,"div",0),b.NdJ("click",function(){return a.add()}),b._uU(3,"\u52a0\u52a0\u52a0\u52a0"),b.qZA(),b._UZ(4,"br"),b.TgZ(5,"div",0),b.NdJ("click",function(){return a.minus()}),b._uU(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),b.qZA(),b._UZ(7,"hr"),b._uU(8,"\nchild\n------------\n"),b._UZ(9,"app-child-element")),2&s&&(b.xp6(1),b.Oqu(a.fontSizeService.size))},dependencies:[Y]})}return r})(),qe=(()=>{class r{constructor(t){this.fontSizeService=t}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(s){return new(s||r)(b.Y36(K))};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-bbb-element"]],features:[b._Bn([K])],decls:9,vars:1,consts:[[3,"click"]],template:function(s,a){1&s&&(b.TgZ(0,"p"),b._uU(1),b.qZA(),b.TgZ(2,"div",0),b.NdJ("click",function(){return a.add()}),b._uU(3,"\u52a0\u52a0\u52a0\u52a0"),b.qZA(),b._UZ(4,"br"),b.TgZ(5,"div",0),b.NdJ("click",function(){return a.minus()}),b._uU(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),b.qZA(),b._uU(7,"\nchild\n------------\n"),b._UZ(8,"app-child-element")),2&s&&(b.xp6(1),b.Oqu(a.fontSizeService.size))},dependencies:[Y]})}return r})();const Oe=new b.OlP("FONT_SIZE_SERVICE");let He=(()=>{class r{constructor(t){this.fontSizeService=t}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(s){return new(s||r)(b.Y36(Oe))};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-ccc-element"]],decls:10,vars:1,consts:[[3,"click"]],template:function(s,a){1&s&&(b.TgZ(0,"p"),b._uU(1),b.qZA(),b.TgZ(2,"div",0),b.NdJ("click",function(){return a.add()}),b._uU(3,"\u52a0\u52a0\u52a0\u52a0"),b.qZA(),b._UZ(4,"br"),b.TgZ(5,"div",0),b.NdJ("click",function(){return a.minus()}),b._uU(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),b.qZA(),b._UZ(7,"hr"),b._uU(8,"\nchild\n------------\n"),b._UZ(9,"app-child-element")),2&s&&(b.xp6(1),b.Oqu(a.fontSizeService.size))},dependencies:[Y]})}return r})(),Be=(()=>{class r{constructor(t){this.fontSizeService=t}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(s){return new(s||r)(b.Y36(K))};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-ddd-element"]],decls:10,vars:1,consts:[[3,"click"]],template:function(s,a){1&s&&(b.TgZ(0,"p"),b._uU(1),b.qZA(),b.TgZ(2,"div",0),b.NdJ("click",function(){return a.add()}),b._uU(3,"\u52a0\u52a0\u52a0\u52a0"),b.qZA(),b._UZ(4,"br"),b.TgZ(5,"div",0),b.NdJ("click",function(){return a.minus()}),b._uU(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),b.qZA(),b._UZ(7,"hr"),b._uU(8,"\nchild\n------------\n"),b._UZ(9,"app-child-element")),2&s&&(b.xp6(1),b.Oqu(a.fontSizeService.size))},dependencies:[Y]})}return r})();const ht=[{path:"element-injector-demo",component:(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-demo-element-injector"]],decls:20,vars:0,consts:[[1,"demo-block"],[1,"demo-block__title"]],template:function(s,a){1&s&&(b.TgZ(0,"div",0)(1,"div",1),b._uU(2," \u5143\u7d20\u6ce8\u5165\u5668 (Element Injector) DEMO "),b.qZA(),b._uU(3," app-aaa-element: "),b._UZ(4,"app-aaa-element"),b.qZA(),b.TgZ(5,"div",0)(6,"div",1),b._uU(7," \u5143\u7d20\u6ce8\u5165\u5668 (Element Injector) DEMO "),b.qZA(),b._uU(8," app-bbb-element: "),b._UZ(9,"app-bbb-element"),b.qZA(),b.TgZ(10,"div",0)(11,"div",1),b._uU(12," Injection Token Injector "),b.qZA(),b._uU(13," app-ccc-element: "),b._UZ(14,"app-ccc-element"),b.qZA(),b.TgZ(15,"div",0)(16,"div",1),b._uU(17," \u6a21\u7d44\u6ce8\u5165\u5668 (Module Injector) DEMO "),b.qZA(),b._uU(18," app-ddd-element: "),b._UZ(19,"app-ddd-element"),b.qZA())},dependencies:[se,qe,He,Be]})}return r})()},{path:"demo-attribute",component:he},{path:"page-one",loadChildren:()=>Promise.all([V.e(592),V.e(908)]).then(V.bind(V,908)).then(r=>r.PageOneModule)},{path:"page-two",loadChildren:()=>Promise.all([V.e(592),V.e(329)]).then(V.bind(V,1329)).then(r=>r.PageTwoModule)},{path:"page-three",loadChildren:()=>Promise.all([V.e(592),V.e(292)]).then(V.bind(V,6292)).then(r=>r.PageThreeModule)},{path:"**",component:Ce}];let Wt=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=b.oAB({type:r});static#n=this.\u0275inj=b.cJS({imports:[te.Bz.forRoot(ht),te.Bz]})}return r})();var rn=V(6814),ge=V(534);(0,ge.registerVersion)("firebase","10.7.2","app");var Ze=V(7394);class Je extends Ze.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const et={setInterval(r,e,...t){const{delegate:s}=et;return s?.setInterval?s.setInterval(r,e,...t):setInterval(r,e,...t)},clearInterval(r){const{delegate:e}=et;return(e?.clearInterval||clearInterval)(r)},delegate:void 0};var Ie=V(9039);class Mt extends Je{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var s;if(this.closed)return this;this.state=e;const a=this.id,c=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(c,a,t)),this.pending=!0,this.delay=t,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(c,this.id,t),this}requestAsyncId(e,t,s=0){return et.setInterval(e.flush.bind(e,this),s)}recycleAsyncId(e,t,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return t;null!=t&&et.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(e,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let a,s=!1;try{this.work(e)}catch(c){s=!0,a=c||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:s}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ie.P)(s,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Fr={now:()=>(Fr.delegate||Date).now(),delegate:void 0};class or{constructor(e,t=or.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,s){return new this.schedulerActionCtor(this,e).schedule(s,t)}}or.now=Fr.now;class fr extends or{constructor(e,t=or.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let s;this._active=!0;do{if(s=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,s){for(;e=t.shift();)e.unsubscribe();throw s}}}const Ni=new class Wn extends fr{}(class Yt extends Mt{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,s=0){return null!=s&&s>0||null==s&&this.delay>0?super.requestAsyncId(e,t,s):(e.flush(this),0)}}),me=new fr(Mt);var De=V(9397),Te=V(5137),Ae=V(3093);const Pe=new b.GfV("ANGULARFIRE2_VERSION");class wt{constructor(){return((r,e)=>{const t=(0,ge.getApps)(),s=[];return t.forEach(a=>{a.container.getProvider(r).instances.forEach(h=>{s.includes(h)||s.push(h)})}),s})(Ut)}}const Ut="app-check";function bt(){}class Rn{zone;delegate;constructor(e,t=Ni){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,s){const a=this.zone;return this.delegate.schedule(function(h){a.runGuarded(()=>{e.apply(this,[h])})},t,s)}}class Hn{zone;task=null;constructor(e){this.zone=e}call(e,t){const s=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bt,{},bt,bt)),t.pipe((0,De.b)({next:s,complete:s,error:s})).subscribe(e).add(s)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let On=(()=>{class r{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Rn(Zone.current)),this.insideAngular=t.run(()=>new Rn(Zone.current,me)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(s){return new(s||r)(b.LFG(b.R0b))};static \u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Vn(r){return function Ct(r){return function(t){return(t=t.lift(new Hn(r.ngZone))).pipe((0,Te.R)(r.outsideAngular),(0,Ae.Q)(r.insideAngular))}}(function ln(){const r=globalThis.\u0275AngularFireScheduler;if(!r)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return r}())(r)}var kt=V(3106);kt.Z.registerVersion("firebase","10.7.2","app-compat");const qn=["ngOnDestroy"];class Dn{constructor(e){return e}}const us=new b.OlP("angularfire2.app.options"),sn=new b.OlP("angularfire2.app.name");function ai(r,e,t){const a="object"==typeof t&&t||{};a.name=a.name||"string"==typeof t&&t||"[DEFAULT]";const h=kt.Z.apps.filter(v=>v&&v.name===a.name)[0]||e.runOutsideAngular(()=>kt.Z.initializeApp(r,a));try{if(JSON.stringify(r)!==JSON.stringify(h.options)){const v=!!module.hot;Zt("error",`${h.name} Firebase App already initialized with different options${v?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Dn(h)}const Zt=(r,...e)=>{(0,b.X6Q)()&&typeof console<"u"&&console[r](...e)},Lr={provide:Dn,useFactory:ai,deps:[us,b.R0b,[new b.FiY,sn]]};let Hi=(()=>{class r{static initializeApp(t,s){return{ngModule:r,providers:[{provide:us,useValue:t},{provide:sn,useValue:s}]}}constructor(t){kt.Z.registerVersion("angularfire",Pe.full,"core"),kt.Z.registerVersion("angularfire",Pe.full,"app-compat"),kt.Z.registerVersion("angular",b.q4F.full,t.toString())}static \u0275fac=function(s){return new(s||r)(b.LFG(b.Lbi))};static \u0275mod=b.oAB({type:r});static \u0275inj=b.cJS({providers:[Lr]})}return r})();function zi(r,e,t,s,a){const[,c,h]=globalThis.\u0275AngularfireInstanceCache.find(v=>v[0]===r)||[];if(c)return function Cs(r,e){try{return r.toString()===e.toString()}catch{return r===e}}(a,h)||(vr("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Gi?" You may need to reload as Firebase is not HMR aware.":""}`),vr("warn",{is:a,was:h})),c;{const v=s();return globalThis.\u0275AngularfireInstanceCache.push([r,v,a]),v}}const Gi=typeof module<"u"&&!!module.hot,vr=(r,...e)=>{(0,b.X6Q)()&&typeof console<"u"&&console[r](...e)};globalThis.\u0275AngularfireInstanceCache||=[],V(6230);var pr=V(8645),gr=V(2096),mr=V(5592),qr=V(2459),yi=V(3019),J=V(4664),U=V(7398);class $ extends pr.x{constructor(e=1/0,t=1/0,s=Fr){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:h}=this;t||(s.push(e),!a&&s.push(c.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:a}=this,c=a.slice();for(let h=0;h<c.length&&!e.closed;h+=s?1:2)e.next(c[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<s.length&&s.splice(0,s.length-c),!a){const h=t.now();let v=0;for(let S=1;S<s.length&&s[S]<=h;S+=2)v=S;v&&s.splice(0,v+1)}}}var j=V(3020);function z(r,e,t){let s,a=!1;return r&&"object"==typeof r?({bufferSize:s=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=r):s=r??1/0,(0,j.B)({connector:()=>new $(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var re=V(1374),Le=V(4674);function $e(r,e){return(0,Le.m)(e)?(0,J.w)(()=>r,e):(0,J.w)(()=>r)}var jt=V(2181);const qt=new b.OlP("angularfire2.auth.use-emulator"),Ft=new b.OlP("angularfire2.auth.settings"),An=new b.OlP("angularfire2.auth.tenant-id"),vi=new b.OlP("angularfire2.auth.langugage-code"),Oi=new b.OlP("angularfire2.auth.use-device-language"),Ho=new b.OlP("angularfire.auth.persistence"),ve=(r,e,t,s,a,c,h,v)=>zi(`${r.name}.auth`,"AngularFireAuth",r.name,()=>{const S=e.runOutsideAngular(()=>r.auth());if(t&&S.useEmulator(...t),s&&(S.tenantId=s),S.languageCode=a,c&&S.useDeviceLanguage(),h)for(const[P,k]of Object.entries(h))S.settings[P]=k;return v&&S.setPersistence(v),S},[t,s,a,c,h,v]);let de=(()=>{class r{authState;idToken;user;idTokenResult;credential;constructor(t,s,a,c,h,v,S,P,k,W,X,ce){const xe=new pr.x,Qe=(0,gr.of)(void 0).pipe((0,Ae.Q)(h.outsideAngular),(0,J.w)(()=>c.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,6230)))),(0,U.U)(()=>ai(t,c,s)),(0,U.U)(We=>ve(We,c,v,P,k,W,S,X)),z({bufferSize:1,refCount:!1}));if((0,rn.PM)(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,gr.of)(null);else{Qe.pipe((0,re.P)()).subscribe();const We=Qe.pipe((0,J.w)(lt=>lt.getRedirectResult().then(Vt=>Vt,()=>null)),Vn,z({bufferSize:1,refCount:!1})),It=Qe.pipe((0,J.w)(lt=>new mr.y(Vt=>({unsubscribe:c.runOutsideAngular(()=>lt.onAuthStateChanged(nn=>Vt.next(nn),nn=>Vt.error(nn),()=>Vt.complete()))})))),Nt=Qe.pipe((0,J.w)(lt=>new mr.y(Vt=>({unsubscribe:c.runOutsideAngular(()=>lt.onIdTokenChanged(nn=>Vt.next(nn),nn=>Vt.error(nn),()=>Vt.complete()))}))));this.authState=We.pipe($e(It),(0,Te.R)(h.outsideAngular),(0,Ae.Q)(h.insideAngular)),this.user=We.pipe($e(Nt),(0,Te.R)(h.outsideAngular),(0,Ae.Q)(h.insideAngular)),this.idToken=this.user.pipe((0,J.w)(lt=>lt?(0,qr.D)(lt.getIdToken()):(0,gr.of)(null))),this.idTokenResult=this.user.pipe((0,J.w)(lt=>lt?(0,qr.D)(lt.getIdTokenResult()):(0,gr.of)(null))),this.credential=(0,yi.T)(We,xe,this.authState.pipe((0,jt.h)(lt=>!lt))).pipe((0,U.U)(lt=>lt?.user?lt:null),(0,Te.R)(h.outsideAngular),(0,Ae.Q)(h.insideAngular))}return((r,e,t,s={})=>new Proxy(r,{get:(a,c)=>t.runOutsideAngular(()=>{if(r[c])return s?.spy?.get&&s.spy.get(c,r[c]),r[c];if(qn.indexOf(c)>-1)return()=>{};const h=e.toPromise().then(v=>{const S=v?.[c];return"function"==typeof S?S.bind(v):S?.then?S.then(P=>t.run(()=>P)):t.run(()=>S)});return new Proxy(()=>{},{get:(v,S)=>h[S],apply:(v,S,P)=>h.then(k=>{const W=k?.(...P);return s?.spy?.apply&&s.spy.apply(c,P,W),W})})})}))(this,Qe,c,{spy:{apply:(We,It,Nt)=>{(We.startsWith("signIn")||We.startsWith("createUser"))&&Nt.then(lt=>xe.next(lt))}}})}static \u0275fac=function(s){return new(s||r)(b.LFG(us),b.LFG(sn,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(On),b.LFG(qt,8),b.LFG(Ft,8),b.LFG(An,8),b.LFG(vi,8),b.LFG(Oi,8),b.LFG(Ho,8),b.LFG(wt,8))};static \u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"})}return r})();var ut=V(7921),Xe=V(9360),Lt=V(8251);function Kt(){return(0,Xe.e)((r,e)=>{let t,s=!1;r.subscribe((0,Lt.x)(e,a=>{const c=t;t=a,s&&e.next([c,a]),s=!0}))})}var tt,Pn=V(6699),Un=V(3997),Ee=V(5861),ki=V(4537),Yr=V(7879),cn=V(9058),Ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vr={},bs=bs||{},dt=Ss||self;function js(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function $s(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Pa="closure_uid_"+(1e9*Math.random()>>>0),Yu=0;function Jr(r,e,t){return r.call.apply(r.bind,arguments)}function Hs(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function Er(r,e,t){return(Er=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jr:Hs).apply(null,arguments)}function zs(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function _r(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,c){for(var h=Array(arguments.length-2),v=2;v<arguments.length;v++)h[v-2]=arguments[v];return e.prototype[a].apply(s,h)}}function Xr(){this.s=this.s,this.o=this.o}Xr.prototype.s=!1,Xr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ra(r){Object.prototype.hasOwnProperty.call(r,Pa)&&r[Pa]||(r[Pa]=++Yu)}(this)},Xr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oo=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function ui(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function iu(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(js(s)){const a=r.length||0,c=s.length||0;r.length=a+c;for(let h=0;h<c;h++)r[a+h]=s[h]}else r.push(s)}}function _n(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}_n.prototype.h=function(){this.defaultPrevented=!0};var ao=function(){if(!dt.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{const t=()=>{};dt.addEventListener("test",t,e),dt.removeEventListener("test",t,e)}catch{}return r}();function Wi(r){return/^[\s\xa0]*$/.test(r)}function uo(){var r=dt.navigator;return r&&(r=r.userAgent)?r:""}function Fi(r){return-1!=uo().indexOf(r)}function zo(r){return zo[" "](r),r}zo[" "]=function(){};var br,r,su=Fi("Opera"),cs=Fi("Trident")||Fi("MSIE"),ou=Fi("Edge"),Xt=ou||cs,Ir=Fi("Gecko")&&!(-1!=uo().toLowerCase().indexOf("webkit")&&!Fi("Edge"))&&!(Fi("Trident")||Fi("MSIE"))&&!Fi("Edge"),Sr=-1!=uo().toLowerCase().indexOf("webkit")&&!Fi("Edge");function Gs(){var r=dt.document;return r?r.documentMode:void 0}e:{var Go="",Wo=(r=uo(),Ir?/rv:([^\);]+)(\)|;)/.exec(r):ou?/Edge\/([\d\.]+)/.exec(r):cs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Sr?/WebKit\/(\S+)/.exec(r):su?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(Wo&&(Go=Wo?Wo[1]:""),cs){var ls=Gs();if(null!=ls&&ls>parseFloat(Go)){br=String(ls);break e}}br=Go}var Mn=dt.document&&cs&&(Gs()||parseInt(br,10))||void 0;function nt(r,e){if(_n.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Ir){e:{try{zo(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Rt[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&nt.$.h.call(this)}}_r(nt,_n);var Rt={2:"touch",3:"pen",4:"mouse"};nt.prototype.h=function(){nt.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var dn="closure_listenable_"+(1e6*Math.random()|0),Ur=0;function Rs(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Ur,this.fa=this.ia=!1}function ur(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Ei(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function qi(r){const e={};for(const t in r)e[t]=r[t];return e}const Ii="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xt(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let c=0;c<Ii.length;c++)t=Ii[c],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function wr(r){this.src=r,this.g={},this.h=0}function lo(r,e){var t=e.type;if(t in r.g){var c,s=r.g[t],a=oo(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&(ur(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Zi(r,e,t,s){for(var a=0;a<r.length;++a){var c=r[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==s)return a}return-1}wr.prototype.add=function(r,e,t,s,a){var c=r.toString();(r=this.g[c])||(r=this.g[c]=[],this.h++);var h=Zi(r,e,s,a);return-1<h?(e=r[h],t||(e.ia=!1)):((e=new Rs(e,this.src,c,!!s,a)).ia=t,r.push(e)),e};var hn="closure_lm_"+(1e6*Math.random()|0),Ps={};function Ms(r,e,t,s,a){if(s&&s.once)return uu(r,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Ms(r,e[c],t,s,a);return null}return t=ho(t),r&&r[dn]?r.O(e,t,$s(s)?!!s.capture:!!s,a):ei(r,e,t,!1,s,a)}function ei(r,e,t,s,a,c){if(!e)throw Error("Invalid event type");var h=$s(a)?!!a.capture:!!a,v=Ht(r);if(v||(r[hn]=v=new wr(r)),(t=v.add(e,t,s,h,c)).proxy)return t;if(s=function xs(){const e=Ki;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)ao||(a=h),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(Ma(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function uu(r,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)uu(r,e[c],t,s,a);return null}return t=ho(t),r&&r[dn]?r.P(e,t,$s(s)?!!s.capture:!!s,a):ei(r,e,t,!0,s,a)}function ti(r,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)ti(r,e[c],t,s,a);else s=$s(s)?!!s.capture:!!s,t=ho(t),r&&r[dn]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Zi(c=r.g[e],t,s,a))&&(ur(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete r.g[e],r.h--))):r&&(r=Ht(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Zi(e,t,s,a)),(t=-1<r?e[r]:null)&&Li(t))}function Li(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[dn])lo(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(Ma(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Ht(e))?(lo(t,r),0==t.h&&(t.src=null,e[hn]=null)):ur(r)}}}function Ma(r){return r in Ps?Ps[r]:Ps[r]="on"+r}function Ki(r,e){if(r.fa)r=!0;else{e=new nt(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Li(r),r=t.call(s,e)}return r}function Ht(r){return(r=r[hn])instanceof wr?r:null}var cu="__closure_events_fn_"+(1e9*Math.random()>>>0);function ho(r){return"function"==typeof r?r:(r[cu]||(r[cu]=function(e){return r.handleEvent(e)}),r[cu])}function jn(){Xr.call(this),this.i=new wr(this),this.S=this,this.J=null}function En(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new _n(e,r);else if(e instanceof _n)e.target=e.target||r;else{var a=e;xt(e=new _n(s,r),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=hs(h,s,!0,e)&&a}if(a=hs(h=e.g=r,s,!0,e)&&a,a=hs(h,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=hs(h=e.g=t[c],s,!1,e)&&a}function hs(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.fa&&h.capture==t){var v=h.listener,S=h.la||h.src;h.ia&&lo(r.i,h),a=!1!==v.call(S,s)&&a}}return a&&!s.defaultPrevented}_r(jn,Xr),jn.prototype[dn]=!0,jn.prototype.removeEventListener=function(r,e,t,s){ti(this,r,e,t,s)},jn.prototype.N=function(){if(jn.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)ur(t[s]);delete r.g[e],r.h--}}this.J=null},jn.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},jn.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var ni=dt.JSON.stringify;function Jn(){var r=fo;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Zr=new class fs{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ri,r=>r.reset());class ri{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lu(r){var e=1;r=r.split(":");const t=[];for(;0<e&&r.length;)t.push(r.shift()),e--;return r.length&&t.push(r.join(":")),t}function wi(r){dt.setTimeout(()=>{throw r},0)}let ps,Cn=!1,fo=new class Eh{constructor(){this.h=this.g=null}add(e,t){const s=Zr.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Ws=()=>{const r=dt.Promise.resolve(void 0);ps=()=>{r.then(Ju)}};var Ju=()=>{for(var r;r=Jn();){try{r.h.call(r.g)}catch(t){wi(t)}var e=Zr;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Cn=!1};function ci(r,e){jn.call(this),this.h=r||1,this.g=e||dt,this.j=Er(this.qb,this),this.l=Date.now()}function du(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function xa(r,e,t){if("function"==typeof r)t&&(r=Er(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Er(r.handleEvent,r)}return 2147483647<Number(e)?-1:dt.setTimeout(r,e||0)}function po(r){r.g=xa(()=>{r.g=null,r.i&&(r.i=!1,po(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}_r(ci,jn),(tt=ci.prototype).ga=!1,tt.T=null,tt.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),En(this,"tick"),this.ga&&(du(this),this.start()))}},tt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.N=function(){ci.$.N.call(this),du(this),delete this.g};class hu extends Xr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:po(this)}N(){super.N(),this.g&&(dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Na(r){Xr.call(this),this.h=r,this.g={}}_r(Na,Xr);var go=[];function xn(r,e,t,s){Array.isArray(t)||(t&&(go[0]=t.toString()),t=go);for(var a=0;a<t.length;a++){var c=Ms(e,t[a],s||r.handleEvent,!1,r.h||r);if(!c)break;r.g[c.key]=c}}function Xu(r){Ei(r.g,function(e,t){this.g.hasOwnProperty(t)&&Li(e)},r),r.g={}}function Oa(){this.g=!0}function _o(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function rl(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return ni(t)}catch{return e}}(r,t)+(s?" "+s:"")})}Na.prototype.N=function(){Na.$.N.call(this),Xu(this)},Na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Oa.prototype.Ea=function(){this.g=!1},Oa.prototype.info=function(){};var gs={},ka=null;function Zo(){return ka=ka||new jn}function il(r){_n.call(this,gs.Ta,r)}function yo(r){const e=Zo();En(e,new il(e))}function Vi(r,e){_n.call(this,gs.STAT_EVENT,r),this.stat=e}function cr(r){const e=Zo();En(e,new Vi(e,r))}function Qi(r,e){_n.call(this,gs.Ua,r),this.size=e}function Ui(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return dt.setTimeout(function(){r()},e)}gs.Ta="serverreachability",_r(il,_n),gs.STAT_EVENT="statevent",_r(Vi,_n),gs.Ua="timingevent",_r(Qi,_n);var vo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},sl={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Eo(){}function ec(){}Eo.prototype.h=null;var Zn,Io={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Kr(){_n.call(this,"d")}function ms(){_n.call(this,"c")}function wo(){}function _s(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new Na(this),this.P=ys,this.V=new ci(r=Xt?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Fa}function Fa(){this.i=null,this.g="",this.h=!1}_r(Kr,_n),_r(ms,_n),_r(wo,Eo),wo.prototype.g=function(){return new XMLHttpRequest},wo.prototype.i=function(){return{}},Zn=new wo;var ys=45e3,Ko={},La={};function fu(r,e,t){r.L=1,r.A=be(F(e)),r.u=t,r.S=!0,Qo(r,null)}function Qo(r,e){r.G=Date.now(),Zs(r),r.B=F(r.A);var t=r.B,s=r.W;Array.isArray(s)||(s=[String(s)]),Br(t.i,"t",s),r.o=0,t=r.l.J,r.h=new Fa,r.g=Dh(r.l,t?e:null,!r.u),0<r.O&&(r.M=new hu(Er(r.Pa,r,r.g),r.O)),xn(r.U,r.g,"readystatechange",r.nb),e=r.I?qi(r.I):{},r.u?(r.v||(r.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.B,r.v,r.u,e)):(r.v="GET",r.g.ha(r.B,r.v,null,e)),yo(),function qo(r,e,t,s,a,c){r.info(function(){if(r.g)if(c)for(var h="",v=c.split("&"),S=0;S<v.length;S++){var P=v[S].split("=");if(1<P.length){var k=P[0];P=P[1];var W=k.split("_");h=2<=W.length&&"type"==W[1]?h+(k+"=")+P+"&":h+(k+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(r.j,r.v,r.B,r.m,r.W,r.u)}function Yo(r){return!!r.g&&"GET"==r.v&&2!=r.L&&r.l.Ha}function Va(r,e,t){let a,s=!0;for(;!r.J&&r.o<t.length;){if(a=To(r,t),a==La){4==e&&(r.s=4,cr(14),s=!1),_o(r.j,r.m,null,"[Incomplete Response]");break}if(a==Ko){r.s=4,cr(15),_o(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}_o(r.j,r.m,a,null),Jo(r,a)}Yo(r)&&0!=r.o&&(r.h.g=r.h.g.slice(r.o),r.o=0),4!=e||0!=t.length||r.h.h||(r.s=1,cr(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ba&&(r.ba=!0,(e=r.l).g==r&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),uc(e),e.M=!0,cr(11))):(_o(r.j,r.m,t,"[Invalid Chunked Response]"),Ks(r),Do(r))}function To(r,e){var t=r.o,s=e.indexOf("\n",t);return-1==s?La:(t=Number(e.substring(t,s)),isNaN(t)?Ko:(s+=1)+t>e.length?La:(e=e.slice(s,s+t),r.o=s+t,e))}function Zs(r){r.Y=Date.now()+r.P,ol(r,r.P)}function ol(r,e){if(null!=r.C)throw Error("WatchDog timer not null");r.C=Ui(Er(r.lb,r),e)}function tc(r){r.C&&(dt.clearTimeout(r.C),r.C=null)}function Do(r){0==r.l.H||r.J||Tu(r.l,r)}function Ks(r){tc(r);var e=r.M;e&&"function"==typeof e.sa&&e.sa(),r.M=null,du(r.V),Xu(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.sa())}function Jo(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||ea(t.i,r)))if(!r.K&&ea(t.i,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;aa(t),ia(t)}oa(t),cr(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Ui(Er(t.ib,t),6e3));if(1>=$t(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else lr(t,11)}else if((r.K||t.g==r)&&aa(t),!Wi(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let P=a[e];if(t.V=P[0],P=P[1],2==t.H)if("c"==P[0]){t.K=P[1],t.pa=P[2];const k=P[3];null!=k&&(t.ra=k,t.l.info("VER="+t.ra));const W=P[4];null!=W&&(t.Ga=W,t.l.info("SVER="+t.Ga));const X=P[5];null!=X&&"number"==typeof X&&0<X&&(t.L=s=1.5*X,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const ce=r.g;if(ce){const xe=ce.g?ce.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xe){var c=s.i;c.g||-1==xe.indexOf("spdy")&&-1==xe.indexOf("quic")&&-1==xe.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(ad(c,c.h),c.h=null))}if(s.F){const Qe=ce.g?ce.g.getResponseHeader("X-HTTP-Session-Id"):null;Qe&&(s.Da=Qe,ie(s.I,s.F,Qe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-r.G,t.l.info("Handshake RTT: "+t.S+"ms"));var h=r;if((s=t).wa=er(s,s.J?s.pa:null,s.Y),h.K){wh(s.i,h);var v=h,S=s.L;S&&v.setTimeout(S),v.C&&(tc(v),Zs(v)),s.g=h}else sa(s);0<t.j.length&&ac(t)}else"stop"!=P[0]&&"close"!=P[0]||lr(t,7);else 3==t.H&&("stop"==P[0]||"close"==P[0]?"stop"==P[0]?lr(t,7):ud(t):"noop"!=P[0]&&t.h&&t.h.Aa(P),t.A=0)}yo()}catch{}}function Ua(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(js(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function rc(r){if(r.ta&&"function"==typeof r.ta)return r.ta();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(js(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function nc(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(js(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],r)}(tt=_s.prototype).setTimeout=function(r){this.P=r},tt.nb=function(r){r=r.target;const e=this.M;e&&3==Tr(r)?e.l():this.Pa(r)},tt.Pa=function(r){try{if(r==this.g)e:{const k=Tr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>k)&&(3!=k||Xt||this.g&&(this.h.h||this.g.ja()||fl(this.g)))){this.J||4!=k||7==e||yo(),tc(this);var t=this.g.da();this.ca=t;t:if(Yo(this)){var s=fl(this.g);r="";var a=s.length,c=4==Tr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ks(this),Do(this);var h="";break t}this.h.i=new dt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:c&&e==a-1});s.length=0,this.h.g+=r,this.o=0,h=this.h.g}else h=this.g.ja();if(this.i=200==t,function mo(r,e,t,s,a,c,h){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.v,this.B,this.m,this.W,k,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var v,S=this.g;if((v=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wi(v)){var P=v;break t}}P=null}if(!(t=P)){this.i=!1,this.s=3,cr(12),Ks(this),Do(this);break e}_o(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jo(this,t)}this.S?(Va(this,k,h),Xt&&this.i&&3==k&&(xn(this.U,this.V,"tick",this.mb),this.V.start())):(_o(this.j,this.m,h,null),Jo(this,h)),4==k&&Ks(this),this.i&&!this.J&&(4==k?Tu(this.l,this):(this.i=!1,Zs(this)))}else(function Ns(r){const e={};r=(r.g&&2<=Tr(r)&&r.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<r.length;s++){if(Wi(r[s]))continue;var t=lu(r[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[a]||[];e[a]=c,c.push(t)}!function Bn(r,e){for(const t in r)e.call(void 0,r[t],t,r)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<h.indexOf("Unknown SID")?(this.s=3,cr(12)):(this.s=0,cr(13)),Ks(this),Do(this)}}}catch{}},tt.mb=function(){if(this.g){var r=Tr(this.g),e=this.g.ja();this.o<e.length&&(tc(this),Va(this,r,e),this.i&&4!=r&&Zs(this))}},tt.cancel=function(){this.J=!0,Ks(this)},tt.lb=function(){this.C=null;const r=Date.now();0<=r-this.Y?(function sd(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(yo(),cr(17)),Ks(this),this.s=2,Do(this)):ol(this,this.Y-r)};var al=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T(r){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof T){this.h=r.h,R(this,r.j),this.s=r.s,this.g=r.g,O(this,r.m),this.l=r.l;var e=r.i,t=new $n;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Z(this,t),this.o=r.o}else r&&(e=String(r).match(al))?(this.h=!1,R(this,e[1]||"",!0),this.s=gt(e[2]||""),this.g=gt(e[3]||"",!0),O(this,e[4]),this.l=gt(e[5]||"",!0),Z(this,e[6]||"",!0),this.o=gt(e[7]||"")):(this.h=!1,this.i=new $n(null,this.h))}function F(r){return new T(r)}function R(r,e,t){r.j=t?gt(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function O(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function Z(r,e,t){e instanceof $n?(r.i=e,function Xo(r,e){e&&!r.j&&(Rr(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Yi(this,s),Br(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=At(e,en)),r.i=new $n(e,r.h))}function ie(r,e,t){r.i.set(e,t)}function be(r){return ie(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function gt(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function At(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Sn),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Sn(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}T.prototype.toString=function(){var r=[],e=this.j;e&&r.push(At(e,on,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(At(e,on,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(At(t,"/"==t.charAt(0)?zn:Pt,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",At(t,Nn)),r.join("")};var on=/[#\/\?@]/g,Pt=/[#\?:]/g,zn=/[#\?]/g,en=/[#\?@]/g,Nn=/#/g;function $n(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Rr(r){r.g||(r.g=new Map,r.h=0,r.i&&function Ao(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var c=r[t].substring(0,s);a=r[t].substring(s+1)}else c=r[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Yi(r,e){Rr(r),e=Ti(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function li(r,e){return Rr(r),e=Ti(r,e),r.g.has(e)}function Br(r,e,t){Yi(r,e),0<t.length&&(r.i=null,r.g.set(Ti(r,e),ui(t)),r.h+=t.length)}function Ti(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function pu(r){this.l=r||gu,r=dt.PerformanceNavigationTiming?0<(r=dt.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(dt.g&&dt.g.Ka&&dt.g.Ka()&&dt.g.Ka().dc),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=$n.prototype).add=function(r,e){Rr(this),this.i=null,r=Ti(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(r,e){Rr(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},tt.ta=function(){Rr(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let c=0;c<a.length;c++)t.push(e[s])}return t},tt.Z=function(r){Rr(this);let e=[];if("string"==typeof r)li(this,r)&&(e=e.concat(this.g.get(Ti(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},tt.set=function(r,e){return Rr(this),this.i=null,li(this,r=Ti(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},tt.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const c=encodeURIComponent(String(s)),h=this.Z(s);for(s=0;s<h.length;s++){var a=c;""!==h[s]&&(a+="="+encodeURIComponent(String(h[s]))),r.push(a)}}return this.i=r.join("&")};var gu=10;function od(r){return!!r.h||!!r.g&&r.g.size>=r.j}function $t(r){return r.h?1:r.g?r.g.size:0}function ea(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function ad(r,e){r.g?r.g.add(e):r.h=e}function wh(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Th(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return ui(r.i)}pu.prototype.cancel=function(){if(this.i=Th(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}};var ep=class{stringify(r){return dt.JSON.stringify(r,void 0)}parse(r){return dt.JSON.parse(r,void 0)}};function ic(){this.g=new ep}function Kn(r,e,t){const s=t||"";try{Ua(r,function(a,c){let h=a;$s(a)&&(h=ni(a)),e.push(s+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function ta(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function mu(r){this.l=r.ec||null,this.j=r.ob||!1}function sc(r,e){jn.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=cl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_r(mu,Eo),mu.prototype.g=function(){return new sc(this.l,this.j)},mu.prototype.i=function(r){return function(){return r}}({}),_r(sc,jn);var cl=0;function Ve(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function an(r){r.readyState=4,r.l=null,r.j=null,r.A=null,na(r)}function na(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(tt=sc.prototype).open=function(r,e){if(this.readyState!=cl)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,na(this)},tt.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||dt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,an(this)),this.readyState=cl},tt.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof dt.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ve(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},tt.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?an(this):na(this),3==this.readyState&&Ve(this)}},tt.Za=function(r){this.g&&(this.response=this.responseText=r,an(this))},tt.Ya=function(r){this.g&&(this.response=r,an(this))},tt.ka=function(){this.g&&an(this)},tt.setRequestHeader=function(r,e){this.v.append(r,e)},tt.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(sc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var _u=dt.JSON.parse;function tn(r){jn.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yu,this.L=this.M=!1}_r(tn,jn);var yu="",ra=/^https?$/i,jr=["POST","PUT"];function dl(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,tp(r),vu(r)}function tp(r){r.F||(r.F=!0,En(r,"complete"),En(r,"error"))}function hl(r){if(r.h&&typeof bs<"u"&&(!r.C[1]||4!=Tr(r)||2!=r.da()))if(r.v&&4==Tr(r))xa(r.La,0,r);else if(En(r,"readystatechange"),4==Tr(r)){r.h=!1;try{const h=r.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===h){var a=String(r.I).match(al)[1]||null;!a&&dt.self&&dt.self.location&&(a=dt.self.location.protocol.slice(0,-1)),s=!ra.test(a?a.toLowerCase():"")}t=s}if(t)En(r,"complete"),En(r,"success");else{r.m=6;try{var c=2<Tr(r)?r.g.statusText:""}catch{c=""}r.j=c+" ["+r.da()+"]",tp(r)}}finally{vu(r)}}}function vu(r,e){if(r.g){Qn(r);const t=r.g,s=r.C[0]?()=>{}:null;r.g=null,r.C=null,e||En(r,"ready");try{t.onreadystatechange=s}catch{}}}function Qn(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(dt.clearTimeout(r.A),r.A=null)}function Tr(r){return r.g?r.g.readyState:0}function fl(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case yu:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function Qs(r){let e="";return Ei(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Xn(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=Qs(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ie(r,e,t))}function Ba(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function pl(r){this.Ga=0,this.j=[],this.l=new Oa,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ba("failFast",!1,r),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ba("baseRetryDelayMs",5e3,r),this.hb=Ba("retryDelaySeedMs",1e4,r),this.eb=Ba("forwardChannelMaxRetries",2,r),this.xa=Ba("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.useFetchStreams||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.i=new pu(r&&r.concurrentRequestLimit),this.Ja=new ic,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.l.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.qa=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.qa=r.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ud(r){if(oc(r),3==r.H){var e=r.W++,t=F(r.I);if(ie(t,"SID",r.K),ie(t,"RID",e),ie(t,"TYPE","terminate"),Ys(r,t),(e=new _s(r,r.l,e)).L=2,e.A=be(F(t)),t=!1,dt.navigator&&dt.navigator.sendBeacon)try{t=dt.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&dt.Image&&((new Image).src=e.A,t=!0),t||(e.g=Dh(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Zs(e)}Co(r)}function ia(r){r.g&&(uc(r),r.g.cancel(),r.g=null)}function oc(r){ia(r),r.u&&(dt.clearTimeout(r.u),r.u=null),aa(r),r.i.cancel(),r.m&&("number"==typeof r.m&&dt.clearTimeout(r.m),r.m=null)}function ac(r){if(!od(r.i)&&!r.m){r.m=!0;var e=r.Na;ps||Ws(),Cn||(ps(),Cn=!0),fo.add(e,r),r.C=0}}function cd(r,e){var t;t=e?e.m:r.W++;const s=F(r.I);ie(s,"SID",r.K),ie(s,"RID",t),ie(s,"AID",r.V),Ys(r,s),r.o&&r.s&&Xn(s,r.o,r.s),t=new _s(r,r.l,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.j=e.F.concat(r.j)),e=Iu(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),ad(r.i,t),fu(t,s,e)}function Ys(r,e){r.na&&Ei(r.na,function(t,s){ie(e,s,t)}),r.h&&Ua({},function(t,s){ie(e,s,t)})}function Iu(r,e,t){t=Math.min(r.j.length,t);var s=r.h?Er(r.h.Va,r.h,r):null;e:{var a=r.j;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].g,h.push("ofs="+c)):c=0:h.push("ofs="+c);let v=!0;for(let S=0;S<t;S++){let P=a[S].g;const k=a[S].map;if(P-=c,0>P)c=Math.max(0,a[S].g-100),v=!1;else try{Kn(k,h,"req"+P+"_")}catch{s&&s(k)}}if(v){s=h.join("&");break e}}}return r=r.j.splice(0,t),e.F=r,s}function sa(r){if(!r.g&&!r.u){r.ba=1;var e=r.Ma;ps||Ws(),Cn||(ps(),Cn=!0),fo.add(e,r),r.A=0}}function oa(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Ui(Er(r.Ma,r),ld(r,r.A)),r.A++,0))}function uc(r){null!=r.B&&(dt.clearTimeout(r.B),r.B=null)}function wu(r){r.g=new _s(r,r.l,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=F(r.wa);ie(e,"RID","rpc"),ie(e,"SID",r.K),ie(e,"AID",r.V),ie(e,"CI",r.G?"0":"1"),!r.G&&r.qa&&ie(e,"TO",r.qa),ie(e,"TYPE","xmlhttp"),Ys(r,e),r.o&&r.s&&Xn(e,r.o,r.s),r.L&&r.g.setTimeout(r.L);var t=r.g;r=r.pa,t.L=1,t.A=be(F(e)),t.u=null,t.S=!0,Qo(t,r)}function aa(r){null!=r.v&&(dt.clearTimeout(r.v),r.v=null)}function Tu(r,e){var t=null;if(r.g==e){aa(r),uc(r),r.g=null;var s=2}else{if(!ea(r.i,e))return;t=e.F,wh(r.i,e),s=1}if(0!=r.H)if(e.i)if(1==s){t=e.u?e.u.length:0,e=Date.now()-e.G;var a=r.C;En(s=Zo(),new Qi(s,t)),ac(r)}else sa(r);else if(3==(a=e.s)||0==a&&0<e.ca||!(1==s&&function Eu(r,e){return!($t(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.j=e.F.concat(r.j),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Ui(Er(r.Na,r,e),ld(r,r.C)),r.C++,0)))}(r,e)||2==s&&oa(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),a){case 1:lr(r,5);break;case 4:lr(r,10);break;case 3:lr(r,6);break;default:lr(r,2)}}function ld(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.isActive()||(t*=2),t*e}function lr(r,e){if(r.l.info("Error code "+e),2==e){var t=null;r.h&&(t=null);var s=Er(r.pb,r);t||(t=new T("//www.google.com/images/cleardot.gif"),dt.location&&"http"==dt.location.protocol||R(t,"https"),be(t)),function ul(r,e){const t=new Oa;if(dt.Image){const s=new Image;s.onload=zs(ta,t,s,"TestLoadImage: loaded",!0,e),s.onerror=zs(ta,t,s,"TestLoadImage: error",!1,e),s.onabort=zs(ta,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=zs(ta,t,s,"TestLoadImage: timeout",!1,e),dt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else cr(2);r.H=0,r.h&&r.h.za(e),Co(r),oc(r)}function Co(r){if(r.H=0,r.ma=[],r.h){const e=Th(r.i);(0!=e.length||0!=r.j.length)&&(iu(r.ma,e),iu(r.ma,r.j),r.i.i.length=0,ui(r.j),r.j.length=0),r.h.ya()}}function er(r,e,t){var s=t instanceof T?F(t):new T(t);if(""!=s.g)e&&(s.g=e+"."+s.g),O(s,s.m);else{var a=dt.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new T(null);s&&R(c,s),e&&(c.g=e),a&&O(c,a),t&&(c.l=t),s=c}return e=r.Da,(t=r.F)&&e&&ie(s,t,e),ie(s,"VER",r.ra),Ys(r,s),s}function Dh(r,e,t){if(e&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tn(r.Ha&&!r.va?new mu({ob:t}):r.va)).Oa(r.J),e}function np(){}function So(){if(cs&&!(10<=Number(Mn)))throw Error("Environmental error: no available transport.")}function E(r,e){jn.call(this),this.g=new pl(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!Wi(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wi(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new A(this)}function D(r){Kr.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function _(){ms.call(this),this.status=1}function A(r){this.g=r}function H(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function G(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=r.g[3],h=(e=r.g[0])+(c^(t=r.g[1])&((a=r.g[2])^c))+s[0]+3614090360&4294967295;h=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(h<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+s[3]+3250441966&4294967295)<<22&4294967295|h>>>10))+((h=e+(c^t&(a^c))+s[4]+4118548399&4294967295)<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+s[7]+4249261313&4294967295)<<22&4294967295|h>>>10))+((h=e+(c^t&(a^c))+s[8]+1770035416&4294967295)<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+s[11]+2304563134&4294967295)<<22&4294967295|h>>>10))+((h=e+(c^t&(a^c))+s[12]+1804603682&4294967295)<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+s[15]+1236535329&4294967295)<<22&4294967295|h>>>10))+((h=e+(a^c&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+s[11]+643717713&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+s[0]+3921069994&4294967295)<<20&4294967295|h>>>12))+((h=e+(a^c&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+s[15]+3634488961&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+s[4]+3889429448&4294967295)<<20&4294967295|h>>>12))+((h=e+(a^c&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+s[3]+4107603335&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+s[8]+1163531501&4294967295)<<20&4294967295|h>>>12))+((h=e+(a^c&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+s[7]+1735328473&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+s[12]+2368359562&4294967295)<<20&4294967295|h>>>12))+((h=e+(t^a^c)+s[5]+4294588738&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+s[14]+4259657740&4294967295)<<23&4294967295|h>>>9))+((h=e+(t^a^c)+s[1]+2763975236&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+s[10]+3200236656&4294967295)<<23&4294967295|h>>>9))+((h=e+(t^a^c)+s[13]+681279174&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+s[6]+76029189&4294967295)<<23&4294967295|h>>>9))+((h=e+(t^a^c)+s[9]+3654602809&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+s[15]+530742520&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+s[2]+3299628645&4294967295)<<23&4294967295|h>>>9))+((h=e+(a^(t|~c))+s[0]+4096336452&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|h>>>22))+((h=a+(e^(c|~t))+s[14]+2878612391&4294967295)<<15&4294967295|h>>>17))+((h=t+(c^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|h>>>11))+((h=e+(a^(t|~c))+s[12]+1700485571&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|h>>>22))+((h=a+(e^(c|~t))+s[10]+4293915773&4294967295)<<15&4294967295|h>>>17))+((h=t+(c^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|h>>>11))+((h=e+(a^(t|~c))+s[8]+1873313359&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|h>>>22))+((h=a+(e^(c|~t))+s[6]+2734768916&4294967295)<<15&4294967295|h>>>17))+((h=t+(c^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|h>>>11))+((c=(e=t+((h=e+(a^(t|~c))+s[4]+4149444226&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|h>>>22))^((a=c+((h=a+(e^(c|~t))+s[2]+718787259&4294967295)<<15&4294967295|h>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(h<<21&4294967295|h>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+c&4294967295}function ee(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var c=0|r[a];s&&c==e||(t[a]=c,s=!1)}this.g=t}(tt=tn.prototype).Oa=function(r){this.M=r},tt.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Zn.g(),this.C=function qs(r){return r.h||(r.h=r.i())}(this.u?this.u:Zn),this.g.onreadystatechange=Er(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(c){return void dl(this,c)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const c of s.keys())t.set(c,s.get(c))}s=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=dt.FormData&&r instanceof dt.FormData,!(0<=oo(jr,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,h]of t)this.g.setRequestHeader(c,h);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Qn(this),0<this.B&&((this.L=function ll(r){return cs&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Er(this.ua,this)):this.A=xa(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(c){dl(this,c)}},tt.ua=function(){typeof bs<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,En(this,"timeout"),this.abort(8))},tt.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,En(this,"complete"),En(this,"abort"),vu(this))},tt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vu(this,!0)),tn.$.N.call(this)},tt.La=function(){this.s||(this.G||this.v||this.l?hl(this):this.kb())},tt.kb=function(){hl(this)},tt.isActive=function(){return!!this.g},tt.da=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},tt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},tt.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),_u(e)}},tt.Ia=function(){return this.m},tt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=pl.prototype).ra=8,tt.H=1,tt.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new _s(this,this.l,r);let c=this.s;if(this.U&&(c?(c=qi(c),xt(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Iu(this,a,e),ie(t=F(this.I),"RID",r),ie(t,"CVER",22),this.F&&ie(t,"X-HTTP-Session-Id",this.F),Ys(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(Qs(c)))+"&"+e:this.o&&Xn(t,this.o,c)),ad(this.i,a),this.bb&&ie(t,"TYPE","init"),this.P?(ie(t,"$req",e),ie(t,"SID","null"),a.aa=!0,fu(a,t,null)):fu(a,t,e),this.H=2}}else 3==this.H&&(r?cd(this,r):0==this.j.length||od(this.i)||cd(this))},tt.Ma=function(){if(this.u=null,wu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var r=2*this.S;this.l.info("BP detection timer enabled: "+r),this.B=Ui(Er(this.jb,this),r)}},tt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,cr(10),ia(this),wu(this))},tt.ib=function(){null!=this.v&&(this.v=null,ia(this),oa(this),cr(19))},tt.pb=function(r){r?(this.l.info("Successfully pinged google.com"),cr(2)):(this.l.info("Failed to ping google.com"),cr(1))},tt.isActive=function(){return!!this.h&&this.h.isActive(this)},(tt=np.prototype).Ba=function(){},tt.Aa=function(){},tt.za=function(){},tt.ya=function(){},tt.isActive=function(){return!0},tt.Va=function(){},So.prototype.g=function(r,e){return new E(r,e)},_r(E,jn),E.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var r=this.g,e=this.l,t=this.h||void 0;cr(0),r.Y=e,r.na=t||{},r.G=r.aa,r.I=er(r,null,r.Y),ac(r)},E.prototype.close=function(){ud(this.g)},E.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=ni(r),r=t);e.j.push(new class{constructor(r,e){this.g=r,this.map=e}}(e.fb++,r)),3==e.H&&ac(e)},E.prototype.N=function(){this.g.h=null,delete this.j,ud(this.g),delete this.g,E.$.N.call(this)},_r(D,Kr),_r(_,ms),_r(A,np),A.prototype.Ba=function(){En(this.g,"a")},A.prototype.Aa=function(r){En(this.g,new D(r))},A.prototype.za=function(r){En(this.g,new _)},A.prototype.ya=function(){En(this.g,"b")},_r(H,function N(){this.blockSize=-1}),H.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},H.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)G(this,r,c),c+=this.blockSize;if("string"==typeof r){for(;c<e;)if(s[a++]=r.charCodeAt(c++),a==this.blockSize){G(this,s),a=0;break}}else for(;c<e;)if(s[a++]=r[c++],a==this.blockSize){G(this,s),a=0;break}}this.h=a,this.i+=e},H.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var je={};function Et(r){return-128<=r&&128>r?function co(r,e){var t=je;return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=e(r)}(r,function(e){return new ee([0|e],0>e?-1:0)}):new ee([0|r],0>r?-1:0)}function vt(r){if(isNaN(r)||!isFinite(r))return Bi;if(0>r)return Di(vt(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=di;return new ee(e,0)}var di=4294967296,Bi=Et(0),vs=Et(1),ua=Et(16777216);function Os(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Qr(r){return-1==r.h}function Di(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new ee(t,~r.h).add(vs)}function cc(r,e){return r.add(Di(e))}function dd(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function lc(r,e){this.g=r,this.h=e}function Ah(r,e){if(Os(e))throw Error("division by zero");if(Os(r))return new lc(Bi,Bi);if(Qr(r))return e=Ah(Di(r),e),new lc(Di(e.g),Di(e.h));if(Qr(e))return e=Ah(r,Di(e)),new lc(Di(e.g),e.h);if(30<r.g.length){if(Qr(r)||Qr(e))throw Error("slowDivide_ only works with positive integers.");for(var t=vs,s=e;0>=s.X(r);)t=dc(t),s=dc(s);var a=bo(t,1),c=bo(s,1);for(s=bo(s,2),t=bo(t,2);!Os(s);){var h=c.add(s);0>=h.X(r)&&(a=a.add(t),c=h),s=bo(s,1),t=bo(t,1)}return e=cc(r,a.R(e)),new lc(a,e)}for(a=Bi;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),h=(c=vt(t)).R(e);Qr(h)||0<h.X(r);)h=(c=vt(t-=s)).R(e);Os(c)&&(c=vs),a=a.add(c),r=cc(r,h)}return new lc(a,r)}function dc(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new ee(t,r.h)}function bo(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],c=0;c<s;c++)a[c]=0<e?r.D(c+t)>>>e|r.D(c+t+1)<<32-e:r.D(c+t);return new ee(a,r.h)}(tt=ee.prototype).ea=function(){if(Qr(this))return-Di(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:di+s)*e,e*=di}return r},tt.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Os(this))return"0";if(Qr(this))return"-"+Di(this).toString(r);for(var e=vt(Math.pow(r,6)),t=this,s="";;){var a=Ah(t,e).g,c=((0<(t=cc(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Os(t=a))return c+s;for(;6>c.length;)c="0"+c;s=c+s}},tt.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},tt.X=function(r){return Qr(r=cc(this,r))?-1:Os(r)?0:1},tt.abs=function(){return Qr(this)?Di(this):this},tt.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var c=s+(65535&this.D(a))+(65535&r.D(a)),h=(c>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=h>>>16,t[a]=(h&=65535)<<16|(c&=65535)}return new ee(t,-2147483648&t[t.length-1]?-1:0)},tt.R=function(r){if(Os(this)||Os(r))return Bi;if(Qr(this))return Qr(r)?Di(this).R(Di(r)):Di(Di(this).R(r));if(Qr(r))return Di(this.R(Di(r)));if(0>this.X(ua)&&0>r.X(ua))return vt(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var c=this.D(s)>>>16,h=65535&this.D(s),v=r.D(a)>>>16,S=65535&r.D(a);t[2*s+2*a]+=h*S,dd(t,2*s+2*a),t[2*s+2*a+1]+=c*S,dd(t,2*s+2*a+1),t[2*s+2*a+1]+=h*v,dd(t,2*s+2*a+1),t[2*s+2*a+2]+=c*v,dd(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new ee(t,0)},tt.gb=function(r){return Ah(this,r).h},tt.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new ee(t,this.h&r.h)},tt.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new ee(t,this.h|r.h)},tt.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new ee(t,this.h^r.h)},So.prototype.createWebChannel=So.prototype.g,E.prototype.send=E.prototype.u,E.prototype.open=E.prototype.m,E.prototype.close=E.prototype.close,vo.NO_ERROR=0,vo.TIMEOUT=8,vo.HTTP_ERROR=6,sl.COMPLETE="complete",ec.EventType=Io,Io.OPEN="a",Io.CLOSE="b",Io.ERROR="c",Io.MESSAGE="d",jn.prototype.listen=jn.prototype.O,tn.prototype.listenOnce=tn.prototype.P,tn.prototype.getLastError=tn.prototype.Sa,tn.prototype.getLastErrorCode=tn.prototype.Ia,tn.prototype.getStatus=tn.prototype.da,tn.prototype.getResponseJson=tn.prototype.Wa,tn.prototype.getResponseText=tn.prototype.ja,tn.prototype.send=tn.prototype.ha,tn.prototype.setWithCredentials=tn.prototype.Oa,H.prototype.digest=H.prototype.l,H.prototype.reset=H.prototype.reset,H.prototype.update=H.prototype.j,ee.prototype.add=ee.prototype.add,ee.prototype.multiply=ee.prototype.R,ee.prototype.modulo=ee.prototype.gb,ee.prototype.compare=ee.prototype.X,ee.prototype.toNumber=ee.prototype.ea,ee.prototype.toString=ee.prototype.toString,ee.prototype.getBits=ee.prototype.D,ee.fromNumber=vt,ee.fromString=function In(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Di(In(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=vt(Math.pow(e,8)),s=Bi,a=0;a<r.length;a+=8){var c=Math.min(8,r.length-a),h=parseInt(r.substring(a,a+c),e);8>c?(c=vt(Math.pow(e,c)),s=s.R(c).add(vt(h))):s=(s=s.R(t)).add(vt(h))}return s};var Ch=Vr.createWebChannelTransport=function(){return new So},ja=Vr.getStatEventTarget=function(){return Zo()},Du=Vr.ErrorCode=vo,hd=Vr.EventType=sl,rp=Vr.Event=gs,Au=Vr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},hc=(Vr.FetchXmlHttpFactory=mu,Vr.WebChannel=ec),Ro=Vr.XhrIo=tn,ym=Vr.Md5=H,ca=Vr.Integer=ee;const fc="@firebase/firestore";class $r{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$r.UNAUTHENTICATED=new $r(null),$r.GOOGLE_CREDENTIALS=new $r("google-credentials-uid"),$r.FIRST_PARTY=new $r("first-party-uid"),$r.MOCK_USER=new $r("mock-user");let la="10.7.2";const Po=new Yr.Yd("@firebase/firestore");function $a(){return Po.logLevel}function ze(r,...e){if(Po.logLevel<=Yr.in.DEBUG){const t=e.map(gl);Po.debug(`Firestore (${la}): ${r}`,...t)}}function Dr(r,...e){if(Po.logLevel<=Yr.in.ERROR){const t=e.map(gl);Po.error(`Firestore (${la}): ${r}`,...t)}}function hi(r,...e){if(Po.logLevel<=Yr.in.WARN){const t=e.map(gl);Po.warn(`Firestore (${la}): ${r}`,...t)}}function gl(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function mt(r="Unexpected state"){const e=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: `+r;throw Dr(e),new Error(e)}function yt(r,e){r||mt()}function st(r,e){return r}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends cn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ai{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($r.UNAUTHENTICATED))}shutdown(){}}class bh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fd{constructor(e){this.t=e,this.currentUser=$r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const c=P=>this.i!==a?(a=this.i,t(P)):Promise.resolve();let h=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Pr,e.enqueueRetryable(()=>c(this.currentUser))};const v=()=>{const P=h;e.enqueueRetryable((0,Ee.Z)(function*(){yield P.promise,yield c(s.currentUser)}))},S=P=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=P,this.auth.addAuthTokenListener(this.o),v()};this.t.onInit(P=>S(P)),setTimeout(()=>{if(!this.auth){const P=this.t.getImmediate({optional:!0});P?S(P):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Pr)}},0),v()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(yt("string"==typeof s.accessToken),new Ai(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new $r(e)}}class Em{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=$r.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sp{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new Em(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t($r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const s=c=>{null!=c.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.R;return this.R=c.token,ze("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt("string"==typeof t.token),this.R=t.token,new pc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ha(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Rh{static newId(){const t=62*Math.floor(256/62);let s="";for(;s.length<20;){const a=Ha(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(a[c]%62))}return s}}function zt(r,e){return r<e?-1:r>e?1:0}function Es(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function Im(r){return r+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Yn(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Yn(0,0))}static max(){return new Dt(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mc{constructor(e,t,s){void 0===t?t=0:t>e.length&&mt(),void 0===s?s=e.length-t:s>e.length-t&&mt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===mc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mc?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends mc{construct(e,t,s){return new yn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ke(_e.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const op=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends mc{construct(e,t,s){return new dr(e,t,s)}static isValidIdentifier(e){return op.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(0===s.length)throw new ke(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;a<e.length;){const v=e[a];if("\\"===v){if(a+1===e.length)throw new ke(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[a+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new ke(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=S,a+=2}else"`"===v?(h=!h,a++):"."!==v||h?(s+=v,a++):(c(),a++)}if(c(),h)throw new ke(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}class ct{constructor(e){this.path=e}static fromPath(e){return new ct(yn.fromString(e))}static fromName(e){return new ct(yn.fromString(e).popFirst(5))}static empty(){return new ct(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new yn(e.slice()))}}class ks{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function pd(r){return r.fields.find(e=>2===e.kind)}function Su(r){return r.fields.filter(e=>2!==e.kind)}ks.UNKNOWN_ID=-1;class da{constructor(e,t){this.fieldPath=e,this.kind=t}}class _c{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _c(0,Ji.min())}}function Is(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Dt.fromTimestamp(1e9===s?new Yn(t+1,0):new Yn(t,s));return new Ji(a,ct.empty(),e)}function ha(r){return new Ji(r.readTime,r.key,-1)}class Ji{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ji(Dt.min(),ct.empty(),-1)}static max(){return new Ji(Dt.max(),ct.empty(),-1)}}function yc(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=ct.comparator(r.documentKey,e.documentKey),0!==t?t:zt(r.largestBatchId,e.largestBatchId))}const bu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ap{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Mo(r){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,Ee.Z)(function*(r){if(r.code!==_e.FAILED_PRECONDITION||r.message!==bu)throw r;ze("LocalStore","Unexpectedly lost primary lease")}),Ph.apply(this,arguments)}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,s)=>{t(e)})}static reject(e){return new fe((t,s)=>{s(e)})}static waitFor(e){return new fe((t,s)=>{let a=0,c=0,h=!1;e.forEach(v=>{++a,v.next(()=>{++c,h&&c===a&&t()},S=>s(S))}),h=!0,c===a&&t()})}static or(e){let t=fe.resolve(!1);for(const s of e)t=t.next(a=>a?fe.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new fe((s,a)=>{const c=e.length,h=new Array(c);let v=0;for(let S=0;S<c;S++){const P=S;t(e[P]).next(k=>{h[P]=k,++v,v===c&&s(h)},k=>a(k))}})}static doWhile(e,t){return new fe((s,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):s()};c()})}}class Ci{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Pr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new gd(e,t.error)):this.V.resolve()},this.transaction.onerror=s=>{const a=Mh(s.target.error);this.V.reject(new gd(e,a))}}static open(e,t,s,a){try{return new Ci(t,e.transaction(a,s))}catch(c){throw new gd(t,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wm(t)}}class Xi{constructor(e,t,s){this.name=e,this.version=t,this.p=s,12.2===Xi.S((0,cn.z$)())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),pa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,cn.hl)())return!1;if(Xi.C())return!0;const e=(0,cn.z$)(),t=Xi.S(e),s=0<t&&t<10,a=Xi.v(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{s(h.target.result)},c.onblocked=()=>{a(new gd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const v=h.target.error;a("VersionError"===v.name?new ke(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===v.name?new ke(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+v):new gd(e,v))},c.onupgradeneeded=h=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.p.N(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var c=this;return(0,Ee.Z)(function*(){const h="readonly"===t;let v=0;for(;;){++v;try{c.db=yield c.O(e);const S=Ci.open(c.db,e,h?"readonly":"readwrite",s),P=a(S).next(k=>(S.g(),k)).catch(k=>(S.abort(k),fe.reject(k))).toPromise();return P.catch(()=>{}),yield S.m,P}catch(S){const P=S,k="FirebaseError"!==P.name&&v<3;if(ze("SimpleDb","Transaction failed with error:",P.message,"Retrying:",k),c.close(),!k)return Promise.reject(P)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class vc{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return pa(this.k.delete())}}class gd extends ke{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fa(r){return"IndexedDbTransactionError"===r.name}class wm{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),pa(s)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),pa(this.store.add(e))}get(e){return pa(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),pa(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),pa(this.store.count())}W(e,t){const s=this.options(e,t),a=s.index?this.store.index(s.index):this.store;if("function"==typeof a.getAll){const c=a.getAll(s.range);return new fe((h,v)=>{c.onerror=S=>{v(S.target.error)},c.onsuccess=S=>{h(S.target.result)}})}{const c=this.cursor(s),h=[];return this.G(c,(v,S)=>{h.push(S)}).next(()=>h)}}j(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new fe((a,c)=>{s.onerror=h=>{c(h.target.error)},s.onsuccess=h=>{a(h.target.result)}})}H(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.J=!1;const a=this.cursor(s);return this.G(a,(c,h,v)=>v.delete())}Y(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.G(a,t)}Z(e){const t=this.cursor({});return new fe((s,a)=>{t.onerror=c=>{const h=Mh(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(v=>{v?h.continue():s()}):s()}})}G(e,t){const s=[];return new fe((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const v=h.target.result;if(!v)return void a();const S=new vc(v),P=t(v.primaryKey,v.value,S);if(P instanceof fe){const k=P.catch(W=>(S.done(),fe.reject(W)));s.push(k)}S.isDone?a():null===S.$?v.continue():v.continue(S.$)}}).next(()=>fe.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.J?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pa(r){return new fe((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=Mh(s.target.error);t(a)}})}let up=!1;function Mh(r){const e=Xi.S((0,cn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return up||(up=!0,setTimeout(()=>{throw s},0)),s}}return r}class Tm{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;ze("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{ze("IndexBackfiller",`Documents written: ${yield t.X.te()}`)}catch(s){fa(s)?ze("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield Mo(s)}yield t.ee(6e4)}))}}class Dm{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.ne(s,e))})()}ne(e,t){const s=new Set;let a=t,c=!0;return fe.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!s.has(h))return ze("IndexBackfiller",`Processing collection: ${h}`),this.re(e,h,a).next(v=>{a-=v,s.add(h)});c=!1})).next(()=>t-a)}re(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(c=>{const h=c.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ie(a,c)).next(v=>(ze("IndexBackfiller",`Updating offset: ${v}`),this.localStore.indexManager.updateCollectionGroup(e,t,v))).next(()=>h.size)}))}ie(e,t){let s=e;return t.changes.forEach((a,c)=>{const h=ha(c);yc(h,s)>0&&(s=h)}),new Ji(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ji=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.se(a),this.oe=a=>s.writeSequenceNumber(a))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return r._e=-1,r})();function ga(r){return null==r}function Ec(r){return 0===r&&1/r==-1/0}function yl(r){return"number"==typeof r&&Number.isInteger(r)&&!Ec(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Si(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=cp(e)),e=md(r.get(t),e);return cp(e)}function md(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const c=r.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function cp(r){return r+"\x01\x01"}function ws(r){const e=r.length;if(yt(e>=2),2===e)return yt("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),yn.emptyPath();const t=e-2,s=[];let a="";for(let c=0;c<e;){const h=r.indexOf("\x01",c);switch((h<0||h>t)&&mt(),r.charAt(h+1)){case"\x01":const v=r.substring(c,h);let S;0===a.length?S=v:(a+=v,S=a,a=""),s.push(S);break;case"\x10":a+=r.substring(c,h),a+="\0";break;case"\x11":a+=r.substring(c,h+1);break;default:mt()}c=h+2}return new yn(s)}const Ic=["userId","batchId"];function Ru(r,e){return[r,Si(e)]}function vl(r,e,t){return[r,Si(e),t]}const Am={},lp=["prefixPath","collectionGroup","readTime","documentId"],wc=["prefixPath","collectionGroup","documentId"],Pu=["collectionGroup","readTime","prefixPath","documentId"],Cm=["canonicalId","targetId"],Q0=["targetId","path"],_d=["path","targetId"],dp=["collectionId","parent"],xh=["indexId","uid"],hp=["uid","sequenceNumber"],fp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sm=["indexId","uid","orderedDocumentKey"],yd=["userId","collectionPath","documentId"],pp=["userId","collectionPath","largestBatchId"],bm=["userId","collectionGroup","largestBatchId"],Nh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Rm=[...Nh,"documentOverlays"],Oh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dv=Oh,Mu=[...dv,"indexConfiguration","indexState","indexEntries"];class kh extends ap{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function zr(r,e){const t=st(r);return Xi.M(t.ae,e)}function Fh(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function xu(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Tc(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class tr{constructor(e,t){this.comparator=e,this.root=t||ii.EMPTY}insert(e,t){return new tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ii.BLACK,null,null))}remove(e){return new tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ii{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??ii.RED,this.left=a??ii.EMPTY,this.right=c??ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new ii(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ii.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}ii.EMPTY=null,ii.RED=!0,ii.BLACK=!1,ii.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(e,t,s,a,c){return this}insert(e,t,s){return new ii(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(e){this.comparator=e,this.data=new tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pm(this.data.getIterator())}getIteratorFrom(e){return new Pm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gn(this.comparator);return t.data=e,t}}class Pm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function za(r){return r.hasNext()?r.getNext():void 0}class fi{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new fi([])}unionWith(e){let t=new Gn(dr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new fi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Es(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class El extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new El("Invalid base64 string: "+c):c}}(e);return new Gr(t)}static fromUint8Array(e){const t=function(a){let c="";for(let h=0;h<a.length;++h)c+=String.fromCharCode(a[h]);return c}(e);return new Gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const mp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(r){if(yt(!!r),"string"==typeof r){let e=0;const t=mp.exec(r);if(yt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nr(r.seconds),nanos:nr(r.nanos)}}function nr(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function xo(r){return"string"==typeof r?Gr.fromBase64String(r):Gr.fromUint8Array(r)}function Nu(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ma(r){const e=r.mapValue.fields.__previous_value__;return Nu(e)?ma(e):e}function No(r){const e=es(r.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class Mm{constructor(e,t,s,a,c,h,v,S,P){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=v,this.longPollingOptions=S,this.useFetchStreams=P}}class Ga{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ga("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ga&&e.projectId===this.projectId&&e.database===this.database}}const Js={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Il={nullValue:"NULL_VALUE"};function Oo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Nu(r)?4:vd(r)?9007199254740991:10:mt()}function ko(r,e){if(r===e)return!0;const t=Oo(r);if(t!==Oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return No(r).isEqual(No(e));case 3:return function(a,c){if("string"==typeof a.timestampValue&&"string"==typeof c.timestampValue&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const h=es(a.timestampValue),v=es(c.timestampValue);return h.seconds===v.seconds&&h.nanos===v.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return c=e,xo(r.bytesValue).isEqual(xo(c.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,c){return nr(a.geoPointValue.latitude)===nr(c.geoPointValue.latitude)&&nr(a.geoPointValue.longitude)===nr(c.geoPointValue.longitude)}(r,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return nr(a.integerValue)===nr(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const h=nr(a.doubleValue),v=nr(c.doubleValue);return h===v?Ec(h)===Ec(v):isNaN(h)&&isNaN(v)}return!1}(r,e);case 9:return Es(r.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:return function(a,c){const h=a.mapValue.fields||{},v=c.mapValue.fields||{};if(Fh(h)!==Fh(v))return!1;for(const S in h)if(h.hasOwnProperty(S)&&(void 0===v[S]||!ko(h[S],v[S])))return!1;return!0}(r,e);default:return mt()}var c}function Dc(r,e){return void 0!==(r.values||[]).find(t=>ko(t,e))}function Wa(r,e){if(r===e)return 0;const t=Oo(r),s=Oo(e);if(t!==s)return zt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(r.booleanValue,e.booleanValue);case 2:return function(c,h){const v=nr(c.integerValue||c.doubleValue),S=nr(h.integerValue||h.doubleValue);return v<S?-1:v>S?1:v===S?0:isNaN(v)?isNaN(S)?0:-1:1}(r,e);case 3:return Vh(r.timestampValue,e.timestampValue);case 4:return Vh(No(r),No(e));case 5:return zt(r.stringValue,e.stringValue);case 6:return function(c,h){const v=xo(c),S=xo(h);return v.compareTo(S)}(r.bytesValue,e.bytesValue);case 7:return function(c,h){const v=c.split("/"),S=h.split("/");for(let P=0;P<v.length&&P<S.length;P++){const k=zt(v[P],S[P]);if(0!==k)return k}return zt(v.length,S.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,h){const v=zt(nr(c.latitude),nr(h.latitude));return 0!==v?v:zt(nr(c.longitude),nr(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(c,h){const v=c.values||[],S=h.values||[];for(let P=0;P<v.length&&P<S.length;++P){const k=Wa(v[P],S[P]);if(k)return k}return zt(v.length,S.length)}(r.arrayValue,e.arrayValue);case 10:return function(c,h){if(c===Js.mapValue&&h===Js.mapValue)return 0;if(c===Js.mapValue)return 1;if(h===Js.mapValue)return-1;const v=c.fields||{},S=Object.keys(v),P=h.fields||{},k=Object.keys(P);S.sort(),k.sort();for(let W=0;W<S.length&&W<k.length;++W){const X=zt(S[W],k[W]);if(0!==X)return X;const ce=Wa(v[S[W]],P[k[W]]);if(0!==ce)return ce}return zt(S.length,k.length)}(r.mapValue,e.mapValue);default:throw mt()}}function Vh(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return zt(r,e);const t=es(r),s=es(e),a=zt(t.seconds,s.seconds);return 0!==a?a:zt(t.nanos,s.nanos)}function Ac(r){return Uh(r)}function Uh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=es(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?xo(r.bytesValue).toBase64():"referenceValue"in r?ct.fromName(r.referenceValue).toString():"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=Uh(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const h of s)c?c=!1:a+=",",a+=`${h}:${Uh(t.fields[h])}`;return a+"}"}(r.mapValue):mt()}function _a(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function wl(r){return!!r&&"integerValue"in r}function Ou(r){return!!r&&"arrayValue"in r}function pi(r){return!!r&&"nullValue"in r}function Cc(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Tl(r){return!!r&&"mapValue"in r}function ku(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return xu(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ku(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ku(r.arrayValue.values[t]);return e}return Object.assign({},r)}function vd(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ed(r){return"nullValue"in r?Il:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?_a(Ga.empty(),ct.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:mt()}function _p(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?_a(Ga.empty(),ct.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Js:mt()}function Bh(r,e){const t=Wa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Id(r,e){const t=Wa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class si{constructor(e){this.value=e}static empty(){return new si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Tl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(t)}setAll(e){let t=dr.emptyPath(),s={},a=[];e.forEach((h,v)=>{if(!t.isImmediateParentOf(v)){const S=this.getFieldsMap(t);this.applyChanges(S,s,a),s={},a=[],t=v.popLast()}h?s[v.lastSegment()]=ku(h):a.push(v.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());Tl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Tl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){xu(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new si(ku(this.value))}}function ts(r){const e=[];return xu(r.fields,(t,s)=>{const a=new dr([t]);if(Tl(s)){const c=ts(s.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new fi(e)}class Fn{constructor(e,t,s,a,c,h,v){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=h,this.documentState=v}static newInvalidDocument(e){return new Fn(e,0,Dt.min(),Dt.min(),Dt.min(),si.empty(),0)}static newFoundDocument(e,t,s,a){return new Fn(e,1,t,Dt.min(),s,a,0)}static newNoDocument(e,t){return new Fn(e,2,t,Dt.min(),Dt.min(),si.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Dt.min(),Dt.min(),si.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xs{constructor(e,t){this.position=e,this.inclusive=t}}function wd(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const c=e[a],h=r.position[a];if(s=c.field.isKeyField()?ct.comparator(ct.fromName(h.referenceValue),t.key):Wa(h,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return s}function Td(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ko(r.position[t],e.position[t]))return!1;return!0}class eo{constructor(e,t="asc"){this.field=e,this.dir=t}}function xm(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class jh{}class fn extends jh{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Nm(e,t,s):"array-contains"===t?new zh(e,s):"in"===t?new Al(e,s):"not-in"===t?new Cl(e,s):"array-contains-any"===t?new Gh(e,s):new fn(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ya(e,s):new Dl(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Wa(t,this.value)):null!==t&&Oo(this.value)===Oo(t)&&this.matchesComparison(Wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends jh{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new pn(e,t)}matches(e){return qa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function qa(r){return"and"===r.op}function Za(r){return"or"===r.op}function Sc(r){return $h(r)&&qa(r)}function $h(r){for(const e of r.filters)if(e instanceof pn)return!1;return!0}function bc(r){if(r instanceof fn)return r.field.canonicalString()+r.op.toString()+Ac(r.value);if(Sc(r))return r.filters.map(e=>bc(e)).join(",");{const e=r.filters.map(t=>bc(t)).join(",");return`${r.op}(${e})`}}function oi(r,e){return r instanceof fn?(s=r,(a=e)instanceof fn&&s.op===a.op&&s.field.isEqual(a.field)&&ko(s.value,a.value)):r instanceof pn?function(s,a){return a instanceof pn&&s.op===a.op&&s.filters.length===a.filters.length&&s.filters.reduce((c,h,v)=>c&&oi(h,a.filters[v]),!0)}(r,e):void mt();var s,a}function Dd(r,e){const t=r.filters.concat(e);return pn.create(t,r.op)}function Ad(r){return r instanceof fn?`${(t=r).field.canonicalString()} ${t.op} ${Ac(t.value)}`:r instanceof pn?function(t){return t.op.toString()+" {"+t.getFilters().map(Ad).join(" ,")+"}"}(r):"Filter";var t}class Nm extends fn{constructor(e,t,s){super(e,t,s),this.key=ct.fromName(s.referenceValue)}matches(e){const t=ct.comparator(e.key,this.key);return this.matchesComparison(t)}}class ya extends fn{constructor(e,t){super(e,"in",t),this.keys=Hh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Dl extends fn{constructor(e,t){super(e,"not-in",t),this.keys=Hh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Hh(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>ct.fromName(s.referenceValue))}class zh extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ou(t)&&Dc(t.arrayValue,this.value)}}class Al extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dc(this.value.arrayValue,t)}}class Cl extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dc(this.value.arrayValue,t)}}class Gh extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Dc(this.value.arrayValue,s))}}class Om{constructor(e,t=null,s=[],a=[],c=null,h=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=h,this.endAt=v,this.ce=null}}function Wh(r,e=null,t=[],s=[],a=null,c=null,h=null){return new Om(r,e,t,s,a,c,h)}function va(r){const e=st(r);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>bc(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),ga(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ac(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ac(s)).join(",")),e.ce=t}return e.ce}function g(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!xm(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!oi(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Td(r.startAt,e.startAt)&&Td(r.endAt,e.endAt)}function d(r){return ct.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function p(r,e){return r.filters.filter(t=>t instanceof fn&&t.field.isEqual(e))}function y(r,e,t){let s=Il,a=!0;for(const c of p(r,e)){let h=Il,v=!0;switch(c.op){case"<":case"<=":h=Ed(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,v=!1;break;case"!=":case"not-in":h=Il}Bh({value:s,inclusive:a},{value:h,inclusive:v})<0&&(s=h,a=v)}if(null!==t)for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const h=t.position[c];Bh({value:s,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(s=h,a=t.inclusive);break}return{value:s,inclusive:a}}function M(r,e,t){let s=Js,a=!0;for(const c of p(r,e)){let h=Js,v=!0;switch(c.op){case">=":case">":h=_p(c.value),v=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,v=!1;break;case"!=":case"not-in":h=Js}Id({value:s,inclusive:a},{value:h,inclusive:v})>0&&(s=h,a=v)}if(null!==t)for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const h=t.position[c];Id({value:s,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(s=h,a=t.inclusive);break}return{value:s,inclusive:a}}class L{constructor(e,t=null,s=[],a=[],c=null,h="F",v=null,S=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=h,this.startAt=v,this.endAt=S,this.le=null,this.he=null,this.Pe=null}}function Q(r,e,t,s,a,c,h,v){return new L(r,e,t,s,a,c,h,v)}function ae(r){return new L(r)}function Me(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function ot(r){return null!==r.collectionGroup}function _t(r){const e=st(r);if(null===e.le){e.le=[];const t=new Set;for(const c of e.explicitOrderBy)e.le.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let v=new Gn(dr.comparator);return h.filters.forEach(S=>{S.getFlattenedFilters().forEach(P=>{P.isInequality()&&(v=v.add(P.field))})}),v})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.le.push(new eo(c,s))}),t.has(dr.keyField().canonicalString())||e.le.push(new eo(dr.keyField(),s))}return e.le}function rt(r){const e=st(r);return e.he||(e.he=function rr(r,e){if("F"===r.limitType)return Wh(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(a=>new eo(a.field,"desc"===a.dir?"asc":"desc"));const t=r.endAt?new Xs(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Xs(r.startAt.position,r.startAt.inclusive):null;return Wh(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}(e,_t(r))),e.he}function bi(r,e){const t=r.filters.concat([e]);return new L(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function to(r,e,t){return new L(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Fu(r,e){return g(rt(r),rt(e))&&r.limitType===e.limitType}function Rc(r){return`${va(rt(r))}|lt:${r.limitType}`}function Fo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return null!==t.collectionGroup&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>Ad(a)).join(", ")}]`),ga(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>{return`${(h=a).field.canonicalString()} (${h.dir})`;var h}).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>Ac(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>Ac(a)).join(",")),`Target(${s})`}(rt(r))}; limitType=${r.limitType})`}function Lu(r,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return null!==s.collectionGroup?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ct.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,e)&&function(s,a){for(const c of _t(s))if(!c.field.isKeyField()&&null===a.data.field(c.field))return!1;return!0}(r,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(r,e)&&(a=e,!((s=r).startAt&&!function(h,v,S){const P=wd(h,v,S);return h.inclusive?P<=0:P<0}(s.startAt,_t(s),a)||s.endAt&&!function(h,v,S){const P=wd(h,v,S);return h.inclusive?P>=0:P>0}(s.endAt,_t(s),a)));var s,a}function Pc(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Vu(r){return(e,t)=>{let s=!1;for(const a of _t(r)){const c=yp(a,e,t);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function yp(r,e,t){const s=r.field.isKeyField()?ct.comparator(e.key,t.key):function(c,h,v){const S=h.data.field(c),P=v.data.field(c);return null!==S&&null!==P?Wa(S,P):mt()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return mt()}}class Fs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){xu(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Tc(this.inner)}size(){return this.innerSize}}const vp=new tr(ct.comparator);function ns(){return vp}const Cd=new tr(ct.comparator);function Mc(...r){let e=Cd;for(const t of r)e=e.insert(t.key,t);return e}function km(r){let e=Cd;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function no(){return Ka()}function Ep(){return Ka()}function Ka(){return new Fs(r=>r.toString(),(r,e)=>r.isEqual(e))}const Y0=new tr(ct.comparator),J0=new Gn(ct.comparator);function un(...r){let e=J0;for(const t of r)e=e.add(t);return e}const X0=new Gn(zt);function qh(){return X0}function hv(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ec(e)?"-0":e}}function Sl(r){return{integerValue:""+r}}function Zh(r,e){return yl(e)?Sl(e):hv(r,e)}class Sd{constructor(){this._=void 0}}function fv(r,e,t){return r instanceof bl?function(a,c){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Nu(c)&&(c=ma(c)),c&&(h.fields.__previous_value__=c),{mapValue:h}}(t,e):r instanceof Rl?gv(r,e):r instanceof Pl?mv(r,e):function(a,c){const h=Fm(a,c),v=Uu(h)+Uu(a.Ie);return wl(h)&&wl(a.Ie)?Sl(v):hv(a.serializer,v)}(r,e)}function pv(r,e,t){return r instanceof Rl?gv(r,e):r instanceof Pl?mv(r,e):t}function Fm(r,e){return r instanceof bd?wl(s=e)||(c=s)&&"doubleValue"in c?e:{integerValue:0}:null;var s,c}class bl extends Sd{}class Rl extends Sd{constructor(e){super(),this.elements=e}}function gv(r,e){const t=Rd(e);for(const s of r.elements)t.some(a=>ko(a,s))||t.push(s);return{arrayValue:{values:t}}}class Pl extends Sd{constructor(e){super(),this.elements=e}}function mv(r,e){let t=Rd(e);for(const s of r.elements)t=t.filter(a=>!ko(a,s));return{arrayValue:{values:t}}}class bd extends Sd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Uu(r){return nr(r.integerValue||r.doubleValue)}function Rd(r){return Ou(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Kh{constructor(e,t){this.field=e,this.transform=t}}class GD{constructor(e,t){this.version=e,this.transformResults=t}}class xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lm(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Vm{}function Um(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new Ml(r.key,xr.none()):new xc(r.key,r.data,xr.none());{const t=r.data,s=si.empty();let a=new Gn(dr.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);null===h&&c.length>1&&(c=c.popLast(),h=t.field(c)),null===h?s.delete(c):s.set(c,h),a=a.add(c)}return new $i(r.key,s,new fi(a.toArray()),xr.none())}}function ew(r,e,t){r instanceof xc?function(a,c,h){const v=a.value.clone(),S=Bm(a.fieldTransforms,c,h.transformResults);v.setAll(S),c.convertToFoundDocument(h.version,v).setHasCommittedMutations()}(r,e,t):r instanceof $i?function(a,c,h){if(!Lm(a.precondition,c))return void c.convertToUnknownDocument(h.version);const v=Bm(a.fieldTransforms,c,h.transformResults),S=c.data;S.setAll(Pd(a)),S.setAll(v),c.convertToFoundDocument(h.version,S).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Qh(r,e,t,s){return r instanceof xc?function(c,h,v,S){if(!Lm(c.precondition,h))return v;const P=c.value.clone(),k=jm(c.fieldTransforms,S,h);return P.setAll(k),h.convertToFoundDocument(h.version,P).setHasLocalMutations(),null}(r,e,t,s):r instanceof $i?function(c,h,v,S){if(!Lm(c.precondition,h))return v;const P=jm(c.fieldTransforms,S,h),k=h.data;return k.setAll(Pd(c)),k.setAll(P),h.convertToFoundDocument(h.version,k).setHasLocalMutations(),null===v?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(W=>W.field))}(r,e,t,s):(v=t,Lm(r.precondition,h=e)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):v);var h,v}function tw(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),c=Fm(s.transform,a||null);null!=c&&(null===t&&(t=si.empty()),t.set(s.field,c))}return t||null}function _v(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(s=r.fieldTransforms)&&void 0===a||s&&a&&Es(s,a,(c,h)=>function zD(r,e){return r.field.isEqual(e.field)&&(a=e.transform,(s=r.transform)instanceof Rl&&a instanceof Rl||s instanceof Pl&&a instanceof Pl?Es(s.elements,a.elements,ko):s instanceof bd&&a instanceof bd?ko(s.Ie,a.Ie):s instanceof bl&&a instanceof bl);var s,a}(c,h))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var s,a}class xc extends Vm{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class $i extends Vm{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Pd(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Bm(r,e,t){const s=new Map;yt(r.length===t.length);for(let a=0;a<t.length;a++){const c=r[a],h=c.transform,v=e.data.field(c.field);s.set(c.field,pv(h,v,t[a]))}return s}function jm(r,e,t){const s=new Map;for(const a of r){const c=a.transform,h=t.data.field(a.field);s.set(a.field,fv(c,h,e))}return s}class Ml extends Vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yv extends Vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vv{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&ew(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Qh(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Qh(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Ep();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let v=this.applyToLocalView(h,c.mutatedFields);v=t.has(a.key)?null:v;const S=Um(h,v);null!==S&&s.set(a.key,S),h.isValidDocument()||h.convertToNoDocument(Dt.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Es(this.mutations,e.mutations,(t,s)=>_v(t,s))&&Es(this.baseMutations,e.baseMutations,(t,s)=>_v(t,s))}}class Ev{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){yt(e.mutations.length===s.length);let a=Y0;const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,s[h].version);return new Ev(e,t,s,a)}}class Yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class WD{constructor(e,t){this.count=e,this.unchangedNames=t}}var gi,wn;function Iv(r){switch(r){default:return mt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function wv(r){if(void 0===r)return Dr("GRPC error has no .code"),_e.UNKNOWN;switch(r){case gi.OK:return _e.OK;case gi.CANCELLED:return _e.CANCELLED;case gi.UNKNOWN:return _e.UNKNOWN;case gi.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case gi.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case gi.INTERNAL:return _e.INTERNAL;case gi.UNAVAILABLE:return _e.UNAVAILABLE;case gi.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case gi.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case gi.NOT_FOUND:return _e.NOT_FOUND;case gi.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case gi.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case gi.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case gi.ABORTED:return _e.ABORTED;case gi.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case gi.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case gi.DATA_LOSS:return _e.DATA_LOSS;default:return mt()}}(wn=gi||(gi={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";function Tv(){return new TextEncoder}const Dv=new ca([4294967295,4294967295],0);function Jh(r){const e=Tv().encode(r),t=new ym;return t.update(e),new Uint8Array(t.digest())}function Av(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ca([t,s],0),new ca([a,c],0)]}class Xh{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ef(`Invalid padding: ${t}`);if(s<0)throw new ef(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new ef(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new ef(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=ca.fromNumber(this.Te)}de(e,t,s){let a=e.add(t.multiply(ca.fromNumber(s)));return 1===a.compare(Dv)&&(a=new ca([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Jh(e),[s,a]=Av(t);for(let c=0;c<this.hashCount;c++){const h=this.de(s,a,c);if(!this.Ae(h))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Xh(c,a,t);return s.forEach(v=>h.insert(v)),h}insert(e){if(0===this.Te)return;const t=Jh(e),[s,a]=Av(t);for(let c=0;c<this.hashCount;c++){const h=this.de(s,a,c);this.Re(h)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ef extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qa{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,tf.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Qa(Dt.min(),a,new tr(zt),ns(),un())}}class tf{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new tf(s,t,un(),un(),un())}}class wp{constructor(e,t,s,a){this.Ve=e,this.removedTargetIds=t,this.key=s,this.me=a}}class Hm{constructor(e,t){this.targetId=e,this.fe=t}}class zm{constructor(e,t,s=Gr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Cv{constructor(){this.ge=0,this.pe=bv(),this.ye=Gr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=un(),t=un(),s=un();return this.pe.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:mt()}}),new tf(this.ye,this.we,e,t,s)}Fe(){this.Se=!1,this.pe=bv()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,yt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class nw{constructor(e){this.Le=e,this.ke=new Map,this.qe=ns(),this.Qe=Sv(),this.Ke=new tr(zt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.Ce(e.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(e.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(t);break;case 3:this.je(t)&&(s.Be(),s.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.Ce(e.resumeToken));break;default:mt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((s,a)=>{this.je(a)&&t(a)})}Je(e){const t=e.targetId,s=e.fe.count,a=this.Ye(t);if(a){const c=a.target;if(d(c))if(0===s){const h=new ct(c.path);this.We(t,h,Fn.newNoDocument(h,Dt.min()))}else yt(1===s);else{const h=this.Ze(t);if(h!==s){const v=this.Xe(e),S=v?this.et(v,e,h):1;0!==S&&(this.He(t),this.Ke=this.Ke.insert(t,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let h,v;try{h=xo(s).toUint8Array()}catch(S){if(S instanceof El)return hi("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{v=new Xh(h,a,c)}catch(S){return hi(S instanceof ef?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===v.Te?null:v}et(e,t,s){return t.fe.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let a=0;return s.forEach(c=>{const h=this.Le.nt(),v=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(v)||(this.We(t,c,null),a++)}),a}it(e){const t=new Map;this.ke.forEach((c,h)=>{const v=this.Ye(h);if(v){if(c.current&&d(v.target)){const S=new ct(v.target.path);null!==this.qe.get(S)||this.st(h,S)||this.We(h,S,Fn.newNoDocument(S,e))}c.De&&(t.set(h,c.ve()),c.Fe())}});let s=un();this.Qe.forEach((c,h)=>{let v=!0;h.forEachWhile(S=>{const P=this.Ye(S);return!P||"TargetPurposeLimboResolution"===P.purpose||(v=!1,!1)}),v&&(s=s.add(c))}),this.qe.forEach((c,h)=>h.setReadTime(e));const a=new Qa(e,t,this.Ke,this.qe,s);return this.qe=ns(),this.Qe=Sv(),this.Ke=new tr(zt),a}Ue(e,t){if(!this.je(e))return;const s=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,s),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const a=this.ze(e);this.st(e,t)?a.Me(t,1):a.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),s&&(this.qe=this.qe.insert(t,s))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Cv,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Gn(zt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Cv),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Sv(){return new tr(ct.comparator)}function bv(){return new tr(ct.comparator)}const Rv={asc:"ASCENDING",desc:"DESCENDING"},qD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZD={and:"AND",or:"OR"};class nf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bn(r,e){return r.useProto3Json||ga(e)?e:{value:e}}function Ya(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gm(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Pv(r,e){return Ya(r,e.toTimestamp())}function Nr(r){return yt(!!r),Dt.fromTimestamp(function(t){const s=es(t);return new Yn(s.seconds,s.nanos)}(r))}function Tp(r,e){return Wm(r,e).canonicalString()}function Wm(r,e){const t=(a=r,new yn(["projects",a.projectId,"databases",a.database])).child("documents");var a;return void 0===e?t:t.child(e)}function qm(r){const e=yn.fromString(r);return yt(Rp(e)),e}function Md(r,e){return Tp(r.databaseId,e.path)}function ro(r,e){const t=qm(e);if(t.get(1)!==r.databaseId.projectId)throw new ke(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ke(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ct(Ap(t))}function rw(r,e){return Tp(r.databaseId,e)}function Dp(r){const e=qm(r);return 4===e.length?yn.emptyPath():Ap(e)}function Zm(r){return new yn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Ap(r){return yt(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Km(r,e,t){return{name:Md(r,e),fields:t.value.mapValue.fields}}function Qm(r,e,t){const s=ro(r,e.name),a=Nr(e.updateTime),c=e.createTime?Nr(e.createTime):Dt.min(),h=new si({mapValue:{fields:e.fields}}),v=Fn.newFoundDocument(s,a,c,h);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Nl(r,e){let t;if(e instanceof xc)t={update:Km(r,e.key,e.value)};else if(e instanceof Ml)t={delete:Md(r,e.key)};else if(e instanceof $i)t={update:Km(r,e.key,e.data),updateMask:uw(e.fieldMask)};else{if(!(e instanceof yv))return mt();t={verify:Md(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,h){const v=h.transform;if(v instanceof bl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Rl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Pl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof bd)return{fieldPath:h.field.canonicalString(),increment:v.Ie};throw mt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Pv(r,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:mt()),t;var c}function xd(r,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?xr.updateTime(Nr(c.updateTime)):void 0!==c.exists?xr.exists(c.exists):xr.none():xr.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(h,v){let S=null;"setToServerValue"in v?(yt("REQUEST_TIME"===v.setToServerValue),S=new bl):"appendMissingElements"in v?S=new Rl(v.appendMissingElements.values||[]):"removeAllFromArray"in v?S=new Pl(v.removeAllFromArray.values||[]):"increment"in v?S=new bd(h,v.increment):mt();const P=dr.fromServerFormat(v.fieldPath);return new Kh(P,S)}(r,a)):[];var c;if(e.update){const a=ro(r,e.update.name),c=new si({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new fi((e.updateMask.fieldPaths||[]).map(k=>dr.fromServerFormat(k)));return new $i(a,c,h,t,s)}return new xc(a,c,t,s)}if(e.delete){const a=ro(r,e.delete);return new Ml(a,t)}if(e.verify){const a=ro(r,e.verify);return new yv(a,t)}return mt()}function Cp(r,e){return{documents:[rw(r,e.path)]}}function Nd(r,e){const t={structuredQuery:{}},s=e.path;let a;null!==e.collectionGroup?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=rw(r,a);const c=function(P){if(0!==P.length)return xv(pn.create(P,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const h=function(P){if(0!==P.length)return P.map(k=>{return{field:io((X=k).field),direction:ow(X.dir)};var X})}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const v=bn(r,e.limit);return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(P=e.startAt).inclusive,values:P.position}),e.endAt&&(t.structuredQuery.endAt=function(P){return{before:!P.inclusive,values:P.position}}(e.endAt)),{ut:t,parent:a};var P}function Ea(r){let e=Dp(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){yt(1===s);const k=t.from[0];k.allDescendants?a=k.collectionId:e=e.child(k.collectionId)}let c=[];t.where&&(c=function(W){const X=bp(W);return X instanceof pn&&Sc(X)?X.getFilters():[X]}(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(X=>{return new eo(Od((xe=X).field),function(We){switch(We){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(xe.direction));var xe}));let v=null;t.limit&&(v=function(W){let X;return X="object"==typeof W?W.value:W,ga(X)?null:X}(t.limit));let S=null;var W;t.startAt&&(S=new Xs((W=t.startAt).values||[],!!W.before));let P=null;return t.endAt&&(P=function(W){return new Xs(W.values||[],!W.before)}(t.endAt)),Q(e,a,h,c,v,"F",S,P)}function bp(r){return void 0!==r.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Od(t.unaryFilter.field);return fn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Od(t.unaryFilter.field);return fn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Od(t.unaryFilter.field);return fn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Od(t.unaryFilter.field);return fn.create(h,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(r):void 0!==r.fieldFilter?fn.create(Od((t=r).fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==r.compositeFilter?function(t){return pn.create(t.compositeFilter.filters.map(s=>bp(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return mt()}}(t.compositeFilter.op))}(r):mt();var t}function ow(r){return Rv[r]}function aw(r){return qD[r]}function Mv(r){return ZD[r]}function io(r){return{fieldPath:r.canonicalString()}}function Od(r){return dr.fromServerFormat(r.fieldPath)}function xv(r){return r instanceof fn?function(t){if("=="===t.op){if(Cc(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NAN"}};if(pi(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Cc(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NOT_NAN"}};if(pi(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(t.field),op:aw(t.op),value:t.value}}}(r):r instanceof pn?function(t){const s=t.getFilters().map(a=>xv(a));return 1===s.length?s[0]:{compositeFilter:{op:Mv(t.op),filters:s}}}(r):mt()}function uw(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Rp(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Ja{constructor(e,t,s,a,c=Dt.min(),h=Dt.min(),v=Gr.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=v,this.expectedCount=S}withSequenceNumber(e){return new Ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Nv{constructor(e){this.ct=e}}function Pp(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ym(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Md(c=r.ct,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:Ya(c,h.version.toTimestamp()),createTime:Ya(c,h.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:kd(e.version)};else{if(!e.isUnknownDocument())return mt();s.unknownDocument={path:t.path.toArray(),version:kd(e.version)}}var c,h;return s}function Ym(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function kd(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ol(r){const e=new Yn(r.seconds,r.nanoseconds);return Dt.fromTimestamp(e)}function kl(r,e){const t=(e.baseMutations||[]).map(c=>xd(r.ct,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const s=e.mutations.map(c=>xd(r.ct,c)),a=Yn.fromMillis(e.localWriteTimeMs);return new vv(e.batchId,a,t,s)}function Mp(r){const e=Ol(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Ol(r.lastLimboFreeSnapshotVersion):Dt.min();let s;return s=void 0!==r.query.documents?(yt(1===(c=r.query).documents.length),rt(ae(Dp(c.documents[0])))):function(c){return rt(Ea(c))}(r.query),new Ja(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Gr.fromBase64String(r.resumeToken));var c}function cw(r,e){const t=kd(e.snapshotVersion),s=kd(e.lastLimboFreeSnapshotVersion);let a;a=d(e.target)?Cp(r.ct,e.target):Nd(r.ct,e.target).ut;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:va(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Fd(r){const e=Ea({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?to(e,e.limit,"L"):e}function Jm(r,e){return new Yh(e.largestBatchId,xd(r.ct,e.overlayMutation))}function xp(r,e){const t=e.path.lastSegment();return[r,Si(e.path.popLast()),t]}function Np(r,e,t,s){return{indexId:r,uid:e,sequenceNumber:t,readTime:kd(s.readTime),documentKey:Si(s.documentKey.path),largestBatchId:s.largestBatchId}}class Ld{getBundleMetadata(e,t){return Op(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:Ol(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return Op(e).put({bundleId:(a=t).id,createTime:kd(Nr(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return kp(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:Fd(c.bundledQuery),readTime:Ol(c.readTime)};var c})}saveNamedQuery(e,t){return kp(e).put({name:(a=t).name,readTime:kd(Nr(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Op(r){return zr(r,"bundles")}function kp(r){return zr(r,"namedQueries")}class Nc{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new Nc(e,t.uid||"")}getOverlay(e,t){return Oc(e).get(xp(this.userId,t)).next(s=>s?Jm(this.serializer,s):null)}getOverlays(e,t){const s=no();return fe.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((c,h)=>{const v=new Yh(t,h);a.push(this.ht(e,v))}),fe.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(h=>a.add(Si(h.getCollectionPath())));const c=[];return a.forEach(h=>{const v=IDBKeyRange.bound([this.userId,h,s],[this.userId,h,s+1],!1,!0);c.push(Oc(e).H("collectionPathOverlayIndex",v))}),fe.waitFor(c)}getOverlaysForCollection(e,t,s){const a=no(),c=Si(t),h=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Oc(e).W("collectionPathOverlayIndex",h).next(v=>{for(const S of v){const P=Jm(this.serializer,S);a.set(P.getKey(),P)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const c=no();let h;const v=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Oc(e).Y({index:"collectionGroupOverlayIndex",range:v},(S,P,k)=>{const W=Jm(this.serializer,P);c.size()<a||W.largestBatchId===h?(c.set(W.getKey(),W),h=W.largestBatchId):k.done()}).next(()=>c)}ht(e,t){return Oc(e).put(function(a,c,h){const[v,S,P]=xp(c,h.mutation.key);return{userId:c,collectionPath:S,documentId:P,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Nl(a.ct,h.mutation)}}(this.serializer,this.userId,t))}}function Oc(r){return zr(r,"documentOverlays")}class Ia{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(nr(e.integerValue));else if("doubleValue"in e){const s=nr(e.doubleValue);isNaN(s)?this.Et(t,13):(this.Et(t,15),Ec(s)?t.dt(0):t.dt(s))}else if("timestampValue"in e){const s=e.timestampValue;this.Et(t,20),"string"==typeof s?t.At(s):(t.At(`${s.seconds||""}`),t.dt(s.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(xo(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Et(t,45),t.dt(s.latitude||0),t.dt(s.longitude||0)}else"mapValue"in e?vd(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):mt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const s=e.fields||{};this.Et(t,55);for(const a of Object.keys(s))this.Rt(a,t),this.It(s[a],t)}wt(e,t){const s=e.values||[];this.Et(t,50);for(const a of s)this.It(a,t)}gt(e,t){this.Et(t,37),ct.fromName(e).path.forEach(s=>{this.Et(t,60),this.St(s,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function kv(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Fp(r){const e=64-function(s){let a=0;for(let c=0;c<8;++c){const h=kv(255&s[c]);if(a+=h,8!==h)break}return a}(r);return Math.ceil(e/8)}Ia.bt=new Ia;class Lp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ct(s.value),s=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Mt(s.value),s=t.next();this.xt()}Ot(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ct(s);else if(s<2048)this.Ct(960|s>>>6),this.Ct(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s);else{const a=t.codePointAt(0);this.Ct(240|a>>>18),this.Ct(128|63&a>>>12),this.Ct(128|63&a>>>6),this.Ct(128|63&a)}}this.vt()}Nt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Mt(s);else if(s<2048)this.Mt(960|s>>>6),this.Mt(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s);else{const a=t.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}this.xt()}Bt(e){const t=this.Lt(e),s=Fp(t);this.kt(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}qt(e){const t=this.Lt(e),s=Fp(t);this.kt(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(c){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,c,!1),new Uint8Array(h.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class KD{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Xm{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Bu{constructor(){this.Gt=new Lp,this.zt=new KD(this.Gt),this.jt=new Xm(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Fl{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Fl(this.indexId,this.documentKey,this.arrayValue,s)}}function ju(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=Fv(r.arrayValue,e.arrayValue),0!==t?t:(t=Fv(r.directionalValue,e.directionalValue),0!==t?t:ct.comparator(r.documentKey,e.documentKey)))}function Fv(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class Lv{constructor(e){this.Yt=new Gn((t,s)=>dr.comparator(t.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const s=t;s.isInequality()?this.Yt=this.Yt.add(s):this.Xt.push(s)}}get en(){return this.Yt.size>1}tn(e){if(yt(e.collectionGroup===this.collectionId),this.en)return!1;const t=pd(e);if(void 0!==t&&!this.nn(t))return!1;const s=Su(e);let a=new Set,c=0,h=0;for(;c<s.length&&this.nn(s[c]);++c)a=a.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.Yt.size>0){const v=this.Yt.getIterator().getNext();if(!a.has(v.field.canonicalString())){const S=s[c];if(!this.rn(v,S)||!this.sn(this.Zt[h++],S))return!1}++c}for(;c<s.length;++c)if(h>=this.Zt.length||!this.sn(this.Zt[h++],s[c]))return!1;return!0}on(){if(this.en)return null;let e=new Gn(dr.comparator);const t=[];for(const s of this.Xt)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)t.push(new da(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new da(s.field,0))}for(const s of this.Zt)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new da(s.field,"asc"===s.dir?0:1)));return new ks(ks.UNKNOWN_ID,this.collectionId,t,_c.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Vp(r){var e,t;if(yt(r instanceof fn||r instanceof pn),r instanceof fn){if(r instanceof Al){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>fn.create(r.field,"==",c)))||[];return pn.create(a,"or")}return r}const s=r.filters.map(a=>Vp(a));return pn.create(s,r.op)}function Vv(r){if(0===r.getFilters().length)return[];const e=n_(Vp(r));return yt(lw(e)),e_(e)||t_(e)?[e]:e.getFilters()}function e_(r){return r instanceof fn}function t_(r){return r instanceof pn&&Sc(r)}function lw(r){return e_(r)||t_(r)||function(t){if(t instanceof pn&&Za(t)){for(const s of t.getFilters())if(!e_(s)&&!t_(s))return!1;return!0}return!1}(r)}function n_(r){if(yt(r instanceof fn||r instanceof pn),r instanceof fn)return r;if(1===r.filters.length)return n_(r.filters[0]);const e=r.filters.map(s=>n_(s));let t=pn.create(e,r.op);return t=Bp(t),lw(t)?t:(yt(t instanceof pn),yt(qa(t)),yt(t.filters.length>1),t.filters.reduce((s,a)=>Vd(s,a)))}function Vd(r,e){let t;return yt(r instanceof fn||r instanceof pn),yt(e instanceof fn||e instanceof pn),t=r instanceof fn?e instanceof fn?pn.create([r,e],"and"):Up(r,e):e instanceof fn?Up(e,r):function(a,c){if(yt(a.filters.length>0&&c.filters.length>0),qa(a)&&qa(c))return Dd(a,c.getFilters());const h=Za(a)?a:c,v=Za(a)?c:a,S=h.filters.map(P=>Vd(P,v));return pn.create(S,"or")}(r,e),Bp(t)}function Up(r,e){if(qa(e))return Dd(e,r.getFilters());{const t=e.filters.map(s=>Vd(r,s));return pn.create(t,"or")}}function Bp(r){if(yt(r instanceof fn||r instanceof pn),r instanceof fn)return r;const e=r.getFilters();if(1===e.length)return Bp(e[0]);if($h(r))return r;const t=e.map(a=>Bp(a)),s=[];return t.forEach(a=>{a instanceof fn?s.push(a):a instanceof pn&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:pn.create(s,r.op)}class Uv{constructor(){this._n=new rf}addToCollectionParentIndex(e,t){return this._n.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Ji.min())}updateCollectionGroup(e,t,s){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class rf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Gn(yn.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Gn(yn.comparator)).toArray()}}const Ll=new Uint8Array(0);class dw{constructor(e,t){this.databaseId=t,this.an=new rf,this.un=new Fs(s=>va(s),(s,a)=>g(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const c={collectionId:s,parent:Si(a)};return r_(e).put(c)}return fe.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Im(t),""],!1,!0);return r_(e).W(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;s.push(ws(h.parent))}return s})}addFieldIndex(e,t){const s=Bd(e),a={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var v;delete a.indexId;const c=s.add(a);if(t.indexState){const h=sf(e);return c.next(v=>{h.put(Np(v,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const s=Bd(e),a=sf(e),c=Ud(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Bd(e),s=Ud(e),a=sf(e);return t.H().next(()=>s.H()).next(()=>a.H())}createTargetIndexes(e,t){return fe.forEach(this.cn(t),s=>this.getIndexType(e,s).next(a=>{if(0===a||1===a){const c=new Lv(s).on();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,t){const s=Ud(e);let a=!0;const c=new Map;return fe.forEach(this.cn(t),h=>this.ln(e,h).next(v=>{a&&(a=!!v),c.set(h,v)})).next(()=>{if(a){let h=un();const v=[];return fe.forEach(c,(S,P)=>{var lt;ze("IndexedDbIndexManager",`Using index ${lt=S,`id=${lt.indexId}|cg=${lt.collectionGroup}|f=${lt.fields.map(Vt=>`${Vt.fieldPath}:${Vt.kind}`).join(",")}`} to execute ${va(t)}`);const k=function(lt,Vt){const nn=pd(Vt);if(void 0===nn)return null;for(const Ln of p(lt,nn.fieldPath))switch(Ln.op){case"array-contains-any":return Ln.value.arrayValue.values||[];case"array-contains":return[Ln.value]}return null}(P,S),W=function(lt,Vt){const nn=new Map;for(const Ln of Su(Vt))for(const kr of p(lt,Ln.fieldPath))switch(kr.op){case"==":case"in":nn.set(Ln.fieldPath.canonicalString(),kr.value);break;case"not-in":case"!=":return nn.set(Ln.fieldPath.canonicalString(),kr.value),Array.from(nn.values())}return null}(P,S),X=function(lt,Vt){const nn=[];let Ln=!0;for(const kr of Su(Vt)){const mi=0===kr.kind?y(lt,kr.fieldPath,lt.startAt):M(lt,kr.fieldPath,lt.startAt);nn.push(mi.value),Ln&&(Ln=mi.inclusive)}return new Xs(nn,Ln)}(P,S),ce=function(lt,Vt){const nn=[];let Ln=!0;for(const kr of Su(Vt)){const mi=0===kr.kind?M(lt,kr.fieldPath,lt.endAt):y(lt,kr.fieldPath,lt.endAt);nn.push(mi.value),Ln&&(Ln=mi.inclusive)}return new Xs(nn,Ln)}(P,S),xe=this.hn(S,P,X),Qe=this.hn(S,P,ce),We=this.Pn(S,P,W),It=this.In(S.indexId,k,xe,X.inclusive,Qe,ce.inclusive,We);return fe.forEach(It,Nt=>s.j(Nt,t.limit).next(lt=>{lt.forEach(Vt=>{const nn=ct.fromSegments(Vt.documentKey);h.has(nn)||(h=h.add(nn),v.push(nn))})}))}).next(()=>v)}return fe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Vv(pn.create(e.filters,"and")).map(s=>Wh(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,s,a,c,h,v){const S=(null!=t?t.length:1)*Math.max(s.length,c.length),P=S/(null!=t?t.length:1),k=[];for(let W=0;W<S;++W){const X=t?this.Tn(t[W/P]):Ll,ce=this.En(e,X,s[W%P],a),xe=this.dn(e,X,c[W%P],h),Qe=v.map(We=>this.En(e,X,We,!0));k.push(...this.createRange(ce,xe,Qe))}return k}En(e,t,s,a){const c=new Fl(e,ct.empty(),t,s);return a?c:c.Jt()}dn(e,t,s,a){const c=new Fl(e,ct.empty(),t,s);return a?c.Jt():c}ln(e,t){const s=new Lv(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let h=null;for(const v of c)s.tn(v)&&(!h||v.fields.length>h.fields.length)&&(h=v);return h})}getIndexType(e,t){let s=2;const a=this.cn(t);return fe.forEach(a,c=>this.ln(e,c).next(h=>{h?0!==s&&h.fields.length<function(S){let P=new Gn(dr.comparator),k=!1;for(const W of S.filters)for(const X of W.getFlattenedFilters())X.field.isKeyField()||("array-contains"===X.op||"array-contains-any"===X.op?k=!0:P=P.add(X.field));for(const W of S.orderBy)W.field.isKeyField()||(P=P.add(W.field));return P.size+(k?1:0)}(c)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}An(e,t){const s=new Bu;for(const a of Su(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const h=s.Ht(a.kind);Ia.bt.Pt(c,h)}return s.Wt()}Tn(e){const t=new Bu;return Ia.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const s=new Bu;return Ia.bt.Pt(_a(this.databaseId,t),s.Ht(function(c){const h=Su(c);return 0===h.length?0:h[h.length-1].kind}(e))),s.Wt()}Pn(e,t,s){if(null===s)return[];let a=[];a.push(new Bu);let c=0;for(const h of Su(e)){const v=s[c++];for(const S of a)if(this.Vn(t,h.fieldPath)&&Ou(v))a=this.mn(a,h,v);else{const P=S.Ht(h.kind);Ia.bt.Pt(v,P)}}return this.fn(a)}hn(e,t,s){return this.Pn(e,t,s.position)}fn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Wt();return t}mn(e,t,s){const a=[...e],c=[];for(const h of s.arrayValue.values||[])for(const v of a){const S=new Bu;S.seed(v.Wt()),Ia.bt.Pt(h,S.Ht(t.kind)),c.push(S)}return c}Vn(e,t){return!!e.filters.find(s=>s instanceof fn&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Bd(e),a=sf(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(c=>{const h=[];return fe.forEach(c,v=>a.get([v.indexId,this.uid]).next(S=>{h.push(function(k,W){const X=W?new _c(W.sequenceNumber,new Ji(Ol(W.readTime),new ct(ws(W.documentKey)),W.largestBatchId)):_c.empty(),ce=k.fields.map(([xe,Qe])=>new da(dr.fromServerFormat(xe),Qe));return new ks(k.indexId,k.collectionGroup,ce,X)}(v,S))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const c=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:zt(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Bd(e),c=sf(e);return this.gn(e).next(h=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(v=>fe.forEach(v,S=>c.put(Np(S.indexId,this.uid,h,s)))))}updateIndexEntries(e,t){const s=new Map;return fe.forEach(t,(a,c)=>{const h=s.get(a.collectionGroup);return(h?fe.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(v=>(s.set(a.collectionGroup,v),fe.forEach(v,S=>this.pn(e,a,S).next(P=>{const k=this.yn(c,S);return P.isEqual(k)?fe.resolve():this.wn(e,c,S,P,k)}))))})}Sn(e,t,s,a){return Ud(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.Rn(s,t.key),documentKey:t.key.path.toArray()})}bn(e,t,s,a){return Ud(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.Rn(s,t.key),t.key.path.toArray()])}pn(e,t,s){const a=Ud(e);let c=new Gn(ju);return a.Y({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.Rn(s,t)])},(h,v)=>{c=c.add(new Fl(s.indexId,t,v.arrayValue,v.directionalValue))}).next(()=>c)}yn(e,t){let s=new Gn(ju);const a=this.An(t,e);if(null==a)return s;const c=pd(t);if(null!=c){const h=e.data.field(c.fieldPath);if(Ou(h))for(const v of h.arrayValue.values||[])s=s.add(new Fl(t.indexId,e.key,this.Tn(v),a))}else s=s.add(new Fl(t.indexId,e.key,Ll,a));return s}wn(e,t,s,a,c){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(S,P,k,W,X){const ce=S.getIterator(),xe=P.getIterator();let Qe=za(ce),We=za(xe);for(;Qe||We;){let It=!1,Nt=!1;if(Qe&&We){const lt=k(Qe,We);lt<0?Nt=!0:lt>0&&(It=!0)}else null!=Qe?Nt=!0:It=!0;It?(W(We),We=za(xe)):Nt?(X(Qe),Qe=za(ce)):(Qe=za(ce),We=za(xe))}}(a,c,ju,v=>{h.push(this.Sn(e,t,s,v))},v=>{h.push(this.bn(e,t,s,v))}),fe.waitFor(h)}gn(e){let t=1;return sf(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((h,v)=>ju(h,v)).filter((h,v,S)=>!v||0!==ju(h,S[v-1]));const a=[];a.push(e);for(const h of s){const v=ju(h,e),S=ju(h,t);if(0===v)a[0]=e.Jt();else if(v>0&&S<0)a.push(h),a.push(h.Jt());else if(S>0)break}a.push(t);const c=[];for(let h=0;h<a.length;h+=2){if(this.Dn(a[h],a[h+1]))return[];c.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,Ll,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,Ll,[]]))}return c}Dn(e,t){return ju(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Bv)}getMinOffset(e,t){return fe.mapArray(this.cn(t),s=>this.ln(e,s).next(a=>a||mt())).next(Bv)}}function r_(r){return zr(r,"collectionParents")}function Ud(r){return zr(r,"indexEntries")}function Bd(r){return zr(r,"indexConfiguration")}function sf(r){return zr(r,"indexState")}function Bv(r){yt(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;yc(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ji(e.readTime,e.documentKey,t)}const af={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rs{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new rs(e,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Vl(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),c=[],h=IDBKeyRange.only(t.batchId);let v=0;const S=s.Y({range:h},(k,W,X)=>(v++,X.delete()));c.push(S.next(()=>{yt(1===v)}));const P=[];for(const k of t.mutations){const W=vl(e,k.key.path,t.batchId);c.push(a.delete(W)),P.push(k.key)}return fe.waitFor(c).next(()=>P)}function kc(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw mt();e=r.noDocument}return JSON.stringify(e).length}rs.DEFAULT_COLLECTION_PERCENTILE=10,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rs.DEFAULT=new rs(41943040,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rs.DISABLED=new rs(-1,0,0);class jp{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Cn={}}static lt(e,t,s,a){yt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new jp(c,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fc(e).Y({index:"userMutationsIndex",range:s},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const c=jd(e),h=Fc(e);return h.add({}).next(v=>{yt("number"==typeof v);const S=new vv(v,t,s,a),P=function(ce,xe,Qe){const We=Qe.baseMutations.map(Nt=>Nl(ce.ct,Nt)),It=Qe.mutations.map(Nt=>Nl(ce.ct,Nt));return{userId:xe,batchId:Qe.batchId,localWriteTimeMs:Qe.localWriteTime.toMillis(),baseMutations:We,mutations:It}}(this.serializer,this.userId,S),k=[];let W=new Gn((X,ce)=>zt(X.canonicalString(),ce.canonicalString()));for(const X of a){const ce=vl(this.userId,X.key.path,v);W=W.add(X.key.path.popLast()),k.push(h.put(P)),k.push(c.put(ce,Am))}return W.forEach(X=>{k.push(this.indexManager.addToCollectionParentIndex(e,X))}),e.addOnCommittedListener(()=>{this.Cn[v]=S.keys()}),fe.waitFor(k).next(()=>S)})}lookupMutationBatch(e,t){return Fc(e).get(t).next(s=>s?(yt(s.userId===this.userId),kl(this.serializer,s)):null)}vn(e,t){return this.Cn[t]?fe.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Cn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return Fc(e).Y({index:"userMutationsIndex",range:a},(h,v,S)=>{v.userId===this.userId&&(yt(v.batchId>=s),c=kl(this.serializer,v)),S.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Fc(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(a,c,h)=>{s=c.batchId,h.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fc(e).W("userMutationsIndex",t).next(s=>s.map(a=>kl(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Ru(this.userId,t.path),a=IDBKeyRange.lowerBound(s),c=[];return jd(e).Y({range:a},(h,v,S)=>{const[P,k,W]=h,X=ws(k);if(P===this.userId&&t.path.isEqual(X))return Fc(e).get(W).next(ce=>{if(!ce)throw mt();yt(ce.userId===this.userId),c.push(kl(this.serializer,ce))});S.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Gn(zt);const a=[];return t.forEach(c=>{const h=Ru(this.userId,c.path),v=IDBKeyRange.lowerBound(h),S=jd(e).Y({range:v},(P,k,W)=>{const[X,ce,xe]=P,Qe=ws(ce);X===this.userId&&c.path.isEqual(Qe)?s=s.add(xe):W.done()});a.push(S)}),fe.waitFor(a).next(()=>this.Fn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,c=Ru(this.userId,s),h=IDBKeyRange.lowerBound(c);let v=new Gn(zt);return jd(e).Y({range:h},(S,P,k)=>{const[W,X,ce]=S,xe=ws(X);W===this.userId&&s.isPrefixOf(xe)?xe.length===a&&(v=v.add(ce)):k.done()}).next(()=>this.Fn(e,v))}Fn(e,t){const s=[],a=[];return t.forEach(c=>{a.push(Fc(e).get(c).next(h=>{if(null===h)throw mt();yt(h.userId===this.userId),s.push(kl(this.serializer,h))}))}),fe.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Vl(e.ae,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),fe.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return jd(e).Y({range:s},(c,h,v)=>{if(c[0]===this.userId){const S=ws(c[1]);a.push(S)}else v.done()}).next(()=>{yt(0===a.length)})})}containsKey(e,t){return i_(e,this.userId,t)}xn(e){return jv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function i_(r,e,t){const s=Ru(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s);let h=!1;return jd(r).Y({range:c,J:!0},(v,S,P)=>{const[k,W,X]=v;k===e&&W===a&&(h=!0),P.done()}).next(()=>h)}function Fc(r){return zr(r,"mutations")}function jd(r){return zr(r,"documentMutations")}function jv(r){return zr(r,"mutationQueues")}class Lc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Lc(0)}static Bn(){return new Lc(-1)}}class $v{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next(t=>{const s=new Lc(t.highestTargetId);return t.highestTargetId=s.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(t=>Dt.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Ln(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.kn(e,a)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Ln(e).next(s=>(s.targetCount+=1,this.Qn(t,s),this.kn(e,s))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Vc(e).delete(t.targetId)).next(()=>this.Ln(e)).next(s=>(yt(s.targetCount>0),s.targetCount-=1,this.kn(e,s)))}removeTargets(e,t,s){let a=0;const c=[];return Vc(e).Y((h,v)=>{const S=Mp(v);S.sequenceNumber<=t&&null===s.get(S.targetId)&&(a++,c.push(this.removeTargetData(e,S)))}).next(()=>fe.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Vc(e).Y((s,a)=>{const c=Mp(a);t(c)})}Ln(e){return hw(e).get("targetGlobalKey").next(t=>(yt(null!==t),t))}kn(e,t){return hw(e).put("targetGlobalKey",t)}qn(e,t){return Vc(e).put(cw(this.serializer,t))}Qn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Ln(e).next(t=>t.targetCount)}getTargetData(e,t){const s=va(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Vc(e).Y({range:a,index:"queryTargetsIndex"},(h,v,S)=>{const P=Mp(v);g(t,P.target)&&(c=P,S.done())}).next(()=>c)}addMatchingKeys(e,t,s){const a=[],c=wa(e);return t.forEach(h=>{const v=Si(h.path);a.push(c.put({targetId:s,path:v})),a.push(this.referenceDelegate.addReference(e,s,h))}),fe.waitFor(a)}removeMatchingKeys(e,t,s){const a=wa(e);return fe.forEach(t,c=>{const h=Si(c.path);return fe.waitFor([a.delete([s,h]),this.referenceDelegate.removeReference(e,s,c)])})}removeMatchingKeysForTargetId(e,t){const s=wa(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=wa(e);let c=un();return a.Y({range:s,J:!0},(h,v,S)=>{const P=ws(h[1]),k=new ct(P);c=c.add(k)}).next(()=>c)}containsKey(e,t){const s=Si(t.path),a=IDBKeyRange.bound([s],[Im(s)],!1,!0);let c=0;return wa(e).Y({index:"documentTargetsIndex",J:!0,range:a},([h,v],S,P)=>{0!==h&&(c++,P.done())}).next(()=>c>0)}_t(e,t){return Vc(e).get(t).next(s=>s?Mp(s):null)}}function Vc(r){return zr(r,"targets")}function hw(r){return zr(r,"targetGlobal")}function wa(r){return zr(r,"targetDocuments")}function s_([r,e],[t,s]){const a=zt(r,t);return 0===a?zt(e,s):a}class fw{constructor(e){this.Kn=e,this.buffer=new Gn(s_),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();s_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hv{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){fa(s)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Mo(s)}yield t.zn(3e5)}))}}class zv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(ji._e);const s=new fw(t);return this.jn.forEachTarget(e,a=>s.Wn(a.sequenceNumber)).next(()=>this.jn.Jn(e,a=>s.Wn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(af)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),af):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let s,a,c,h,v,S,P;const k=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(W=>(W>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${W}`),a=this.params.maximumSequenceNumbersToCollect):a=W,h=Date.now(),this.nthSequenceNumber(e,a))).next(W=>(s=W,v=Date.now(),this.removeTargets(e,s,t))).next(W=>(c=W,S=Date.now(),this.removeOrphanedDocuments(e,s))).next(W=>(P=Date.now(),$a()<=Yr.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-k}ms\n\tDetermined least recently used ${a} in `+(v-h)+`ms\n\tRemoved ${c} targets in `+(S-v)+`ms\n\tRemoved ${W} documents in `+(P-S)+`ms\nTotal Duration: ${P-k}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:W})))}}class Wv{constructor(e,t){this.db=e,this.garbageCollector=function Gv(r,e){return new zv(r,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Zn(e){let t=0;return this.Jn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(s,a)=>t(a))}addReference(e,t,s){return $p(e,s)}removeReference(e,t,s){return $p(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return $p(e,t)}er(e,t){return function(a,c){let h=!1;return jv(a).Z(v=>i_(a,v,c).next(S=>(S&&(h=!0),fe.resolve(!S)))).next(()=>h)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Xn(e,(h,v)=>{if(v<=t){const S=this.er(e,h).next(P=>{if(!P)return c++,s.getEntry(e,h).next(()=>(s.removeEntry(h,Dt.min()),wa(e).delete([0,Si(h.path)])))});a.push(S)}}).next(()=>fe.waitFor(a)).next(()=>s.apply(e)).next(()=>c)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return $p(e,t)}Xn(e,t){const s=wa(e);let a,c=ji._e;return s.Y({index:"documentTargetsIndex"},([h,v],{path:S,sequenceNumber:P})=>{0===h?(c!==ji._e&&t(new ct(ws(a)),c),c=P,a=S):c=ji._e}).next(()=>{c!==ji._e&&t(new ct(ws(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $p(r,e){return wa(r).put((a=r.currentSequenceNumber,{targetId:0,path:Si(e.path),sequenceNumber:a}));var a}class qv{constructor(){this.changes=new Fs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?fe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Ta(e).put(s)}removeEntry(e,t,s){return Ta(e).delete(function(c,h){const v=c.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],Ym(h),v[v.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.tr(e,s)))}getEntry(e,t){let s=Fn.newInvalidDocument(t);return Ta(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(uf(t))},(a,c)=>{s=this.nr(t,c)}).next(()=>s)}rr(e,t){let s={size:0,document:Fn.newInvalidDocument(t)};return Ta(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(uf(t))},(a,c)=>{s={document:this.nr(t,c),size:kc(c)}}).next(()=>s)}getEntries(e,t){let s=ns();return this.ir(e,t,(a,c)=>{const h=this.nr(a,c);s=s.insert(a,h)}).next(()=>s)}sr(e,t){let s=ns(),a=new tr(ct.comparator);return this.ir(e,t,(c,h)=>{const v=this.nr(c,h);s=s.insert(c,v),a=a.insert(c,kc(h))}).next(()=>({documents:s,_r:a}))}ir(e,t,s){if(t.isEmpty())return fe.resolve();let a=new Gn(Qv);t.forEach(S=>a=a.add(S));const c=IDBKeyRange.bound(uf(a.first()),uf(a.last())),h=a.getIterator();let v=h.getNext();return Ta(e).Y({index:"documentKeyIndex",range:c},(S,P,k)=>{const W=ct.fromSegments([...P.prefixPath,P.collectionGroup,P.documentId]);for(;v&&Qv(v,W)<0;)s(v,null),v=h.getNext();v&&v.isEqual(W)&&(s(v,P),v=h.hasNext()?h.getNext():null),v?k.U(uf(v)):k.done()}).next(()=>{for(;v;)s(v,null),v=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(e,t,s,a,c){const h=t.path,v=[h.popLast().toArray(),h.lastSegment(),Ym(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],S=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ta(e).W(IDBKeyRange.bound(v,S,!0)).next(P=>{c?.incrementDocumentReadCount(P.length);let k=ns();for(const W of P){const X=this.nr(ct.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);X.isFoundDocument()&&(Lu(t,X)||a.has(X.key))&&(k=k.insert(X.key,X))}return k})}getAllFromCollectionGroup(e,t,s,a){let c=ns();const h=Kv(t,s),v=Kv(t,Ji.max());return Ta(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,v,!0)},(S,P,k)=>{const W=this.nr(ct.fromSegments(P.prefixPath.concat(P.collectionGroup,P.documentId)),P);c=c.insert(W.key,W),c.size===a&&k.done()}).next(()=>c)}newChangeBuffer(e){return new Zv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Lo(e).get("remoteDocumentGlobalKey").next(t=>(yt(!!t),t))}tr(e,t){return Lo(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const s=function Ov(r,e){let t;if(e.document)t=Qm(r.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=ct.fromSegments(e.noDocument.path),a=Ol(e.noDocument.readTime);t=Fn.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return mt();{const s=ct.fromSegments(e.unknownDocument.path),a=Ol(e.unknownDocument.version);t=Fn.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(a){const c=new Yn(a[0],a[1]);return Dt.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Dt.min()))return s}return Fn.newInvalidDocument(e)}}function o_(r){return new QD(r)}class Zv extends qv{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Fs(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Gn((c,h)=>zt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const v=this.ur.get(c);if(t.push(this.ar.removeEntry(e,c,v.readTime)),h.isValidDocument()){const S=Pp(this.ar.serializer,h);a=a.add(c.path.popLast());const P=kc(S);s+=P-v.size,t.push(this.ar.addEntry(e,c,S))}else if(s-=v.size,this.trackRemovals){const S=Pp(this.ar.serializer,h.convertToNoDocument(Dt.min()));t.push(this.ar.addEntry(e,c,S))}}),a.forEach(c=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.ar.updateMetadata(e,s)),fe.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(s=>(this.ur.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:s,_r:a})=>(a.forEach((c,h)=>{this.ur.set(c,{size:h,readTime:s.get(c).readTime})}),s))}}function Lo(r){return zr(r,"remoteDocumentGlobal")}function Ta(r){return zr(r,"remoteDocumentsV14")}function uf(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Kv(r,e){const t=e.documentKey.path.toArray();return[r,Ym(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Qv(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(a=zt(t[c],s[c]),a)return a;return a=zt(t.length,s.length),a||(a=zt(t[t.length-2],s[s.length-2]),a||zt(t[t.length-1],s[s.length-1]))}class pw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class a_{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&Qh(s.mutation,a,fi.empty(),Yn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,un()).next(()=>s))}getLocalViewOfDocuments(e,t,s=un()){const a=no();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let h=Mc();return c.forEach((v,S)=>{h=h.insert(v,S.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=no();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,un()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,v)=>{t.set(h,v)})})}computeViews(e,t,s,a){let c=ns();const h=Ka(),v=Ka();return t.forEach((S,P)=>{const k=s.get(P.key);a.has(P.key)&&(void 0===k||k.mutation instanceof $i)?c=c.insert(P.key,P):void 0!==k?(h.set(P.key,k.mutation.getFieldMask()),Qh(k.mutation,P,k.mutation.getFieldMask(),Yn.now())):h.set(P.key,fi.empty())}),this.recalculateAndSaveOverlays(e,c).next(S=>(S.forEach((P,k)=>h.set(P,k)),t.forEach((P,k)=>{var W;return v.set(P,new pw(k,null!==(W=h.get(P))&&void 0!==W?W:null))}),v))}recalculateAndSaveOverlays(e,t){const s=Ka();let a=new tr((h,v)=>h-v),c=un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const v of h)v.keys().forEach(S=>{const P=t.get(S);if(null===P)return;let k=s.get(S)||fi.empty();k=v.applyToLocalView(P,k),s.set(S,k);const W=(a.get(v.batchId)||un()).add(S);a=a.insert(v.batchId,W)})}).next(()=>{const h=[],v=a.getReverseIterator();for(;v.hasNext();){const S=v.getNext(),P=S.key,k=S.value,W=Ep();k.forEach(X=>{if(!c.has(X)){const ce=Um(t.get(X),s.get(X));null!==ce&&W.set(X,ce),c=c.add(X)}}),h.push(this.documentOverlayCache.saveOverlays(e,P,W))}return fe.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return ct.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ot(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a);var h}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):fe.resolve(no());let v=-1,S=c;return h.next(P=>fe.forEach(P,(k,W)=>(v<W.largestBatchId&&(v=W.largestBatchId),c.get(k)?fe.resolve():this.remoteDocumentCache.getEntry(e,k).next(X=>{S=S.insert(k,X)}))).next(()=>this.populateOverlays(e,P,c)).next(()=>this.computeViews(e,S,P,un())).next(k=>({batchId:v,changes:km(k)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ct(t)).next(s=>{let a=Mc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let h=Mc();return this.indexManager.getCollectionParents(e,c).next(v=>fe.forEach(v,S=>{const P=(W=t,X=S.child(c),new L(X,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt));var W,X;return this.getDocumentsMatchingCollectionQuery(e,P,s,a).next(k=>{k.forEach((W,X)=>{h=h.insert(W,X)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a))).next(h=>{c.forEach((S,P)=>{const k=P.getKey();null===h.get(k)&&(h=h.insert(k,Fn.newInvalidDocument(k)))});let v=Mc();return h.forEach((S,P)=>{const k=c.get(S);void 0!==k&&Qh(k.mutation,P,fi.empty(),Yn.now()),Lu(t,P)&&(v=v.insert(S,P))}),v})}}class $d{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return fe.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(a=t).id,version:a.version,createTime:Nr(a.createTime)}),fe.resolve();var a}getNamedQuery(e,t){return fe.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(a=t).name,query:Fd(a.bundledQuery),readTime:Nr(a.readTime)}),fe.resolve();var a}}class $u{constructor(){this.overlays=new tr(ct.comparator),this.hr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=no();return fe.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.ht(e,t,c)}),fe.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.hr.get(s);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.hr.delete(s)),fe.resolve()}getOverlaysForCollection(e,t,s){const a=no(),c=t.length+1,h=new ct(t.child("")),v=this.overlays.getIteratorFrom(h);for(;v.hasNext();){const S=v.getNext().value,P=S.getKey();if(!t.isPrefixOf(P.path))break;P.path.length===c&&S.largestBatchId>s&&a.set(S.getKey(),S)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new tr((P,k)=>P-k);const h=this.overlays.getIterator();for(;h.hasNext();){const P=h.getNext().value;if(P.getKey().getCollectionGroup()===t&&P.largestBatchId>s){let k=c.get(P.largestBatchId);null===k&&(k=no(),c=c.insert(P.largestBatchId,k)),k.set(P.getKey(),P)}}const v=no(),S=c.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((P,k)=>v.set(P,k)),!(v.size()>=a)););return fe.resolve(v)}ht(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const h=this.hr.get(a.largestBatchId).delete(s.key);this.hr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new Yh(t,s));let c=this.hr.get(t);void 0===c&&(c=un(),this.hr.set(t,c)),this.hr.set(t,c.add(s.key))}}class Uc{constructor(){this.Pr=new Gn(Ri.Ir),this.Tr=new Gn(Ri.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const s=new Ri(e,t);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Ar(new Ri(e,t))}Rr(e,t){e.forEach(s=>this.removeReference(s,t))}Vr(e){const t=new ct(new yn([])),s=new Ri(t,e),a=new Ri(t,e+1),c=[];return this.Tr.forEachInRange([s,a],h=>{this.Ar(h),c.push(h.key)}),c}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new ct(new yn([])),s=new Ri(t,e),a=new Ri(t,e+1);let c=un();return this.Tr.forEachInRange([s,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new Ri(e,0),s=this.Pr.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Ri{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ct.comparator(e.key,t.key)||zt(e.pr,t.pr)}static Er(e,t){return zt(e.pr,t.pr)||ct.comparator(e.key,t.key)}}class gw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Gn(Ri.Ir)}checkEmpty(e){return fe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const c=this.yr;this.yr++;const h=new vv(c,t,s,a);this.mutationQueue.push(h);for(const v of a)this.wr=this.wr.add(new Ri(v.key,c)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return fe.resolve(h)}lookupMutationBatch(e,t){return fe.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.br(t+1),c=a<0?0:a;return fe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ri(t,0),a=new Ri(t,Number.POSITIVE_INFINITY),c=[];return this.wr.forEachInRange([s,a],h=>{const v=this.Sr(h.pr);c.push(v)}),fe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Gn(zt);return t.forEach(a=>{const c=new Ri(a,0),h=new Ri(a,Number.POSITIVE_INFINITY);this.wr.forEachInRange([c,h],v=>{s=s.add(v.pr)})}),fe.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;ct.isDocumentKey(c)||(c=c.child(""));const h=new Ri(new ct(c),0);let v=new Gn(zt);return this.wr.forEachWhile(S=>{const P=S.key.path;return!!s.isPrefixOf(P)&&(P.length===a&&(v=v.add(S.pr)),!0)},h),fe.resolve(this.Dr(v))}Dr(e){const t=[];return e.forEach(s=>{const a=this.Sr(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){yt(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let s=this.wr;return fe.forEach(t.mutations,a=>{const c=new Ri(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,t){const s=new Ri(t,0),a=this.wr.firstAfterOrEqual(s);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return fe.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Yv{constructor(e){this.vr=e,this.docs=new tr(ct.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,h=this.vr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return fe.resolve(s?s.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let s=ns();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Fn.newInvalidDocument(a))}),fe.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=ns();const h=t.path,v=new ct(h.child("")),S=this.docs.getIteratorFrom(v);for(;S.hasNext();){const{key:P,value:{document:k}}=S.getNext();if(!h.isPrefixOf(P.path))break;P.path.length>h.length+1||yc(ha(k),s)<=0||(a.has(k.key)||Lu(t,k))&&(c=c.insert(k.key,k.mutableCopy()))}return fe.resolve(c)}getAllFromCollectionGroup(e,t,s,a){mt()}Fr(e,t){return fe.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new u_(this)}getSize(e){return fe.resolve(this.size)}}class u_ extends qv{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.ar.addEntry(e,a)):this.ar.removeEntry(s)}),fe.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class cf{constructor(e){this.persistence=e,this.Mr=new Fs(t=>va(t),g),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Uc,this.targetCount=0,this.Br=Lc.Nn()}forEachTarget(e,t){return this.Mr.forEach((s,a)=>t(a)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Or&&(this.Or=t),fe.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Lc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.qn(t),fe.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.Mr.forEach((h,v)=>{v.sequenceNumber<=t&&null===s.get(v.targetId)&&(this.Mr.delete(h),c.push(this.removeMatchingKeysForTargetId(e,v.targetId)),a++)}),fe.waitFor(c).next(()=>a)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const s=this.Mr.get(t)||null;return fe.resolve(s)}addMatchingKeys(e,t,s){return this.Nr.dr(t,s),fe.resolve()}removeMatchingKeys(e,t,s){this.Nr.Rr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),fe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Nr.gr(t);return fe.resolve(s)}containsKey(e,t){return fe.resolve(this.Nr.containsKey(t))}}class Hp{constructor(e,t){this.Lr={},this.overlays={},this.kr=new ji(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new cf(this),this.indexManager=new Uv,this.remoteDocumentCache=new Yv(s=>this.referenceDelegate.Kr(s)),this.serializer=new Nv(t),this.$r=new $d(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $u,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Lr[e.toKey()];return s||(s=new gw(t,this.referenceDelegate),this.Lr[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,s){ze("MemoryPersistence","Starting transaction:",e);const a=new YD(this.kr.next());return this.referenceDelegate.Ur(),s(a).next(c=>this.referenceDelegate.Wr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gr(e,t){return fe.or(Object.values(this.Lr).map(s=>()=>s.containsKey(e,t)))}}class YD extends ap{constructor(e){super(),this.currentSequenceNumber=e}}class Hd{constructor(e){this.persistence=e,this.zr=new Uc,this.jr=null}static Hr(e){return new Hd(e)}get Jr(){if(this.jr)return this.jr;throw mt()}addReference(e,t,s){return this.zr.addReference(s,t),this.Jr.delete(s.toString()),fe.resolve()}removeReference(e,t,s){return this.zr.removeReference(s,t),this.Jr.add(s.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),fe.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(a=>this.Jr.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Jr.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Jr,s=>{const a=ct.fromPath(s);return this.Yr(e,a).next(c=>{c||t.removeEntry(a,Dt.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(s=>{s?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return fe.or([()=>fe.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class zp{constructor(e){this.serializer=e}N(e,t,s,a){const c=new Ci("createOrUpgrade",t);var S;s<1&&a>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ic,{unique:!0}),S.createObjectStore("documentMutations"),c_(e),function(S){S.createObjectStore("remoteDocuments")}(e));let h=fe.resolve();return s<3&&a>=3&&(0!==s&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),c_(e)),h=h.next(()=>function(S){const P=S.store("targetGlobal"),k={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return P.put("targetGlobalKey",k)}(c))),s<4&&a>=4&&(0!==s&&(h=h.next(()=>function(S,P){return P.store("mutations").W().next(k=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ic,{unique:!0});const W=P.store("mutations"),X=k.map(ce=>W.put(ce));return fe.waitFor(X)})}(e,c))),h=h.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(h=h.next(()=>this.Xr(c))),s<6&&a>=6&&(h=h.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.ei(c)))),s<7&&a>=7&&(h=h.next(()=>this.ti(c))),s<8&&a>=8&&(h=h.next(()=>this.ni(e,c))),s<9&&a>=9&&(h=h.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(h=h.next(()=>this.ri(c))),s<11&&a>=11&&(h=h.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(h=h.next(()=>{!function(S){const P=S.createObjectStore("documentOverlays",{keyPath:yd});P.createIndex("collectionPathOverlayIndex",pp,{unique:!1}),P.createIndex("collectionGroupOverlayIndex",bm,{unique:!1})}(e)})),s<13&&a>=13&&(h=h.next(()=>function(S){const P=S.createObjectStore("remoteDocumentsV14",{keyPath:lp});P.createIndex("documentKeyIndex",wc),P.createIndex("collectionGroupIndex",Pu)}(e)).next(()=>this.ii(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(h=h.next(()=>this.si(e,c))),s<15&&a>=15&&(h=h.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:xh}).createIndex("sequenceNumberIndex",hp,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:fp}).createIndex("documentKeyIndex",Sm,{unique:!1})}(e))),h}ei(e){let t=0;return e.store("remoteDocuments").Y((s,a)=>{t+=kc(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Xr(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(a=>fe.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",h).next(v=>fe.forEach(v,S=>{yt(S.userId===c.userId);const P=kl(this.serializer,S);return Vl(e,c.userId,P).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return s.Y((h,v)=>{const S=new yn(h),P=[0,Si(S)];c.push(t.get(P).next(k=>k?fe.resolve():t.put({targetId:0,path:Si(S),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>fe.waitFor(c))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:dp});const s=t.store("collectionParents"),a=new rf,c=h=>{if(a.add(h)){const v=h.lastSegment(),S=h.popLast();return s.put({collectionId:v,parent:Si(S)})}};return t.store("remoteDocuments").Y({J:!0},(h,v)=>{const S=new yn(h);return c(S.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([h,v,S],P)=>{const k=ws(v);return c(k.popLast())}))}ri(e){const t=e.store("targets");return t.Y((s,a)=>{const c=Mp(a),h=cw(this.serializer,c);return t.put(h)})}ii(e,t){const s=t.store("remoteDocuments"),a=[];return s.Y((c,h)=>{const v=t.store("remoteDocumentsV14"),S=(W=h,W.document?new ct(yn.fromString(W.document.name).popFirst(5)):W.noDocument?ct.fromSegments(W.noDocument.path):W.unknownDocument?ct.fromSegments(W.unknownDocument.path):mt()).path.toArray(),P={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};var W;a.push(v.put(P))}).next(()=>fe.waitFor(a))}si(e,t){const s=t.store("mutations"),a=o_(this.serializer),c=new Hp(Hd.Hr,this.serializer.ct);return s.W().next(h=>{const v=new Map;return h.forEach(S=>{var P;let k=null!==(P=v.get(S.userId))&&void 0!==P?P:un();kl(this.serializer,S).keys().forEach(W=>k=k.add(W)),v.set(S.userId,k)}),fe.forEach(v,(S,P)=>{const k=new $r(P),W=Nc.lt(this.serializer,k),X=c.getIndexManager(k),ce=jp.lt(k,this.serializer,X,c.referenceDelegate);return new a_(a,ce,W,X).recalculateAndSaveOverlaysForDocumentKeys(new kh(t,ji._e),S).next()})})}}function c_(r){r.createObjectStore("targetDocuments",{keyPath:Q0}).createIndex("documentTargetsIndex",_d,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cm,{unique:!0}),r.createObjectStore("targetGlobal")}const Gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class l_{constructor(e,t,s,a,c,h,v,S,P,k,W=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.oi=c,this.window=h,this.document=v,this._i=P,this.ai=k,this.ui=W,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=X=>Promise.resolve(),!l_.D())throw new ke(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wv(this,a),this.Ti=t+"main",this.serializer=new Nv(S),this.Ei=new Xi(this.Ti,this.ui,new zp(this.serializer)),this.Qr=new $v(this.referenceDelegate,this.serializer),this.remoteDocumentCache=o_(this.serializer),this.$r=new Ld,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===k&&Dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(_e.FAILED_PRECONDITION,Gp);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ji(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var s=(0,Ee.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,Ee.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(fa(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return lf(e).get("owner").next(t=>fe.resolve(this.Si(t)))}bi(e){return Wp(e).delete(this.clientId)}Di(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=zr(s,"clientMetadata");return a.W().next(c=>{const h=e.vi(c,18e5),v=c.filter(S=>-1===h.indexOf(S));return fe.forEach(v,S=>a.delete(S.clientId)).next(()=>v)})}).catch(()=>[]);if(e.di)for(const s of t)e.di.removeItem(e.Fi(s.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?fe.resolve(!0):lf(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new ke(_e.FAILED_PRECONDITION,Gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wp(e).W().next(s=>void 0===this.vi(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new kh(t,ji._e);return e.yi(s).next(()=>e.bi(s))}),e.Ei.close(),e.Bi()})()}vi(e,t){return e.filter(s=>this.Ci(s.updateTimeMs,t)&&!this.Mi(s.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Wp(e).W().next(t=>this.vi(t,18e5).map(s=>s.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return jp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Nc.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,s){ze("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(S=this.ui)?Mu:14===S?dv:13===S?Oh:12===S?Rm:11===S?Nh:void mt();var S;let h;return this.Ei.runTransaction(e,a,c,v=>(h=new kh(v,this.kr?this.kr.next():ji._e),"readwrite-primary"===t?this.gi(h).next(S=>!!S||this.pi(h)).next(S=>{if(!S)throw Dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new ke(_e.FAILED_PRECONDITION,bu);return s(h)}).next(S=>this.wi(h).next(()=>S)):this.ki(h).next(()=>s(h)))).then(v=>(h.raiseOnCommittedEvent(),v))}ki(e){return lf(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(_e.FAILED_PRECONDITION,Gp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lf(e).put("owner",t)}static D(){return Xi.D()}yi(e){const t=lf(e);return t.get("owner").next(s=>this.Si(s)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Ci(e,t){const s=Date.now();return!(e<s-t||e>s&&(Dr(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,cn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const s=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ze("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Dr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Dr("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lf(r){return zr(r,"owner")}function Wp(r){return zr(r,"clientMetadata")}function d_(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class qp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.qi=s,this.Qi=a}static Ki(e,t){let s=un(),a=un();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new qp(e,t.fromCache,s,a)}}class JD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Jv{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,cn.G6)()?8:Xi.v((0,cn.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.ji(e,t).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.Hi(e,t,a,s).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new JD;return this.Ji(e,t,h).next(v=>{if(c.result=v,this.Ui)return this.Yi(e,t,h,v.size)})}).next(()=>c.result)}Yi(e,t,s,a){return s.documentReadCount<this.Wi?($a()<=Yr.in.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),fe.resolve()):($a()<=Yr.in.DEBUG&&ze("QueryEngine","Query:",Fo(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Gi*a?($a()<=Yr.in.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rt(t))):fe.resolve())}ji(e,t){if(Me(t))return fe.resolve(null);let s=rt(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=to(t,null,"F"),s=rt(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const h=un(...c);return this.zi.getDocuments(e,h).next(v=>this.indexManager.getMinOffset(e,s).next(S=>{const P=this.Zi(t,v);return this.Xi(t,P,h,S.readTime)?this.ji(e,to(t,null,"F")):this.es(e,P,t,S)}))})))}Hi(e,t,s,a){return Me(t)||a.isEqual(Dt.min())?fe.resolve(null):this.zi.getDocuments(e,s).next(c=>{const h=this.Zi(t,c);return this.Xi(t,h,s,a)?fe.resolve(null):($a()<=Yr.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Fo(t)),this.es(e,h,t,Is(a,-1)).next(v=>v))})}Zi(e,t){let s=new Gn(Vu(e));return t.forEach((a,c)=>{Lu(e,c)&&(s=s.add(c))}),s}Xi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ji(e,t,s){return $a()<=Yr.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.zi.getDocumentsMatchingQuery(e,t,Ji.min(),s)}es(e,t,s,a){return this.zi.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}class XD{constructor(e,t,s,a){this.persistence=e,this.ts=t,this.serializer=a,this.ns=new tr(zt),this.rs=new Fs(c=>va(c),g),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a_(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function mw(r,e,t,s){return new XD(r,e,t,s)}function h_(r,e){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,Ee.Z)(function*(r,e){const t=st(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t._s(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const h=[],v=[];let S=un();for(const P of a){h.push(P.batchId);for(const k of P.mutations)S=S.add(k.key)}for(const P of c){v.push(P.batchId);for(const k of P.mutations)S=S.add(k.key)}return t.localDocuments.getDocuments(s,S).next(P=>({us:P,removedBatchIds:h,addedBatchIds:v}))})})}),Zp.apply(this,arguments)}function f_(r){const e=st(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function p_(r,e,t){let s=un(),a=un();return t.forEach(c=>s=s.add(c)),e.getEntries(r,s).next(c=>{let h=ns();return t.forEach((v,S)=>{const P=c.get(v);S.isFoundDocument()!==P.isFoundDocument()&&(a=a.add(v)),S.isNoDocument()&&S.version.isEqual(Dt.min())?(e.removeEntry(v,S.readTime),h=h.insert(v,S)):!P.isValidDocument()||S.version.compareTo(P.version)>0||0===S.version.compareTo(P.version)&&P.hasPendingWrites?(e.addEntry(S),h=h.insert(v,S)):ze("LocalStore","Ignoring outdated watch update for ",v,". Current version:",P.version," Watch version:",S.version)}),{cs:h,ls:a}})}function Xv(r,e){const t=st(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ul(r,e){const t=st(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Qr.getTargetData(s,e).next(c=>c?(a=c,fe.resolve(a)):t.Qr.allocateTargetId(s).next(h=>(a=new Ja(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Qr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.ns.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.ns=t.ns.insert(s.targetId,s),t.rs.set(e,s.targetId)),s})}function Gt(r,e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,Ee.Z)(function*(r,e,t){const s=st(r),a=s.ns.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",c,h=>s.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!fa(h))throw h;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.ns=s.ns.remove(e),s.rs.delete(a.target)}),Qp.apply(this,arguments)}function df(r,e,t){const s=st(r);let a=Dt.min(),c=un();return s.persistence.runTransaction("Execute query","readwrite",h=>function(S,P,k){const W=st(S),X=W.rs.get(k);return void 0!==X?fe.resolve(W.ns.get(X)):W.Qr.getTargetData(P,k)}(s,h,rt(e)).next(v=>{if(v)return a=v.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(h,v.targetId).next(S=>{c=S})}).next(()=>s.ts.getDocumentsMatchingQuery(h,e,t?a:Dt.min(),t?c:un())).next(v=>(eE(s,Pc(e),v),{documents:v,hs:c})))}function Bl(r,e){const t=st(r),s=st(t.Qr),a=t.ns.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>s._t(c,e).next(h=>h?h.target:null))}function g_(r,e){const t=st(r),s=t.ss.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.os.getAllFromCollectionGroup(a,e,Is(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(eE(t,e,a),a))}function eE(r,e,t){let s=r.ss.get(e)||Dt.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.ss.set(e,s)}function Bc(){return Bc=(0,Ee.Z)(function*(r,e,t,s){const a=st(r);let c=un(),h=ns();for(const P of t){const k=e.Ps(P.metadata.name);P.document&&(c=c.add(k));const W=e.Is(P);W.setReadTime(e.Ts(P.metadata.readTime)),h=h.insert(k,W)}const v=a.os.newChangeBuffer({trackRemovals:!0}),S=yield Ul(a,(k=s,rt(ae(yn.fromString(`__bundle__/docs/${k}`)))));var k;return a.persistence.runTransaction("Apply bundle documents","readwrite",P=>p_(P,v,h).next(k=>(v.apply(P),k)).next(k=>a.Qr.removeMatchingKeysForTargetId(P,S.targetId).next(()=>a.Qr.addMatchingKeys(P,c,S.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(P,k.cs,k.ls)).next(()=>k.cs)))}),Bc.apply(this,arguments)}function m_(r,e){return jl.apply(this,arguments)}function jl(){return jl=(0,Ee.Z)(function*(r,e,t=un()){const s=yield Ul(r,rt(Fd(e.bundledQuery))),a=st(r);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=Nr(e.readTime);if(s.snapshotVersion.compareTo(h)>=0)return a.$r.saveNamedQuery(c,e);const v=s.withResumeToken(Gr.EMPTY_BYTE_STRING,h);return a.ns=a.ns.insert(v.targetId,v),a.Qr.updateTargetData(c,v).next(()=>a.Qr.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.Qr.addMatchingKeys(c,t,s.targetId)).next(()=>a.$r.saveNamedQuery(c,e))})}),jl.apply(this,arguments)}function __(r,e){return`firestore_clients_${r}_${e}`}function Jp(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function hf(r,e){return`firestore_targets_${r}_${e}`}class zd{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static Es(e,t,s){const a=JSON.parse(s);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new ke(a.error.code,a.error.message))),h?new zd(e,t,a.state,c):(Dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gd{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Es(e,t){const s=JSON.parse(t);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new ke(s.error.code,s.error.message))),c?new Gd(e,s.state,a):(Dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=qh();for(let h=0;a&&h<s.activeTargetIds.length;++h)a=yl(s.activeTargetIds[h]),c=c.add(s.activeTargetIds[h]);return a?new Wd(e,c):(Dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class y_{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new y_(t.clientId,t.onlineState):(Dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class v_{constructor(){this.activeTargetIds=qh()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E_{constructor(e,t,s,a,c){this.window=e,this.oi=t,this.persistenceKey=s,this.Vs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new tr(zt),this.started=!1,this.ys=[];const h=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ws=__(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new v_),this.bs=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Li();for(const a of t){if(a===e.Vs)continue;const c=e.getItem(__(e.persistenceKey,a));if(c){const h=Wd.Es(a,c);h&&(e.ps=e.ps.insert(h.clientId,h))}}e.Ms();const s=e.storage.getItem(e.vs);if(s){const a=e.xs(s);a&&e.Os(a)}for(const a of e.ys)e.gs(a);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,s){this.Bs(e,t,s),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(hf(this.persistenceKey,e));if(s){const a=Gd.Es(e,s);a&&(t=a.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hf(this.persistenceKey,e))}updateQueryState(e,t,s){this.qs(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Ls(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const s=e;if(s.storageArea===this.storage){if(ze("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ws)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==s.key)if(t.bs.test(s.key)){if(null==s.newValue){const a=t.$s(s.key);return t.Us(a,null)}{const a=t.Ws(s.key,s.newValue);if(a)return t.Us(a.clientId,a)}}else if(t.Ds.test(s.key)){if(null!==s.newValue){const a=t.Gs(s.key,s.newValue);if(a)return t.zs(a)}}else if(t.Cs.test(s.key)){if(null!==s.newValue){const a=t.js(s.key,s.newValue);if(a)return t.Hs(a)}}else if(s.key===t.vs){if(null!==s.newValue){const a=t.xs(s.newValue);if(a)return t.Os(a)}}else if(s.key===t.Ss){const a=function(h){let v=ji._e;if(null!=h)try{const S=JSON.parse(h);yt("number"==typeof S),v=S}catch(S){Dr("SharedClientState","Failed to read sequence number from WebStorage",S)}return v}(s.newValue);a!==ji._e&&t.sequenceNumberHandler(a)}else if(s.key===t.Fs){const a=t.Js(s.newValue);yield Promise.all(a.map(c=>t.syncEngine.Ys(c)))}}else t.ys.push(s)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,s){const a=new zd(this.currentUser,e,t,s),c=Jp(this.persistenceKey,this.currentUser,e);this.setItem(c,a.ds())}Ls(e){const t=Jp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,s){const a=hf(this.persistenceKey,e),c=new Gd(e,t,s);this.setItem(a,c.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const s=this.$s(e);return Wd.Es(s,t)}Gs(e,t){const s=this.Ds.exec(e),a=Number(s[1]);return zd.Es(new $r(void 0!==s[2]?s[2]:null),a,t)}js(e,t){const s=this.Cs.exec(e),a=Number(s[1]);return Gd.Es(a,t)}xs(e){return y_.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const s=t?this.ps.insert(e,t):this.ps.remove(e),a=this.Ns(this.ps),c=this.Ns(s),h=[],v=[];return c.forEach(S=>{a.has(S)||h.push(S)}),a.forEach(S=>{c.has(S)||v.push(S)}),this.syncEngine.eo(h,v).then(()=>{this.ps=s})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=qh();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class I_{constructor(){this.no=new v_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,s){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new v_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _w{io(e){}shutdown(){}}class tE{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xp=null;function w_(){return null===Xp?Xp=268435456+Math.round(2147483648*Math.random()):Xp++,"0x"+Xp.toString(16)}const nE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rE{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const is="WebChannelConnection";class yw extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+t.host,this.po=`projects/${a}/databases/${c}`,this.yo="(default)"===this.databaseId.database?`project_id=${a}`:`project_id=${a}&database_id=${c}`}get wo(){return!1}So(t,s,a,c,h){const v=w_(),S=this.bo(t,s.toUriEncodedString());ze("RestConnection",`Sending RPC '${t}' ${v}:`,S,a);const P={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(P,c,h),this.Co(t,S,P,a).then(k=>(ze("RestConnection",`Received RPC '${t}' ${v}: `,k),k),k=>{throw hi("RestConnection",`RPC '${t}' ${v} failed with error: `,k,"url: ",S,"request:",a),k})}vo(t,s,a,c,h,v){return this.So(t,s,a,c,h)}Do(t,s,a){t["X-Goog-Api-Client"]="gl-js/ fire/"+la,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,h)=>t[h]=c),a&&a.headers.forEach((c,h)=>t[h]=c)}bo(t,s){return`${this.fo}/v1/${s}:${nE[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,s,a){const c=w_();return new Promise((h,v)=>{const S=new Ro;S.setWithCredentials(!0),S.listenOnce(hd.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Du.NO_ERROR:const k=S.getResponseJson();ze(is,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(k)),h(k);break;case Du.TIMEOUT:ze(is,`RPC '${e}' ${c} timed out`),v(new ke(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Du.HTTP_ERROR:const W=S.getStatus();if(ze(is,`RPC '${e}' ${c} failed with status:`,W,"response text:",S.getResponseText()),W>0){let X=S.getResponseJson();Array.isArray(X)&&(X=X[0]);const ce=X?.error;if(ce&&ce.status&&ce.message){const xe=function(We){const It=We.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(It)>=0?It:_e.UNKNOWN}(ce.status);v(new ke(xe,ce.message))}else v(new ke(_e.UNKNOWN,"Server responded with status "+S.getStatus()))}else v(new ke(_e.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{ze(is,`RPC '${e}' ${c} completed.`)}});const P=JSON.stringify(a);ze(is,`RPC '${e}' ${c} sending request:`,a),S.send(t,"POST",P,s,15)})}Fo(e,t,s){const a=w_(),c=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Ch(),v=ja(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},P=this.longPollingOptions.timeoutSeconds;void 0!==P&&(S.longPollingTimeout=Math.round(1e3*P)),this.useFetchStreams&&(S.useFetchStreams=!0),this.Do(S.initMessageHeaders,t,s),S.encodeInitMessageHeaders=!0;const k=c.join("");ze(is,`Creating RPC '${e}' stream ${a}: ${k}`,S);const W=h.createWebChannel(k,S);let X=!1,ce=!1;const xe=new rE({lo:We=>{ce?ze(is,`Not sending because RPC '${e}' stream ${a} is closed:`,We):(X||(ze(is,`Opening RPC '${e}' stream ${a} transport.`),W.open(),X=!0),ze(is,`RPC '${e}' stream ${a} sending:`,We),W.send(We))},ho:()=>W.close()}),Qe=(We,It,Nt)=>{We.listen(It,lt=>{try{Nt(lt)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return Qe(W,hc.EventType.OPEN,()=>{ce||ze(is,`RPC '${e}' stream ${a} transport opened.`)}),Qe(W,hc.EventType.CLOSE,()=>{ce||(ce=!0,ze(is,`RPC '${e}' stream ${a} transport closed`),xe.Vo())}),Qe(W,hc.EventType.ERROR,We=>{ce||(ce=!0,hi(is,`RPC '${e}' stream ${a} transport errored:`,We),xe.Vo(new ke(_e.UNAVAILABLE,"The operation could not be completed")))}),Qe(W,hc.EventType.MESSAGE,We=>{var It;if(!ce){const Nt=We.data[0];yt(!!Nt);const Vt=Nt.error||(null===(It=Nt[0])||void 0===It?void 0:It.error);if(Vt){ze(is,`RPC '${e}' stream ${a} received error:`,Vt);const nn=Vt.status;let Ln=function(G0){const gm=gi[G0];if(void 0!==gm)return wv(gm)}(nn),kr=Vt.message;void 0===Ln&&(Ln=_e.INTERNAL,kr="Unknown error status: "+nn+" with message "+Vt.message),ce=!0,xe.Vo(new ke(Ln,kr)),W.close()}else ze(is,`RPC '${e}' stream ${a} received:`,Nt),xe.mo(Nt)}}),Qe(v,rp.STAT_EVENT,We=>{We.stat===Au.PROXY?ze(is,`RPC '${e}' stream ${a} detected buffering proxy`):We.stat===Au.NOPROXY&&ze(is,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{xe.Ro()},0),xe}}function Ls(){return typeof window<"u"?window:null}function eg(){return typeof document<"u"?document:null}function ff(r){return new nf(r,!0)}class iE{constructor(e,t,s=1e3,a=1.5,c=6e4){this.oi=e,this.timerId=t,this.Mo=s,this.xo=a,this.Oo=c,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Lo),a=Math.max(0,t-s);a>0&&ze("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,a,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class tg{constructor(e,t,s,a,c,h,v,S){this.oi=e,this.$o=s,this.Uo=a,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=v,this.listener=S,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new iE(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,Ee.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var s=this;return(0,Ee.Z)(function*(){s.n_(),s.r_(),s.jo.cancel(),s.Wo++,4!==e?s.jo.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),s.jo.ko()):t&&t.code===_e.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.i_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Wo===t&&this.o_(s,a)},s=>{e(()=>{const a=new ke(_e.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(a)})})}o_(e,t){const s=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(a=>{s(()=>this.__(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Yo(){var e=this;this.state=5,this.jo.qo((0,Ee.Z)(function*(){e.state=0,e.start()}))}__(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sE extends tg{constructor(e,t,s,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,h),this.serializer=c}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function iw(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(P=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===P?1:"REMOVE"===P?2:"CURRENT"===P?3:"RESET"===P?4:mt(),a=e.targetChange.targetIds||[],c=function(P,k){return P.useProto3Json?(yt(void 0===k||"string"==typeof k),Gr.fromBase64String(k||"")):(yt(void 0===k||k instanceof Uint8Array),Gr.fromUint8Array(k||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,v=h&&function(P){const k=void 0===P.code?_e.UNKNOWN:wv(P.code);return new ke(k,P.message||"")}(h);t=new zm(s,a,c,v||null)}else if("documentChange"in e){const s=e.documentChange,a=ro(r,s.document.name),c=Nr(s.document.updateTime),h=s.document.createTime?Nr(s.document.createTime):Dt.min(),v=new si({mapValue:{fields:s.document.fields}}),S=Fn.newFoundDocument(a,c,h,v);t=new wp(s.targetIds||[],s.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const s=e.documentDelete,a=ro(r,s.document),c=s.readTime?Nr(s.readTime):Dt.min(),h=Fn.newNoDocument(a,c);t=new wp([],s.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const s=e.documentRemove,a=ro(r,s.document);t=new wp([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return mt();{const s=e.filter,{count:a=0,unchangedNames:c}=s,h=new WD(a,c);t=new Hm(s.targetId,h)}}var P;return t}(this.serializer,e),s=function(c){if(!("targetChange"in c))return Dt.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Dt.min():h.readTime?Nr(h.readTime):Dt.min()}(e);return this.listener.u_(t,s)}c_(e){const t={};t.database=Zm(this.serializer),t.addTarget=function(c,h){let v;const S=h.target;if(v=d(S)?{documents:Cp(c,S)}:{query:Nd(c,S).ut},v.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){v.resumeToken=Gm(c,h.resumeToken);const P=bn(c,h.expectedCount);null!==P&&(v.expectedCount=P)}else if(h.snapshotVersion.compareTo(Dt.min())>0){v.readTime=Ya(c,h.snapshotVersion.toTimestamp());const P=bn(c,h.expectedCount);null!==P&&(v.expectedCount=P)}return v}(this.serializer,e);const s=function Sp(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.t_(t)}l_(e){const t={};t.database=Zm(this.serializer),t.removeTarget=e,this.t_(t)}}class vw extends tg{constructor(e,t,s,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,h),this.serializer=c,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function sw(r,e){return r&&r.length>0?(yt(void 0!==e),r.map(t=>function(a,c){let h=Nr(a.updateTime?a.updateTime:c);return h.isEqual(Dt.min())&&(h=Nr(c)),new GD(h,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Nr(e.commitTime);return this.listener.T_(s,t)}return yt(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Zm(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Nl(this.serializer,s))};this.t_(t)}}class Ew extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.A_=!1}R_(){if(this.A_)throw new ke(_e.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,s,a){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.So(e,Wm(t,s),a,c,h)).catch(c=>{throw"FirebaseError"===c.name?(c.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ke(_e.UNKNOWN,c.toString())})}vo(e,t,s,a,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,v])=>this.connection.vo(e,Wm(t,s),a,h,v,c)).catch(h=>{throw"FirebaseError"===h.name?(h.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ke(_e.UNKNOWN,h.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class ww{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Dr(t),this.g_=!1):ze("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Tw{constructor(e,t,s,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=c,this.M_.io(v=>{s.enqueueAndForget((0,Ee.Z)(function*(){var S;jc(h)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,Ee.Z)(function*(k){const W=st(k);W.v_.add(4),yield qd(W),W.x_.set("Unknown"),W.v_.delete(4),yield $l(W)}),function P(k){return S.apply(this,arguments)})(h))}))}),this.x_=new ww(s,a)}}function $l(r){return T_.apply(this,arguments)}function T_(){return T_=(0,Ee.Z)(function*(r){if(jc(r))for(const e of r.F_)yield e(!0)}),T_.apply(this,arguments)}function qd(r){return D_.apply(this,arguments)}function D_(){return D_=(0,Ee.Z)(function*(r){for(const e of r.F_)yield e(!1)}),D_.apply(this,arguments)}function rg(r,e){const t=st(r);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),sg(t)?A_(t):Xa(t).Jo()&&Vo(t,e))}function pf(r,e){const t=st(r),s=Xa(t);t.C_.delete(e),s.Jo()&&ig(t,e),0===t.C_.size&&(s.Jo()?s.Xo():jc(t)&&t.x_.set("Unknown"))}function Vo(r,e){if(r.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xa(r).c_(e)}function ig(r,e){r.O_.Oe(e),Xa(r).l_(e)}function A_(r){r.O_=new nw({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>r.C_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),Xa(r).start(),r.x_.p_()}function sg(r){return jc(r)&&!Xa(r).Ho()&&r.C_.size>0}function jc(r){return 0===st(r).v_.size}function C_(r){r.O_=void 0}function oE(r){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,Ee.Z)(function*(r){r.C_.forEach((e,t)=>{Vo(r,e)})}),Zd.apply(this,arguments)}function S_(r,e){return aE.apply(this,arguments)}function aE(){return aE=(0,Ee.Z)(function*(r,e){C_(r),sg(r)?(r.x_.S_(e),A_(r)):r.x_.set("Unknown")}),aE.apply(this,arguments)}function uE(r,e,t){return og.apply(this,arguments)}function og(){return og=(0,Ee.Z)(function*(r,e,t){if(r.x_.set("Online"),e instanceof zm&&2===e.state&&e.cause)try{yield(s=(0,Ee.Z)(function*(c,h){const v=h.cause;for(const S of h.targetIds)c.C_.has(S)&&(yield c.remoteSyncer.rejectListen(S,v),c.C_.delete(S),c.O_.removeTarget(S))}),function a(c,h){return s.apply(this,arguments)})(r,e)}catch(s){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield gf(r,s)}else if(e instanceof wp?r.O_.$e(e):e instanceof Hm?r.O_.Je(e):r.O_.Ge(e),!t.isEqual(Dt.min()))try{const s=yield f_(r.localStore);t.compareTo(s)>=0&&(yield function(c,h){const v=c.O_.it(h);return v.targetChanges.forEach((S,P)=>{if(S.resumeToken.approximateByteSize()>0){const k=c.C_.get(P);k&&c.C_.set(P,k.withResumeToken(S.resumeToken,h))}}),v.targetMismatches.forEach((S,P)=>{const k=c.C_.get(S);if(!k)return;c.C_.set(S,k.withResumeToken(Gr.EMPTY_BYTE_STRING,k.snapshotVersion)),ig(c,S);const W=new Ja(k.target,S,P,k.sequenceNumber);Vo(c,W)}),c.remoteSyncer.applyRemoteEvent(v)}(r,t))}catch(s){ze("RemoteStore","Failed to raise snapshot:",s),yield gf(r,s)}var s}),og.apply(this,arguments)}function gf(r,e,t){return ag.apply(this,arguments)}function ag(){return ag=(0,Ee.Z)(function*(r,e,t){if(!fa(e))throw e;r.v_.add(1),yield qd(r),r.x_.set("Offline"),t||(t=()=>f_(r.localStore)),r.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),r.v_.delete(1),yield $l(r)}))}),ag.apply(this,arguments)}function ug(r,e){return e().catch(t=>gf(r,t,e))}function Vs(r){return b_.apply(this,arguments)}function b_(){return b_=(0,Ee.Z)(function*(r){const e=st(r),t=$c(e);let s=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Dw(e);)try{const a=yield Xv(e.localStore,s);if(null===a){0===e.D_.length&&t.Xo();break}s=a.batchId,R_(e,a)}catch(a){yield gf(e,a)}cE(e)&&P_(e)}),b_.apply(this,arguments)}function Dw(r){return jc(r)&&r.D_.length<10}function R_(r,e){r.D_.push(e);const t=$c(r);t.Jo()&&t.P_&&t.I_(e.mutations)}function cE(r){return jc(r)&&!$c(r).Ho()&&r.D_.length>0}function P_(r){$c(r).start()}function Aw(r){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,Ee.Z)(function*(r){$c(r).d_()}),Kd.apply(this,arguments)}function mf(r){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,Ee.Z)(function*(r){const e=$c(r);for(const t of r.D_)e.I_(t.mutations)}),Qd.apply(this,arguments)}function tA(r,e,t){return M_.apply(this,arguments)}function M_(){return M_=(0,Ee.Z)(function*(r,e,t){const s=r.D_.shift(),a=Ev.from(s,e,t);yield ug(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield Vs(r)}),M_.apply(this,arguments)}function lE(r,e){return cg.apply(this,arguments)}function cg(){return cg=(0,Ee.Z)(function*(r,e){var t;e&&$c(r).P_&&(yield(t=(0,Ee.Z)(function*(a,c){if(Iv(v=c.code)&&v!==_e.ABORTED){const h=a.D_.shift();$c(a).Zo(),yield ug(a,()=>a.remoteSyncer.rejectFailedWrite(h.batchId,c)),yield Vs(a)}var v}),function s(a,c){return t.apply(this,arguments)})(r,e)),cE(r)&&P_(r)}),cg.apply(this,arguments)}function dE(r,e){return x_.apply(this,arguments)}function x_(){return x_=(0,Ee.Z)(function*(r,e){const t=st(r);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const s=jc(t);t.v_.add(3),yield qd(t),s&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield $l(t)}),x_.apply(this,arguments)}function lg(r,e){return dg.apply(this,arguments)}function dg(){return dg=(0,Ee.Z)(function*(r,e){const t=st(r);e?(t.v_.delete(2),yield $l(t)):e||(t.v_.add(2),yield qd(t),t.x_.set("Unknown"))}),dg.apply(this,arguments)}function Xa(r){return r.N_||(r.N_=function(t,s,a){const c=st(t);return c.R_(),new sE(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(r.datastore,r.asyncQueue,{Po:oE.bind(null,r),To:S_.bind(null,r),u_:uE.bind(null,r)}),r.F_.push(function(){var e=(0,Ee.Z)(function*(t){t?(r.N_.Zo(),sg(r)?A_(r):r.x_.set("Unknown")):(yield r.N_.stop(),C_(r))});return function(t){return e.apply(this,arguments)}}())),r.N_}function $c(r){return r.B_||(r.B_=function(t,s,a){const c=st(t);return c.R_(),new vw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(r.datastore,r.asyncQueue,{Po:Aw.bind(null,r),To:lE.bind(null,r),E_:mf.bind(null,r),T_:tA.bind(null,r)}),r.F_.push(function(){var e=(0,Ee.Z)(function*(t){t?(r.B_.Zo(),yield Vs(r)):(yield r.B_.stop(),r.D_.length>0&&(ze("RemoteStore",`Stopping write stream with ${r.D_.length} pending writes`),r.D_=[]))});return function(t){return e.apply(this,arguments)}}())),r.B_}class hg{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const h=Date.now()+s,v=new hg(e,t,h,a,c);return v.start(s),v}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hl(r,e){if(Dr("AsyncQueue",`${e}: ${r}`),fa(r))return new ke(_e.UNAVAILABLE,`${e}: ${r}`);throw r}class Yd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||ct.comparator(t.key,s.key):(t,s)=>ct.comparator(t.key,s.key),this.keyedMap=Mc(),this.sortedSet=new tr(this.comparator)}static emptySet(e){return new Yd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Yd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class hE{constructor(){this.L_=new tr(ct.comparator)}track(e){const t=e.doc.key,s=this.L_.get(t);s?0!==e.type&&3===s.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==s.type?this.L_=this.L_.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.L_=this.L_.remove(t):1===e.type&&2===s.type?this.L_=this.L_.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):mt():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,s)=>{e.push(s)}),e}}class eu{constructor(e,t,s,a,c,h,v,S,P){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=v,this.excludesMetadataChanges=S,this.hasCachedResults=P}static fromInitialDocuments(e,t,s,a,c){const h=[];return t.forEach(v=>{h.push({type:0,doc:v})}),new eu(e,t,Yd.emptySet(t),h,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Cw{constructor(){this.q_=void 0,this.Q_=[]}}class Sw{constructor(){this.queries=new Fs(e=>Rc(e),Fu),this.onlineState="Unknown",this.K_=new Set}}function N_(r,e){return O_.apply(this,arguments)}function O_(){return O_=(0,Ee.Z)(function*(r,e){const t=st(r),s=e.query;let a=!1,c=t.queries.get(s);if(c||(a=!0,c=new Cw),a)try{c.q_=yield t.onListen(s)}catch(h){const v=Hl(h,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(v)}t.queries.set(s,c),c.Q_.push(e),e.U_(t.onlineState),c.q_&&e.W_(c.q_)&&fg(t)}),O_.apply(this,arguments)}function k_(r,e){return F_.apply(this,arguments)}function F_(){return F_=(0,Ee.Z)(function*(r,e){const t=st(r),s=e.query;let a=!1;const c=t.queries.get(s);if(c){const h=c.Q_.indexOf(e);h>=0&&(c.Q_.splice(h,1),a=0===c.Q_.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),F_.apply(this,arguments)}function bw(r,e){const t=st(r);let s=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const v of h.Q_)v.W_(a)&&(s=!0);h.q_=a}}s&&fg(t)}function Rw(r,e,t){const s=st(r),a=s.queries.get(e);if(a)for(const c of a.Q_)c.onError(t);s.queries.delete(e)}function fg(r){r.K_.forEach(e=>{e.next()})}class pg{constructor(e,t,s){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=s||{}}W_(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new eu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=eu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Pw{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class _f{constructor(e){this.serializer=e}Ps(e){return ro(this.serializer,e)}Is(e){return e.metadata.exists?Qm(this.serializer,e.document,!1):Fn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Nr(e)}}class Mw{constructor(e,t,s){this.ta=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fE(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const s=yn.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,s=new _f(this.serializer);for(const a of e)if(a.metadata.queries){const c=s.Ps(a.metadata.name);for(const h of a.metadata.queries){const v=(t.get(h)||un()).add(c);t.set(h,v)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function Yp(r,e,t,s){return Bc.apply(this,arguments)}(e.localStore,new _f(e.serializer),e.documents,e.ta.id),s=e.ra(e.documents);for(const a of e.queries)yield m_(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:t}})()}}function fE(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class pE{constructor(e){this.key=e}}class gE{constructor(e){this.key=e}}class mE{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=un(),this.mutatedKeys=un(),this.ua=Vu(e),this.ca=new Yd(this.ua)}get la(){return this.oa}ha(e,t){const s=t?t.Pa:new hE,a=t?t.ca:this.ca;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,v=!1;const S="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,P="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((k,W)=>{const X=a.get(k),ce=Lu(this.query,W)?W:null,xe=!!X&&this.mutatedKeys.has(X.key),Qe=!!ce&&(ce.hasLocalMutations||this.mutatedKeys.has(ce.key)&&ce.hasCommittedMutations);let We=!1;X&&ce?X.data.isEqual(ce.data)?xe!==Qe&&(s.track({type:3,doc:ce}),We=!0):this.Ia(X,ce)||(s.track({type:2,doc:ce}),We=!0,(S&&this.ua(ce,S)>0||P&&this.ua(ce,P)<0)&&(v=!0)):!X&&ce?(s.track({type:0,doc:ce}),We=!0):X&&!ce&&(s.track({type:1,doc:X}),We=!0,(S||P)&&(v=!0)),We&&(ce?(h=h.add(ce),c=Qe?c.add(k):c.delete(k)):(h=h.delete(k),c=c.delete(k)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const k="F"===this.query.limitType?h.last():h.first();h=h.delete(k.key),c=c.delete(k.key),s.track({type:1,doc:k})}return{ca:h,Pa:s,Xi:v,mutatedKeys:c}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const h=e.Pa.k_();h.sort((k,W)=>function(ce,xe){const Qe=We=>{switch(We){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return Qe(ce)-Qe(xe)}(k.type,W.type)||this.ua(k.doc,W.doc)),this.Ta(s),a=null!=a&&a;const v=t&&!a?this.Ea():[],S=0===this.aa.size&&this.current&&!a?1:0,P=S!==this._a;return this._a=S,0!==h.length||P?{snapshot:new eu(this.query,e.ca,c,h,e.mutatedKeys,0===S,P,!1,!!s&&s.resumeToken.approximateByteSize()>0),da:v}:{da:v}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new hE,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=un(),this.ca.forEach(s=>{this.Aa(s.key)&&(this.aa=this.aa.add(s.key))});const t=[];return e.forEach(s=>{this.aa.has(s)||t.push(new gE(s))}),this.aa.forEach(s=>{e.has(s)||t.push(new pE(s))}),t}Ra(e){this.oa=e.hs,this.aa=un();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return eu.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class xw{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Nw{constructor(e){this.key=e,this.ma=!1}}class _E{constructor(e,t,s,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.fa={},this.ga=new Fs(v=>Rc(v),Fu),this.pa=new Map,this.ya=new Set,this.wa=new tr(ct.comparator),this.Sa=new Map,this.ba=new Uc,this.Da={},this.Ca=new Map,this.va=Lc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function yE(r,e){return L_.apply(this,arguments)}function L_(){return L_=(0,Ee.Z)(function*(r,e){const t=$_(r);let s,a;const c=t.ga.get(e);if(c)s=c.targetId,t.sharedClientState.addLocalQueryTarget(s),a=c.view.Va();else{const h=yield Ul(t.localStore,rt(e)),v=t.sharedClientState.addLocalQueryTarget(h.targetId);s=h.targetId,a=yield vE(t,e,s,"current"===v,h.resumeToken),t.isPrimaryClient&&rg(t.remoteStore,h)}return a}),L_.apply(this,arguments)}function vE(r,e,t,s,a){return gg.apply(this,arguments)}function gg(){return gg=(0,Ee.Z)(function*(r,e,t,s,a){r.Ma=(W,X,ce)=>{return(xe=(0,Ee.Z)(function*(We,It,Nt,lt){let Vt=It.view.ha(Nt);Vt.Xi&&(Vt=yield df(We.localStore,It.query,!1).then(({documents:mi})=>It.view.ha(mi,Vt)));const nn=lt&&lt.targetChanges.get(It.targetId),Ln=lt&&null!=lt.targetMismatches.get(It.targetId),kr=It.view.applyChanges(Vt,We.isPrimaryClient,nn,Ln);return Wc(We,It.targetId,kr.da),kr.snapshot}),function Qe(We,It,Nt,lt){return xe.apply(this,arguments)})(r,W,X,ce);var xe};const c=yield df(r.localStore,e,!0),h=new mE(e,c.hs),v=h.ha(c.documents),S=tf.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),P=h.applyChanges(v,r.isPrimaryClient,S);Wc(r,t,P.da);const k=new xw(e,t,h);return r.ga.set(e,k),r.pa.has(t)?r.pa.get(t).push(e):r.pa.set(t,[e]),P.snapshot}),gg.apply(this,arguments)}function EE(r,e){return IE.apply(this,arguments)}function IE(){return IE=(0,Ee.Z)(function*(r,e){const t=st(r),s=t.ga.get(e),a=t.pa.get(s.targetId);if(a.length>1)return t.pa.set(s.targetId,a.filter(c=>!Fu(c,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Gt(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),pf(t.remoteStore,s.targetId),Da(t,s.targetId)}).catch(Mo))):(Da(t,s.targetId),yield Gt(t.localStore,s.targetId,!0))}),IE.apply(this,arguments)}function V_(){return V_=(0,Ee.Z)(function*(r,e,t){const s=Ef(r);try{const a=yield function(h,v){const S=st(h),P=Yn.now(),k=v.reduce((ce,xe)=>ce.add(xe.key),un());let W,X;return S.persistence.runTransaction("Locally write mutations","readwrite",ce=>{let xe=ns(),Qe=un();return S.os.getEntries(ce,k).next(We=>{xe=We,xe.forEach((It,Nt)=>{Nt.isValidDocument()||(Qe=Qe.add(It))})}).next(()=>S.localDocuments.getOverlayedDocuments(ce,xe)).next(We=>{W=We;const It=[];for(const Nt of v){const lt=tw(Nt,W.get(Nt.key).overlayedDocument);null!=lt&&It.push(new $i(Nt.key,lt,ts(lt.value.mapValue),xr.exists(!0)))}return S.mutationQueue.addMutationBatch(ce,P,It,v)}).next(We=>{X=We;const It=We.applyToLocalDocumentSet(W,Qe);return S.documentOverlayCache.saveOverlays(ce,We.batchId,It)})}).then(()=>({batchId:X.batchId,changes:km(W)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,v,S){let P=h.Da[h.currentUser.toKey()];P||(P=new tr(zt)),P=P.insert(v,S),h.Da[h.currentUser.toKey()]=P}(s,a.batchId,t),yield Bs(s,a.changes),yield Vs(s.remoteStore)}catch(a){const c=Hl(a,"Failed to persist write");t.reject(c)}}),V_.apply(this,arguments)}function wE(r,e){return yf.apply(this,arguments)}function yf(){return yf=(0,Ee.Z)(function*(r,e){const t=st(r);try{const s=yield function Kp(r,e){const t=st(r),s=e.snapshotVersion;let a=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.os.newChangeBuffer({trackRemovals:!0});a=t.ns;const v=[];e.targetChanges.forEach((k,W)=>{const X=a.get(W);if(!X)return;v.push(t.Qr.removeMatchingKeys(c,k.removedDocuments,W).next(()=>t.Qr.addMatchingKeys(c,k.addedDocuments,W)));let ce=X.withSequenceNumber(c.currentSequenceNumber);var Qe,We,It;null!==e.targetMismatches.get(W)?ce=ce.withResumeToken(Gr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):k.resumeToken.approximateByteSize()>0&&(ce=ce.withResumeToken(k.resumeToken,s)),a=a.insert(W,ce),We=ce,It=k,(0===(Qe=X).resumeToken.approximateByteSize()||We.snapshotVersion.toMicroseconds()-Qe.snapshotVersion.toMicroseconds()>=3e8||It.addedDocuments.size+It.modifiedDocuments.size+It.removedDocuments.size>0)&&v.push(t.Qr.updateTargetData(c,ce))});let S=ns(),P=un();if(e.documentUpdates.forEach(k=>{e.resolvedLimboDocuments.has(k)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(c,k))}),v.push(p_(c,h,e.documentUpdates).next(k=>{S=k.cs,P=k.ls})),!s.isEqual(Dt.min())){const k=t.Qr.getLastRemoteSnapshotVersion(c).next(W=>t.Qr.setTargetsMetadata(c,c.currentSequenceNumber,s));v.push(k)}return fe.waitFor(v).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,S,P)).next(()=>S)}).then(c=>(t.ns=a,c))}(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.Sa.get(c);h&&(yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.ma=!0:a.modifiedDocuments.size>0?yt(h.ma):a.removedDocuments.size>0&&(yt(h.ma),h.ma=!1))}),yield Bs(t,s,e)}catch(s){yield Mo(s)}}),yf.apply(this,arguments)}function TE(r,e,t){const s=st(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.ga.forEach((c,h)=>{const v=h.view.U_(e);v.snapshot&&a.push(v.snapshot)}),function(h,v){const S=st(h);S.onlineState=v;let P=!1;S.queries.forEach((k,W)=>{for(const X of W.Q_)X.U_(v)&&(P=!0)}),P&&fg(S)}(s.eventManager,e),a.length&&s.fa.u_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function tu(r,e,t){return zl.apply(this,arguments)}function zl(){return zl=(0,Ee.Z)(function*(r,e,t){const s=st(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Sa.get(e),c=a&&a.key;if(c){let h=new tr(ct.comparator);h=h.insert(c,Fn.newNoDocument(c,Dt.min()));const v=un().add(c),S=new Qa(Dt.min(),new Map,new tr(zt),h,v);yield wE(s,S),s.wa=s.wa.remove(c),s.Sa.delete(e),qc(s)}else yield Gt(s.localStore,e,!1).then(()=>Da(s,e,t)).catch(Mo)}),zl.apply(this,arguments)}function ss(r,e){return zu.apply(this,arguments)}function zu(){return zu=(0,Ee.Z)(function*(r,e){const t=st(r),s=e.batch.batchId;try{const a=yield function eA(r,e){const t=st(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.os.newChangeBuffer({trackRemovals:!0});return function(v,S,P,k){const W=P.batch,X=W.keys();let ce=fe.resolve();return X.forEach(xe=>{ce=ce.next(()=>k.getEntry(S,xe)).next(Qe=>{const We=P.docVersions.get(xe);yt(null!==We),Qe.version.compareTo(We)<0&&(W.applyToRemoteDocument(Qe,P),Qe.isValidDocument()&&(Qe.setReadTime(P.commitVersion),k.addEntry(Qe)))})}),ce.next(()=>v.mutationQueue.removeMutationBatch(S,W))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(v){let S=un();for(let P=0;P<v.mutationResults.length;++P)v.mutationResults[P].transformResults.length>0&&(S=S.add(v.batch.mutations[P].key));return S}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}(t.localStore,e);Gc(t,s,null),zc(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Bs(t,a)}catch(a){yield Mo(a)}}),zu.apply(this,arguments)}function _g(r,e,t){return Us.apply(this,arguments)}function Us(){return Us=(0,Ee.Z)(function*(r,e,t){const s=st(r);try{const a=yield function(h,v){const S=st(h);return S.persistence.runTransaction("Reject batch","readwrite-primary",P=>{let k;return S.mutationQueue.lookupMutationBatch(P,v).next(W=>(yt(null!==W),k=W.keys(),S.mutationQueue.removeMutationBatch(P,W))).next(()=>S.mutationQueue.performConsistencyCheck(P)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(P,k,v)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(P,k)).next(()=>S.localDocuments.getDocuments(P,k))})}(s.localStore,e);Gc(s,e,t),zc(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Bs(s,a)}catch(a){yield Mo(a)}}),Us.apply(this,arguments)}function Hc(){return Hc=(0,Ee.Z)(function*(r,e){const t=st(r);jc(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(h){const v=st(h);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>v.mutationQueue.getHighestUnacknowledgedBatchId(S))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ca.get(s)||[];a.push(e),t.Ca.set(s,a)}catch(s){const a=Hl(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Hc.apply(this,arguments)}function zc(r,e){(r.Ca.get(e)||[]).forEach(t=>{t.resolve()}),r.Ca.delete(e)}function Gc(r,e,t){const s=st(r);let a=s.Da[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Da[s.currentUser.toKey()]=a}}function Da(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.pa.get(e))r.ga.delete(s),t&&r.fa.xa(s,t);r.pa.delete(e),r.isPrimaryClient&&r.ba.Vr(e).forEach(s=>{r.ba.containsKey(s)||Gl(r,s)})}function Gl(r,e){r.ya.delete(e.path.canonicalString());const t=r.wa.get(e);null!==t&&(pf(r.remoteStore,t),r.wa=r.wa.remove(e),r.Sa.delete(t),qc(r))}function Wc(r,e,t){for(const s of t)s instanceof pE?(r.ba.addReference(s.key,e),Jd(r,s)):s instanceof gE?(ze("SyncEngine","Document no longer in limbo: "+s.key),r.ba.removeReference(s.key,e),r.ba.containsKey(s.key)||Gl(r,s.key)):mt()}function Jd(r,e){const t=e.key,s=t.path.canonicalString();r.wa.get(t)||r.ya.has(s)||(ze("SyncEngine","New document in limbo: "+t),r.ya.add(s),qc(r))}function qc(r){for(;r.ya.size>0&&r.wa.size<r.maxConcurrentLimboResolutions;){const e=r.ya.values().next().value;r.ya.delete(e);const t=new ct(yn.fromString(e)),s=r.va.next();r.Sa.set(s,new Nw(t)),r.wa=r.wa.insert(t,s),rg(r.remoteStore,new Ja(rt(ae(t.path)),s,"TargetPurposeLimboResolution",ji._e))}}function Bs(r,e,t){return yg.apply(this,arguments)}function yg(){return yg=(0,Ee.Z)(function*(r,e,t){const s=st(r),a=[],c=[],h=[];var v;s.ga.isEmpty()||(s.ga.forEach((v,S)=>{h.push(s.Ma(S,e,t).then(P=>{if((P||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(S.targetId,P?.fromCache?"not-current":"current"),P){a.push(P);const k=qp.Ki(S.targetId,P);c.push(k)}}))}),yield Promise.all(h),s.fa.u_(a),yield(v=(0,Ee.Z)(function*(P,k){const W=st(P);try{yield W.persistence.runTransaction("notifyLocalViewChanges","readwrite",X=>fe.forEach(k,ce=>fe.forEach(ce.qi,xe=>W.persistence.referenceDelegate.addReference(X,ce.targetId,xe)).next(()=>fe.forEach(ce.Qi,xe=>W.persistence.referenceDelegate.removeReference(X,ce.targetId,xe)))))}catch(X){if(!fa(X))throw X;ze("LocalStore","Failed to update sequence numbers: "+X)}for(const X of k){const ce=X.targetId;if(!X.fromCache){const xe=W.ns.get(ce),We=xe.withLastLimboFreeSnapshotVersion(xe.snapshotVersion);W.ns=W.ns.insert(ce,We)}}}),function S(P,k){return v.apply(this,arguments)})(s.localStore,c))}),yg.apply(this,arguments)}function DE(r,e){return vg.apply(this,arguments)}function vg(){return vg=(0,Ee.Z)(function*(r,e){const t=st(r);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const s=yield h_(t.localStore,e);t.currentUser=e,(c=t).Ca.forEach(v=>{v.forEach(S=>{S.reject(new ke(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Ca.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Bs(t,s.us)}var c}),vg.apply(this,arguments)}function AE(r,e){const t=st(r),s=t.Sa.get(e);if(s&&s.ma)return un().add(s.key);{let a=un();const c=t.pa.get(e);if(!c)return a;for(const h of c){const v=t.ga.get(h);a=a.unionWith(v.view.la)}return a}}function CE(r,e){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,Ee.Z)(function*(r,e){const t=st(r),s=yield df(t.localStore,e.query,!0),a=e.view.Ra(s);return t.isPrimaryClient&&Wc(t,e.targetId,a.da),a}),Eg.apply(this,arguments)}function SE(r,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,Ee.Z)(function*(r,e){const t=st(r);return g_(t.localStore,e).then(s=>Bs(t,s))}),Ig.apply(this,arguments)}function bE(r,e,t,s){return vf.apply(this,arguments)}function vf(){return vf=(0,Ee.Z)(function*(r,e,t,s){const a=st(r),c=yield function(v,S){const P=st(v),k=st(P.mutationQueue);return P.persistence.runTransaction("Lookup mutation documents","readonly",W=>k.vn(W,S).next(X=>X?P.localDocuments.getDocuments(W,X):fe.resolve(null)))}(a.localStore,e);var S;null!==c?("pending"===t?yield Vs(a.remoteStore):"acknowledged"===t||"rejected"===t?(Gc(a,e,s||null),zc(a,e),S=e,st(st(a.localStore).mutationQueue).Mn(S)):mt(),yield Bs(a,c)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),vf.apply(this,arguments)}function RE(){return RE=(0,Ee.Z)(function*(r,e){const t=st(r);if($_(t),Ef(t),!0===e&&!0!==t.Fa){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield kw(t,s.toArray());t.Fa=!0,yield lg(t.remoteStore,!0);for(const c of a)rg(t.remoteStore,c)}else if(!1===e&&!1!==t.Fa){const s=[];let a=Promise.resolve();t.pa.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?s.push(h):a=a.then(()=>(Da(t,h),Gt(t.localStore,h,!0))),pf(t.remoteStore,h)}),yield a,yield kw(t,s),function(h){const v=st(h);v.Sa.forEach((S,P)=>{pf(v.remoteStore,P)}),v.ba.mr(),v.Sa=new Map,v.wa=new tr(ct.comparator)}(t),t.Fa=!1,yield lg(t.remoteStore,!1)}}),RE.apply(this,arguments)}function kw(r,e,t){return B_.apply(this,arguments)}function B_(){return B_=(0,Ee.Z)(function*(r,e,t){const s=st(r),a=[],c=[];for(const h of e){let v;const S=s.pa.get(h);if(S&&0!==S.length){v=yield Ul(s.localStore,rt(S[0]));for(const P of S){const k=s.ga.get(P),W=yield CE(s,k);W.snapshot&&c.push(W.snapshot)}}else{const P=yield Bl(s.localStore,h);v=yield Ul(s.localStore,P),yield vE(s,PE(P),h,!1,v.resumeToken)}a.push(v)}return s.fa.u_(c),a}),B_.apply(this,arguments)}function PE(r){return Q(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function nA(r){return t=st(r).localStore,st(st(t).persistence).Li();var t}function Fw(r,e,t,s){return ME.apply(this,arguments)}function ME(){return ME=(0,Ee.Z)(function*(r,e,t,s){const a=st(r);if(a.Fa)return void ze("SyncEngine","Ignoring unexpected query state notification.");const c=a.pa.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const h=yield g_(a.localStore,Pc(c[0])),v=Qa.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Gr.EMPTY_BYTE_STRING);yield Bs(a,h,v);break}case"rejected":yield Gt(a.localStore,e,!0),Da(a,e,s);break;default:mt()}}),ME.apply(this,arguments)}function Lw(r,e,t){return j_.apply(this,arguments)}function j_(){return j_=(0,Ee.Z)(function*(r,e,t){const s=$_(r);if(s.Fa){for(const a of e){if(s.pa.has(a)){ze("SyncEngine","Adding an already active target "+a);continue}const c=yield Bl(s.localStore,a),h=yield Ul(s.localStore,c);yield vE(s,PE(c),h.targetId,!1,h.resumeToken),rg(s.remoteStore,h)}for(const a of t)s.pa.has(a)&&(yield Gt(s.localStore,a,!1).then(()=>{pf(s.remoteStore,a),Da(s,a)}).catch(Mo))}}),j_.apply(this,arguments)}function $_(r){const e=st(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=wE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tu.bind(null,e),e.fa.u_=bw.bind(null,e.eventManager),e.fa.xa=Rw.bind(null,e.eventManager),e}function Ef(r){const e=st(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ss.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_g.bind(null,e),e}class Wl{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.serializer=ff(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return mw(this.persistence,new Jv,e.initialUser,this.serializer)}createPersistence(e){return new Hp(Hd.Hr,this.serializer)}createSharedClientState(e){return new I_}terminate(){var e=this;return(0,Ee.Z)(function*(){var t,s;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(s=e.indexBackfillerScheduler)||void 0===s||s.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Tg extends Wl{constructor(e,t,s){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){yield t().call(s,e),yield s.Na.initialize(s,e),yield Ef(s.Na.syncEngine),yield Vs(s.Na.remoteStore),yield s.persistence.fi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return mw(this.persistence,new Jv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Hv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new Dm(t,this.persistence);return new Tm(e.asyncQueue,s)}createPersistence(e){const t=d_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?rs.withCacheSize(this.cacheSizeBytes):rs.DEFAULT;return new l_(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Ls(),eg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new I_}}class Xd extends Tg{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){yield t().call(s,e);const a=s.Na.syncEngine;s.sharedClientState instanceof E_&&(s.sharedClientState.syncEngine={Zs:bE.bind(null,a),Xs:Fw.bind(null,a),eo:Lw.bind(null,a),Li:nA.bind(null,a),Ys:SE.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.fi(function(){var c=(0,Ee.Z)(function*(h){yield function Ow(r,e){return RE.apply(this,arguments)}(s.Na.syncEngine,h),s.gcScheduler&&(h&&!s.gcScheduler.started?s.gcScheduler.start():h||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(h&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():h||s.indexBackfillerScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Ls();if(!E_.D(t))throw new ke(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=d_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new E_(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class ql{initialize(e,t){var s=this;return(0,Ee.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>TE(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=DE.bind(null,s.syncEngine),yield lg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Sw}createDatastore(e){const t=ff(e.databaseInfo.databaseId),s=new yw(e.databaseInfo);return new Ew(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return s=this.localStore,a=this.datastore,c=e.asyncQueue,h=t=>TE(this.syncEngine,t,0),v=tE.D()?new tE:new _w,new Tw(s,a,c,h,v);var s,a,c,h,v}createSyncEngine(e,t){return function(a,c,h,v,S,P,k){const W=new _E(a,c,h,v,S,P);return k&&(W.Fa=!0),W}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,Ee.Z)(function*(){var t,s;yield(s=(0,Ee.Z)(function*(c){const h=st(c);ze("RemoteStore","RemoteStore shutting down."),h.v_.add(5),yield qd(h),h.M_.shutdown(),h.x_.set("Unknown")}),function a(c){return s.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function xE(r,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Zc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Vw{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Pr,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(s=>{s&&s.ea()?this.metadata.resolve(s.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.X_)}`))},s=>this.metadata.reject(s))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ka();if(null===t)return null;const s=e.qa.decode(t),a=Number(s);isNaN(a)&&e.$a(`length string (${s}) is not valid number`);const c=yield e.Ua(a);return new Pw(JSON.parse(c),t.length+a)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,Ee.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const t=e.Wa();t<0&&e.$a("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Ua(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ga())&&t.$a("Reached the end of bundle when more is expected.");const s=t.qa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.ka.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Uw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ke(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const s=yield(a=(0,Ee.Z)(function*(h,v){const S=st(h),P={documents:v.map(ce=>Md(S.serializer,ce))},k=yield S.vo("BatchGetDocuments",S.serializer.databaseId,yn.emptyPath(),P,v.length),W=new Map;k.forEach(ce=>{const xe=function xl(r,e){return"found"in e?function(s,a){yt(!!a.found);const c=ro(s,a.found.name),h=Nr(a.found.updateTime),v=a.found.createTime?Nr(a.found.createTime):Dt.min(),S=new si({mapValue:{fields:a.found.fields}});return Fn.newFoundDocument(c,h,v,S)}(r,e):"missing"in e?function(s,a){yt(!!a.missing),yt(!!a.readTime);const c=ro(s,a.missing),h=Nr(a.readTime);return Fn.newNoDocument(c,h)}(r,e):mt()}(S.serializer,ce);W.set(xe.key.toString(),xe)});const X=[];return v.forEach(ce=>{const xe=W.get(ce.toString());yt(!!xe),X.push(xe)}),X}),function c(h,v){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ml(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const c=ct.fromPath(a);e.mutations.push(new yv(c,e.precondition(c)))}),yield(s=(0,Ee.Z)(function*(c,h){const v=st(c),S={writes:h.map(P=>Nl(v.serializer,P))};yield v.So("Commit",v.serializer.databaseId,yn.emptyPath(),S)}),function a(c,h){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mt();t=Dt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new ke(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?xr.exists(!1):xr.updateTime(t):xr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new ke(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xr.updateTime(t)}return xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Bw{constructor(e,t,s,a,c){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=c,this.za=s.maxAttempts,this.jo=new iE(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,Ee.Z)(function*(){const t=new Uw(e.datastore),s=e.Ja(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Ya(c)}))}).catch(a=>{e.Ya(a)})}))}Ja(e){try{const t=this.updateFunction(e);return!ga(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Iv(t)}return!1}}class jw{constructor(e,t,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=$r.UNAUTHENTICATED,this.clientId=Rh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var h=(0,Ee.Z)(function*(v){ze("FirestoreClient","Received user=",v.uid),yield c.authCredentialListener(v),c.user=v});return function(v){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(s,h=>(ze("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Hl(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function eh(r,e){return th.apply(this,arguments)}function th(){return th=(0,Ee.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,Ee.Z)(function*(c){s.isEqual(c)||(yield h_(e.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),th.apply(this,arguments)}function nh(r,e){return NE.apply(this,arguments)}function NE(){return NE=(0,Ee.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield H_(r);ze("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>dE(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,a)=>dE(e.remoteStore,a)),r._onlineComponents=e}),NE.apply(this,arguments)}function OE(r){return"FirebaseError"===r.name?r.code===_e.FAILED_PRECONDITION||r.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function H_(r){return wf.apply(this,arguments)}function wf(){return wf=(0,Ee.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ze("FirestoreClient","Using user provided OfflineComponentProvider");try{yield eh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!OE(t))throw t;hi("Error using user provided cache. Falling back to memory cache: "+t),yield eh(r,new Wl)}}else ze("FirestoreClient","Using default OfflineComponentProvider"),yield eh(r,new Wl);return r._offlineComponents}),wf.apply(this,arguments)}function Dg(r){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,Ee.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ze("FirestoreClient","Using user provided OnlineComponentProvider"),yield nh(r,r._uninitializedComponentsProvider._online)):(ze("FirestoreClient","Using default OnlineComponentProvider"),yield nh(r,new ql))),r._onlineComponents}),Ag.apply(this,arguments)}function kE(r){return H_(r).then(e=>e.persistence)}function rh(r){return H_(r).then(e=>e.localStore)}function FE(r){return Dg(r).then(e=>e.remoteStore)}function Cg(r){return Dg(r).then(e=>e.syncEngine)}function ih(r){return G_.apply(this,arguments)}function G_(){return G_=(0,Ee.Z)(function*(r){const e=yield Dg(r),t=e.eventManager;return t.onListen=yE.bind(null,e.syncEngine),t.onUnlisten=EE.bind(null,e.syncEngine),t}),G_.apply(this,arguments)}function Sg(r,e,t={}){const s=new Pr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(c,h,v,S,P){const k=new Zc({next:X=>{h.enqueueAndForget(()=>k_(c,W));const ce=X.docs.has(v);!ce&&X.fromCache?P.reject(new ke(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):ce&&X.fromCache&&S&&"server"===S.source?P.reject(new ke(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):P.resolve(X)},error:X=>P.reject(X)}),W=new pg(ae(v.path),k,{includeMetadataChanges:!0,Z_:!0});return N_(c,W)}(yield ih(r),r.asyncQueue,e,t,s)})),s.promise}function Tf(r,e,t={}){const s=new Pr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(c,h,v,S,P){const k=new Zc({next:X=>{h.enqueueAndForget(()=>k_(c,W)),X.fromCache&&"server"===S.source?P.reject(new ke(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):P.resolve(X)},error:X=>P.reject(X)}),W=new pg(v,k,{includeMetadataChanges:!0,Z_:!0});return N_(c,W)}(yield ih(r),r.asyncQueue,e,t,s)})),s.promise}function Df(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const Af=new Map;function Rg(r,e,t){if(!t)throw new ke(_e.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Z_(r,e,t,s){if(!0===e&&!0===s)throw new ke(_e.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function VE(r){if(!ct.isDocumentKey(r))throw new ke(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function UE(r){if(ct.isDocumentKey(r))throw new ke(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Pg(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(s=r).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof r?"a function":mt()}function gn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ke(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pg(r);throw new ke(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function K_(r,e){if(e<=0)throw new ke(_e.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Mg{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Df(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new ke(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ke(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ke(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ke(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mg(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new Sh;switch(s.type){case"firstParty":return new sp(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ke(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Af.get(t);s&&(ze("ComponentProvider","Removing Datastore"),Af.delete(t),s.terminate())}(this),Promise.resolve()}}class Pi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class hr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hr(this.firestore,e,this._key)}}class Aa extends Pi{constructor(e,t,s){super(e,t,ae(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hr(this.firestore,null,new ct(e))}withConverter(e){return new Aa(this.firestore,e,this._path)}}function jE(r,e,...t){if(r=(0,cn.m9)(r),Rg("collection","path",e),r instanceof sh){const s=yn.fromString(e,...t);return UE(s),new Aa(r,null,s)}{if(!(r instanceof hr||r instanceof Aa))throw new ke(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(yn.fromString(e,...t));return UE(s),new Aa(r.firestore,null,s)}}function Cf(r,e,...t){if(r=(0,cn.m9)(r),1===arguments.length&&(e=Rh.newId()),Rg("doc","path",e),r instanceof sh){const s=yn.fromString(e,...t);return VE(s),new hr(r,null,new ct(s))}{if(!(r instanceof hr||r instanceof Aa))throw new ke(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(yn.fromString(e,...t));return VE(s),new hr(r.firestore,r instanceof Aa?r.converter:null,new ct(s))}}function Q_(r,e){return r=(0,cn.m9)(r),e=(0,cn.m9)(e),(r instanceof hr||r instanceof Aa)&&(e instanceof hr||e instanceof Aa)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function xg(r,e){return r=(0,cn.m9)(r),e=(0,cn.m9)(e),r instanceof Pi&&e instanceof Pi&&r.firestore===e.firestore&&Fu(r._query,e._query)&&r.converter===e.converter}class Y_{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new iE(this,"async_queue_retry"),this._u=()=>{const t=eg();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=eg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=eg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new Pr;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!fa(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(s=>{throw this.ru=s,this.iu=!1,Dr("INTERNAL UNHANDLED ERROR: ",function(h){let v=h.message||"";return h.stack&&(v=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),v}(s)),s}).then(s=>(this.iu=!1,s))));return this.Xa=t,t}enqueueAfterDelay(e,t,s){this.au(),this.ou.indexOf(e)>-1&&(t=0);const a=hg.createAndSchedule(this,e,t,s,c=>this.lu(c));return this.nu.push(a),a}au(){this.ru&&mt()}verifyOperationInProgress(){}hu(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Ng(r){return function(t,s){if("object"!=typeof t||null===t)return!1;const a=t;for(const c of["next","error","complete"])if(c in a&&"function"==typeof a[c])return!0;return!1}(r)}class $E{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ir extends sh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Y_,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||J_(this),this._firestoreClient.terminate()}}function Or(r){return r._firestoreClient||J_(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function J_(r){var e,t,s;const a=r._freezeSettings(),c=(S=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Mm(r._databaseId,S,r._persistenceKey,(k=a).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,Df(k.experimentalLongPollingOptions),k.useFetchStreams));var S,k;r._firestoreClient=new jw(r._authCredentials,r._appCheckCredentials,r._queue,c),null!==(t=a.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=a.localCache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.localCache.kind,_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider})}function zE(r,e,t){const s=new Pr;return r.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield eh(r,t),yield nh(r,e),s.resolve()}catch(a){const c=a;if(!OE(c))throw c;hi("Error enabling indexeddb cache. Falling back to memory cache: "+c),s.reject(c)}})).then(()=>s.promise)}function Jw(r){if(r._initialized||r._terminated)throw new ke(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ca(Gr.fromBase64String(e))}catch(t){throw new ke(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ca(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qc{constructor(e){this._methodName=e}}class kg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const eT=/^__.*__$/;class GE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new $i(e,this.data,this.fieldMask,t,this.fieldTransforms):new xc(e,this.data,t,this.fieldTransforms)}}class WE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new $i(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ny(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class bf{constructor(e,t,s,a,c,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===c&&this.Eu(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Au({path:s,Vu:!1});return a.mu(e),a}fu(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Au({path:s,Vu:!1});return a.Eu(),a}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return $g(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(ny(this.du)&&eT.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class oh{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ff(e)}Su(e,t,s,a=!1){return new bf({du:e,methodName:t,wu:s,path:dr.emptyPath(),Vu:!1,yu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kl(r){const e=r._freezeSettings(),t=ff(r._databaseId);return new oh(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Fg(r,e,t,s,a,c={}){const h=r.Su(c.merge||c.mergeFields?2:0,e,t,a);Bg("Data must be an object, but it was:",h,s);const v=Bo(s,h);let S,P;if(c.merge)S=new fi(h.fieldMask),P=h.fieldTransforms;else if(c.mergeFields){const k=[];for(const W of c.mergeFields){const X=uh(e,W,t);if(!h.contains(X))throw new ke(_e.INVALID_ARGUMENT,`Field '${X}' is specified in your field mask but missing from your input data.`);KE(k,X)||k.push(X)}S=new fi(k),P=h.fieldTransforms.filter(W=>S.covers(W.field))}else S=null,P=h.fieldTransforms;return new GE(new si(v),S,P)}class ah extends Qc{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ah}}function qE(r,e,t){return new bf({du:3,wu:e.settings.wu,methodName:r._methodName,Vu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Lg extends Qc{_toFieldTransform(e){return new Kh(e.path,new bl)}isEqual(e){return e instanceof Lg}}class ZE extends Qc{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=qE(this,e,!0),s=this.bu.map(c=>os(c,t)),a=new Rl(s);return new Kh(e.path,a)}isEqual(e){return e instanceof ZE&&(0,cn.vZ)(this.bu,e.bu)}}class Vg extends Qc{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=qE(this,e,!0),s=this.bu.map(c=>os(c,t)),a=new Pl(s);return new Kh(e.path,a)}isEqual(e){return e instanceof Vg&&(0,cn.vZ)(this.bu,e.bu)}}class Ug extends Qc{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new bd(e.serializer,Zh(e.serializer,this.Du));return new Kh(e.path,t)}isEqual(e){return e instanceof Ug&&this.Du===e.Du}}function Uo(r,e,t,s){const a=r.Su(1,e,t);Bg("Data must be an object, but it was:",a,s);const c=[],h=si.empty();xu(s,(S,P)=>{const k=jg(e,S,t);P=(0,cn.m9)(P);const W=a.fu(k);if(P instanceof ah)c.push(k);else{const X=os(P,W);null!=X&&(c.push(k),h.set(k,X))}});const v=new fi(c);return new WE(h,v,a.fieldTransforms)}function ry(r,e,t,s,a,c){const h=r.Su(1,e,t),v=[uh(e,s,t)],S=[a];if(c.length%2!=0)throw new ke(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let X=0;X<c.length;X+=2)v.push(uh(e,c[X])),S.push(c[X+1]);const P=[],k=si.empty();for(let X=v.length-1;X>=0;--X)if(!KE(P,v[X])){const ce=v[X];let xe=S[X];xe=(0,cn.m9)(xe);const Qe=h.fu(ce);if(xe instanceof ah)P.push(ce);else{const We=os(xe,Qe);null!=We&&(P.push(ce),k.set(ce,We))}}const W=new fi(P);return new WE(k,W,h.fieldTransforms)}function iy(r,e,t,s=!1){return os(t,r.Su(s?4:3,e))}function os(r,e){if(jo(r=(0,cn.m9)(r)))return Bg("Unsupported field value:",e,r),Bo(r,e);if(r instanceof Qc)return function(s,a){if(!ny(a.du))throw a.pu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.pu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(s,a){const c=[];let h=0;for(const v of s){let S=os(v,a.gu(h));null==S&&(S={nullValue:"NULL_VALUE"}),c.push(S),h++}return{arrayValue:{values:c}}}(r,e)}return function(s,a){if(null===(s=(0,cn.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Zh(a.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const c=Yn.fromDate(s);return{timestampValue:Ya(a.serializer,c)}}if(s instanceof Yn){const c=new Yn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ya(a.serializer,c)}}if(s instanceof kg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ca)return{bytesValue:Gm(a.serializer,s._byteString)};if(s instanceof hr){const c=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw a.pu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Tp(s.firestore._databaseId||a.databaseId,s._key.path)}}throw a.pu(`Unsupported field value: ${Pg(s)}`)}(r,e)}function Bo(r,e){const t={};return Tc(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xu(r,(s,a)=>{const c=os(a,e.Ru(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function jo(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Yn||r instanceof kg||r instanceof Ca||r instanceof hr||r instanceof Qc)}function Bg(r,e,t){if(!jo(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const s=Pg(t);throw e.pu("an object"===s?r+" a custom object":r+" "+s)}var a}function uh(r,e,t){if((e=(0,cn.m9)(e))instanceof Gu)return e._internalPath;if("string"==typeof e)return jg(r,e);throw $g("Field path arguments must be of type string or ",r,!1,void 0,t)}const tT=new RegExp("[~\\*/\\[\\]]");function jg(r,e,t){if(e.search(tT)>=0)throw $g(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Gu(...e.split("."))._internalPath}catch{throw $g(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function $g(r,e,t,s,a){const c=s&&!s.isEmpty(),h=void 0!==a;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let S="";return(c||h)&&(S+=" (found",c&&(S+=` in field ${s}`),h&&(S+=` in document ${a}`),S+=")"),new ke(_e.INVALID_ARGUMENT,v+r+S)}function KE(r,e){return r.some(t=>t.isEqual(e))}class Ql{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Rf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Rf extends Ql{data(){return super.data()}}function Hg(r,e){return"string"==typeof e?jg(r,e):e instanceof Gu?e._internalPath:e._delegate._internalPath}function sy(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new ke(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class Pf extends oy{}function Wu(r,e,...t){let s=[];e instanceof oy&&s.push(e),s=s.concat(t),function(c){const h=c.filter(S=>S instanceof lh).length,v=c.filter(S=>S instanceof ch).length;if(h>1||h>0&&v>0)throw new ke(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class ch extends Pf{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new ch(e,t,s)}_apply(e){const t=this._parse(e);return tI(e._query,t),new Pi(e.firestore,e.converter,bi(e._query,t))}_parse(e){const t=Kl(e.firestore);return function(c,h,v,S,P,k,W){let X;if(P.isKeyField()){if("array-contains"===k||"array-contains-any"===k)throw new ke(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${k}' queries on documentId().`);if("in"===k||"not-in"===k){eI(W,k);const ce=[];for(const xe of W)ce.push(cy(S,c,xe));X={arrayValue:{values:ce}}}else X=cy(S,c,W)}else"in"!==k&&"not-in"!==k&&"array-contains-any"!==k||eI(W,k),X=iy(v,"where",W,"in"===k||"not-in"===k);return fn.create(P,k,X)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class lh extends oy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lh(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:pn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,c){let h=a;const v=c.getFlattenedFilters();for(const S of v)tI(h,S),h=bi(h,S)}(e._query,t),new Pi(e.firestore,e.converter,bi(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Gg extends Pf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gg(e,t)}_apply(e){const t=function(a,c,h){if(null!==a.startAt)throw new ke(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new ke(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eo(c,h)}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(a,c){const h=a.explicitOrderBy.concat([c]);return new L(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class Wg extends Pf{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Wg(e,t,s)}_apply(e){return new Pi(e.firestore,e.converter,to(e._query,this._limit,this._limitType))}}class Mf extends Pf{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Mf(e,t,s)}_apply(e){const t=uy(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(c=t,new L((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)));var a,c}}class xf extends Pf{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new xf(e,t,s)}_apply(e){const t=uy(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(c=t,new L((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)));var a,c}}function uy(r,e,t,s){if(t[0]=(0,cn.m9)(t[0]),t[0]instanceof Ql)return function(c,h,v,S,P){if(!S)throw new ke(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const k=[];for(const W of _t(c))if(W.field.isKeyField())k.push(_a(h,S.key));else{const X=S.data.field(W.field);if(Nu(X))throw new ke(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+W.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===X){const ce=W.field.canonicalString();throw new ke(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ce}' (used as the orderBy) does not exist.`)}k.push(X)}return new Xs(k,P)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=Kl(r.firestore);return function(h,v,S,P,k,W){const X=h.explicitOrderBy;if(k.length>X.length)throw new ke(_e.INVALID_ARGUMENT,`Too many arguments provided to ${P}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ce=[];for(let xe=0;xe<k.length;xe++){const Qe=k[xe];if(X[xe].field.isKeyField()){if("string"!=typeof Qe)throw new ke(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${P}(), but got a ${typeof Qe}`);if(!ot(h)&&-1!==Qe.indexOf("/"))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${P}() must be a plain document ID, but '${Qe}' contains a slash.`);const We=h.path.child(yn.fromString(Qe));if(!ct.isDocumentKey(We))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${P}() must result in a valid document path, but '${We}' is not because it contains an odd number of segments.`);const It=new ct(We);ce.push(_a(v,It))}else{const We=iy(S,P,Qe);ce.push(We)}}return new Xs(ce,W)}(r._query,r.firestore._databaseId,a,e,t,s)}}function cy(r,e,t){if("string"==typeof(t=(0,cn.m9)(t))){if(""===t)throw new ke(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ot(e)&&-1!==t.indexOf("/"))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(yn.fromString(t));if(!ct.isDocumentKey(s))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return _a(r,new ct(s))}if(t instanceof hr)return _a(r,t._key);throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pg(t)}.`)}function eI(r,e){if(!Array.isArray(r)||0===r.length)throw new ke(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tI(r,e){const t=function(a,c){for(const h of a)for(const v of h.getFlattenedFilters())if(c.indexOf(v.op)>=0)return v.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ke(_e.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ly{convertValue(e,t="none"){switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return xu(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertGeoPoint(e){return new kg(nr(e.latitude),nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ma(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(No(e));default:return null}}convertTimestamp(e){const t=es(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=yn.fromString(e);yt(Rp(s));const a=new Ga(s.get(1),s.get(3)),c=new ct(s.popFirst(5));return a.isEqual(t)||Dr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Zg(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class sT extends ly{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}class Yl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qu extends Ql{constructor(e,t,s,a,c,h){super(e,t,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Hg("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Nf extends qu{data(e={}){return super.data(e)}}class Yc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Yl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Nf(this._firestore,this._userDataWriter,s.key,s,new Yl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(v=>({type:"added",doc:new Nf(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Yl(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:h++}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(v=>c||3!==v.type).map(v=>{const S=new Nf(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Yl(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);let P=-1,k=-1;return 0!==v.type&&(P=h.indexOf(v.doc.key),h=h.delete(v.doc.key)),1!==v.type&&(h=h.add(v.doc),k=h.indexOf(v.doc.key)),{type:aT(v.type),doc:S,oldIndex:P,newIndex:k}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function aT(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function rI(r,e){return r instanceof qu&&e instanceof qu?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Yc&&e instanceof Yc&&r._firestore===e._firestore&&xg(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class Zu extends ly{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}function dy(r,e,t){r=gn(r,hr);const s=gn(r.firestore,ir),a=Zg(r.converter,e,t);return dh(s,[Fg(Kl(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,xr.none())])}function hy(r,e,t,...s){r=gn(r,hr);const a=gn(r.firestore,ir),c=Kl(a);let h;return h="string"==typeof(e=(0,cn.m9)(e))||e instanceof Gu?ry(c,"updateDoc",r._key,e,t,s):Uo(c,"updateDoc",r._key,e),dh(a,[h.toMutation(r._key,xr.exists(!0))])}function fy(r,...e){var t,s,a;r=(0,cn.m9)(r);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||Ng(e[h])||(c=e[h],h++);const v={includeMetadataChanges:c.includeMetadataChanges};if(Ng(e[h])){const W=e[h];e[h]=null===(t=W.next)||void 0===t?void 0:t.bind(W),e[h+1]=null===(s=W.error)||void 0===s?void 0:s.bind(W),e[h+2]=null===(a=W.complete)||void 0===a?void 0:a.bind(W)}let S,P,k;if(r instanceof hr)P=gn(r.firestore,ir),k=ae(r._key.path),S={next:W=>{e[h]&&e[h](py(P,r,W))},error:e[h+1],complete:e[h+2]};else{const W=gn(r,Pi);P=gn(W.firestore,ir),k=W._query;const X=new Zu(P);S={next:ce=>{e[h]&&e[h](new Yc(P,X,W,ce))},error:e[h+1],complete:e[h+2]},sy(r._query)}return function(X,ce,xe,Qe){const We=new Zc(Qe),It=new pg(ce,We,xe);return X.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return N_(yield ih(X),It)})),()=>{We.La(),X.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return k_(yield ih(X),It)}))}}(Or(P),k,v,S)}function dh(r,e){return function(s,a){const c=new Pr;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function mg(r,e,t){return V_.apply(this,arguments)}(yield Cg(s),a,c)})),c.promise}(Or(r),e)}function py(r,e,t){const s=t.docs.get(e._key),a=new Zu(r);return new qu(r,a,e._key,s,new Yl(t.hasPendingWrites,t.fromCache),e.converter)}const Kg={maxAttempts:5};class Ts{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kl(e)}set(e,t,s){this._verifyNotCommitted();const a=Xl(e,this._firestore),c=Zg(a.converter,t,s),h=Fg(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(h.toMutation(a._key,xr.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=Xl(e,this._firestore);let h;return h="string"==typeof(t=(0,cn.m9)(t))||t instanceof Gu?ry(this._dataReader,"WriteBatch.update",c._key,t,s,a):Uo(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xl(e,this._firestore);return this._mutations=this._mutations.concat(new Ml(t._key,xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xl(r,e){if((r=(0,cn.m9)(r)).firestore!==e)throw new ke(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class fI extends class{constructor(t,s){this._firestore=t,this._transaction=s,this._dataReader=Kl(t)}get(t){const s=Xl(t,this._firestore),a=new sT(this._firestore);return this._transaction.lookup([s._key]).then(c=>{if(!c||1!==c.length)return mt();const h=c[0];if(h.isFoundDocument())return new Ql(this._firestore,a,h.key,h,s.converter);if(h.isNoDocument())return new Ql(this._firestore,a,s._key,null,s.converter);throw mt()})}set(t,s,a){const c=Xl(t,this._firestore),h=Zg(c.converter,s,a),v=Fg(this._dataReader,"Transaction.set",c._key,h,null!==c.converter,a);return this._transaction.set(c._key,v),this}update(t,s,a,...c){const h=Xl(t,this._firestore);let v;return v="string"==typeof(s=(0,cn.m9)(s))||s instanceof Gu?ry(this._dataReader,"Transaction.update",h._key,s,a,c):Uo(this._dataReader,"Transaction.update",h._key,s),this._transaction.update(h._key,v),this}delete(t){const s=Xl(t,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xl(e,this._firestore),s=new Zu(this._firestore);return super.get(e).then(a=>new qu(this._firestore,s,t._key,a._document,new Yl(!1,!1),t.converter))}}function Iy(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function EI(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function wy(){if(!function gp(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){la=ge.SDK_VERSION,(0,ge._registerComponent)(new ki.wA("firestore",(s,{instanceIdentifier:a,options:c})=>{const h=s.getProvider("app").getImmediate(),v=new ir(new fd(s.getProvider("auth-internal")),new gc(s.getProvider("app-check-internal")),function(P,k){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new ke(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(P.options.projectId,k)}(h,a),h);return c=Object.assign({useFetchStreams:t},c),v._setSettings(c),v},"PUBLIC").setMultipleInstances(!0)),(0,ge.registerVersion)(fc,"4.4.1",e),(0,ge.registerVersion)(fc,"4.4.1","esm2017")}();class fh{constructor(e){this._delegate=e}static fromBase64String(e){return wy(),new fh(Ca.fromBase64String(e))}static fromUint8Array(e){return EI(),new fh(Ca.fromUint8Array(e))}toBase64(){return wy(),this._delegate.toBase64()}toUint8Array(){return EI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qg(r){return function pT(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class II{enableIndexedDbPersistence(e,t){return function Og(r,e){Jw(r=gn(r,ir));const t=Or(r);if(t._uninitializedComponentsProvider)throw new ke(_e.FAILED_PRECONDITION,"SDK cache is already specified.");hi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new ql;return zE(t,a,new Tg(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Kc(r){Jw(r=gn(r,ir));const e=Or(r);if(e._uninitializedComponentsProvider)throw new ke(_e.FAILED_PRECONDITION,"SDK cache is already specified.");hi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new ql;return zE(e,s,new Xd(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Yw(r){if(r._initialized&&!r._terminated)throw new ke(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pr;return r._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(a){if(!Xi.D())return Promise.resolve();const c=a+"main";yield Xi.delete(c)}),function s(a){return t.apply(this,arguments)})(d_(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class wI{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ga||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&hi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function BE(r,e,t,s={}){var a;const c=(r=gn(r,sh))._getSettings(),h=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==h&&hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},c),{host:h,ssl:!1})),s.mockUserToken){let v,S;if("string"==typeof s.mockUserToken)v=s.mockUserToken,S=$r.MOCK_USER;else{v=(0,cn.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const P=s.mockUserToken.sub||s.mockUserToken.user_id;if(!P)throw new ke(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new $r(P)}r._authCredentials=new bh(new Ai(v,S))}}(this._delegate,e,t,s)}enableNetwork(){return function Zl(r){return function $w(r){return r.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield kE(r),t=yield FE(r);return e.setNetworkEnabled(!0),function(a){const c=st(a);return c.v_.delete(0),$l(c)}(t)}))}(Or(r=gn(r,ir)))}(this._delegate)}disableNetwork(){return function ey(r){return function Hw(r){return r.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield kE(r),t=yield FE(r);return e.setNetworkEnabled(!1),(s=(0,Ee.Z)(function*(c){const h=st(c);h.v_.add(0),yield qd(h),h.x_.set("Offline")}),function a(c){return s.apply(this,arguments)})(t);var s}))}(Or(r=gn(r,ir)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Z_("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function X_(r){return function(t){const s=new Pr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function U_(r,e){return Hc.apply(this,arguments)}(yield Cg(t),s)})),s.promise}(Or(r=gn(r,ir)))}(this._delegate)}onSnapshotsInSync(e){return function Jl(r,e){return function bg(r,e){const t=new Zc(e);return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return a=yield ih(r),c=t,st(a).K_.add(c),void c.next();var a,c})),()=>{t.La(),r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return a=yield ih(r),c=t,void st(a).K_.delete(c);var a,c}))}}(Or(r=gn(r,ir)),Ng(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mh(this,jE(this._delegate,e))}catch(t){throw xi(t,"collection()","Firestore.collection()")}}doc(e){try{return new so(this,Cf(this._delegate,e))}catch(t){throw xi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ds(this,function Zw(r,e){if(r=gn(r,sh),Rg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(r,null,(s=e,new L(yn.emptyPath(),s)));var s}(this._delegate,e))}catch(t){throw xi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pI(r,e,t){r=gn(r,ir);const s=Object.assign(Object.assign({},Kg),t);return function(c){if(c.maxAttempts<1)throw new ke(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,h,v){const S=new Pr;return c.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const P=yield function z_(r){return Dg(r).then(e=>e.datastore)}(c);new Bw(c.asyncQueue,P,v,h,S).ja()})),S.promise}(Or(r),a=>e(new fI(r,a)),s)}(this._delegate,t=>e(new gT(this,t)))}batch(){return Or(this._delegate),new mT(new Ts(this._delegate,e=>dh(this._delegate,e)))}loadBundle(e){return function ty(r,e){const t=Or(r=gn(r,ir)),s=new $E;return function q_(r,e,t,s){const a=function(h,v){let S;return S="string"==typeof h?Tv().encode(h):h,k=function(k,W){if(k instanceof Uint8Array)return xE(k,W);if(k instanceof ArrayBuffer)return xE(new Uint8Array(k),W);if(k instanceof ReadableStream)return k.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new Vw(k,v);var k}(t,ff(e));r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function If(r,e,t){const s=st(r);var a;(a=(0,Ee.Z)(function*(h,v,S){try{const P=yield v.getMetadata();if(yield function(xe,Qe){const We=st(xe),It=Nr(Qe.createTime);return We.persistence.runTransaction("hasNewerBundle","readonly",Nt=>We.$r.getBundleMetadata(Nt,Qe.id)).then(Nt=>!!Nt&&Nt.createTime.compareTo(It)>=0)}(h.localStore,P))return yield v.close(),S._completeWith({taskState:"Success",documentsLoaded:(xe=P).totalDocuments,bytesLoaded:xe.totalBytes,totalDocuments:xe.totalDocuments,totalBytes:xe.totalBytes}),Promise.resolve(new Set);S._updateProgress(fE(P));const k=new Mw(P,h.localStore,v.serializer);let W=yield v.Oa();for(;W;){const ce=yield k.na(W);ce&&S._updateProgress(ce),W=yield v.Oa()}const X=yield k.complete();return yield Bs(h,X.sa,void 0),yield function(xe,Qe){const We=st(xe);return We.persistence.runTransaction("Save bundle","readwrite",It=>We.$r.saveBundleMetadata(It,Qe))}(h.localStore,P),S._completeWith(X.progress),Promise.resolve(X.ia)}catch(P){return hi("SyncEngine",`Loading bundle failed with ${P}`),S._failWith(P),Promise.resolve(new Set)}var xe}),function c(h,v,S){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Cg(r),a,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function iA(r,e){return function LE(r,e){return r.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(s,a){const c=st(s);return c.persistence.runTransaction("Get named query","readonly",h=>c.$r.getNamedQuery(h,a))}(yield rh(r),e)}))}(Or(r=gn(r,ir)),e).then(t=>t?new Pi(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Ds(this,t):null)}}class Yg extends ly{constructor(e){super(),this.firestore=e}convertBytes(e){return new fh(new Ca(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return so.forKey(t,this.firestore,null)}}class gT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Yg(e)}get(e){const t=_h(e);return this._delegate.get(t).then(s=>new gh(this._firestore,new qu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=_h(e);return s?(Iy("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const c=_h(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,s,...a),this}delete(e){const t=_h(e);return this._delegate.delete(t),this}}class mT{constructor(e){this._delegate=e}set(e,t,s){const a=_h(e);return s?(Iy("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const c=_h(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,s,...a),this}delete(e){const t=_h(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ph{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Nf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ku(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=ph.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let c=a.get(t);return c||(c=new ph(e,new Yg(e),t),a.set(t,c)),c}}ph.INSTANCES=new WeakMap;class so{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yg(e)}static forPath(e,t,s){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new so(t,new hr(t._delegate,s,new ct(e)))}static forKey(e,t,s){return new so(t,new hr(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new mh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mh(this.firestore,jE(this._delegate,e))}catch(t){throw xi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,cn.m9)(e))instanceof hr&&Q_(this._delegate,e)}set(e,t){t=Iy("DocumentReference.set",t);try{return t?dy(this._delegate,e,t):dy(this._delegate,e)}catch(s){throw xi(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?hy(this._delegate,e):hy(this._delegate,e,t,...s)}catch(a){throw xi(a,"updateDoc()","DocumentReference.update()")}}delete(){return function cI(r){return dh(gn(r.firestore,ir),[new Ml(r._key,xr.none())])}(this._delegate)}onSnapshot(...e){const t=TI(e),s=DI(e,a=>new gh(this.firestore,new qu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return fy(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function iI(r){r=gn(r,hr);const e=gn(r.firestore,ir),t=Or(e),s=new Zu(e);return function W_(r,e){const t=new Pr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(s=(0,Ee.Z)(function*(c,h,v){try{const S=yield function(k,W){const X=st(k);return X.persistence.runTransaction("read document","readonly",ce=>X.localDocuments.getDocument(ce,W))}(c,h);S.isFoundDocument()?v.resolve(S):S.isNoDocument()?v.resolve(null):v.reject(new ke(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const P=Hl(S,`Failed to get document '${h} from cache`);v.reject(P)}}),function a(c,h,v){return s.apply(this,arguments)})(yield rh(r),e,t);var s})),t.promise}(t,r._key).then(a=>new qu(e,s,r._key,a,new Yl(null!==a&&a.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===e?.source?function sI(r){r=gn(r,hr);const e=gn(r.firestore,ir);return Sg(Or(e),r._key,{source:"server"}).then(t=>py(e,r,t))}(this._delegate):function uT(r){r=gn(r,hr);const e=gn(r.firestore,ir);return Sg(Or(e),r._key).then(t=>py(e,r,t))}(this._delegate),t.then(s=>new gh(this.firestore,new qu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new so(this.firestore,this._delegate.withConverter(e?ph.getInstance(this.firestore,e):null))}}function xi(r,e,t){return r.message=r.message.replace(e,t),r}function TI(r){for(const e of r)if("object"==typeof e&&!Qg(e))return e;return{}}function DI(r,e){var t,s;let a;return a=Qg(r[0])?r[0]:Qg(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class gh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new so(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return rI(this._delegate,e._delegate)}}class Ku extends gh{data(e){const t=this._delegate.data(e);return this._delegate._converter||function vm(r,e){r||mt()}(void 0!==t),t}}class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yg(e)}where(e,t,s){try{return new Ds(this.firestore,Wu(this._delegate,function zg(r,e,t){const s=e,a=Hg("where",r);return ch._create(a,s,t)}(e,t,s)))}catch(a){throw xi(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ds(this.firestore,Wu(this._delegate,function iT(r,e="asc"){const t=e,s=Hg("orderBy",r);return Gg._create(s,t)}(e,t)))}catch(s){throw xi(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ds(this.firestore,Wu(this._delegate,function ay(r){return K_("limit",r),Wg._create("limit",r,"F")}(e)))}catch(t){throw xi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ds(this.firestore,Wu(this._delegate,function qg(r){return K_("limitToLast",r),Wg._create("limitToLast",r,"L")}(e)))}catch(t){throw xi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ds(this.firestore,Wu(this._delegate,function QE(...r){return Mf._create("startAt",r,!0)}(...e)))}catch(t){throw xi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ds(this.firestore,Wu(this._delegate,function YE(...r){return Mf._create("startAfter",r,!1)}(...e)))}catch(t){throw xi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ds(this.firestore,Wu(this._delegate,function JE(...r){return xf._create("endBefore",r,!1)}(...e)))}catch(t){throw xi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ds(this.firestore,Wu(this._delegate,function XE(...r){return xf._create("endAt",r,!0)}(...e)))}catch(t){throw xi(t,"endAt()","Query.endAt()")}}isEqual(e){return xg(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function aI(r){r=gn(r,Pi);const e=gn(r.firestore,ir),t=Or(e),s=new Zu(e);return function zw(r,e){const t=new Pr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(s=(0,Ee.Z)(function*(c,h,v){try{const S=yield df(c,h,!0),P=new mE(h,S.hs),k=P.ha(S.documents),W=P.applyChanges(k,!1);v.resolve(W.snapshot)}catch(S){const P=Hl(S,`Failed to execute query '${h} against cache`);v.reject(P)}}),function a(c,h,v){return s.apply(this,arguments)})(yield rh(r),e,t);var s})),t.promise}(t,r._query).then(a=>new Yc(e,s,r,a))}(this._delegate):"server"===e?.source?function uI(r){r=gn(r,Pi);const e=gn(r.firestore,ir),t=Or(e),s=new Zu(e);return Tf(t,r._query,{source:"server"}).then(a=>new Yc(e,s,r,a))}(this._delegate):function oI(r){r=gn(r,Pi);const e=gn(r.firestore,ir),t=Or(e),s=new Zu(e);return sy(r._query),Tf(t,r._query).then(a=>new Yc(e,s,r,a))}(this._delegate),t.then(s=>new Ty(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=TI(e),s=DI(e,a=>new Ty(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return fy(this._delegate,t,s)}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?ph.getInstance(this.firestore,e):null))}}class _T{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ku(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ty{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ku(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _T(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Ku(this._firestore,s))})}isEqual(e){return rI(this._delegate,e._delegate)}}class mh extends Ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new so(this.firestore,e):null}doc(e){try{return new so(this.firestore,void 0===e?Cf(this._delegate):Cf(this._delegate,e))}catch(t){throw xi(t,"doc()","CollectionReference.doc()")}}add(e){return function lI(r,e){const t=gn(r.firestore,ir),s=Cf(r),a=Zg(r.converter,e);return dh(t,[Fg(Kl(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,xr.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new so(this.firestore,t))}isEqual(e){return Q_(this._delegate,e._delegate)}withConverter(e){return new mh(this.firestore,this._delegate.withConverter(e?ph.getInstance(this.firestore,e):null))}}function _h(r){return gn(r,hr)}class Dy{constructor(...e){this._delegate=new Gu(...e)}static documentId(){return new Dy(dr.keyField().canonicalString())}isEqual(e){return(e=(0,cn.m9)(e))instanceof Gu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gI(){return new Lg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xc(e)}static delete(){const e=function dT(){return new ah("deleteField")}();return e._methodName="FieldValue.delete",new Xc(e)}static arrayUnion(...e){const t=function mI(...r){return new ZE("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Xc(t)}static arrayRemove(...e){const t=function _I(...r){return new Vg("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Xc(t)}static increment(e){const t=function yI(r){return new Ug("increment",r)}(e);return t._methodName="FieldValue.increment",new Xc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const yT={Firestore:wI,GeoPoint:kg,Timestamp:Yn,Blob:fh,Transaction:gT,WriteBatch:mT,DocumentReference:so,DocumentSnapshot:gh,Query:Ds,QueryDocumentSnapshot:Ku,QuerySnapshot:Ty,CollectionReference:mh,FieldPath:Dy,FieldValue:Xc,setLogLevel:function yA(r){!function ip(r){Po.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};function Ay(r,e){return function ET(r,e=me){return new mr.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(r,e)}function Jg(r,e){return Ay(r,e).pipe((0,U.U)(t=>({payload:t,type:"query"})))}!function Vf(r){(function vT(r,e){r.INTERNAL.registerComponent(new ki.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},yT)))})(r,(e,t)=>new wI(e,t,new II)),r.registerVersion("@firebase/firestore-compat","0.3.24")}(kt.Z);class AI{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:c}=PI(s,t);return new bI(a,c,this.afs)}snapshotChanges(){return function IT(r,e){return Ay(r,e).pipe((0,ut.O)(void 0),Kt(),(0,U.U)(t=>{const[s,a]=t;return a.exists?s?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Vn)}valueChanges(e={}){return this.snapshotChanges().pipe((0,U.U)(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return(0,qr.D)(this.ref.get(e)).pipe(Vn)}}function Uf(r,e){return Jg(r,e).pipe((0,ut.O)(void 0),Kt(),(0,U.U)(t=>{const[s,a]=t,c=a.payload.docChanges(),h=c.map(v=>({type:v.type,payload:v}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((v,S)=>{const P=c.find(W=>W.doc.ref.isEqual(v.ref)),k=s?.payload.docs.find(W=>W.ref.isEqual(v.ref));P&&JSON.stringify(P.doc.metadata)===JSON.stringify(v.metadata)||!P&&k&&JSON.stringify(k.metadata)===JSON.stringify(v.metadata)||h.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:v}})}),h}))}function CI(r,e,t){return Uf(r,t).pipe((0,Pn.R)((s,a)=>function Cy(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function SI(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sy(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sy(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sy(r,e.oldIndex,1)}return r}(r,s))}),r}(s,a.map(c=>c.payload),e),[]),(0,Un.x)(),(0,U.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Sy(r,e,t,...s){const a=r.slice();return a.splice(e,t,...s),a}function by(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class bI{ref;query;afs;constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Uf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,U.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,ut.O)(void 0),Kt(),(0,jt.h)(([s,a])=>a.length>0||!s),(0,U.U)(([,s])=>s),Vn)}auditTrail(e){return this.stateChanges(e).pipe((0,Pn.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=by(e);return CI(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn)}valueChanges(e={}){return Jg(this.query,this.afs.schedulers.outsideAngular).pipe((0,U.U)(t=>t.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),Vn)}get(e){return(0,qr.D)(this.query.get(e)).pipe(Vn)}add(e){return this.ref.add(e)}doc(e){return new AI(this.ref.doc(e),this.afs)}}class wT{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Uf(this.query,this.afs.schedulers.outsideAngular).pipe((0,U.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,jt.h)(t=>t.length>0),Vn):Uf(this.query,this.afs.schedulers.outsideAngular).pipe(Vn)}auditTrail(e){return this.stateChanges(e).pipe((0,Pn.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=by(e);return CI(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn)}valueChanges(e={}){return Jg(this.query,this.afs.schedulers.outsideAngular).pipe((0,U.U)(s=>s.payload.docs.map(a=>e.idField?{[e.idField]:a.id,...a.data()}:a.data())),Vn)}get(e){return(0,qr.D)(this.query.get(e)).pipe(Vn)}}const TT=new b.OlP("angularfire2.enableFirestorePersistence"),Ry=new b.OlP("angularfire2.firestore.persistenceSettings"),DT=new b.OlP("angularfire2.firestore.settings"),RI=new b.OlP("angularfire2.firestore.use-emulator");function PI(r,e=(t=>t)){return{query:e(r),ref:r}}let AT=(()=>{class r{schedulers;firestore;persistenceEnabled$;constructor(t,s,a,c,h,v,S,P,k,W,X,ce,xe,Qe,We,It,Nt){this.schedulers=S;const lt=ai(t,v,s),Vt=k;W&&ve(lt,v,X,xe,Qe,We,ce,It),[this.firestore,this.persistenceEnabled$]=zi(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const nn=v.runOutsideAngular(()=>lt.firestore());if(c&&nn.settings(c),Vt&&nn.useEmulator(...Vt),a&&!(0,rn.PM)(h)){const Ln=()=>{try{return(0,qr.D)(nn.enablePersistence(P||void 0).then(()=>!0,()=>!1))}catch(kr){return typeof console<"u"&&console.warn(kr),(0,gr.of)(!1)}};return[nn,v.runOutsideAngular(Ln)]}return[nn,(0,gr.of)(!1)]},[c,Vt,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=PI(a,s),v=this.schedulers.ngZone.run(()=>c);return new bI(v,h,this)}collectionGroup(t,s){const a=s||(h=>h),c=this.firestore.collectionGroup(t);return new wT(a(c),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new AI(a,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||r)(b.LFG(us),b.LFG(sn,8),b.LFG(TT,8),b.LFG(DT,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(On),b.LFG(Ry,8),b.LFG(RI,8),b.LFG(de,8),b.LFG(qt,8),b.LFG(Ft,8),b.LFG(An,8),b.LFG(vi,8),b.LFG(Oi,8),b.LFG(Ho,8),b.LFG(wt,8))};static \u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"})}return r})();const CT=[[["","header",""]],"*",[["","footer",""]]],ST=["[header]","*","[footer]"];let bT=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-portal-layout"]],ngContentSelectors:ST,decls:7,vars:0,consts:[[1,"portal-layout"],[1,"portal-layout__head"],[1,"portal-layout__body"],[1,"portal-layout__footer"]],template:function(s,a){1&s&&(b.F$t(CT),b.TgZ(0,"div",0)(1,"div",1),b.Hsn(2),b.qZA(),b.TgZ(3,"main",2),b.Hsn(4,1),b.qZA(),b.TgZ(5,"footer",3),b.Hsn(6,2),b.qZA()())}})}return r})(),RT=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-header"]],decls:2,vars:0,template:function(s,a){1&s&&(b.TgZ(0,"p"),b._uU(1,"header works!"),b.qZA())}})}return r})(),PT=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-footer"]],decls:2,vars:0,template:function(s,a){1&s&&(b.TgZ(0,"p"),b._uU(1,"footer works! \u6e2c\u8a66\u90e8\u7f72\u8cc7\u8a0a"),b.qZA())}})}return r})(),MI=(()=>{class r{constructor(t){this.title="open-lib"}static#e=this.\u0275fac=function(s){return new(s||r)(b.Y36(AT))};static#t=this.\u0275cmp=b.Xpm({type:r,selectors:[["app-root"]],decls:7,vars:0,consts:[["header",""],["footer",""]],template:function(s,a){1&s&&(b.TgZ(0,"app-portal-layout"),b.ynx(1,0),b._UZ(2,"app-header"),b.BQk(),b.ynx(3),b._UZ(4,"router-outlet"),b.BQk(),b.ynx(5,1),b._UZ(6,"app-footer"),b.BQk(),b.qZA())},dependencies:[te.lC,bT,RT,PT]})}return r})();var Xg=V(5619),em=V(4829),MT=V(2737),Py=V(2420),xT=V(4564);class xy extends Error{constructor(e,t){super(function LT(r,e){return`NG0${Math.abs(r)}${e?": "+e:""}`}(e,t)),this.code=e}}function Uy(r,e){const t=!e?.manualCleanup;t&&!e?.injector&&(0,b.gHi)(Uy);const s=t?e?.injector?.get(b.ktI)??(0,b.f3M)(b.ktI):null;let a;a=(0,b.tdS)(e?.requireSync?{kind:0}:{kind:1,value:e?.initialValue});const c=r.subscribe({next:h=>a.set({kind:1,value:h}),error:h=>a.set({kind:2,error:h})});return s?.onDestroy(c.unsubscribe.bind(c)),(0,b.Flj)(()=>{const h=a();switch(h.kind){case 1:return h.value;case 2:throw h.error;case 0:throw new xy(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}globalThis;const jf={};function By(r,e){return Object.defineProperty(e,"type",{value:r,writable:!1})}const $y="@ngrx/store/init";let tl=(()=>{class r extends Xg.X{constructor(){super({type:$y})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac})}return r})();const HI=[tl],Hy=new b.OlP("@ngrx/store Internal Root Guard"),zI=new b.OlP("@ngrx/store Internal Initial State"),GI=new b.OlP("@ngrx/store Initial State"),zT=new b.OlP("@ngrx/store Reducer Factory"),WI=new b.OlP("@ngrx/store Internal Reducer Factory Provider"),qI=new b.OlP("@ngrx/store Initial Reducers"),zy=new b.OlP("@ngrx/store Internal Initial Reducers"),ZI=new b.OlP("@ngrx/store Store Features"),KI=new b.OlP("@ngrx/store Internal Store Reducers"),td=new b.OlP("@ngrx/store Internal Feature Reducers"),QI=new b.OlP("@ngrx/store Internal Feature Configs"),$f=new b.OlP("@ngrx/store Internal Store Features"),ba=new b.OlP("@ngrx/store Internal Feature Reducers Token"),Gy=new b.OlP("@ngrx/store Feature Reducers"),sm=new b.OlP("@ngrx/store User Provided Meta Reducers"),om=new b.OlP("@ngrx/store Meta Reducers"),GT=new b.OlP("@ngrx/store Internal Resolved Meta Reducers"),YI=new b.OlP("@ngrx/store User Runtime Checks Config"),WT=new b.OlP("@ngrx/store Internal User Runtime Checks Config"),Qu=new b.OlP("@ngrx/store Internal Runtime Checks"),Hf=new b.OlP("@ngrx/store Check if Action types are unique");function yh(r,e={}){const t=Object.keys(r),s={};for(let c=0;c<t.length;c++){const h=t[c];"function"==typeof r[h]&&(s[h]=r[h])}const a=Object.keys(s);return function(h,v){h=void 0===h?e:h;let S=!1;const P={};for(let k=0;k<a.length;k++){const W=a[k],ce=h[W],xe=(0,s[W])(ce,v);P[W]=xe,S=S||xe!==ce}return S?P:h}}function e0(...r){return function(e){if(0===r.length)return e;const t=r[r.length-1];return r.slice(0,-1).reduceRight((a,c)=>c(a),t(e))}}function qy(r,e){return Array.isArray(e)&&e.length>0&&(r=e0.apply(null,[...e,r])),(t,s)=>{const a=r(t);return(c,h)=>a(c=void 0===c?s:c,h)}}new b.OlP("@ngrx/store Root Store Provider"),new b.OlP("@ngrx/store Feature State Provider");class um extends mr.y{}class t0 extends tl{}let zf=(()=>{class r extends Xg.X{get currentReducers(){return this.reducers}constructor(t,s,a,c){super(c(a,s)),this.dispatcher=t,this.initialState=s,this.reducers=a,this.reducerFactory=c}addFeature(t){this.addFeatures([t])}addFeatures(t){const s=t.reduce((a,{reducers:c,reducerFactory:h,metaReducers:v,initialState:S,key:P})=>{const k="function"==typeof c?function am(r){const e=Array.isArray(r)&&r.length>0?e0(...r):t=>t;return(t,s)=>(t=e(t),(a,c)=>t(a=void 0===a?s:a,c))}(v)(c,S):qy(h,v)(c,S);return a[P]=k,a},{});this.addReducers(s)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(s=>s.key))}addReducer(t,s){this.addReducers({[t]:s})}addReducers(t){this.reducers={...this.reducers,...t},this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(s=>{this.reducers=function XI(r,e){return Object.keys(r).filter(t=>t!==e).reduce((t,s)=>Object.assign(t,{[s]:r[s]}),{})}(this.reducers,s)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(s){return new(s||r)(b.LFG(t0),b.LFG(GI),b.LFG(qI),b.LFG(zT))};static#t=this.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac})}return r})();const qT=[zf,{provide:um,useExisting:zf},{provide:t0,useExisting:tl}];let Gf=(()=>{class r extends pr.x{ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(){let t;return function(a){return(t||(t=b.n5z(r)))(a||r)}}();static#t=this.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac})}return r})();const cm=[Gf];class r0 extends mr.y{}let s0=(()=>{class r extends Xg.X{static#e=this.INIT=$y;constructor(t,s,a,c){super(c);const v=t.pipe((0,Ae.Q)(Ni)).pipe(function NT(...r){const e=(0,xT.jO)(r);return(0,Xe.e)((t,s)=>{const a=r.length,c=new Array(a);let h=r.map(()=>!1),v=!1;for(let S=0;S<a;S++)(0,em.Xf)(r[S]).subscribe((0,Lt.x)(s,P=>{c[S]=P,!v&&!h[S]&&(h[S]=!0,(v=h.every(MT.y))&&(h=null))},Py.Z));t.subscribe((0,Lt.x)(s,S=>{if(v){const P=[S,...c];s.next(e?e(...P):P)}}))})}(s)),P=v.pipe((0,Pn.R)(o0,{state:c}));this.stateSubscription=P.subscribe(({state:k,action:W})=>{this.next(k),a.next(W)}),this.state=Uy(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static#t=this.\u0275fac=function(s){return new(s||r)(b.LFG(tl),b.LFG(um),b.LFG(Gf),b.LFG(GI))};static#n=this.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac})}return r})();function o0(r={state:void 0},[e,t]){const{state:s}=r;return{state:t(s,e),action:e}}const a0=[s0,{provide:r0,useExisting:s0}];let nl=(()=>{class r extends mr.y{constructor(t,s,a){super(),this.actionsObserver=s,this.reducerManager=a,this.source=t,this.state=t.state}select(t,...s){return ZT.call(null,t,...s)(this)}selectSignal(t,s){return(0,b.Flj)(()=>t(this.state()),{equal:s?.equal||((a,c)=>a===c)})}lift(t){const s=new r(this,this.actionsObserver,this.reducerManager);return s.operator=t,s}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,s){this.reducerManager.addReducer(t,s)}removeReducer(t){this.reducerManager.removeReducer(t)}static#e=this.\u0275fac=function(s){return new(s||r)(b.LFG(r0),b.LFG(tl),b.LFG(zf))};static#t=this.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac})}return r})();const u0=[nl];function ZT(r,e,...t){return function(a){let c;if("string"==typeof r){const h=[e,...t].filter(Boolean);c=a.pipe(function OT(...r){const e=r.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,U.U)(t=>{let s=t;for(let a=0;a<e;a++){const c=s?.[r[a]];if(!(typeof c<"u"))return;s=c}return s})}(r,...h))}else{if("function"!=typeof r)throw new TypeError(`Unexpected type '${typeof r}' in select operator, expected 'string' or 'function'`);c=a.pipe((0,U.U)(h=>r(h,e)))}return c.pipe((0,Un.x)())}}const lm="https://ngrx.io/guide/store/configuration/runtime-checks";function Zy(r){return void 0===r}function c0(r){return null===r}function l0(r){return Array.isArray(r)}function dm(r){return"object"==typeof r&&null!==r}function Jy(r){return"function"==typeof r}function PA(r){return r instanceof b.OlP?(0,b.f3M)(r):r}function MA(r,e){return e.map((t,s)=>{if(r[s]instanceof b.OlP){const a=(0,b.f3M)(r[s]);return{key:t.key,reducerFactory:a.reducerFactory?a.reducerFactory:yh,metaReducers:a.metaReducers?a.metaReducers:[],initialState:a.initialState}}return t})}function y0(r){return r.map(e=>e instanceof b.OlP?(0,b.f3M)(e):e)}function qf(r){return"function"==typeof r?r():r}function xA(r,e){return r.concat(e)}function NA(){if((0,b.f3M)(nl,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function nd(r){Object.freeze(r);const e=Jy(r);return Object.getOwnPropertyNames(r).forEach(t=>{if(!t.startsWith("\u0275")&&function QT(r,e){return Object.prototype.hasOwnProperty.call(r,e)}(r,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const s=r[t];(dm(s)||Jy(s))&&!Object.isFrozen(s)&&nd(s)}}),r}function Zf(r,e=[]){return(Zy(r)||c0(r))&&0===e.length?{path:["root"],value:r}:Object.keys(r).reduce((s,a)=>{if(s)return s;const c=r[a];return function KT(r){return Jy(r)&&r.hasOwnProperty("\u0275cmp")}(c)?s:!(Zy(c)||c0(c)||function d0(r){return"number"==typeof r}(c)||function Qy(r){return"boolean"==typeof r}(c)||function Ky(r){return"string"==typeof r}(c)||l0(c))&&(function h0(r){if(!function Yy(r){return dm(r)&&!l0(r)}(r))return!1;const e=Object.getPrototypeOf(r);return e===Object.prototype||null===e}(c)?Zf(c,[...e,a]):{path:[...e,a],value:c})},!1)}function v0(r,e){if(!1===r)return;const t=r.path.join("."),s=new Error(`Detected unserializable ${e} at "${t}". ${lm}#strict${e}serializability`);throw s.value=r.value,s.unserializablePath=t,s}function rD(r){return(0,b.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...r}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function iD({strictActionSerializability:r,strictStateSerializability:e}){return t=>r||e?function nD(r,e){return function(t,s){e.action(s)&&v0(Zf(s),"action");const a=r(t,s);return e.state()&&v0(Zf(a),"state"),a}}(t,{action:s=>r&&!Kf(s),state:()=>e}):t}function sD({strictActionImmutability:r,strictStateImmutability:e}){return t=>r||e?function OA(r,e){return function(t,s){const a=e.action(s)?nd(s):s,c=r(t,a);return e.state()?nd(c):c}}(t,{action:s=>r&&!Kf(s),state:()=>e}):t}function Kf(r){return r.type.startsWith("@ngrx")}function I0({strictActionWithinNgZone:r}){return e=>r?function E0(r,e){return function(t,s){if(e.action(s)&&!b.R0b.isInAngularZone())throw new Error(`Action '${s.type}' running outside NgZone. ${lm}#strictactionwithinngzone`);return r(t,s)}}(e,{action:t=>r&&!Kf(t)}):e}function oD(r){return[{provide:WT,useValue:r},{provide:YI,useFactory:rv,deps:[WT]},{provide:Qu,deps:[YI],useFactory:rD},{provide:om,multi:!0,deps:[Qu],useFactory:sD},{provide:om,multi:!0,deps:[Qu],useFactory:iD},{provide:om,multi:!0,deps:[Qu],useFactory:I0}]}function Qf(){return[{provide:Hf,multi:!0,deps:[Qu],useFactory:kA}]}function rv(r){return r}function kA(r){if(!r.strictActionTypeUniqueness)return;const e=Object.entries(jf).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${lm}#strictactiontypeuniqueness`)}function w0(r={},e={}){return[{provide:Hy,useFactory:NA},{provide:zI,useValue:e.initialState},{provide:GI,useFactory:qf,deps:[zI]},{provide:zy,useValue:r},{provide:KI,useExisting:r instanceof b.OlP?r:zy},{provide:qI,deps:[zy,[new b.tBr(KI)]],useFactory:PA},{provide:sm,useValue:e.metaReducers?e.metaReducers:[]},{provide:GT,deps:[om,sm],useFactory:xA},{provide:WI,useValue:e.reducerFactory?e.reducerFactory:yh},{provide:zT,deps:[WI,GT],useFactory:qy},HI,qT,cm,a0,u0,oD(e.runtimeChecks),Qf()]}function uD(r,e,t={}){return[{provide:QI,multi:!0,useValue:r instanceof Object?{}:t},{provide:ZI,multi:!0,useValue:{key:r instanceof Object?r.name:r,reducerFactory:t instanceof b.OlP||!t.reducerFactory?yh:t.reducerFactory,metaReducers:t instanceof b.OlP||!t.metaReducers?[]:t.metaReducers,initialState:t instanceof b.OlP||!t.initialState?void 0:t.initialState}},{provide:$f,deps:[QI,ZI],useFactory:MA},{provide:td,multi:!0,useValue:r instanceof Object?r.reducer:e},{provide:ba,multi:!0,useExisting:e instanceof b.OlP?e:td},{provide:Gy,multi:!0,deps:[td,[new b.tBr(ba)]],useFactory:y0},Qf()]}let hm=(()=>{class r{constructor(t,s,a,c,h,v){}static#e=this.\u0275fac=function(s){return new(s||r)(b.LFG(tl),b.LFG(um),b.LFG(Gf),b.LFG(nl),b.LFG(Hy,8),b.LFG(Hf,8))};static#t=this.\u0275mod=b.oAB({type:r});static#n=this.\u0275inj=b.cJS({})}return r})(),A0=(()=>{class r{constructor(t,s,a,c,h){this.features=t,this.featureReducers=s,this.reducerManager=a;const v=t.map((S,P)=>{const W=s.shift()[P];return{...S,reducers:W,initialState:qf(S.initialState)}});a.addFeatures(v)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}static#e=this.\u0275fac=function(s){return new(s||r)(b.LFG($f),b.LFG(Gy),b.LFG(zf),b.LFG(hm),b.LFG(Hf,8))};static#t=this.\u0275mod=b.oAB({type:r});static#n=this.\u0275inj=b.cJS({})}return r})(),cD=(()=>{class r{static forRoot(t,s){return{ngModule:hm,providers:[...w0(t,s)]}}static forFeature(t,s,a={}){return{ngModule:A0,providers:[...uD(t,s,a)]}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=b.oAB({type:r});static#n=this.\u0275inj=b.cJS({})}return r})();var S0=V(6232),lD=V(8504);class nu{constructor(e,t,s){this.kind=e,this.value=t,this.error=s,this.hasValue="N"===e}observe(e){return R0(this,e)}do(e,t,s){const{kind:a,value:c,error:h}=this;return"N"===a?e?.(c):"E"===a?t?.(h):s?.()}accept(e,t,s){var a;return(0,Le.m)(null===(a=e)||void 0===a?void 0:a.next)?this.observe(e):this.do(e,t,s)}toObservable(){const{kind:e,value:t,error:s}=this,a="N"===e?(0,gr.of)(t):"E"===e?(0,lD._)(()=>s):"C"===e?S0.E:0;if(!a)throw new TypeError(`Unexpected notification kind ${e}`);return a}static createNext(e){return new nu("N",e)}static createError(e){return new nu("E",void 0,e)}static createComplete(){return nu.completeNotification}}function R0(r,e){var t,s,a;const{kind:c,value:h,error:v}=r;if("string"!=typeof c)throw new TypeError('Invalid notification, missing "kind"');"N"===c?null===(t=e.next)||void 0===t||t.call(e,h):"E"===c?null===(s=e.error)||void 0===s||s.call(e,v):null===(a=e.complete)||void 0===a||a.call(e)}nu.completeNotification=new nu("C");var P0=V(6306);function M0(r,e,t,s){return(0,Xe.e)((a,c)=>{let h;e&&"function"!=typeof e?({duration:t,element:h,connector:s}=e):h=e;const v=new Map,S=xe=>{v.forEach(xe),xe(c)},P=xe=>S(Qe=>Qe.error(xe));let k=0,W=!1;const X=new Lt.Q(c,xe=>{try{const Qe=r(xe);let We=v.get(Qe);if(!We){v.set(Qe,We=s?s():new pr.x);const It=function ce(xe,Qe){const We=new mr.y(It=>{k++;const Nt=Qe.subscribe(It);return()=>{Nt.unsubscribe(),0==--k&&W&&X.unsubscribe()}});return We.key=xe,We}(Qe,We);if(c.next(It),t){const Nt=(0,Lt.x)(We,()=>{We.complete(),Nt?.unsubscribe()},void 0,void 0,()=>v.delete(Qe));X.add((0,em.Xf)(t(It)).subscribe(Nt))}}We.next(h?h(xe):xe)}catch(Qe){P(Qe)}},()=>S(xe=>xe.complete()),P,()=>v.clear(),()=>(W=!0,0===k));a.subscribe(X)})}var sv=V(1631);function ov(r,e){return e?t=>t.pipe(ov((s,a)=>(0,em.Xf)(r(s,a)).pipe((0,U.U)((c,h)=>e(s,c,a,h))))):(0,Xe.e)((t,s)=>{let a=0,c=null,h=!1;t.subscribe((0,Lt.x)(s,v=>{c||(c=(0,Lt.x)(s,void 0,()=>{c=null,h&&s.complete()}),(0,em.Xf)(r(v,a++)).subscribe(c))},()=>{h=!0,!c&&s.complete()}))})}var N0=V(8180);const fm="__@ngrx/effects_create__";function pD(r){return Object.getPrototypeOf(r)}function k0(r){return"function"==typeof r}function F0(r){return r.filter(k0)}function jA(r,e,t){const s=pD(r),c=s&&"Object"!==s.constructor.name?s.constructor.name:null,h=function fD(r){return function O0(r){return Object.getOwnPropertyNames(r).filter(s=>!(!r[s]||!r[s].hasOwnProperty(fm))&&r[s][fm].hasOwnProperty("dispatch")).map(s=>({propertyName:s,...r[s][fm]}))}(r)}(r).map(({propertyName:v,dispatch:S,useEffectsErrorHandler:P})=>{const k="function"==typeof r[v]?r[v]():r[v],W=P?t(k,e):k;return!1===S?W.pipe(function C0(){return(0,Xe.e)((r,e)=>{r.subscribe((0,Lt.x)(e,Py.Z))})}()):W.pipe(function dD(){return(0,Xe.e)((r,e)=>{r.subscribe((0,Lt.x)(e,t=>{e.next(nu.createNext(t))},()=>{e.next(nu.createComplete()),e.complete()},t=>{e.next(nu.createError(t)),e.complete()}))})}()).pipe((0,U.U)(ce=>({effect:r[v],notification:ce,propertyName:v,sourceName:c,sourceInstance:r})))});return(0,yi.T)(...h)}function av(r,e,t=10){return r.pipe((0,P0.K)(s=>(e&&e.handleError(s),t<=1?r:av(r,e,t-1))))}const V0=new b.OlP("@ngrx/effects Internal Root Guard"),rd=new b.OlP("@ngrx/effects User Provided Effects"),uv=new b.OlP("@ngrx/effects Internal Root Effects"),mD=new b.OlP("@ngrx/effects Internal Root Effects Instances"),_D=new b.OlP("@ngrx/effects Internal Feature Effects"),U0=new b.OlP("@ngrx/effects Internal Feature Effects Instance Groups"),B0=new b.OlP("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>av}),j0="@ngrx/effects/init";!function BI(r,e){if(jf[r]=(jf[r]||0)+1,"function"==typeof e)return By(r,(...s)=>({...e(...s),type:r}));switch(e?e._as:"empty"){case"empty":return By(r,()=>({type:r}));case"props":return By(r,s=>({...s,type:r}));default:throw new Error("Unexpected config.")}}(j0);function AD(r){return cv(r,"ngrxOnInitEffects")}function cv(r,e){return r&&e in r&&"function"==typeof r[e]}let Jf=(()=>{class r extends pr.x{constructor(t,s){super(),this.errorHandler=t,this.effectsErrorHandler=s}addEffects(t){this.next(t)}toActions(){return this.pipe(M0(t=>function UA(r){return!!r.constructor&&"Object"!==r.constructor.name&&"Function"!==r.constructor.name}(t)?pD(t):t),(0,sv.z)(t=>t.pipe(M0(CD))),(0,sv.z)(t=>{const s=t.pipe(ov(c=>function SD(r,e){return t=>{const s=jA(t,r,e);return function TD(r){return cv(r,"ngrxOnRunEffects")}(t)?t.ngrxOnRunEffects(s):s}}(this.errorHandler,this.effectsErrorHandler)(c)),(0,U.U)(c=>(function vD(r,e){if("N"===r.notification.kind){const t=r.notification.value;!function HA(r){return"function"!=typeof r&&r&&r.type&&"string"==typeof r.type}(t)&&e.handleError(new Error(`Effect ${function ED({propertyName:r,sourceInstance:e,sourceName:t}){const s="function"==typeof e[r];return t?`"${t}.${String(r)}${s?"()":""}"`:`"${String(r)}()"`}(r)} dispatched an invalid action: ${function Yf(r){try{return JSON.stringify(r)}catch{return r}}(t)}`))}}(c,this.errorHandler),c.notification)),(0,jt.h)(c=>"N"===c.kind&&null!=c.value),function x0(){return(0,Xe.e)((r,e)=>{r.subscribe((0,Lt.x)(e,t=>R0(t,e)))})}()),a=t.pipe((0,N0.q)(1),(0,jt.h)(AD),(0,U.U)(c=>c.ngrxOnInitEffects()));return(0,yi.T)(s,a)}))}static#e=this.\u0275fac=function(s){return new(s||r)(b.LFG(b.qLn),b.LFG(B0))};static#t=this.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function CD(r){return function ID(r){return cv(r,"ngrxOnIdentifyEffects")}(r)?r.ngrxOnIdentifyEffects():""}let lv=(()=>{class r{get isStarted(){return!!this.effectsSubscription}constructor(t,s){this.effectSources=t,this.store=s,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static#e=this.\u0275fac=function(s){return new(s||r)(b.LFG(Jf),b.LFG(nl))};static#t=this.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),$0=(()=>{class r{constructor(t,s,a,c,h,v,S){this.sources=t,s.start();for(const P of c)t.addEffects(P);a.dispatch({type:j0})}addEffects(t){this.sources.addEffects(t)}static#e=this.\u0275fac=function(s){return new(s||r)(b.LFG(Jf),b.LFG(lv),b.LFG(nl),b.LFG(mD),b.LFG(hm,8),b.LFG(A0,8),b.LFG(V0,8))};static#t=this.\u0275mod=b.oAB({type:r});static#n=this.\u0275inj=b.cJS({})}return r})(),bD=(()=>{class r{constructor(t,s,a,c){const h=s.flat();for(const v of h)t.addEffects(v)}static#e=this.\u0275fac=function(s){return new(s||r)(b.LFG($0),b.LFG(U0),b.LFG(hm,8),b.LFG(A0,8))};static#t=this.\u0275mod=b.oAB({type:r});static#n=this.\u0275inj=b.cJS({})}return r})(),RD=(()=>{class r{static forFeature(...t){const s=t.flat(),a=F0(s);return{ngModule:bD,providers:[a,{provide:_D,multi:!0,useValue:s},{provide:rd,multi:!0,useValue:[]},{provide:U0,multi:!0,useFactory:H0,deps:[_D,rd]}]}}static forRoot(...t){const s=t.flat(),a=F0(s);return{ngModule:$0,providers:[a,{provide:uv,useValue:[s]},{provide:V0,useFactory:PD},{provide:rd,multi:!0,useValue:[]},{provide:mD,useFactory:H0,deps:[uv,rd]}]}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=b.oAB({type:r});static#n=this.\u0275inj=b.cJS({})}return r})();function H0(r,e){const t=[];for(const s of r)t.push(...s);for(const s of e)t.push(...s);return t.map(s=>function BA(r){return r instanceof b.OlP||k0(r)}(s)?(0,b.f3M)(s):s)}function PD(){const r=(0,b.f3M)(lv,{optional:!0,skipSelf:!0}),e=(0,b.f3M)(uv,{self:!0});if((1!==e.length||0!==e[0].length)&&r)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}const xD_firebase={apiKey:"AIzaSyDRuj9I1xrkcQy7PTWVtgq30VodzD0Ht-U",authDomain:"angular-demo-firebase-461e8.firebaseapp.com",projectId:"angular-demo-firebase-461e8",storageBucket:"angular-demo-firebase-461e8.appspot.com",messagingSenderId:"823612893482",appId:"1:823612893482:web:57ccd891a4342a377dd653",measurementId:"G-G7N7CGKH30"};let ND=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=b.oAB({type:r,bootstrap:[MI]});static#n=this.\u0275inj=b.cJS({providers:[{provide:Oe,useClass:K}],imports:[w.b2,Wt,cD.forRoot({},{}),RD.forRoot([]),Hi.initializeApp(xD_firebase)]})}return r})();w.q6().bootstrapModule(ND).catch(r=>console.error(r))},5619:(Tt,Se,V)=>{V.d(Se,{X:()=>te});var w=V(8645);class te extends w.x{constructor(ue){super(),this._value=ue}get value(){return this.getValue()}_subscribe(ue){const he=super._subscribe(ue);return!he.closed&&ue.next(this._value),he}getValue(){const{hasError:ue,thrownError:he,_value:oe}=this;if(ue)throw he;return this._throwIfClosed(),oe}next(ue){super.next(this._value=ue)}}},5592:(Tt,Se,V)=>{V.d(Se,{y:()=>Ue});var w=V(305),te=V(7394),b=V(4850),ue=V(8407),he=V(2653),oe=V(4674),we=V(1441);let Ue=(()=>{class se{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const He=new se;return He.source=this,He.operator=Oe,He}subscribe(Oe,He,Be){const it=function Y(se){return se&&se instanceof w.Lv||function K(se){return se&&(0,oe.m)(se.next)&&(0,oe.m)(se.error)&&(0,oe.m)(se.complete)}(se)&&(0,te.Nn)(se)}(Oe)?Oe:new w.Hp(Oe,He,Be);return(0,we.x)(()=>{const{operator:ht,source:Wt}=this;it.add(ht?ht.call(it,Wt):Wt?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(He){Oe.error(He)}}forEach(Oe,He){return new(He=Ce(He))((Be,it)=>{const ht=new w.Hp({next:Wt=>{try{Oe(Wt)}catch(rn){it(rn),ht.unsubscribe()}},error:it,complete:Be});this.subscribe(ht)})}_subscribe(Oe){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(Oe)}[b.L](){return this}pipe(...Oe){return(0,ue.U)(Oe)(this)}toPromise(Oe){return new(Oe=Ce(Oe))((He,Be)=>{let it;this.subscribe(ht=>it=ht,ht=>Be(ht),()=>He(it))})}}return se.create=qe=>new se(qe),se})();function Ce(se){var qe;return null!==(qe=se??he.config.Promise)&&void 0!==qe?qe:Promise}},8645:(Tt,Se,V)=>{V.d(Se,{x:()=>we});var w=V(5592),te=V(7394);const ue=(0,V(2306).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=V(9039),oe=V(1441);let we=(()=>{class Ce extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const se=new Ue(this,this);return se.operator=Y,se}_throwIfClosed(){if(this.closed)throw new ue}next(Y){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(Y)}})}error(Y){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:se}=this;for(;se.length;)se.shift().error(Y)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:se,isStopped:qe,observers:Oe}=this;return se||qe?te.Lc:(this.currentObservers=null,Oe.push(Y),new te.w0(()=>{this.currentObservers=null,(0,he.P)(Oe,Y)}))}_checkFinalizedStatuses(Y){const{hasError:se,thrownError:qe,isStopped:Oe}=this;se?Y.error(qe):Oe&&Y.complete()}asObservable(){const Y=new w.y;return Y.source=this,Y}}return Ce.create=(K,Y)=>new Ue(K,Y),Ce})();class Ue extends we{constructor(K,Y){super(),this.destination=K,this.source=Y}next(K){var Y,se;null===(se=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===se||se.call(Y,K)}error(K){var Y,se;null===(se=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===se||se.call(Y,K)}complete(){var K,Y;null===(Y=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===Y||Y.call(K)}_subscribe(K){var Y,se;return null!==(se=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(K))&&void 0!==se?se:te.Lc}}},305:(Tt,Se,V)=>{V.d(Se,{Hp:()=>Be,Lv:()=>se});var w=V(4674),te=V(7394),b=V(2653),ue=V(3894),he=V(2420);const oe=Ce("C",void 0,void 0);function Ce(ge,Ne,pe){return{kind:ge,value:Ne,error:pe}}var K=V(7599),Y=V(1441);class se extends te.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,te.Nn)(Ne)&&Ne.add(this)):this.destination=rn}static create(Ne,pe,Ze){return new Be(Ne,pe,Ze)}next(Ne){this.isStopped?Wt(function Ue(ge){return Ce("N",ge,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?Wt(function we(ge){return Ce("E",void 0,ge)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?Wt(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Oe(ge,Ne){return qe.call(ge,Ne)}class He{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:pe}=this;if(pe.next)try{pe.next(Ne)}catch(Ze){it(Ze)}}error(Ne){const{partialObserver:pe}=this;if(pe.error)try{pe.error(Ne)}catch(Ze){it(Ze)}else it(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(pe){it(pe)}}}class Be extends se{constructor(Ne,pe,Ze){let Je;if(super(),(0,w.m)(Ne)||!Ne)Je={next:Ne??void 0,error:pe??void 0,complete:Ze??void 0};else{let et;this&&b.config.useDeprecatedNextContext?(et=Object.create(Ne),et.unsubscribe=()=>this.unsubscribe(),Je={next:Ne.next&&Oe(Ne.next,et),error:Ne.error&&Oe(Ne.error,et),complete:Ne.complete&&Oe(Ne.complete,et)}):Je=Ne}this.destination=new He(Je)}}function it(ge){b.config.useDeprecatedSynchronousErrorHandling?(0,Y.O)(ge):(0,ue.h)(ge)}function Wt(ge,Ne){const{onStoppedNotification:pe}=b.config;pe&&K.z.setTimeout(()=>pe(ge,Ne))}const rn={closed:!0,next:he.Z,error:function ht(ge){throw ge},complete:he.Z}},7394:(Tt,Se,V)=>{V.d(Se,{Lc:()=>oe,w0:()=>he,Nn:()=>we});var w=V(4674);const b=(0,V(2306).d)(Ce=>function(Y){Ce(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((se,qe)=>`${qe+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var ue=V(9039);class he{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const Oe of Y)Oe.remove(this);else Y.remove(this);const{initialTeardown:se}=this;if((0,w.m)(se))try{se()}catch(Oe){K=Oe instanceof b?Oe.errors:[Oe]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Oe of qe)try{Ue(Oe)}catch(He){K=K??[],He instanceof b?K=[...K,...He.errors]:K.push(He)}}if(K)throw new b(K)}}add(K){var Y;if(K&&K!==this)if(this.closed)Ue(K);else{if(K instanceof he){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(Y=this._finalizers)&&void 0!==Y?Y:[]).push(K)}}_hasParent(K){const{_parentage:Y}=this;return Y===K||Array.isArray(Y)&&Y.includes(K)}_addParent(K){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(K),Y):Y?[Y,K]:K}_removeParent(K){const{_parentage:Y}=this;Y===K?this._parentage=null:Array.isArray(Y)&&(0,ue.P)(Y,K)}remove(K){const{_finalizers:Y}=this;Y&&(0,ue.P)(Y,K),K instanceof he&&K._removeParent(this)}}he.EMPTY=(()=>{const Ce=new he;return Ce.closed=!0,Ce})();const oe=he.EMPTY;function we(Ce){return Ce instanceof he||Ce&&"closed"in Ce&&(0,w.m)(Ce.remove)&&(0,w.m)(Ce.add)&&(0,w.m)(Ce.unsubscribe)}function Ue(Ce){(0,w.m)(Ce)?Ce():Ce.unsubscribe()}},2653:(Tt,Se,V)=>{V.d(Se,{config:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(Tt,Se,V)=>{V.d(Se,{z:()=>he});var w=V(7537),b=V(4564),ue=V(2459);function he(...oe){return function te(){return(0,w.J)(1)}()((0,ue.D)(oe,(0,b.yG)(oe)))}},6232:(Tt,Se,V)=>{V.d(Se,{E:()=>te});const te=new(V(5592).y)(he=>he.complete())},2459:(Tt,Se,V)=>{V.d(Se,{D:()=>Ne});var w=V(4829),te=V(3093),b=V(5137),oe=V(5592),Ue=V(4971),Ce=V(4674),K=V(7103);function se(pe,Ze){if(!pe)throw new Error("Iterable cannot be null");return new oe.y(Je=>{(0,K.f)(Je,Ze,()=>{const et=pe[Symbol.asyncIterator]();(0,K.f)(Je,Ze,()=>{et.next().then(Ie=>{Ie.done?Je.complete():Je.next(Ie.value)})},0,!0)})})}var qe=V(8382),Oe=V(4026),He=V(4266),Be=V(3664),it=V(5726),ht=V(9853),Wt=V(541);function Ne(pe,Ze){return Ze?function ge(pe,Ze){if(null!=pe){if((0,qe.c)(pe))return function ue(pe,Ze){return(0,w.Xf)(pe).pipe((0,b.R)(Ze),(0,te.Q)(Ze))}(pe,Ze);if((0,He.z)(pe))return function we(pe,Ze){return new oe.y(Je=>{let et=0;return Ze.schedule(function(){et===pe.length?Je.complete():(Je.next(pe[et++]),Je.closed||this.schedule())})})}(pe,Ze);if((0,Oe.t)(pe))return function he(pe,Ze){return(0,w.Xf)(pe).pipe((0,b.R)(Ze),(0,te.Q)(Ze))}(pe,Ze);if((0,it.D)(pe))return se(pe,Ze);if((0,Be.T)(pe))return function Y(pe,Ze){return new oe.y(Je=>{let et;return(0,K.f)(Je,Ze,()=>{et=pe[Ue.h](),(0,K.f)(Je,Ze,()=>{let Ie,Mt;try{({value:Ie,done:Mt}=et.next())}catch(Yt){return void Je.error(Yt)}Mt?Je.complete():Je.next(Ie)},0,!0)}),()=>(0,Ce.m)(et?.return)&&et.return()})}(pe,Ze);if((0,Wt.L)(pe))return function rn(pe,Ze){return se((0,Wt.Q)(pe),Ze)}(pe,Ze)}throw(0,ht.z)(pe)}(pe,Ze):(0,w.Xf)(pe)}},4829:(Tt,Se,V)=>{V.d(Se,{Xf:()=>qe});var w=V(7582),te=V(4266),b=V(4026),ue=V(5592),he=V(8382),oe=V(5726),we=V(9853),Ue=V(3664),Ce=V(541),K=V(4674),Y=V(3894),se=V(4850);function qe(ge){if(ge instanceof ue.y)return ge;if(null!=ge){if((0,he.c)(ge))return function Oe(ge){return new ue.y(Ne=>{const pe=ge[se.L]();if((0,K.m)(pe.subscribe))return pe.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,te.z)(ge))return function He(ge){return new ue.y(Ne=>{for(let pe=0;pe<ge.length&&!Ne.closed;pe++)Ne.next(ge[pe]);Ne.complete()})}(ge);if((0,b.t)(ge))return function Be(ge){return new ue.y(Ne=>{ge.then(pe=>{Ne.closed||(Ne.next(pe),Ne.complete())},pe=>Ne.error(pe)).then(null,Y.h)})}(ge);if((0,oe.D)(ge))return ht(ge);if((0,Ue.T)(ge))return function it(ge){return new ue.y(Ne=>{for(const pe of ge)if(Ne.next(pe),Ne.closed)return;Ne.complete()})}(ge);if((0,Ce.L)(ge))return function Wt(ge){return ht((0,Ce.Q)(ge))}(ge)}throw(0,we.z)(ge)}function ht(ge){return new ue.y(Ne=>{(function rn(ge,Ne){var pe,Ze,Je,et;return(0,w.mG)(this,void 0,void 0,function*(){try{for(pe=(0,w.KL)(ge);!(Ze=yield pe.next()).done;)if(Ne.next(Ze.value),Ne.closed)return}catch(Ie){Je={error:Ie}}finally{try{Ze&&!Ze.done&&(et=pe.return)&&(yield et.call(pe))}finally{if(Je)throw Je.error}}Ne.complete()})})(ge,Ne).catch(pe=>Ne.error(pe))})}},3019:(Tt,Se,V)=>{V.d(Se,{T:()=>oe});var w=V(7537),te=V(4829),b=V(6232),ue=V(4564),he=V(2459);function oe(...we){const Ue=(0,ue.yG)(we),Ce=(0,ue._6)(we,1/0),K=we;return K.length?1===K.length?(0,te.Xf)(K[0]):(0,w.J)(Ce)((0,he.D)(K,Ue)):b.E}},2096:(Tt,Se,V)=>{V.d(Se,{of:()=>b});var w=V(4564),te=V(2459);function b(...ue){const he=(0,w.yG)(ue);return(0,te.D)(ue,he)}},8504:(Tt,Se,V)=>{V.d(Se,{_:()=>b});var w=V(5592),te=V(4674);function b(ue,he){const oe=(0,te.m)(ue)?ue:()=>ue,we=Ue=>Ue.error(oe());return new w.y(he?Ue=>he.schedule(we,0,Ue):we)}},8251:(Tt,Se,V)=>{V.d(Se,{Q:()=>b,x:()=>te});var w=V(305);function te(ue,he,oe,we,Ue){return new b(ue,he,oe,we,Ue)}class b extends w.Lv{constructor(he,oe,we,Ue,Ce,K){super(he),this.onFinalize=Ce,this.shouldUnsubscribe=K,this._next=oe?function(Y){try{oe(Y)}catch(se){he.error(se)}}:super._next,this._error=Ue?function(Y){try{Ue(Y)}catch(se){he.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(Y){he.error(Y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},6306:(Tt,Se,V)=>{V.d(Se,{K:()=>ue});var w=V(4829),te=V(8251),b=V(9360);function ue(he){return(0,b.e)((oe,we)=>{let K,Ue=null,Ce=!1;Ue=oe.subscribe((0,te.x)(we,void 0,void 0,Y=>{K=(0,w.Xf)(he(Y,ue(he)(oe))),Ue?(Ue.unsubscribe(),Ue=null,K.subscribe(we)):Ce=!0})),Ce&&(Ue.unsubscribe(),Ue=null,K.subscribe(we))})}},3572:(Tt,Se,V)=>{V.d(Se,{d:()=>b});var w=V(9360),te=V(8251);function b(ue){return(0,w.e)((he,oe)=>{let we=!1;he.subscribe((0,te.x)(oe,Ue=>{we=!0,oe.next(Ue)},()=>{we||oe.next(ue),oe.complete()}))})}},3997:(Tt,Se,V)=>{V.d(Se,{x:()=>ue});var w=V(2737),te=V(9360),b=V(8251);function ue(oe,we=w.y){return oe=oe??he,(0,te.e)((Ue,Ce)=>{let K,Y=!0;Ue.subscribe((0,b.x)(Ce,se=>{const qe=we(se);(Y||!oe(K,qe))&&(Y=!1,K=qe,Ce.next(se))}))})}function he(oe,we){return oe===we}},2181:(Tt,Se,V)=>{V.d(Se,{h:()=>b});var w=V(9360),te=V(8251);function b(ue,he){return(0,w.e)((oe,we)=>{let Ue=0;oe.subscribe((0,te.x)(we,Ce=>ue.call(he,Ce,Ue++)&&we.next(Ce)))})}},1374:(Tt,Se,V)=>{V.d(Se,{P:()=>we});var w=V(6973),te=V(2181),b=V(8180),ue=V(3572),he=V(3026),oe=V(2737);function we(Ue,Ce){const K=arguments.length>=2;return Y=>Y.pipe(Ue?(0,te.h)((se,qe)=>Ue(se,qe,Y)):oe.y,(0,b.q)(1),K?(0,ue.d)(Ce):(0,he.T)(()=>new w.K))}},7398:(Tt,Se,V)=>{V.d(Se,{U:()=>b});var w=V(9360),te=V(8251);function b(ue,he){return(0,w.e)((oe,we)=>{let Ue=0;oe.subscribe((0,te.x)(we,Ce=>{we.next(ue.call(he,Ce,Ue++))}))})}},7537:(Tt,Se,V)=>{V.d(Se,{J:()=>b});var w=V(1631),te=V(2737);function b(ue=1/0){return(0,w.z)(te.y,ue)}},1631:(Tt,Se,V)=>{V.d(Se,{z:()=>Ue});var w=V(7398),te=V(4829),b=V(9360),ue=V(7103),he=V(8251),we=V(4674);function Ue(Ce,K,Y=1/0){return(0,we.m)(K)?Ue((se,qe)=>(0,w.U)((Oe,He)=>K(se,Oe,qe,He))((0,te.Xf)(Ce(se,qe))),Y):("number"==typeof K&&(Y=K),(0,b.e)((se,qe)=>function oe(Ce,K,Y,se,qe,Oe,He,Be){const it=[];let ht=0,Wt=0,rn=!1;const ge=()=>{rn&&!it.length&&!ht&&K.complete()},Ne=Ze=>ht<se?pe(Ze):it.push(Ze),pe=Ze=>{Oe&&K.next(Ze),ht++;let Je=!1;(0,te.Xf)(Y(Ze,Wt++)).subscribe((0,he.x)(K,et=>{qe?.(et),Oe?Ne(et):K.next(et)},()=>{Je=!0},void 0,()=>{if(Je)try{for(ht--;it.length&&ht<se;){const et=it.shift();He?(0,ue.f)(K,He,()=>pe(et)):pe(et)}ge()}catch(et){K.error(et)}}))};return Ce.subscribe((0,he.x)(K,Ne,()=>{rn=!0,ge()})),()=>{Be?.()}}(se,qe,Ce,Y)))}},3093:(Tt,Se,V)=>{V.d(Se,{Q:()=>ue});var w=V(7103),te=V(9360),b=V(8251);function ue(he,oe=0){return(0,te.e)((we,Ue)=>{we.subscribe((0,b.x)(Ue,Ce=>(0,w.f)(Ue,he,()=>Ue.next(Ce),oe),()=>(0,w.f)(Ue,he,()=>Ue.complete(),oe),Ce=>(0,w.f)(Ue,he,()=>Ue.error(Ce),oe)))})}},6699:(Tt,Se,V)=>{V.d(Se,{R:()=>ue});var w=V(9360),te=V(8251);function ue(he,oe){return(0,w.e)(function b(he,oe,we,Ue,Ce){return(K,Y)=>{let se=we,qe=oe,Oe=0;K.subscribe((0,te.x)(Y,He=>{const Be=Oe++;qe=se?he(qe,He,Be):(se=!0,He),Ue&&Y.next(qe)},Ce&&(()=>{se&&Y.next(qe),Y.complete()})))}}(he,oe,arguments.length>=2,!0))}},3020:(Tt,Se,V)=>{V.d(Se,{B:()=>he});var w=V(4829),te=V(8645),b=V(305),ue=V(9360);function he(we={}){const{connector:Ue=(()=>new te.x),resetOnError:Ce=!0,resetOnComplete:K=!0,resetOnRefCountZero:Y=!0}=we;return se=>{let qe,Oe,He,Be=0,it=!1,ht=!1;const Wt=()=>{Oe?.unsubscribe(),Oe=void 0},rn=()=>{Wt(),qe=He=void 0,it=ht=!1},ge=()=>{const Ne=qe;rn(),Ne?.unsubscribe()};return(0,ue.e)((Ne,pe)=>{Be++,!ht&&!it&&Wt();const Ze=He=He??Ue();pe.add(()=>{Be--,0===Be&&!ht&&!it&&(Oe=oe(ge,Y))}),Ze.subscribe(pe),!qe&&Be>0&&(qe=new b.Hp({next:Je=>Ze.next(Je),error:Je=>{ht=!0,Wt(),Oe=oe(rn,Ce,Je),Ze.error(Je)},complete:()=>{it=!0,Wt(),Oe=oe(rn,K),Ze.complete()}}),(0,w.Xf)(Ne).subscribe(qe))})(se)}}function oe(we,Ue,...Ce){if(!0===Ue)return void we();if(!1===Ue)return;const K=new b.Hp({next:()=>{K.unsubscribe(),we()}});return(0,w.Xf)(Ue(...Ce)).subscribe(K)}},7921:(Tt,Se,V)=>{V.d(Se,{O:()=>ue});var w=V(5211),te=V(4564),b=V(9360);function ue(...he){const oe=(0,te.yG)(he);return(0,b.e)((we,Ue)=>{(oe?(0,w.z)(he,we,oe):(0,w.z)(he,we)).subscribe(Ue)})}},5137:(Tt,Se,V)=>{V.d(Se,{R:()=>te});var w=V(9360);function te(b,ue=0){return(0,w.e)((he,oe)=>{oe.add(b.schedule(()=>he.subscribe(oe),ue))})}},4664:(Tt,Se,V)=>{V.d(Se,{w:()=>ue});var w=V(4829),te=V(9360),b=V(8251);function ue(he,oe){return(0,te.e)((we,Ue)=>{let Ce=null,K=0,Y=!1;const se=()=>Y&&!Ce&&Ue.complete();we.subscribe((0,b.x)(Ue,qe=>{Ce?.unsubscribe();let Oe=0;const He=K++;(0,w.Xf)(he(qe,He)).subscribe(Ce=(0,b.x)(Ue,Be=>Ue.next(oe?oe(qe,Be,He,Oe++):Be),()=>{Ce=null,se()}))},()=>{Y=!0,se()}))})}},8180:(Tt,Se,V)=>{V.d(Se,{q:()=>ue});var w=V(6232),te=V(9360),b=V(8251);function ue(he){return he<=0?()=>w.E:(0,te.e)((oe,we)=>{let Ue=0;oe.subscribe((0,b.x)(we,Ce=>{++Ue<=he&&(we.next(Ce),he<=Ue&&we.complete())}))})}},9397:(Tt,Se,V)=>{V.d(Se,{b:()=>he});var w=V(4674),te=V(9360),b=V(8251),ue=V(2737);function he(oe,we,Ue){const Ce=(0,w.m)(oe)||we||Ue?{next:oe,error:we,complete:Ue}:oe;return Ce?(0,te.e)((K,Y)=>{var se;null===(se=Ce.subscribe)||void 0===se||se.call(Ce);let qe=!0;K.subscribe((0,b.x)(Y,Oe=>{var He;null===(He=Ce.next)||void 0===He||He.call(Ce,Oe),Y.next(Oe)},()=>{var Oe;qe=!1,null===(Oe=Ce.complete)||void 0===Oe||Oe.call(Ce),Y.complete()},Oe=>{var He;qe=!1,null===(He=Ce.error)||void 0===He||He.call(Ce,Oe),Y.error(Oe)},()=>{var Oe,He;qe&&(null===(Oe=Ce.unsubscribe)||void 0===Oe||Oe.call(Ce)),null===(He=Ce.finalize)||void 0===He||He.call(Ce)}))}):ue.y}},3026:(Tt,Se,V)=>{V.d(Se,{T:()=>ue});var w=V(6973),te=V(9360),b=V(8251);function ue(oe=he){return(0,te.e)((we,Ue)=>{let Ce=!1;we.subscribe((0,b.x)(Ue,K=>{Ce=!0,Ue.next(K)},()=>Ce?Ue.complete():Ue.error(oe())))})}function he(){return new w.K}},7599:(Tt,Se,V)=>{V.d(Se,{z:()=>w});const w={setTimeout(te,b,...ue){const{delegate:he}=w;return he?.setTimeout?he.setTimeout(te,b,...ue):setTimeout(te,b,...ue)},clearTimeout(te){const{delegate:b}=w;return(b?.clearTimeout||clearTimeout)(te)},delegate:void 0}},4971:(Tt,Se,V)=>{V.d(Se,{h:()=>te});const te=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Tt,Se,V)=>{V.d(Se,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Tt,Se,V)=>{V.d(Se,{K:()=>te});const te=(0,V(2306).d)(b=>function(){b(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Tt,Se,V)=>{V.d(Se,{_6:()=>oe,jO:()=>ue,yG:()=>he});var w=V(4674);function b(we){return we[we.length-1]}function ue(we){return(0,w.m)(b(we))?we.pop():void 0}function he(we){return function te(we){return we&&(0,w.m)(we.schedule)}(b(we))?we.pop():void 0}function oe(we,Ue){return"number"==typeof b(we)?we.pop():Ue}},9039:(Tt,Se,V)=>{function w(te,b){if(te){const ue=te.indexOf(b);0<=ue&&te.splice(ue,1)}}V.d(Se,{P:()=>w})},2306:(Tt,Se,V)=>{function w(te){const ue=te(he=>{Error.call(he),he.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}V.d(Se,{d:()=>w})},1441:(Tt,Se,V)=>{V.d(Se,{O:()=>ue,x:()=>b});var w=V(2653);let te=null;function b(he){if(w.config.useDeprecatedSynchronousErrorHandling){const oe=!te;if(oe&&(te={errorThrown:!1,error:null}),he(),oe){const{errorThrown:we,error:Ue}=te;if(te=null,we)throw Ue}}else he()}function ue(he){w.config.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=he)}},7103:(Tt,Se,V)=>{function w(te,b,ue,he=0,oe=!1){const we=b.schedule(function(){ue(),oe?te.add(this.schedule(null,he)):this.unsubscribe()},he);if(te.add(we),!oe)return we}V.d(Se,{f:()=>w})},2737:(Tt,Se,V)=>{function w(te){return te}V.d(Se,{y:()=>w})},4266:(Tt,Se,V)=>{V.d(Se,{z:()=>w});const w=te=>te&&"number"==typeof te.length&&"function"!=typeof te},5726:(Tt,Se,V)=>{V.d(Se,{D:()=>te});var w=V(4674);function te(b){return Symbol.asyncIterator&&(0,w.m)(b?.[Symbol.asyncIterator])}},4674:(Tt,Se,V)=>{function w(te){return"function"==typeof te}V.d(Se,{m:()=>w})},8382:(Tt,Se,V)=>{V.d(Se,{c:()=>b});var w=V(4850),te=V(4674);function b(ue){return(0,te.m)(ue[w.L])}},3664:(Tt,Se,V)=>{V.d(Se,{T:()=>b});var w=V(4971),te=V(4674);function b(ue){return(0,te.m)(ue?.[w.h])}},4026:(Tt,Se,V)=>{V.d(Se,{t:()=>te});var w=V(4674);function te(b){return(0,w.m)(b?.then)}},541:(Tt,Se,V)=>{V.d(Se,{L:()=>ue,Q:()=>b});var w=V(7582),te=V(4674);function b(he){return(0,w.FC)(this,arguments,function*(){const we=he.getReader();try{for(;;){const{value:Ue,done:Ce}=yield(0,w.qq)(we.read());if(Ce)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(Ue)}}finally{we.releaseLock()}})}function ue(he){return(0,te.m)(he?.getReader)}},9360:(Tt,Se,V)=>{V.d(Se,{A:()=>te,e:()=>b});var w=V(4674);function te(ue){return(0,w.m)(ue?.lift)}function b(ue){return he=>{if(te(he))return he.lift(function(oe){try{return ue(oe,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(Tt,Se,V)=>{function w(){}V.d(Se,{Z:()=>w})},8407:(Tt,Se,V)=>{V.d(Se,{U:()=>b,z:()=>te});var w=V(2737);function te(...ue){return b(ue)}function b(ue){return 0===ue.length?w.y:1===ue.length?ue[0]:function(oe){return ue.reduce((we,Ue)=>Ue(we),oe)}}},3894:(Tt,Se,V)=>{V.d(Se,{h:()=>b});var w=V(2653),te=V(7599);function b(ue){te.z.setTimeout(()=>{const{onUnhandledError:he}=w.config;if(!he)throw ue;he(ue)})}},9853:(Tt,Se,V)=>{function w(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Se,{z:()=>w})},6814:(Tt,Se,V)=>{V.d(Se,{Do:()=>Be,EM:()=>ei,HT:()=>ue,JF:()=>Li,K0:()=>oe,Mx:()=>ki,PM:()=>Zi,S$:()=>qe,V_:()=>Ue,Ye:()=>it,b0:()=>He,bD:()=>qi,ez:()=>Bn,q:()=>b,w_:()=>he});var w=V(5879);let te=null;function b(){return te}function ue(T){te||(te=T)}class he{}const oe=new w.OlP("DocumentToken");let we=(()=>{class T{historyGo(R){throw new Error("Not implemented")}static#e=this.\u0275fac=function(O){return new(O||T)};static#t=this.\u0275prov=w.Yz7({token:T,factory:function(){return(0,w.f3M)(Ce)},providedIn:"platform"})}return T})();const Ue=new w.OlP("Location Initialized");let Ce=(()=>{class T extends we{constructor(){super(),this._doc=(0,w.f3M)(oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return b().getBaseHref(this._doc)}onPopState(R){const O=b().getGlobalEventTarget(this._doc,"window");return O.addEventListener("popstate",R,!1),()=>O.removeEventListener("popstate",R)}onHashChange(R){const O=b().getGlobalEventTarget(this._doc,"window");return O.addEventListener("hashchange",R,!1),()=>O.removeEventListener("hashchange",R)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(R){this._location.pathname=R}pushState(R,O,Z){this._history.pushState(R,O,Z)}replaceState(R,O,Z){this._history.replaceState(R,O,Z)}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}static#e=this.\u0275fac=function(O){return new(O||T)};static#t=this.\u0275prov=w.Yz7({token:T,factory:function(){return new T},providedIn:"platform"})}return T})();function K(T,F){if(0==T.length)return F;if(0==F.length)return T;let R=0;return T.endsWith("/")&&R++,F.startsWith("/")&&R++,2==R?T+F.substring(1):1==R?T+F:T+"/"+F}function Y(T){const F=T.match(/#|\?|$/),R=F&&F.index||T.length;return T.slice(0,R-("/"===T[R-1]?1:0))+T.slice(R)}function se(T){return T&&"?"!==T[0]?"?"+T:T}let qe=(()=>{class T{historyGo(R){throw new Error("Not implemented")}static#e=this.\u0275fac=function(O){return new(O||T)};static#t=this.\u0275prov=w.Yz7({token:T,factory:function(){return(0,w.f3M)(He)},providedIn:"root"})}return T})();const Oe=new w.OlP("appBaseHref");let He=(()=>{class T extends qe{constructor(R,O){super(),this._platformLocation=R,this._removeListenerFns=[],this._baseHref=O??this._platformLocation.getBaseHrefFromDOM()??(0,w.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return K(this._baseHref,R)}path(R=!1){const O=this._platformLocation.pathname+se(this._platformLocation.search),Z=this._platformLocation.hash;return Z&&R?`${O}${Z}`:O}pushState(R,O,Z,ie){const be=this.prepareExternalUrl(Z+se(ie));this._platformLocation.pushState(R,O,be)}replaceState(R,O,Z,ie){const be=this.prepareExternalUrl(Z+se(ie));this._platformLocation.replaceState(R,O,be)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}static#e=this.\u0275fac=function(O){return new(O||T)(w.LFG(we),w.LFG(Oe,8))};static#t=this.\u0275prov=w.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})(),Be=(()=>{class T extends qe{constructor(R,O){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=O&&(this._baseHref=O)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let O=this._platformLocation.hash;return null==O&&(O="#"),O.length>0?O.substring(1):O}prepareExternalUrl(R){const O=K(this._baseHref,R);return O.length>0?"#"+O:O}pushState(R,O,Z,ie){let be=this.prepareExternalUrl(Z+se(ie));0==be.length&&(be=this._platformLocation.pathname),this._platformLocation.pushState(R,O,be)}replaceState(R,O,Z,ie){let be=this.prepareExternalUrl(Z+se(ie));0==be.length&&(be=this._platformLocation.pathname),this._platformLocation.replaceState(R,O,be)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}static#e=this.\u0275fac=function(O){return new(O||T)(w.LFG(we),w.LFG(Oe,8))};static#t=this.\u0275prov=w.Yz7({token:T,factory:T.\u0275fac})}return T})(),it=(()=>{class T{constructor(R){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=R;const O=this._locationStrategy.getBaseHref();this._basePath=function ge(T){if(new RegExp("^(https?:)?//").test(T)){const[,R]=T.split(/\/\/[^\/]+/);return R}return T}(Y(rn(O))),this._locationStrategy.onPopState(Z=>{this._subject.emit({url:this.path(!0),pop:!0,state:Z.state,type:Z.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(R=!1){return this.normalize(this._locationStrategy.path(R))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(R,O=""){return this.path()==this.normalize(R+se(O))}normalize(R){return T.stripTrailingSlash(function Wt(T,F){if(!T||!F.startsWith(T))return F;const R=F.substring(T.length);return""===R||["/",";","?","#"].includes(R[0])?R:F}(this._basePath,rn(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._locationStrategy.prepareExternalUrl(R)}go(R,O="",Z=null){this._locationStrategy.pushState(Z,"",R,O),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+se(O)),Z)}replaceState(R,O="",Z=null){this._locationStrategy.replaceState(Z,"",R,O),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+se(O)),Z)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(R=0){this._locationStrategy.historyGo?.(R)}onUrlChange(R){return this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(O=>{this._notifyUrlChangeListeners(O.url,O.state)})),()=>{const O=this._urlChangeListeners.indexOf(R);this._urlChangeListeners.splice(O,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(R="",O){this._urlChangeListeners.forEach(Z=>Z(R,O))}subscribe(R,O,Z){return this._subject.subscribe({next:R,error:O,complete:Z})}static#e=this.normalizeQueryParams=se;static#t=this.joinWithSlash=K;static#n=this.stripTrailingSlash=Y;static#r=this.\u0275fac=function(O){return new(O||T)(w.LFG(qe))};static#i=this.\u0275prov=w.Yz7({token:T,factory:function(){return function ht(){return new it((0,w.LFG)(qe))}()},providedIn:"root"})}return T})();function rn(T){return T.replace(/\/index.html$/,"")}function ki(T,F){F=encodeURIComponent(F);for(const R of T.split(";")){const O=R.indexOf("="),[Z,ie]=-1==O?[R,""]:[R.slice(0,O),R.slice(O+1)];if(Z.trim()===F)return decodeURIComponent(ie)}return null}let Bn=(()=>{class T{static#e=this.\u0275fac=function(O){return new(O||T)};static#t=this.\u0275mod=w.oAB({type:T});static#n=this.\u0275inj=w.cJS({})}return T})();const qi="browser",Ii="server";function Zi(T){return T===Ii}let ei=(()=>{class T{static#e=this.\u0275prov=(0,w.Yz7)({token:T,providedIn:"root",factory:()=>new xs((0,w.LFG)(oe),window)})}return T})();class xs{constructor(F,R){this.document=F,this.window=R,this.offset=()=>[0,0]}setOffset(F){this.offset=Array.isArray(F)?()=>F:F}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(F){this.supportsScrolling()&&this.window.scrollTo(F[0],F[1])}scrollToAnchor(F){if(!this.supportsScrolling())return;const R=function uu(T,F){const R=T.getElementById(F)||T.getElementsByName(F)[0];if(R)return R;if("function"==typeof T.createTreeWalker&&T.body&&"function"==typeof T.body.attachShadow){const O=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let Z=O.currentNode;for(;Z;){const ie=Z.shadowRoot;if(ie){const be=ie.getElementById(F)||ie.querySelector(`[name="${F}"]`);if(be)return be}Z=O.nextNode()}}return null}(this.document,F);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration(F){this.supportsScrolling()&&(this.window.history.scrollRestoration=F)}scrollToElement(F){const R=F.getBoundingClientRect(),O=R.left+this.window.pageXOffset,Z=R.top+this.window.pageYOffset,ie=this.offset();this.window.scrollTo(O-ie[0],Z-ie[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Li{}},5879:(Tt,Se,V)=>{V.d(Se,{$8M:()=>pc,$WT:()=>Gs,$Z:()=>g_,AFp:()=>Ja,AaK:()=>se,BQk:()=>Af,CRH:()=>YT,DdM:()=>Uy,EJc:()=>uv,F$t:()=>Cf,F4k:()=>K_,FYo:()=>i_,FiY:()=>yl,Flj:()=>_s,GfV:()=>Lc,HDt:()=>B0,Hsn:()=>Q_,JOm:()=>No,LFG:()=>$e,Lbi:()=>Pp,Lck:()=>EA,MMx:()=>Sa,NdJ:()=>Mg,Ojb:()=>Ol,OlP:()=>bn,Oqu:()=>ay,P3R:()=>Rv,PXZ:()=>DC,Q6J:()=>W_,QGY:()=>gn,Qsj:()=>Fc,R0b:()=>v,RDi:()=>hv,Rgc:()=>Qu,SBq:()=>kc,Sil:()=>yD,Suo:()=>g0,TTD:()=>rc,TgZ:()=>Tf,Tol:()=>iy,VuI:()=>oS,X6Q:()=>xC,XFs:()=>St,Xpm:()=>ao,Xq5:()=>EE,Xts:()=>Ya,Y36:()=>Bl,YKP:()=>VT,Yjl:()=>ou,Yz7:()=>bt,Z0I:()=>ln,ZZ4:()=>BD,_Bn:()=>Oy,_UZ:()=>q_,_c5:()=>ZC,_uU:()=>rT,aQg:()=>jD,c2e:()=>gD,cJS:()=>Hn,cg1:()=>gy,dDg:()=>Vt,dqk:()=>mn,eFA:()=>qA,eJc:()=>qf,eoX:()=>nn,f3M:()=>at,g9A:()=>Ov,gHi:()=>wa,h0i:()=>el,hGG:()=>KC,hij:()=>qg,iGM:()=>p0,ifc:()=>Fe,ip1:()=>av,jDz:()=>ed,kL8:()=>dI,ktI:()=>Ta,lG2:()=>cs,lqb:()=>Ea,lri:()=>Nt,n5z:()=>bh,oAB:()=>zo,q4F:()=>$v,qFp:()=>uS,qLn:()=>Hu,qZA:()=>bg,rWj:()=>lt,rg0:()=>Do,sBO:()=>NC,s_b:()=>cm,soG:()=>rd,tBr:()=>Ec,tb:()=>OD,tdS:()=>ol,tp0:()=>md,uIk:()=>U_,vHH:()=>ge,vpe:()=>ba,wAp:()=>kf,xp6:()=>Qp,ynx:()=>Df,z2F:()=>mm,zSh:()=>Nl,zs3:()=>Lo});var w=V(8645),te=V(7394),b=V(5619),ue=V(5592),he=V(3019),oe=V(2096),we=V(3020),Ue=V(4664),Ce=V(3997);function K(n){for(let i in n)if(n[i]===K)return i;throw Error("Could not find renamed property on target object.")}function se(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(se).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function qe(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Oe=K({__forward_ref__:K});function He(n){return n.__forward_ref__=He,n.toString=function(){return se(this())},n}function Be(n){return it(n)?n():n}function it(n){return"function"==typeof n&&n.hasOwnProperty(Oe)&&n.__forward_ref__===He}function ht(n){return n&&!!n.\u0275providers}const rn="https://g.co/ng/security#xss";class ge extends Error{constructor(i,o){super(function Ne(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,o)),this.code=i}}function pe(n){return"string"==typeof n?n:null==n?"":String(n)}function Mt(n,i){throw new ge(-201,!1)}function pt(n,i){null==n&&function Ke(n,i,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,n,null,"!=")}function bt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Hn(n){return{providers:n.providers||[],imports:n.imports||[]}}function On(n){return Ar(n,Wr)||Ar(n,Ct)}function ln(n){return null!==On(n)}function Ar(n,i){return n.hasOwnProperty(i)?n[i]:null}function as(n){return n&&(n.hasOwnProperty(Vn)||n.hasOwnProperty(yr))?n[Vn]:null}const Wr=K({\u0275prov:K}),Vn=K({\u0275inj:K}),Ct=K({ngInjectableDef:K}),yr=K({ngInjectorDef:K});var St=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(St||{});let kt;function Bt(){return kt}function kn(n){const i=kt;return kt=n,i}function qn(n,i,o){const u=On(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&St.Optional?null:void 0!==i?i:void Mt(se(n))}const mn=globalThis,gr={},mr="__NG_DI_FLAG__",qr="ngTempTokenPath",J=/\n/gm,$="__source";let j;function re(n){const i=j;return j=n,i}function Le(n,i=St.Default){if(void 0===j)throw new ge(-203,!1);return null===j?qn(n,void 0,i):j.get(n,i&St.Optional?null:void 0,i)}function $e(n,i=St.Default){return(Bt()||Le)(Be(n),i)}function at(n,i=St.Default){return $e(n,qt(i))}function qt(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ft(n){const i=[];for(let o=0;o<n.length;o++){const u=Be(n[o]);if(Array.isArray(u)){if(0===u.length)throw new ge(900,!1);let l,f=St.Default;for(let m=0;m<u.length;m++){const I=u[m],C=vi(I);"number"==typeof C?-1===C?l=I.token:f|=C:l=I}i.push($e(l,f))}else i.push($e(u))}return i}function An(n,i){return n[mr]=i,n.prototype[mr]=i,n}function vi(n){return n[mr]}function ve(n){return{toString:n}.toString()}var de=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(de||{}),Fe=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fe||{});const ut={},Xe=[],Lt=K({\u0275cmp:K}),Kt=K({\u0275dir:K}),Pn=K({\u0275pipe:K}),Un=K({\u0275mod:K}),Ee=K({\u0275fac:K}),ki=K({__NG_ELEMENT_ID__:K}),Yr=K({__NG_ENV_ID__:K});function cn(n,i,o){let u=n.length;for(;;){const l=n.indexOf(i,o);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const f=i.length;if(l+f===u||n.charCodeAt(l+f)<=32)return l}o=l+1}}function Ss(n,i,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const f=o[u++],m=o[u++],I=o[u++];n.setAttribute(i,m,I,f)}else{const f=l,m=o[++u];tt(f)?n.setProperty(i,f,m):n.setAttribute(i,f,m),u++}}return u}function Vr(n){return 3===n||4===n||6===n}function tt(n){return 64===n.charCodeAt(0)}function bs(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const l=i[u];"number"==typeof l?o=l:0===o||dt(n,o,l,null,-1===o||2===o?i[++u]:null)}}return n}function dt(n,i,o,u,l){let f=0,m=n.length;if(-1===i)m=-1;else for(;f<n.length;){const I=n[f++];if("number"==typeof I){if(I===i){m=-1;break}if(I>i){m=f-1;break}}}for(;f<n.length;){const I=n[f];if("number"==typeof I)break;if(I===o){if(null===u)return void(null!==l&&(n[f+1]=l));if(u===n[f+1])return void(n[f+2]=l)}f++,null!==u&&f++,null!==l&&f++}-1!==m&&(n.splice(m,0,i),f=m+1),n.splice(f++,0,o),null!==u&&n.splice(f++,0,u),null!==l&&n.splice(f++,0,l)}const js="ng-template";function $s(n,i,o){let u=0,l=!0;for(;u<n.length;){let f=n[u++];if("string"==typeof f&&l){const m=n[u++];if(o&&"class"===f&&-1!==cn(m.toLowerCase(),i,0))return!0}else{if(1===f){for(;u<n.length&&"string"==typeof(f=n[u++]);)if(f.toLowerCase()===i)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function Ra(n){return 4===n.type&&n.value!==js}function Pa(n,i,o){return i===(4!==n.type||o?n.value:js)}function Yu(n,i,o){let u=4;const l=n.attrs||[],f=function _r(n){for(let i=0;i<n.length;i++)if(Vr(n[i]))return i;return n.length}(l);let m=!1;for(let I=0;I<i.length;I++){const C=i[I];if("number"!=typeof C){if(!m)if(4&u){if(u=2|1&u,""!==C&&!Pa(n,C,o)||""===C&&1===i.length){if(Jr(u))return!1;m=!0}}else{const x=8&u?C:i[++I];if(8&u&&null!==n.attrs){if(!$s(n.attrs,x,o)){if(Jr(u))return!1;m=!0}continue}const q=Hs(8&u?"class":C,l,Ra(n),o);if(-1===q){if(Jr(u))return!1;m=!0;continue}if(""!==x){let ne;ne=q>f?"":l[q+1].toLowerCase();const le=8&u?ne:null;if(le&&-1!==cn(le,x,0)||2&u&&x!==ne){if(Jr(u))return!1;m=!0}}}}else{if(!m&&!Jr(u)&&!Jr(C))return!1;if(m&&Jr(C))continue;m=!1,u=C|1&u}}return Jr(u)||m}function Jr(n){return 0==(1&n)}function Hs(n,i,o,u){if(null===i)return-1;let l=0;if(u||!o){let f=!1;for(;l<i.length;){const m=i[l];if(m===n)return l;if(3===m||6===m)f=!0;else{if(1===m||2===m){let I=i[++l];for(;"string"==typeof I;)I=i[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=f?1:2}return-1}return function Xr(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,n)}function Er(n,i,o=!1){for(let u=0;u<i.length;u++)if(Yu(n,i[u],o))return!0;return!1}function ru(n,i){e:for(let o=0;o<i.length;o++){const u=i[o];if(n.length===u.length){for(let l=0;l<n.length;l++)if(n[l]!==u[l])continue e;return!0}}return!1}function oo(n,i){return n?":not("+i.trim()+")":i}function ui(n){let i=n[0],o=1,u=2,l="",f=!1;for(;o<n.length;){let m=n[o];if("string"==typeof m)if(2&u){const I=n[++o];l+="["+m+(I.length>0?'="'+I+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Jr(m)&&(i+=oo(f,l),l=""),u=m,f=f||!Jr(u);o++}return""!==l&&(i+=oo(f,l)),i}function ao(n){return ve(()=>{const i=Go(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===de.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Fe.Emulated,styles:n.styles||Xe,_:null,schemas:n.schemas||null,tView:null,id:""};Wo(o);const u=n.dependencies;return o.directiveDefs=ls(u,!1),o.pipeDefs=ls(u,!0),o.id=function au(n){let i=0;const o=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const l of o)i=Math.imul(31,i)+l.charCodeAt(0)<<0;return i+=2147483648,"c"+i}(o),o})}function uo(n){return Xt(n)||Ir(n)}function Fi(n){return null!==n}function zo(n){return ve(()=>({type:n.type,bootstrap:n.bootstrap||Xe,declarations:n.declarations||Xe,imports:n.imports||Xe,exports:n.exports||Xe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function su(n,i){if(null==n)return ut;const o={};for(const u in n)if(n.hasOwnProperty(u)){let l=n[u],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),o[l]=u,i&&(i[l]=f)}return o}function cs(n){return ve(()=>{const i=Go(n);return Wo(i),i})}function ou(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Xt(n){return n[Lt]||null}function Ir(n){return n[Kt]||null}function Sr(n){return n[Pn]||null}function Gs(n){const i=Xt(n)||Ir(n)||Sr(n);return null!==i&&i.standalone}function br(n,i){const o=n[Un]||null;if(!o&&!0===i)throw new Error(`Type ${se(n)} does not have '\u0275mod' property.`);return o}function Go(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:n.inputs||ut,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Xe,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:su(n.inputs,i),outputs:su(n.outputs)}}function Wo(n){n.features?.forEach(i=>i(n))}function ls(n,i){if(!n)return null;const o=i?Sr:uo;return()=>("function"==typeof n?n():n).map(u=>o(u)).filter(Fi)}const Mn=0,nt=1,Rt=2,dn=3,Ur=4,Rs=5,ur=6,Ei=7,Bn=8,qi=9,Ii=10,xt=11,wr=12,lo=13,Zi=14,hn=15,Ps=16,Ms=17,ei=18,xs=19,uu=20,ti=21,Li=22,Ma=23,Ki=24,Ht=25,ho=1,jn=2,En=7,ni=9,Jn=11;function Zr(n){return Array.isArray(n)&&"object"==typeof n[ho]}function ri(n){return Array.isArray(n)&&!0===n[ho]}function lu(n){return 0!=(4&n.flags)}function wi(n){return n.componentOffset>-1}function ps(n){return 1==(1&n.flags)}function Cn(n){return!!n.template}function fo(n){return 0!=(512&n[Rt])}function Vi(n,i){return n.hasOwnProperty(Ee)?n[Ee]:null}const cr=Symbol("SIGNAL");function Ui(n,i,o={}){return i[cr]=n,Object.assign(i,o)}function vo(n,i){return(null===n||"object"!=typeof n)&&Object.is(n,i)}let Eo=mn.WeakRef??class sl{constructor(i){this.ref=i}deref(){return this.ref}},Io=0,Kr=null,ms=!1;function Zn(n){const i=Kr;return Kr=n,i}class wo{constructor(){this.id=Io++,this.ref=function qs(n){return new Eo(n)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[i,o]of this.producers){const u=o.producerNode.deref();if(null!=u&&o.atTrackingVersion===this.trackingVersion){if(u.producerPollStatus(o.seenValueVersion))return!0}else this.producers.delete(i),u?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const i=ms;ms=!0;try{for(const[o,u]of this.consumers){const l=u.consumerNode.deref();null!=l&&l.trackingVersion===u.atTrackingVersion?l.onConsumerDependencyMayHaveChanged():(this.consumers.delete(o),l?.producers.delete(this.id))}}finally{ms=i}}producerAccessed(){if(ms)throw new Error("");if(null===Kr)return;let i=Kr.producers.get(this.id);void 0===i?(i={consumerNode:Kr.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Kr.trackingVersion},Kr.producers.set(this.id,i),this.consumers.set(Kr.id,i)):(i.seenValueVersion=this.valueVersion,i.atTrackingVersion=Kr.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Kr?.consumerAllowSignalWrites}producerPollStatus(i){return this.valueVersion!==i||(this.onProducerUpdateValueVersion(),this.valueVersion!==i)}}function _s(n,i){const o=new La(n,i?.equal??vo);return Ui(o,o.signal.bind(o))}const Fa=Symbol("UNSET"),ys=Symbol("COMPUTING"),Ko=Symbol("ERRORED");class La extends wo{constructor(i,o){super(),this.computation=i,this.equal=o,this.value=Fa,this.error=null,this.stale=!0,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){this.stale||(this.stale=!0,this.producerMayHaveChanged())}onProducerUpdateValueVersion(){if(this.stale){if(this.value!==Fa&&this.value!==ys&&!this.consumerPollProducersForChange())return void(this.stale=!1);this.recomputeValue()}}recomputeValue(){if(this.value===ys)throw new Error("Detected cycle in computations.");const i=this.value;this.value=ys,this.trackingVersion++;const o=Zn(this);let u;try{u=this.computation()}catch(l){u=Ko,this.error=l}finally{Zn(o)}this.stale=!1,i!==Fa&&i!==Ko&&u!==Ko&&this.equal(i,u)?this.value=i:(this.value=u,this.valueVersion++)}signal(){if(this.onProducerUpdateValueVersion(),this.producerAccessed(),this.value===Ko)throw this.error;return this.value}}let Qo=function fu(){throw new Error};function Yo(){Qo()}class Zs extends wo{constructor(i,o){super(),this.value=i,this.equal=o,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){}onProducerUpdateValueVersion(){}set(i){this.producerUpdatesAllowed||Yo(),this.equal(this.value,i)||(this.value=i,this.valueVersion++,this.producerMayHaveChanged())}update(i){this.producerUpdatesAllowed||Yo(),this.set(i(this.value))}mutate(i){this.producerUpdatesAllowed||Yo(),i(this.value),this.valueVersion++,this.producerMayHaveChanged()}asReadonly(){return void 0===this.readonlySignal&&(this.readonlySignal=Ui(this,()=>this.signal())),this.readonlySignal}signal(){return this.producerAccessed(),this.value}}function ol(n,i){const o=new Zs(n,i?.equal??vo);return Ui(o,o.signal.bind(o),{set:o.set.bind(o),update:o.update.bind(o),mutate:o.mutate.bind(o),asReadonly:o.asReadonly.bind(o)})}function Do(n){const i=Zn(null);try{return n()}finally{Zn(i)}}const Ks=()=>{};class Jo extends wo{constructor(i,o,u){super(),this.watch=i,this.schedule=o,this.dirty=!1,this.cleanupFn=Ks,this.registerOnCleanup=l=>{this.cleanupFn=l},this.consumerAllowSignalWrites=u}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const i=Zn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Ks,this.watch(this.registerOnCleanup)}finally{Zn(i)}}cleanup(){this.cleanupFn()}}class nc{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function rc(){return Ua}function Ua(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ao),al}function al(){const n=F(this),i=n?.current;if(i){const o=n.previous;if(o===ut)n.previous=i;else for(let u in i)o[u]=i[u];n.current=null,this.ngOnChanges(i)}}function Ao(n,i,o,u){const l=this.declaredInputs[o],f=F(n)||function R(n,i){return n[T]=i}(n,{previous:ut,current:null}),m=f.current||(f.current={}),I=f.previous,C=I[l];m[l]=new nc(C&&C.currentValue,i,I===ut),n[u]=i}rc.ngInherit=!0;const T="__ngSimpleChanges__";function F(n){return n[T]||null}const ie=function(n,i,o){};function At(n){for(;Array.isArray(n);)n=n[Mn];return n}function on(n,i){return At(i[n])}function Pt(n,i){return At(i[n.index])}function en(n,i){return n.data[i]}function $n(n,i){const o=i[n];return Zr(o)?o:o[Mn]}function Br(n,i){return null==i?null:n[i]}function Ti(n){n[Ms]=0}function Xo(n){1024&n[Rt]||(n[Rt]|=1024,pu(n,1))}function Ih(n){1024&n[Rt]&&(n[Rt]&=-1025,pu(n,-1))}function pu(n,i){let o=n[dn];if(null===o)return;o[Rs]+=i;let u=o;for(o=o[dn];null!==o&&(1===i&&1===u[Rs]||-1===i&&0===u[Rs]);)o[Rs]+=i,u=o,o=o[dn]}function gu(n,i){if(256==(256&n[Rt]))throw new ge(911,!1);null===n[ti]&&(n[ti]=[]),n[ti].push(i)}const $t={lFrame:oa(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ic(){return $t.bindingsEnabled}function Kn(){return null!==$t.skipHydrationRootTNode}function Ve(){return $t.lFrame.lView}function an(){return $t.lFrame.tView}function tn(){let n=yu();for(;null!==n&&64===n.type;)n=n.parent;return n}function yu(){return $t.lFrame.currentTNode}function jr(n,i){const o=$t.lFrame;o.currentTNode=n,o.isParent=i}function ll(){return $t.lFrame.isParent}function dl(){$t.lFrame.isParent=!1}function Ns(){return $t.lFrame.bindingIndex++}function pl(n,i){const o=$t.lFrame;o.bindingIndex=o.bindingRootIndex=n,ia(i)}function ia(n){$t.lFrame.currentDirectiveIndex=n}function ac(){return $t.lFrame.currentQueryIndex}function Eu(n){$t.lFrame.currentQueryIndex=n}function cd(n){const i=n[nt];return 2===i.type?i.declTNode:1===i.type?n[ur]:null}function Ys(n,i,o){if(o&St.SkipSelf){let l=i,f=n;for(;!(l=l.parent,null!==l||o&St.Host||(l=cd(f),null===l||(f=f[Zi],10&l.type))););if(null===l)return!1;i=l,n=f}const u=$t.lFrame=sa();return u.currentTNode=i,u.lView=n,!0}function Iu(n){const i=sa(),o=n[nt];$t.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function sa(){const n=$t.lFrame,i=null===n?null:n.child;return null===i?oa(n):i}function oa(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function uc(){const n=$t.lFrame;return $t.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const wu=uc;function aa(){const n=uc();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function lr(){return $t.lFrame.selectedIndex}function Co(n){$t.lFrame.selectedIndex=n}function er(){const n=$t.lFrame;return en(n.tView,n.selectedIndex)}let _=!0;function A(){return _}function N(n){_=n}function G(n,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const f=n.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:B}=f;m&&(n.contentHooks??=[]).push(-o,m),I&&((n.contentHooks??=[]).push(o,I),(n.contentCheckHooks??=[]).push(o,I)),C&&(n.viewHooks??=[]).push(-o,C),x&&((n.viewHooks??=[]).push(o,x),(n.viewCheckHooks??=[]).push(o,x)),null!=B&&(n.destroyHooks??=[]).push(o,B)}}function ee(n,i,o){vt(n,i,3,o)}function je(n,i,o,u){(3&n[Rt])===o&&vt(n,i,o,u)}function Et(n,i){let o=n[Rt];(3&o)===i&&(o&=8191,o+=1,n[Rt]=o)}function vt(n,i,o,u){const f=u??-1,m=i.length-1;let I=0;for(let C=void 0!==u?65535&n[Ms]:0;C<m;C++)if("number"==typeof i[C+1]){if(I=i[C],null!=u&&I>=u)break}else i[C]<0&&(n[Ms]+=65536),(I<f||-1==f)&&(di(n,o,i,C),n[Ms]=(4294901760&n[Ms])+C+2),C++}function In(n,i){ie(4,n,i);const o=Zn(null);try{i.call(n)}finally{Zn(o),ie(5,n,i)}}function di(n,i,o,u){const l=o[u]<0,f=o[u+1],I=n[l?-o[u]:o[u]];l?n[Rt]>>13<n[Ms]>>16&&(3&n[Rt])===i&&(n[Rt]+=8192,In(I,f)):In(I,f)}const Bi=-1;class vs{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function dc(n){return n!==Bi}function bo(n){return 32767&n}function ja(n,i){let o=function Ch(n){return n>>16}(n),u=i;for(;o>0;)u=u[Zi],o--;return u}let Du=!0;function hd(n){const i=Du;return Du=n,i}const Au=255,Cu=5;let hc=0;const Ro={};function ca(n,i){const o=$r(n,i);if(-1!==o)return o;const u=i[nt];u.firstCreatePass&&(n.injectorIndex=i.length,fc(u.data,n),fc(i,null),fc(u.blueprint,null));const l=la(n,i),f=n.injectorIndex;if(dc(l)){const m=bo(l),I=ja(l,i),C=I[nt].data;for(let x=0;x<8;x++)i[f+x]=I[m+x]|C[m+x]}return i[f+8]=l,f}function fc(n,i){n.push(0,0,0,0,0,0,0,0,i)}function $r(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function la(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,l=i;for(;null!==l;){if(u=sp(l),null===u)return Bi;if(o++,l=l[Zi],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return Bi}function Po(n,i,o){!function ym(n,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(ki)&&(u=o[ki]),null==u&&(u=o[ki]=hc++);const l=u&Au;i.data[n+(l>>Cu)]|=1<<l}(n,i,o)}function ip(n,i,o){if(o&St.Optional||void 0!==n)return n;Mt()}function ze(n,i,o,u){if(o&St.Optional&&void 0===u&&(u=null),!(o&(St.Self|St.Host))){const l=n[qi],f=kn(void 0);try{return l?l.get(i,u,o&St.Optional):qn(i,u,o&St.Optional)}finally{kn(f)}}return ip(u,0,o)}function Dr(n,i,o,u=St.Default,l){if(null!==n){if(2048&i[Rt]&&!(u&St.Self)){const m=function Em(n,i,o,u,l){let f=n,m=i;for(;null!==f&&null!==m&&2048&m[Rt]&&!(512&m[Rt]);){const I=hi(f,m,o,u|St.Self,Ro);if(I!==Ro)return I;let C=f.parent;if(!C){const x=m[uu];if(x){const B=x.get(o,Ro,u);if(B!==Ro)return B}C=sp(m),m=m[Zi]}f=C}return l}(n,i,o,u,Ro);if(m!==Ro)return m}const f=hi(n,i,o,u,Ro);if(f!==Ro)return f}return ze(i,o,u,l)}function hi(n,i,o,u,l){const f=function vm(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(ki)?n[ki]:void 0;return"number"==typeof i?i>=0?i&Au:Sh:i}(o);if("function"==typeof f){if(!Ys(i,n,u))return u&St.Host?ip(l,0,u):ze(i,o,u,l);try{let m;if(m=f(u),null!=m||u&St.Optional)return m;Mt()}finally{wu()}}else if("number"==typeof f){let m=null,I=$r(n,i),C=Bi,x=u&St.Host?i[hn][ur]:null;for((-1===I||u&St.SkipSelf)&&(C=-1===I?la(n,i):i[I+8],C!==Bi&&_e(u,!1)?(m=i[nt],I=bo(C),i=ja(C,i)):I=-1);-1!==I;){const B=i[nt];if(st(f,I,B.data)){const q=gl(I,i,o,m,u,x);if(q!==Ro)return q}C=i[I+8],C!==Bi&&_e(u,i[nt].data[I+8]===x)&&st(f,I,i)?(m=B,I=bo(C),i=ja(C,i)):I=-1}}return l}function gl(n,i,o,u,l,f){const m=i[nt],I=m.data[n+8],B=mt(I,m,o,null==u?wi(I)&&Du:u!=m&&0!=(3&I.type),l&St.Host&&f===I);return null!==B?yt(i,m,B,I):Ro}function mt(n,i,o,u,l){const f=n.providerIndexes,m=i.data,I=1048575&f,C=n.directiveStart,B=f>>20,ne=l?I+B:n.directiveEnd;for(let le=u?I:I+B;le<ne;le++){const Re=m[le];if(le<C&&o===Re||le>=C&&Re.type===o)return le}if(l){const le=m[C];if(le&&Cn(le)&&le.type===o)return C}return null}function yt(n,i,o,u){let l=n[o];const f=i.data;if(function ua(n){return n instanceof vs}(l)){const m=l;m.resolving&&function Je(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new ge(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Ze(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():pe(n)}(f[o]));const I=hd(m.canSeeViewProviders);m.resolving=!0;const x=m.injectImpl?kn(m.injectImpl):null;Ys(n,u,St.Default);try{l=n[o]=m.factory(void 0,f,n,u),i.firstCreatePass&&o>=u.directiveStart&&function H(n,i,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:f}=i.type.prototype;if(u){const m=Ua(i);(o.preOrderHooks??=[]).push(n,m),(o.preOrderCheckHooks??=[]).push(n,m)}l&&(o.preOrderHooks??=[]).push(0-n,l),f&&((o.preOrderHooks??=[]).push(n,f),(o.preOrderCheckHooks??=[]).push(n,f))}(o,f[o],i)}finally{null!==x&&kn(x),hd(I),m.resolving=!1,wu()}}return l}function st(n,i,o){return!!(o[i+(n>>Cu)]&1<<n)}function _e(n,i){return!(n&St.Self||n&St.Host&&i)}class Ai{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Dr(this._tNode,this._lView,i,qt(u),o)}}function Sh(){return new Ai(tn(),Ve())}function bh(n){return ve(()=>{const i=n.prototype.constructor,o=i[Ee]||fd(i),u=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==u;){const f=l[Ee]||fd(l);if(f&&f!==o)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function fd(n){return it(n)?()=>{const i=fd(Be(n));return i&&i()}:Vi(n)}function sp(n){const i=n[nt],o=i.type;return 2===o?i.declTNode:1===o?n[ur]:null}function pc(n){return function $a(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const f=o[l];if(Vr(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(f===i)return o[l+1];l+=2}}}return null}(tn(),n)}const ml="__parameters__";function Es(n,i,o){return ve(()=>{const u=function zt(n){return function(...o){if(n){const u=n(...o);for(const l in u)this[l]=u[l]}}}(i);function l(...f){if(this instanceof l)return u.apply(this,f),this;const m=new l(...f);return I.annotation=m,I;function I(C,x,B){const q=C.hasOwnProperty(ml)?C[ml]:Object.defineProperty(C,ml,{value:[]})[ml];for(;q.length<=B;)q.push(null);return(q[B]=q[B]||[]).push(m),C}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}function ha(n,i){n.forEach(o=>Array.isArray(o)?ha(o,i):i(o))}function Ji(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function yc(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function bu(n,i){const o=[];for(let u=0;u<n;u++)o.push(i);return o}function Ci(n,i,o){let u=vc(n,i);return u>=0?n[1|u]=o:(u=~u,function Ph(n,i,o,u){let l=n.length;if(l==i)n.push(o,u);else if(1===l)n.push(u,n[0]),n[0]=o;else{for(l--,n.push(n[l-1],n[l]);l>i;)n[l]=n[l-2],l--;n[i]=o,n[i+1]=u}}(n,u,i,o)),u}function Xi(n,i){const o=vc(n,i);if(o>=0)return n[1|o]}function vc(n,i){return function fa(n,i,o){let u=0,l=n.length>>o;for(;l!==u;){const f=u+(l-u>>1),m=n[f<<o];if(i===m)return f<<o;m>i?l=f:u=f+1}return~(l<<o)}(n,i,1)}const Ec=An(Es("Inject",n=>({token:n})),-1),yl=An(Es("Optional"),8),md=An(Es("SkipSelf"),4);function Nu(n){return 128==(128&n.flags)}var No=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(No||{});const Mm=/^>|^->|<!--|-->|--!>|<!-$/g,Ga=/(<|>)/,Js="\u200b$1\u200b";const Oo=new Map;let ko=0;const Ou="__ngContext__";function pi(n,i){Zr(i)?(n[Ou]=i[xs],function Wa(n){Oo.set(n[xs],n)}(i)):n[Ou]=i}let Xs;function wd(n,i){return Xs(n,i)}function eo(n){const i=n[dn];return ri(i)?i[dn]:i}function fn(n){return qa(n[wr])}function pn(n){return qa(n[Ur])}function qa(n){for(;null!==n&&!ri(n);)n=n[Ur];return n}function Za(n,i,o,u,l){if(null!=u){let f,m=!1;ri(u)?f=u:Zr(u)&&(m=!0,u=u[Mn]);const I=At(u);0===n&&null!==o?null==l?p(i,o,I):d(i,o,I,l||null,!0):1===n&&null!==o?d(i,o,I,l||null,!0):2===n?function Fo(n,i,o){const u=Q(n,i);u&&function M(n,i,o,u){n.removeChild(i,o,u)}(n,u,i,o)}(i,I,m):3===n&&i.destroyNode(I),null!=f&&function vp(n,i,o,u,l){const f=o[En];f!==At(o)&&Za(i,n,u,f,l);for(let I=Jn;I<o.length;I++){const C=o[I];Vu(C[nt],C,n,i,u,f)}}(i,n,f,o,l)}}function bc(n,i){return n.createComment(function Il(n){return n.replace(Mm,i=>i.replace(Ga,Js))}(i))}function oi(n,i,o){return n.createElement(i,o)}function zh(n,i){const o=n[ni],u=o.indexOf(i);Ih(i),o.splice(u,1)}function Al(n,i){if(n.length<=Jn)return;const o=Jn+i,u=n[o];if(u){const l=u[Ps];null!==l&&l!==n&&zh(l,u),i>0&&(n[o-1][Ur]=u[Ur]);const f=yc(n,Jn+i);!function Dd(n,i){Vu(n,i,i[xt],2,null,null),i[Mn]=null,i[ur]=null}(u[nt],u);const m=f[ei];null!==m&&m.detachView(f[nt]),u[dn]=null,u[Ur]=null,u[Rt]&=-129}return u}function Cl(n,i){if(!(256&i[Rt])){const o=i[xt];i[Ma]?.destroy(),i[Ki]?.destroy(),o.destroyNode&&Vu(n,i,o,3,null,null),function ya(n){let i=n[wr];if(!i)return Gh(n[nt],n);for(;i;){let o=null;if(Zr(i))o=i[wr];else{const u=i[Jn];u&&(o=u)}if(!o){for(;i&&!i[Ur]&&i!==n;)Zr(i)&&Gh(i[nt],i),i=i[dn];null===i&&(i=n),Zr(i)&&Gh(i[nt],i),o=i&&i[Ur]}i=o}}(i)}}function Gh(n,i){if(!(256&i[Rt])){i[Rt]&=-129,i[Rt]|=256,function Wh(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const l=i[o[u]];if(!(l instanceof vs)){const f=o[u+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const I=l[f[m]],C=f[m+1];ie(4,I,C);try{C.call(I)}finally{ie(5,I,C)}}else{ie(4,l,f);try{f.call(l)}finally{ie(5,l,f)}}}}}(n,i),function Om(n,i){const o=n.cleanup,u=i[Ei];if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const m=o[f+3];m>=0?u[m]():u[-m].unsubscribe(),f+=2}else o[f].call(u[o[f+1]]);null!==u&&(i[Ei]=null);const l=i[ti];if(null!==l){i[ti]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(n,i),1===i[nt].type&&i[xt].destroy();const o=i[Ps];if(null!==o&&ri(i[dn])){o!==i[dn]&&zh(o,i);const u=i[ei];null!==u&&u.detachView(n)}!function Ac(n){Oo.delete(n[xs])}(i)}}function va(n,i,o){return function g(n,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[Mn];{const{componentOffset:l}=u;if(l>-1){const{encapsulation:f}=n.data[u.directiveStart+l];if(f===Fe.None||f===Fe.Emulated)return null}return Pt(u,o)}}(n,i.parent,o)}function d(n,i,o,u,l){n.insertBefore(i,o,u,l)}function p(n,i,o){n.appendChild(i,o)}function y(n,i,o,u,l){null!==u?d(n,i,o,u,l):p(n,i,o)}function Q(n,i){return n.parentNode(i)}function Me(n,i,o){return _t(n,i,o)}let rt,qh,Zh,_t=function ot(n,i,o){return 40&n.type?Pt(n,o):null};function bi(n,i,o,u){const l=va(n,u,i),f=i[xt],I=Me(u.parent||i[ur],u,i);if(null!=l)if(Array.isArray(o))for(let C=0;C<o.length;C++)y(f,l,o[C],I,!1);else y(f,l,o,I,!1);void 0!==rt&&rt(f,u,i,o,l)}function to(n,i){if(null!==i){const o=i.type;if(3&o)return Pt(i,n);if(4&o)return Rc(-1,n[i.index]);if(8&o){const u=i.child;if(null!==u)return to(n,u);{const l=n[i.index];return ri(l)?Rc(-1,l):At(l)}}if(32&o)return wd(i,n)()||At(n[i.index]);{const u=Fu(n,i);return null!==u?Array.isArray(u)?u[0]:to(eo(n[hn]),u):to(n,i.next)}}return null}function Fu(n,i){return null!==i?n[hn][ur].projection[i.projection]:null}function Rc(n,i){const o=Jn+n+1;if(o<i.length){const u=i[o],l=u[nt].firstChild;if(null!==l)return to(u,l)}return i[En]}function Pc(n,i,o,u,l,f,m){for(;null!=o;){const I=u[o.index],C=o.type;if(m&&0===i&&(I&&pi(At(I),u),o.flags|=2),32!=(32&o.flags))if(8&C)Pc(n,i,o.child,u,l,f,!1),Za(i,n,l,I,f);else if(32&C){const x=wd(o,u);let B;for(;B=x();)Za(i,n,l,B,f);Za(i,n,l,I,f)}else 16&C?Fs(n,i,u,o,l,f):Za(i,n,l,I,f);o=m?o.projectionNext:o.next}}function Vu(n,i,o,u,l,f){Pc(o,u,n.firstChild,i,l,f,!1)}function Fs(n,i,o,u,l,f){const m=o[hn],C=m[ur].projection[u.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)Za(i,n,l,C[x],f);else{let x=C;const B=m[dn];Nu(u)&&(x.flags|=128),Pc(n,i,x,B,l,f,!0)}}function Mc(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function km(n,i,o){const{mergedAttrs:u,classes:l,styles:f}=o;null!==u&&Ss(n,i,u),null!==l&&Mc(n,i,l),null!==f&&function Cd(n,i,o){n.setAttribute(i,"style",o)}(n,i,f)}function hv(n){qh=n}function Fm(n){return function Sd(){if(void 0===Zh&&(Zh=null,mn.trustedTypes))try{Zh=mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zh}()?.createScriptURL(n)||n}class bl{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rn})`}}function Uu(n){return n instanceof bl?n.changingThisBreaksApplicationSecurity:n}function Rd(n,i){const o=function Kh(n){return n instanceof bl&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${rn})`)}return o===i}const _v=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Qa=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Qa||{});function Hm(n){const i=nf();return i?i.sanitize(Qa.URL,n)||"":Rd(n,"URL")?Uu(n):function xc(n){return(n=String(n)).match(_v)?n:"unsafe:"+n}(pe(n))}function zm(n){const i=nf();if(i)return Fm(i.sanitize(Qa.RESOURCE_URL,n)||"");if(Rd(n,"ResourceURL"))return Fm(Uu(n));throw new ge(904,!1)}function Rv(n,i,o){return function bv(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?zm:Hm}(i,o)(n)}function nf(){const n=Ve();return n&&n[Ii].sanitizer}class bn{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=bt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ya=new bn("ENVIRONMENT_INITIALIZER"),Gm=new bn("INJECTOR",-1),Pv=new bn("INJECTOR_DEF_TYPES");class Nr{get(i,o=gr){if(o===gr){const u=new Error(`NullInjectorError: No provider for ${se(i)}!`);throw u.name="NullInjectorError",u}return o}}function Wm(...n){return{\u0275providers:qm(0,n),\u0275fromNgModule:!0}}function qm(n,...i){const o=[],u=new Set;let l;const f=m=>{o.push(m)};return ha(i,m=>{const I=m;ro(I,f,[],u)&&(l||=[],l.push(I))}),void 0!==l&&Md(l,f),o}function Md(n,i){for(let o=0;o<n.length;o++){const{ngModule:u,providers:l}=n[o];Dp(l,f=>{i(f,u)})}}function ro(n,i,o,u){if(!(n=Be(n)))return!1;let l=null,f=as(n);const m=!f&&Xt(n);if(f||m){if(m&&!m.standalone)return!1;l=n}else{const C=n.ngModule;if(f=as(C),!f)return!1;l=C}const I=u.has(l);if(m){if(I)return!1;if(u.add(l),m.dependencies){const C="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const x of C)ro(x,i,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let x;u.add(l);try{ha(f.imports,B=>{ro(B,i,o,u)&&(x||=[],x.push(B))})}finally{}void 0!==x&&Md(x,i)}if(!I){const x=Vi(l)||(()=>new l);i({provide:l,useFactory:x,deps:Xe},l),i({provide:Pv,useValue:l,multi:!0},l),i({provide:Ya,useValue:()=>$e(l),multi:!0},l)}const C=f.providers;if(null!=C&&!I){const x=n;Dp(C,B=>{i(B,x)})}}}return l!==n&&void 0!==n.providers}function Dp(n,i){for(let o of n)ht(o)&&(o=o.\u0275providers),Array.isArray(o)?Dp(o,i):i(o)}const Zm=K({provide:String,useValue:K});function Ap(n){return null!==n&&"object"==typeof n&&Zm in n}function xl(n){return"function"==typeof n}const Nl=new bn("Set Injector scope."),xd={},sw={};let Cp;function Nd(){return void 0===Cp&&(Cp=new Nr),Cp}class Ea{}class Sp extends Ea{get destroyed(){return this._destroyed}constructor(i,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rp(i,m=>this.processProvider(m)),this.records.set(Gm,io(void 0,this)),l.has("environment")&&this.records.set(Ea,io(void 0,this));const f=this.records.get(Nl);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Pv.multi,Xe,St.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of i)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const o=re(this),u=kn(void 0);try{return i()}finally{re(o),kn(u)}}get(i,o=gr,u=St.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(Yr))return i[Yr](this);u=qt(u);const f=re(this),m=kn(void 0);try{if(!(u&St.SkipSelf)){let C=this.records.get(i);if(void 0===C){const x=function uw(n){return"function"==typeof n||"object"==typeof n&&n instanceof bn}(i)&&On(i);C=x&&this.injectableDefInScope(x)?io(bp(i),xd):null,this.records.set(i,C)}if(null!=C)return this.hydrate(i,C)}return(u&St.Self?Nd():this.parent).get(i,o=u&St.Optional&&o===gr?null:o)}catch(I){if("NullInjectorError"===I.name){if((I[qr]=I[qr]||[]).unshift(se(i)),f)throw I;return function Oi(n,i,o,u){const l=n[qr];throw i[$]&&l.unshift(i[$]),n.message=function Ho(n,i,o,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=se(i);if(Array.isArray(i))l=i.map(se).join(" -> ");else if("object"==typeof i){let f=[];for(let m in i)if(i.hasOwnProperty(m)){let I=i[m];f.push(m+":"+("string"==typeof I?JSON.stringify(I):se(I)))}l=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${n.replace(J,"\n  ")}`}("\n"+n.message,l,o,u),n.ngTokenPath=l,n[qr]=null,n}(I,i,"R3InjectorError",this.source)}throw I}finally{kn(m),re(f)}}resolveInjectorInitializers(){const i=re(this),o=kn(void 0);try{const l=this.get(Ya.multi,Xe,St.Self);for(const f of l)f()}finally{re(i),kn(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(se(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(i){let o=xl(i=Be(i))?i:Be(i&&i.provide);const u=function aw(n){return Ap(n)?io(void 0,n.useValue):io(Mv(n),xd)}(i);if(xl(i)||!0!==i.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=io(void 0,xd,!0),l.factory=()=>Ft(l.multi),this.records.set(o,l)),o=i,l.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===xd&&(o.value=sw,o.value=o.factory()),"object"==typeof o.value&&o.value&&function xv(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Be(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(i){const o=this._onDestroyHooks.indexOf(i);-1!==o&&this._onDestroyHooks.splice(o,1)}}function bp(n){const i=On(n),o=null!==i?i.factory:Vi(n);if(null!==o)return o;if(n instanceof bn)throw new ge(204,!1);if(n instanceof Function)return function ow(n){const i=n.length;if(i>0)throw bu(i,"?"),new ge(204,!1);const o=function ar(n){return n&&(n[Wr]||n[Ct])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new ge(204,!1)}function Mv(n,i,o){let u;if(xl(n)){const l=Be(n);return Vi(l)||bp(l)}if(Ap(n))u=()=>Be(n.useValue);else if(function Qm(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...Ft(n.deps||[]));else if(function Km(n){return!(!n||!n.useExisting)}(n))u=()=>$e(Be(n.useExisting));else{const l=Be(n&&(n.useClass||n.provide));if(!function Od(n){return!!n.deps}(n))return Vi(l)||bp(l);u=()=>new l(...Ft(n.deps))}return u}function io(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function Rp(n,i){for(const o of n)Array.isArray(o)?Rp(o,i):o&&ht(o)?Rp(o.\u0275providers,i):i(o)}const Ja=new bn("AppId",{providedIn:"root",factory:()=>Nv}),Nv="ng",Ov=new bn("Platform Initializer"),Pp=new bn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ol=new bn("CSP nonce",{providedIn:"root",factory:()=>function Sl(){if(void 0!==qh)return qh;if(typeof document<"u")return document;throw new ge(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ju=(n,i,o)=>null;function Vp(n,i,o=!1){return ju(n,i,o)}class dw{}class r_{}class Bv{resolveComponentFactory(i){throw function Ud(n){const i=Error(`No component factory found for ${se(n)}.`);return i.ngComponent=n,i}(i)}}let af=(()=>{class n{static#e=this.NULL=new Bv}return n})();function rs(){return Vl(tn(),Ve())}function Vl(n,i){return new kc(Pt(n,i))}let kc=(()=>{class n{constructor(o){this.nativeElement=o}static#e=this.__NG_ELEMENT_ID__=rs}return n})();function jp(n){return n instanceof kc?n.nativeElement:n}class i_{}let Fc=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function jd(){const n=Ve(),o=$n(tn().index,n);return(Zr(o)?o:n)[xt]}()}return n})(),jv=(()=>{class n{static#e=this.\u0275prov=bt({token:n,providedIn:"root",factory:()=>null})}return n})();class Lc{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const $v=new Lc("16.2.1"),Vc={};function wa(n){if(!Bt()&&!function z(){return j}())throw new ge(-203,!1)}function o_(n,i=null,o=null,u){const l=Zv(n,i,o,u);return l.resolveInjectorInitializers(),l}function Zv(n,i=null,o=null,u,l=new Set){const f=[o||Xe,Wm(n)];return u=u||("object"==typeof n?void 0:se(n)),new Sp(f,i||Nd(),u||null,l)}let Lo=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=gr;static#t=this.NULL=new Nr;static create(o,u){if(Array.isArray(o))return o_({name:""},u,o,"");{const l=o.name??"";return o_({name:l},o.parent,o.providers,l)}}static#n=this.\u0275prov=bt({token:n,providedIn:"any",factory:()=>$e(Gm)});static#r=this.__NG_ELEMENT_ID__=-1}return n})(),Ta=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Kv;static#t=this.__NG_ENV_ID__=o=>o}return n})();class uf extends Ta{constructor(i){super(),this._lView=i}onDestroy(i){return gu(this._lView,i),()=>function od(n,i){if(null===n[ti])return;const o=n[ti].indexOf(i);-1!==o&&n[ti].splice(o,1)}(this._lView,i)}}function Kv(){return new uf(Ve())}function $u(n){return n instanceof Function?n():n}let u_=(()=>{class n{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new ge(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const o of this.callbacks)o.invoke()}finally{this.runningCallbacks=!1;for(const o of this.deferredCallbacks)this.callbacks.add(o);this.deferredCallbacks.clear()}}register(o){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(o)}unregister(o){this.callbacks.delete(o),this.deferredCallbacks.delete(o)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}static#e=this.\u0275prov=bt({token:n,providedIn:"root",factory:()=>new n})}return n})();function cf(n){for(;n;){n[Rt]|=64;const i=eo(n);if(fo(n)&&!i)return n;n=i}return null}function Hd(n){return n.ngOriginalError}class Hu{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Hd(i);for(;o&&Hd(o);)o=Hd(o);return o||null}}const Gp=new bn("",{providedIn:"root",factory:()=>!1});class f_ extends wo{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(i){this._lView=i}onConsumerDependencyMayHaveChanged(){cf(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(i,o,u){const l=Zn(this);this.trackingVersion++;try{i(o,u)}finally{Zn(l)}}destroy(){this.trackingVersion++}}let Kp=null;function p_(){return Kp??=new f_,Kp}function Xv(n,i){return n[i]??p_()}function Ul(n,i){const o=p_();o.hasReadASignal&&(n[i]=Kp,o.lView=n,Kp=new f_)}const Gt={};function Qp(n){df(an(),Ve(),lr()+n,!1)}function df(n,i,o,u){if(!u)if(3==(3&i[Rt])){const f=n.preOrderCheckHooks;null!==f&&ee(i,f,o)}else{const f=n.preOrderHooks;null!==f&&je(i,f,0,o)}Co(o)}function Bl(n,i=St.Default){const o=Ve();return null===o?$e(n,i):Dr(tn(),o,Be(n),i)}function g_(){throw new Error("invalid")}function Yp(n,i,o,u,l,f,m,I,C,x,B){const q=i.blueprint.slice();return q[Mn]=l,q[Rt]=140|u,(null!==x||n&&2048&n[Rt])&&(q[Rt]|=2048),Ti(q),q[dn]=q[Zi]=n,q[Bn]=o,q[Ii]=m||n&&n[Ii],q[xt]=I||n&&n[xt],q[qi]=C||n&&n[qi]||null,q[ur]=f,q[xs]=function Dc(){return ko++}(),q[Li]=B,q[uu]=x,q[hn]=2==i.type?n[hn]:q,q}function Bc(n,i,o,u,l){let f=n.data[i];if(null===f)f=function m_(n,i,o,u,l){const f=yu(),m=ll(),C=n.data[i]=function w_(n,i,o,u,l,f){let m=i?i.injectorIndex:-1,I=0;return Kn()&&(I|=128),{type:o,index:u,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,o,i,u,l);return null===n.firstChild&&(n.firstChild=C),null!==f&&(m?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(n,i,o,u,l),function Xn(){return $t.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=o,f.value=u,f.attrs=l;const m=function ra(){const n=$t.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return jr(f,!0),f}function jl(n,i,o,u){if(0===o)return-1;const l=i.length;for(let f=0;f<o;f++)i.push(u),n.blueprint.push(u),n.data.push(null);return l}function __(n,i,o,u,l){const f=Xv(i,Ma),m=lr(),I=2&u;try{if(Co(-1),I&&i.length>Ht&&df(n,i,Ht,!1),ie(I?2:0,l),I)f.runInContext(o,u,l);else{const x=Zn(null);try{o(u,l)}finally{Zn(x)}}}finally{I&&null===i[Ma]&&Ul(i,Ma),Co(m),ie(I?3:1,l)}}function Jp(n,i,o){if(lu(i)){const u=Zn(null);try{const f=i.directiveEnd;for(let m=i.directiveStart;m<f;m++){const I=n.data[m];I.contentQueries&&I.contentQueries(1,o[m],m)}}finally{Zn(u)}}}function hf(n,i,o){ic()&&(function Iw(n,i,o,u){const l=o.directiveStart,f=o.directiveEnd;wi(o)&&function pf(n,i,o){const u=Pt(i,n),l=Gd(o);let m=16;o.signals?m=4096:o.onPush&&(m=64);const I=Zd(n,Yp(n,l,null,m,u,i,null,n[Ii].rendererFactory.createRenderer(u,o),null,null,null));n[i.index]=I}(i,o,n.data[l+o.componentOffset]),n.firstCreatePass||ca(o,i),pi(u,i);const m=o.initialInputs;for(let I=l;I<f;I++){const C=n.data[I],x=yt(i,n,I,o);pi(x,i),null!==m&&A_(0,I-l,x,C,0,m),Cn(C)&&($n(o.index,i)[Bn]=yt(i,n,I,o))}}(n,i,o,Pt(o,i)),64==(64&o.flags)&&ng(n,i,o))}function zd(n,i,o=Pt){const u=i.localNames;if(null!==u){let l=i.index+1;for(let f=0;f<u.length;f+=2){const m=u[f+1],I=-1===m?o(i,n):n[m];n[l++]=I}}}function Gd(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Wd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):i}function Wd(n,i,o,u,l,f,m,I,C,x,B){const q=Ht+u,ne=q+l,le=function y_(n,i){const o=[];for(let u=0;u<i;u++)o.push(u<n?null:Gt);return o}(q,ne),Re="function"==typeof x?x():x;return le[nt]={type:n,blueprint:le,template:o,queries:null,viewQuery:I,declTNode:i,data:le.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:C,consts:Re,incompleteFirstPass:!1,ssrId:B}}let I_=n=>null;function nE(n,i,o,u){for(let l in n)if(n.hasOwnProperty(l)){o=null===o?{}:o;const f=n[l];null===u?rE(o,i,l,f):u.hasOwnProperty(l)&&rE(o,i,u[l],f)}return o}function rE(n,i,o,u){n.hasOwnProperty(o)?n[o].push(i,u):n[o]=[i,u]}function tg(n,i,o,u){if(ic()){const l=null===u?null:{"":-1},f=function Tw(n,i){const o=n.directiveRegistry;let u=null,l=null;if(o)for(let f=0;f<o.length;f++){const m=o[f];if(Er(i,m.selectors,!1))if(u||(u=[]),Cn(m))if(null!==m.findHostDirectiveDefs){const I=[];l=l||new Map,m.findHostDirectiveDefs(m,I,l),u.unshift(...I,m),$l(n,i,I.length)}else u.unshift(m),$l(n,i,0);else l=l||new Map,m.findHostDirectiveDefs?.(m,u,l),u.push(m)}return null===u?null:[u,l]}(n,o);let m,I;null===f?m=I=null:[m,I]=f,null!==m&&sE(n,i,o,m,l,I),l&&function T_(n,i,o){if(i){const u=n.localNames=[];for(let l=0;l<i.length;l+=2){const f=o[i[l+1]];if(null==f)throw new ge(-301,!1);u.push(i[l],f)}}}(o,u,l)}o.mergedAttrs=bs(o.mergedAttrs,o.attrs)}function sE(n,i,o,u,l,f){for(let x=0;x<u.length;x++)Po(ca(o,i),n,u[x].type);!function D_(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,u.length);for(let x=0;x<u.length;x++){const B=u[x];B.providersResolver&&B.providersResolver(B)}let m=!1,I=!1,C=jl(n,i,u.length,null);for(let x=0;x<u.length;x++){const B=u[x];o.mergedAttrs=bs(o.mergedAttrs,B.hostAttrs),rg(n,o,i,C,B),qd(C,B,l),null!==B.contentQueries&&(o.flags|=4),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(o.flags|=64);const q=B.type.prototype;!m&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((n.preOrderHooks??=[]).push(o.index),m=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(o.index),I=!0),C++}!function is(n,i,o){const l=i.directiveEnd,f=n.data,m=i.attrs,I=[];let C=null,x=null;for(let B=i.directiveStart;B<l;B++){const q=f[B],ne=o?o.get(q):null,Re=ne?ne.outputs:null;C=nE(q.inputs,B,C,ne?ne.inputs:null),x=nE(q.outputs,B,x,Re);const Ye=null===C||null===m||Ra(i)?null:jc(C,B,m);I.push(Ye)}null!==C&&(C.hasOwnProperty("class")&&(i.flags|=8),C.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=I,i.inputs=C,i.outputs=x}(n,o,f)}function ng(n,i,o){const u=o.directiveStart,l=o.directiveEnd,f=o.index,m=function ud(){return $t.lFrame.currentDirectiveIndex}();try{Co(f);for(let I=u;I<l;I++){const C=n.data[I],x=i[I];ia(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&ww(C,x)}}finally{Co(-1),ia(m)}}function ww(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function $l(n,i,o){i.componentOffset=o,(n.components??=[]).push(i.index)}function qd(n,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=n;Cn(i)&&(o[""]=n)}}function rg(n,i,o,u,l){n.data[u]=l;const f=l.factory||(l.factory=Vi(l.type)),m=new vs(f,Cn(l),Bl);n.blueprint[u]=m,o[u]=m,function vw(n,i,o,u,l){const f=l.hostBindings;if(f){let m=n.hostBindingOpCodes;null===m&&(m=n.hostBindingOpCodes=[]);const I=~i.index;(function Ew(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(m)!=I&&m.push(I),m.push(o,u,f)}}(n,i,u,jl(n,o,l.hostVars,Gt),l)}function Vo(n,i,o,u,l,f){const m=Pt(n,i);!function ig(n,i,o,u,l,f,m){if(null==f)n.removeAttribute(i,l,o);else{const I=null==m?pe(f):m(f,u||"",l);n.setAttribute(i,l,I,o)}}(i[xt],m,f,n.value,o,u,l)}function A_(n,i,o,u,l,f){const m=f[i];if(null!==m)for(let I=0;I<m.length;)sg(u,o,m[I++],m[I++],m[I++])}function sg(n,i,o,u,l){const f=Zn(null);try{const m=n.inputTransforms;null!==m&&m.hasOwnProperty(u)&&(l=m[u].call(i,l)),null!==n.setInput?n.setInput(i,l,o,u):i[u]=l}finally{Zn(f)}}function jc(n,i,o){let u=null,l=0;for(;l<o.length;){const f=o[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(n.hasOwnProperty(f)){null===u&&(u=[]);const m=n[f];for(let I=0;I<m.length;I+=2)if(m[I]===i){u.push(f,m[I+1],o[l+1]);break}}l+=2}else l+=2;else l+=4}return u}function oE(n,i){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const f=o[u+1];if(-1!==f){const m=n.data[f];Eu(o[u]),m.contentQueries(2,i[f],f)}}}function Zd(n,i){return n[wr]?n[lo][Ur]=i:n[wr]=i,n[lo]=i,i}function S_(n,i,o){Eu(0);const u=Zn(null);try{i(n,o)}finally{Zn(u)}}function uE(n){return n[Ei]||(n[Ei]=[])}function og(n){return n.cleanup||(n.cleanup=[])}function ag(n,i){const o=n[qi],u=o?o.get(Hu,null):null;u&&u.handleError(i)}function ug(n,i,o,u,l){for(let f=0;f<o.length;){const m=o[f++],I=o[f++];sg(n.data[m],i[m],u,I,l)}}function b_(n,i){const o=$n(i,n),u=o[nt];!function Dw(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])}(u,o);const l=o[Mn];null!==l&&null===o[Li]&&(o[Li]=Vp(l,o[qi])),R_(u,o,o[Bn])}function R_(n,i,o){Iu(i);try{const u=n.viewQuery;null!==u&&S_(1,u,o);const l=n.template;null!==l&&__(n,i,l,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&oE(n,i),n.staticViewQueries&&S_(2,n.viewQuery,o);const f=n.components;null!==f&&function cE(n,i){for(let o=0;o<i.length;o++)b_(n,i[o])}(i,f)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{i[Rt]&=-5,aa()}}let P_=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(o,u,l){const f=typeof Zone>"u"?null:Zone.current,m=new Jo(o,x=>{this.all.has(x)&&this.queue.set(x,f)},l);let I;this.all.add(m),m.notify();const C=()=>{m.cleanup(),I?.(),this.all.delete(m),this.queue.delete(m)};return I=u?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[o,u]of this.queue)this.queue.delete(o),u?u.run(()=>o.run()):o.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=bt({token:n,providedIn:"root",factory:()=>new n})}return n})();function Kd(n,i,o){let u=o?n.styles:null,l=o?n.classes:null,f=0;if(null!==i)for(let m=0;m<i.length;m++){const I=i[m];"number"==typeof I?f=I:1==f?l=qe(l,I):2==f&&(u=qe(u,I+": "+i[++m]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=l:n.classesWithoutHost=l}function mf(n,i,o,u,l=!1){for(;null!==o;){const f=i[o.index];if(null!==f&&u.push(At(f)),ri(f)){for(let I=Jn;I<f.length;I++){const C=f[I],x=C[nt].firstChild;null!==x&&mf(C[nt],C,x,u)}f[En]!==f[Mn]&&u.push(f[En])}const m=o.type;if(8&m)mf(n,i,o.child,u);else if(32&m){const I=wd(o,i);let C;for(;C=I();)u.push(C)}else if(16&m){const I=Fu(i,o);if(Array.isArray(I))u.push(...I);else{const C=eo(i[hn]);mf(C[nt],C,I,u,!0)}}o=l?o.projectionNext:o.next}return u}function Qd(n,i,o,u=!0){const l=i[Ii],f=l.rendererFactory,m=l.afterRenderEventManager;f.begin?.(),m?.begin();try{lE(n,i,n.template,o)}catch(C){throw u&&ag(i,C),C}finally{f.end?.(),l.effectManager?.flush(),m?.end()}}function lE(n,i,o,u){const l=i[Rt];if(256!=(256&l)){i[Ii].effectManager?.flush(),Iu(i);try{Ti(i),function fl(n){return $t.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&__(n,i,o,2,u);const m=3==(3&l);if(m){const x=n.preOrderCheckHooks;null!==x&&ee(i,x,null)}else{const x=n.preOrderHooks;null!==x&&je(i,x,0,null),Et(i,0)}if(function dE(n){for(let i=fn(n);null!==i;i=pn(i)){if(!i[jn])continue;const o=i[ni];for(let u=0;u<o.length;u++){Xo(o[u])}}}(i),cg(i,2),null!==n.contentQueries&&oE(n,i),m){const x=n.contentCheckHooks;null!==x&&ee(i,x)}else{const x=n.contentHooks;null!==x&&je(i,x,1),Et(i,1)}!function eE(n,i){const o=n.hostBindingOpCodes;if(null===o)return;const u=Xv(i,Ki);try{for(let l=0;l<o.length;l++){const f=o[l];if(f<0)Co(~f);else{const m=f,I=o[++l],C=o[++l];pl(I,m),u.runInContext(C,2,i[m])}}}finally{null===i[Ki]&&Ul(i,Ki),Co(-1)}}(n,i);const I=n.components;null!==I&&dg(i,I,0);const C=n.viewQuery;if(null!==C&&S_(2,C,u),m){const x=n.viewCheckHooks;null!==x&&ee(i,x)}else{const x=n.viewHooks;null!==x&&je(i,x,2),Et(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[Rt]&=-73,Ih(i)}finally{aa()}}}function cg(n,i){for(let o=fn(n);null!==o;o=pn(o))for(let u=Jn;u<o.length;u++)lg(o[u],i)}function x_(n,i,o){lg($n(i,n),o)}function lg(n,i){if(!function Yi(n){return 128==(128&n[Rt])}(n))return;const o=n[nt];if(80&n[Rt]&&0===i||1024&n[Rt]||2===i)lE(o,n,o.template,n[Bn]);else if(n[Rs]>0){cg(n,1);const l=n[nt].components;null!==l&&dg(n,l,1)}}function dg(n,i,o){for(let u=0;u<i.length;u++)x_(n,i[u],o)}class Xa{get rootNodes(){const i=this._lView,o=i[nt];return mf(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bn]}set context(i){this._lView[Bn]=i}get destroyed(){return 256==(256&this._lView[Rt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[dn];if(ri(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(Al(i,u),yc(o,u))}this._attachedToViewContainer=!1}Cl(this._lView[nt],this._lView)}onDestroy(i){gu(this._lView,i)}markForCheck(){cf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Rt]&=-129}reattach(){this._lView[Rt]|=128}detectChanges(){Qd(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Nm(n,i){Vu(n,i,i[xt],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=i}}class $c extends Xa{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Qd(i[nt],i,i[Bn],!1)}checkNoChanges(){}get context(){return null}}class hg extends af{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Xt(i);return new eu(o,this.ngModule)}}function Hl(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class hE{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){u=qt(u);const l=this.injector.get(i,Vc,u);return l!==Vc||o===Vc?l:this.parentInjector.get(i,o,u)}}class eu extends r_{get inputs(){const i=this.componentDef,o=i.inputTransforms,u=Hl(i.inputs);if(null!==o)for(const l of u)o.hasOwnProperty(l.propName)&&(l.transform=o[l.propName]);return u}get outputs(){return Hl(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function iu(n){return n.map(ui).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,u,l){let f=(l=l||this.ngModule)instanceof Ea?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new hE(i,f):i,I=m.get(i_,null);if(null===I)throw new ge(407,!1);const q={rendererFactory:I,sanitizer:m.get(jv,null),effectManager:m.get(P_,null),afterRenderEventManager:m.get(u_,null)},ne=I.createRenderer(null,this.componentDef),le=this.componentDef.selectors[0][0]||"div",Re=u?function v_(n,i,o,u){const f=u.get(Gp,!1)||o===Fe.ShadowDom,m=n.selectRootElement(i,f);return function E_(n){I_(n)}(m),m}(ne,u,this.componentDef.encapsulation,m):oi(ne,le,function Yd(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(le)),Ot=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ge=null;null!==Re&&(Ge=Vp(Re,m,!0));const Qt=Wd(0,null,null,1,0,null,null,null,null,null,null),vn=Yp(null,Qt,null,Ot,null,null,q,ne,m,null,Ge);let sr,$o;Iu(vn);try{const id=this.componentDef;let _m,HD=null;id.findHostDirectiveDefs?(_m=[],HD=new Map,id.findHostDirectiveDefs(id,_m,HD),_m.push(id)):_m=[id];const cS=function Sw(n,i){const o=n[nt],u=Ht;return n[u]=i,Bc(o,u,2,"#host",null)}(vn,Re),lS=function N_(n,i,o,u,l,f,m){const I=l[nt];!function O_(n,i,o,u){for(const l of n)i.mergedAttrs=bs(i.mergedAttrs,l.hostAttrs);null!==i.mergedAttrs&&(Kd(i,i.mergedAttrs,!0),null!==o&&km(u,o,i))}(u,n,i,m);let C=null;null!==i&&(C=Vp(i,l[qi]));const x=f.rendererFactory.createRenderer(i,o);let B=16;o.signals?B=4096:o.onPush&&(B=64);const q=Yp(l,Gd(o),null,B,l[n.index],n,f,x,null,null,C);return I.firstCreatePass&&$l(I,n,u.length-1),Zd(l,q),l[n.index]=q}(cS,Re,id,_m,vn,q,ne);$o=en(Qt,Ht),Re&&function F_(n,i,o,u){if(u)Ss(n,o,["ng-version",$v.full]);else{const{attrs:l,classes:f}=function _n(n){const i=[],o=[];let u=1,l=2;for(;u<n.length;){let f=n[u];if("string"==typeof f)2===l?""!==f&&i.push(f,n[++u]):8===l&&o.push(f);else{if(!Jr(l))break;l=f}u++}return{attrs:i,classes:o}}(i.selectors[0]);l&&Ss(n,o,l),f&&f.length>0&&Mc(n,o,f.join(" "))}}(ne,id,Re,u),void 0!==o&&function bw(n,i,o){const u=n.projection=[];for(let l=0;l<i.length;l++){const f=o[l];u.push(null!=f?Array.from(f):null)}}($o,this.ngContentSelectors,o),sr=function k_(n,i,o,u,l,f){const m=tn(),I=l[nt],C=Pt(m,l);sE(I,l,m,o,null,u);for(let B=0;B<o.length;B++)pi(yt(l,I,m.directiveStart+B,m),l);ng(I,l,m),C&&pi(C,l);const x=yt(l,I,m.directiveStart+m.componentOffset,m);if(n[Bn]=l[Bn]=x,null!==f)for(const B of f)B(x,i);return Jp(I,m,n),x}(lS,id,_m,HD,vn,[Rw]),R_(Qt,vn,null)}finally{aa()}return new Cw(this.componentType,sr,Vl($o,vn),vn,$o)}}class Cw extends dw{constructor(i,o,u,l,f){super(),this.location=u,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new $c(l),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[i])){if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),o))return;const f=this._rootLView;ug(f[nt],f,l,i,o),this.previousInputValues.set(i,o),cf($n(this._tNode.index,f))}}get injector(){return new Ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Rw(){const n=tn();G(Ve()[nt],n)}function EE(n){const i=n.inputConfig,o={};for(const u in i)if(i.hasOwnProperty(u)){const l=i[u];Array.isArray(l)&&l[2]&&(o[u]=l[2])}n.inputTransforms=o}function mg(n){return!!yf(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function yf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ss(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function U_(n,i,o,u){const l=Ve();return ss(l,Ns(),i)&&(an(),Vo(er(),l,n,i,o,u)),U_}function W_(n,i,o){const u=Ve();return ss(u,Ns(),i)&&function Ls(n,i,o,u,l,f,m,I){const C=Pt(i,o);let B,x=i.inputs;!I&&null!=x&&(B=x[u])?(ug(n,o,B,u,l),wi(i)&&function eg(n,i){const o=$n(i,n);16&o[Rt]||(o[Rt]|=64)}(o,i.index)):3&i.type&&(u=function yw(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),l=null!=m?m(l,i.value||"",u):l,f.setProperty(C,u,l))}(an(),er(),u,n,i,u[xt],o,!1),W_}function Sg(n,i,o,u,l){const m=l?"class":"style";ug(n,o,i.inputs[m],m,u)}function Tf(n,i,o,u){const l=Ve(),f=an(),m=Ht+n,I=l[xt],C=f.firstCreatePass?function zw(n,i,o,u,l,f){const m=i.consts,C=Bc(i,n,2,u,Br(m,l));return tg(i,o,C,Br(m,f)),null!==C.attrs&&Kd(C,C.attrs,!1),null!==C.mergedAttrs&&Kd(C,C.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,C),C}(m,f,l,i,o,u):f.data[m],x=LE(f,l,C,I,i,n);l[m]=x;const B=ps(C);return jr(C,!0),km(I,x,C),32!=(32&C.flags)&&A()&&bi(f,l,x,C),0===function wh(){return $t.lFrame.elementDepthCount}()&&pi(x,l),function Th(){$t.lFrame.elementDepthCount++}(),B&&(hf(f,l,C),Jp(f,C,l)),null!==u&&zd(l,C),Tf}function bg(){let n=tn();ll()?dl():(n=n.parent,jr(n,!1));const i=n;(function ul(n){return $t.skipHydrationRootTNode===n})(i)&&function cl(){$t.skipHydrationRootTNode=null}(),function ep(){$t.lFrame.elementDepthCount--}();const o=an();return o.firstCreatePass&&(G(o,n),lu(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function cc(n){return 0!=(8&n.flags)}(i)&&Sg(o,i,Ve(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function dd(n){return 0!=(16&n.flags)}(i)&&Sg(o,i,Ve(),i.stylesWithoutHost,!1),bg}function q_(n,i,o,u){return Tf(n,i,o,u),bg(),q_}let LE=(n,i,o,u,l,f)=>(N(!0),oi(u,l,function D(){return $t.lFrame.currentNamespace}()));function Df(n,i,o){const u=Ve(),l=an(),f=n+Ht,m=l.firstCreatePass?function qw(n,i,o,u,l){const f=i.consts,m=Br(f,u),I=Bc(i,n,8,"ng-container",m);return null!==m&&Kd(I,m,!0),tg(i,o,I,Br(f,l)),null!==i.queries&&i.queries.elementStart(i,I),I}(f,l,u,i,o):l.data[f];jr(m,!0);const I=Z_(l,u,m,n);return u[f]=I,A()&&bi(l,u,I,m),pi(I,u),ps(m)&&(hf(l,u,m),Jp(l,m,u)),null!=o&&zd(u,m),Df}function Af(){let n=tn();const i=an();return ll()?dl():(n=n.parent,jr(n,!1)),i.firstCreatePass&&(G(i,n),lu(n)&&i.queries.elementEnd(n)),Af}let Z_=(n,i,o,u)=>(N(!0),bc(i[xt],""));function gn(n){return!!n&&"function"==typeof n.then}function K_(n){return!!n&&"function"==typeof n.subscribe}function Mg(n,i,o,u){const l=Ve(),f=an(),m=tn();return function Pi(n,i,o,u,l,f,m){const I=ps(u),x=n.firstCreatePass&&og(n),B=i[Bn],q=uE(i);let ne=!0;if(3&u.type||m){const Ye=Pt(u,i),ft=m?m(Ye):Ye,Ot=q.length,Ge=m?vn=>m(At(vn[u.index])):u.index;let Qt=null;if(!m&&I&&(Qt=function BE(n,i,o,u){const l=n.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const m=l[f];if(m===o&&l[f+1]===u){const I=i[Ei],C=l[f+2];return I.length>C?I[C]:null}"string"==typeof m&&(f+=2)}return null}(n,i,l,u.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=f,Qt.__ngLastListenerFn__=f,ne=!1;else{f=Aa(u,i,B,f,!1);const vn=o.listen(ft,l,f);q.push(f,vn),x&&x.push(l,Ge,Ot,Ot+1)}}else f=Aa(u,i,B,f,!1);const le=u.outputs;let Re;if(ne&&null!==le&&(Re=le[l])){const Ye=Re.length;if(Ye)for(let ft=0;ft<Ye;ft+=2){const sr=i[Re[ft]][Re[ft+1]].subscribe(f),$o=q.length;q.push(f,sr),x&&x.push(l,u.index,$o,-($o+1))}}}(f,l,l[xt],m,n,i,u),Mg}function hr(n,i,o,u){try{return ie(6,i,o),!1!==o(u)}catch(l){return ag(n,l),!1}finally{ie(7,i,o)}}function Aa(n,i,o,u,l){return function f(m){if(m===Function)return u;cf(n.componentOffset>-1?$n(n.index,i):i);let C=hr(i,o,u,m),x=f.__ngNextListenerFn__;for(;x;)C=hr(i,o,x,m)&&C,x=x.__ngNextListenerFn__;return l&&!1===C&&m.preventDefault(),C}}function Zw(n,i){let o=null;const u=function zs(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let l=0;l<i.length;l++){const f=i[l];if("*"!==f){if(null===u?Er(n,f,!0):ru(u,f))return l}else o=l}return o}function Cf(n){const i=Ve()[hn][ur];if(!i.projection){const u=i.projection=bu(n?n.length:1,null),l=u.slice();let f=i.child;for(;null!==f;){const m=n?Zw(f,n):0;null!==m&&(l[m]?l[m].projectionNext=f:u[m]=f,l[m]=f),f=f.next}}}function Q_(n,i=0,o){const u=Ve(),l=an(),f=Bc(l,Ht+n,16,null,o||null);null===f.projection&&(f.projection=i),dl(),(!u[Li]||Kn())&&32!=(32&f.flags)&&function yp(n,i,o){Fs(i[xt],0,i,o,va(n,o,i),Me(o.parent||i[ur],o,i))}(l,u,f)}function Og(n,i){return n<<17|i<<2}function Kc(n){return n>>17&32767}function X_(n){return 2|n}function Zl(n){return(131068&n)>>2}function ey(n,i){return-131069&n|i<<2}function ty(n){return 1|n}function Ca(n,i,o,u,l){const f=n[o+1],m=null===i;let I=u?Kc(f):Zl(f),C=!1;for(;0!==I&&(!1===C||m);){const B=n[I+1];Gu(n[I],i)&&(C=!0,n[I+1]=u?ty(B):X_(B)),I=u?Kc(B):Zl(B)}C&&(n[o+1]=u?X_(f):ty(f))}function Gu(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&vc(n,i)>=0}const Mi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Qc(n){return n.substring(Mi.key,Mi.keyEnd)}function GE(n,i){const o=Mi.textEnd;return o===i?-1:(i=Mi.keyEnd=function Kl(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,Mi.key=i,o),oh(n,i,o))}function oh(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function iy(n){!function jo(n,i,o,u){const l=an(),f=function Qs(n){const i=$t.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}(2);l.firstUpdatePass&&function uh(n,i,o,u){const l=n.data;if(null===l[o+1]){const f=l[lr()],m=Bg(n,o);nT(f,u)&&null===i&&!m&&(i=!1),i=function tT(n,i,o,u){const l=function oc(n){const i=$t.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let f=u?i.residualClasses:i.residualStyles;if(null===l)0===(u?i.classBindings:i.styleBindings)&&(o=Rf(o=Ql(null,n,i,o,u),i.attrs,u),f=null);else{const m=i.directiveStylingLast;if(-1===m||n[m]!==l)if(o=Ql(l,n,i,o,u),null===f){let C=function jg(n,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==Zl(u))return n[Kc(u)]}(n,i,u);void 0!==C&&Array.isArray(C)&&(C=Ql(null,n,i,C[1],u),C=Rf(C,i.attrs,u),function $g(n,i,o,u){n[Kc(o?i.classBindings:i.styleBindings)]=u}(n,i,u,C))}else f=function KE(n,i,o){let u;const l=i.directiveEnd;for(let f=1+i.directiveStylingLast;f<l;f++)u=Rf(u,n[f].hostAttrs,o);return Rf(u,i.attrs,o)}(n,i,u)}return void 0!==f&&(u?i.residualClasses=f:i.residualStyles=f),o}(l,f,i,u),function Sf(n,i,o,u,l,f){let m=f?i.classBindings:i.styleBindings,I=Kc(m),C=Zl(m);n[u]=o;let B,x=!1;if(Array.isArray(o)?(B=o[1],(null===B||vc(o,B)>0)&&(x=!0)):B=o,l)if(0!==C){const ne=Kc(n[I+1]);n[u+1]=Og(ne,I),0!==ne&&(n[ne+1]=ey(n[ne+1],u)),n[I+1]=function Yw(n,i){return 131071&n|i<<17}(n[I+1],u)}else n[u+1]=Og(I,0),0!==I&&(n[I+1]=ey(n[I+1],u)),I=u;else n[u+1]=Og(C,0),0===I?I=u:n[C+1]=ey(n[C+1],u),C=u;x&&(n[u+1]=X_(n[u+1])),Ca(n,B,u,!0),Ca(n,B,u,!1),function Xw(n,i,o,u,l){const f=l?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof i&&vc(f,i)>=0&&(o[u+1]=ty(o[u+1]))}(i,B,n,u,f),m=Og(I,C),f?i.classBindings=m:i.styleBindings=m}(l,f,i,o,m,u)}}(l,null,f,u);const m=Ve();if(o!==Gt&&ss(m,f,o)){const I=l.data[lr()];if(nT(I,u)&&!Bg(l,f)){let C=u?I.classesWithoutHost:I.stylesWithoutHost;null!==C&&(o=qe(C,o||"")),Sg(l,I,m,o,u)}else!function Pf(n,i,o,u,l,f,m,I){l===Gt&&(l=Xe);let C=0,x=0,B=0<l.length?l[0]:null,q=0<f.length?f[0]:null;for(;null!==B||null!==q;){const ne=C<l.length?l[C+1]:void 0,le=x<f.length?f[x+1]:void 0;let Ye,Re=null;B===q?(C+=2,x+=2,ne!==le&&(Re=q,Ye=le)):null===q||null!==B&&B<q?(C+=2,Re=B):(x+=2,Re=q,Ye=le),null!==Re&&Wu(n,i,o,u,Re,Ye,m,I),B=C<l.length?l[C]:null,q=x<f.length?f[x]:null}}(l,I,m,m[xt],m[f+1],m[f+1]=function Hg(n,i,o){if(null==o||""===o)return Xe;const u=[],l=Uu(o);if(Array.isArray(l))for(let f=0;f<l.length;f++)n(u,l[f],!0);else if("object"==typeof l)for(const f in l)l.hasOwnProperty(f)&&n(u,f,l[f]);else"string"==typeof l&&i(u,l);return u}(n,i,o),u,f)}}(oy,os,n,!0)}function os(n,i){for(let o=function eT(n){return function bf(n){Mi.key=0,Mi.keyEnd=0,Mi.value=0,Mi.valueEnd=0,Mi.textEnd=n.length}(n),GE(n,oh(n,0,Mi.textEnd))}(i);o>=0;o=GE(i,o))Ci(n,Qc(i),!0)}function Bg(n,i){return i>=n.expandoStartIndex}function Ql(n,i,o,u,l){let f=null;const m=o.directiveEnd;let I=o.directiveStylingLast;for(-1===I?I=o.directiveStart:I++;I<m&&(f=i[I],u=Rf(u,f.hostAttrs,l),f!==n);)I++;return null!==n&&(o.directiveStylingLast=I),u}function Rf(n,i,o){const u=o?1:2;let l=-1;if(null!==i)for(let f=0;f<i.length;f++){const m=i[f];"number"==typeof m?l=m:l===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ci(n,m,!!o||i[++f]))}return void 0===n?null:n}function oy(n,i,o){const u=String(i);""!==u&&!u.includes(" ")&&Ci(n,u,o)}function Wu(n,i,o,u,l,f,m,I){if(!(3&i.type))return;const C=n.data,x=C[I+1],B=function rA(n){return 1==(1&n)}(x)?ch(C,i,o,l,Zl(x),m):void 0;zg(B)||(zg(f)||function zE(n){return 2==(2&n)}(x)&&(f=ch(C,null,o,l,I,m)),function ns(n,i,o,u,l){if(i)l?n.addClass(o,u):n.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:No.DashCase;null==l?n.removeStyle(o,u,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=No.Important),n.setStyle(o,u,l,f))}}(u,m,on(lr(),o),l,f))}function ch(n,i,o,u,l,f){const m=null===i;let I;for(;l>0;){const C=n[l],x=Array.isArray(C),B=x?C[1]:C,q=null===B;let ne=o[l+1];ne===Gt&&(ne=q?Xe:void 0);let le=q?Xi(ne,u):B===u?ne:void 0;if(x&&!zg(le)&&(le=Xi(C,u)),zg(le)&&(I=le,m))return I;const Re=n[l+1];l=m?Kc(Re):Zl(Re)}if(null!==i){let C=f?i.residualClasses:i.residualStyles;null!=C&&(I=Xi(C,u))}return I}function zg(n){return void 0!==n}function nT(n,i){return 0!=(n.flags&(i?8:16))}function rT(n,i=""){const o=Ve(),u=an(),l=n+Ht,f=u.firstCreatePass?Bc(u,l,1,i,null):u.data[l],m=Gg(u,o,f,i,n);o[l]=m,A()&&bi(u,o,m,f),jr(f,!1)}let Gg=(n,i,o,u,l)=>(N(!0),function Sc(n,i){return n.createText(i)}(i[xt],u));function ay(n){return qg("",n,""),ay}function qg(n,i,o){const u=Ve(),l=function zc(n,i,o,u){return ss(n,Ns(),o)?i+pe(o)+u:Gt}(u,n,i,o);return l!==Gt&&function Vs(n,i,o){const u=on(i,n);!function $h(n,i,o){n.setValue(i,o)}(n[xt],u,o)}(u,lr(),l),qg}const Jl=void 0;var py=["en",[["a","p"],["AM","PM"],Jl],[["AM","PM"],Jl,Jl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jl,"{1} 'at' {0}",Jl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dh(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Of={};function gy(n){const i=function dA(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=hI(i);if(o)return o;const u=i.split("-")[0];if(o=hI(u),o)return o;if("en"===u)return py;throw new ge(701,!1)}function dI(n){return gy(n)[kf.PluralCase]}function hI(n){return n in Of||(Of[n]=mn.ng&&mn.ng.common&&mn.ng.common.locales&&mn.ng.common.locales[n]),Of[n]}var kf=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(kf||{});const hh="en-US";let fI=hh;function My(n,i,o,u,l){if(n=Be(n),Array.isArray(n))for(let f=0;f<n.length;f++)My(n[f],i,o,u,l);else{const f=an(),m=Ve(),I=tn();let C=xl(n)?n:Be(n.provide);const x=Mv(n),B=1048575&I.providerIndexes,q=I.directiveStart,ne=I.providerIndexes>>20;if(xl(n)||!n.multi){const le=new vs(x,l,Bl),Re=xy(C,i,l?B:B+ne,q);-1===Re?(Po(ca(I,m),f,C),xI(f,n,i.length),i.push(C),I.directiveStart++,I.directiveEnd++,l&&(I.providerIndexes+=1048576),o.push(le),m.push(le)):(o[Re]=le,m[Re]=le)}else{const le=xy(C,i,B+ne,q),Re=xy(C,i,B,B+ne),ft=Re>=0&&o[Re];if(l&&!ft||!l&&!(le>=0&&o[le])){Po(ca(I,m),f,C);const Ot=function Ny(n,i,o,u,l){const f=new vs(n,o,Bl);return f.multi=[],f.index=i,f.componentProviders=0,FT(f,l,u&&!o),f}(l?NI:LT,o.length,l,u,x);!l&&ft&&(o[Re].providerFactory=Ot),xI(f,n,i.length,0),i.push(C),I.directiveStart++,I.directiveEnd++,l&&(I.providerIndexes+=1048576),o.push(Ot),m.push(Ot)}else xI(f,n,le>-1?le:Re,FT(o[l?Re:le],x,!l&&u));!l&&u&&ft&&o[Re].componentProviders++}}}function xI(n,i,o,u){const l=xl(i),f=function iw(n){return!!n.useClass}(i);if(l||f){const C=(f?Be(i.useClass):i).prototype.ngOnDestroy;if(C){const x=n.destroyHooks||(n.destroyHooks=[]);if(!l&&i.multi){const B=x.indexOf(o);-1===B?x.push(o,[u,C]):x[B+1].push(u,C)}else x.push(o,C)}}}function FT(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function xy(n,i,o,u){for(let l=o;l<u;l++)if(i[l]===n)return l;return-1}function LT(n,i,o,u){return OI(this.multi,[])}function NI(n,i,o,u){const l=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,I=yt(o,o[nt],this.providerFactory.index,u);f=I.slice(0,m),OI(l,f);for(let C=m;C<I.length;C++)f.push(I[C])}else f=[],OI(l,f);return f}function OI(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function Oy(n,i=[]){return o=>{o.providersResolver=(u,l)=>function kT(n,i,o){const u=an();if(u.firstCreatePass){const l=Cn(n);My(o,u.data,u.blueprint,l,!0),My(i,u.data,u.blueprint,l,!1)}}(u,l?l(n):n,i)}}class el{}class VT{}function EA(n,i){return new ky(n,i??null,[])}class ky extends el{constructor(i,o,u){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hg(this);const l=br(i);this._bootstrapComponents=$u(l.bootstrap),this._r3Injector=Zv(i,o,[{provide:el,useValue:this},{provide:af,useValue:this.componentFactoryResolver},...u],se(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Fy extends VT{constructor(i){super(),this.moduleType=i}create(i){return new ky(this.moduleType,i,[])}}class kI extends el{constructor(i){super(),this.componentFactoryResolver=new hg(this),this.instance=null;const o=new Sp([...i.providers,{provide:el,useValue:this},{provide:af,useValue:this.componentFactoryResolver}],i.parent||Nd(),i.debugName,new Set(["environment"]));this.injector=o,i.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Sa(n,i,o=null){return new kI({providers:n,parent:i,debugName:o,runEnvironmentInitializers:!0}).injector}let tm=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o)){const u=qm(0,o.type),l=u.length>0?Sa([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o,l)}return this.cachedInjectors.get(o)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=bt({token:n,providedIn:"environment",factory:()=>new n($e(Ea))})}return n})();function ed(n){n.getStandaloneInjector=i=>i.get(tm).getOrCreateStandaloneInjector(n)}function Uy(n,i,o){const u=function Qn(){const n=$t.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}()+n,l=Ve();return l[u]===Gt?function tu(n,i,o){return n[i]=o}(l,u,o?i.call(o):i()):function zl(n,i){return n[i]}(l,u)}function $f(n){return i=>{setTimeout(n,void 0,i)}}const ba=class QI extends w.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let l=i,f=o||(()=>null),m=u;if(i&&"object"==typeof i){const C=i;l=C.next?.bind(C),f=C.error?.bind(C),m=C.complete?.bind(C)}this.__isAsync&&(f=$f(f),l&&(l=$f(l)),m&&(m=$f(m)));const I=super.subscribe({next:l,error:f,complete:m});return i instanceof te.w0&&i.add(I),I}};function Gy(){return this._results[Symbol.iterator]()}class sm{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new ba)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=sm.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=Gy)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const l=function Is(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function _c(n,i,o){if(n.length!==i.length)return!1;for(let u=0;u<n.length;u++){let l=n[u],f=i[u];if(o&&(l=o(l),f=o(f)),f!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function YI(n,i,o,u=!0){const l=i[nt];if(function Dl(n,i,o,u){const l=Jn+u,f=o.length;u>0&&(o[l-1][Ur]=i),u<f-Jn?(i[Ur]=o[l],Ji(o,Jn+u,i)):(o.push(i),i[Ur]=null),i[dn]=o;const m=i[Ps];null!==m&&o!==m&&function Hh(n,i){const o=n[ni];i[hn]!==i[dn][dn][hn]&&(n[jn]=!0),null===o?n[ni]=[i]:o.push(i)}(m,i);const I=i[ei];null!==I&&I.insertView(n),i[Rt]|=128}(l,i,n,o),u){const f=Rc(o,n),m=i[xt],I=Q(m,n[En]);null!==I&&function Ad(n,i,o,u,l,f){u[Mn]=l,u[ur]=i,Vu(n,u,o,1,l,f)}(l,n[ur],m,i,I,f)}}let Qu=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=JI}return n})();const Hf=Qu,Wy=class extends Hf{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,o){return this.createEmbeddedViewImpl(i,o)}createEmbeddedViewImpl(i,o,u){const l=function om(n,i,o,u){const l=i.tView,I=Yp(n,l,o,4096&n[Rt]?4096:16,null,i,null,null,null,u?.injector??null,u?.hydrationInfo??null);I[Ps]=n[i.index];const x=n[ei];return null!==x&&(I[ei]=x.createEmbeddedView(l)),R_(l,I,o),I}(this._declarationLView,this._declarationTContainer,i,{injector:o,hydrationInfo:u});return new Xa(l)}};function JI(){return yh(tn(),Ve())}function yh(n,i){return 4&n.type?new Wy(i,n,Vl(n,i)):null}let cm=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=r0}return n})();function r0(){return u0(tn(),Ve())}const s0=cm,o0=class extends s0{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new Ai(this._hostTNode,this._hostLView)}get parentInjector(){const i=la(this._hostTNode,this._hostLView);if(dc(i)){const o=ja(i,this._hostLView),u=bo(i);return new Ai(o[nt].data[u+8],o)}return new Ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=a0(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Jn}createEmbeddedView(i,o,u){let l,f;"number"==typeof u?l=u:null!=u&&(l=u.index,f=u.injector);const I=i.createEmbeddedViewImpl(o||{},f,null);return this.insertImpl(I,l,false),I}createComponent(i,o,u,l,f){const m=i&&!function _l(n){return"function"==typeof n}(i);let I;if(m)I=o;else{const Ye=o||{};I=Ye.index,u=Ye.injector,l=Ye.projectableNodes,f=Ye.environmentInjector||Ye.ngModuleRef}const C=m?i:new eu(Xt(i)),x=u||this.parentInjector;if(!f&&null==C.ngModule){const ft=(m?x:this.parentInjector).get(Ea,null);ft&&(f=ft)}Xt(C.componentType??{});const le=C.create(x,l,null,f);return this.insertImpl(le.hostView,I,false),le}insert(i,o){return this.insertImpl(i,o,!1)}insertImpl(i,o,u){const l=i._lView;if(function li(n){return ri(n[dn])}(l)){const C=this.indexOf(i);if(-1!==C)this.detach(C);else{const x=l[dn],B=new o0(x,x[ur],x[dn]);B.detach(B.indexOf(i))}}const m=this._adjustIndex(o),I=this._lContainer;return YI(I,l,m,!u),i.attachToViewContainerRef(),Ji(nl(I),m,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=a0(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=Al(this._lContainer,o);u&&(yc(nl(this._lContainer),o),Cl(u[nt],u))}detach(i){const o=this._adjustIndex(i,-1),u=Al(this._lContainer,o);return u&&null!=yc(nl(this._lContainer),o)?new Xa(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function a0(n){return n[8]}function nl(n){return n[8]||(n[8]=[])}function u0(n,i){let o;const u=i[n.index];return ri(u)?o=u:(o=function C_(n,i,o,u){return[n,!0,!1,i,null,0,u,o,null,null,null]}(u,i,null,n),i[n.index]=o,Zd(i,o)),lm(o,i,n,u),new o0(o,n,i)}let lm=function Zy(n,i,o,u){if(n[En])return;let l;l=8&o.type?At(u):function ZT(n,i){const o=n[xt],u=o.createComment(""),l=Pt(i,n);return d(o,Q(o,l),u,function ae(n,i){return n.nextSibling(i)}(o,l),!1),u}(i,o),n[En]=l};class Ky{constructor(i){this.queryList=i,this.matches=null}clone(){return new Ky(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qy{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,l=[];for(let f=0;f<u;f++){const m=o.getByIndex(f);l.push(this.queries[m.indexInDeclarationView].clone())}return new Qy(l)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==_0(i,o).matches&&this.queries[o].setDirty()}}class d0{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class dm{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(i,l);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new dm(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Yy{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Yy(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const f=u[l];this.matchTNodeWithReadOption(i,o,h0(o,f)),this.matchTNodeWithReadOption(i,o,mt(o,i,f,!1,!1))}else u===Qu?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,mt(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===kc||l===cm||l===Qu&&4&o.type)this.addMatch(o.index,-2);else{const f=mt(o,i,l,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function h0(n,i){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function KT(n,i,o,u){return-1===o?function Jy(n,i){return 11&n.type?Vl(n,i):4&n.type?yh(n,i):null}(i,n):-2===o?function QT(n,i,o){return o===kc?Vl(i,n):o===Qu?yh(i,n):o===cm?u0(i,n):void 0}(n,i,u):yt(n,n[nt],o,i)}function Xy(n,i,o,u){const l=i[ei].queries[u];if(null===l.matches){const f=n.data,m=o.matches,I=[];for(let C=0;C<m.length;C+=2){const x=m[C];I.push(x<0?null:KT(i,f[x],m[C+1],o.metadata.read))}l.matches=I}return l.matches}function f0(n,i,o,u){const l=n.queries.getByIndex(o),f=l.matches;if(null!==f){const m=Xy(n,i,l,o);for(let I=0;I<f.length;I+=2){const C=f[I];if(C>0)u.push(m[I/2]);else{const x=f[I+1],B=i[-C];for(let q=Jn;q<B.length;q++){const ne=B[q];ne[Ps]===ne[dn]&&f0(ne[nt],ne,x,u)}if(null!==B[ni]){const q=B[ni];for(let ne=0;ne<q.length;ne++){const le=q[ne];f0(le[nt],le,x,u)}}}}}return u}function p0(n){const i=Ve(),o=an(),u=ac();Eu(u+1);const l=_0(o,u);if(n.dirty&&function Rr(n){return 4==(4&n[Rt])}(i)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const f=l.crossesNgTemplate?f0(o,i,u,[]):Xy(o,i,l,u);n.reset(f,jp),n.notifyOnChanges()}return!0}return!1}function g0(n,i,o,u){const l=an();if(l.firstCreatePass){const f=tn();(function m0(n,i,o){null===n.queries&&(n.queries=new dm),n.queries.track(new Yy(i,o))})(l,new d0(i,o,u),f.index),function JT(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(l,n),2==(2&o)&&(l.staticContentQueries=!0)}!function nv(n,i,o){const u=new sm(4==(4&o));(function Xp(n,i,o,u){const l=uE(i);l.push(o),n.firstCreatePass&&og(n).push(u,l.length-1)})(n,i,u,u.destroy),null===i[ei]&&(i[ei]=new Qy),i[ei].queries.push(new Ky(u))}(l,Ve(),o)}function YT(){return function tv(n,i){return n[ei].queries[i].queryList}(Ve(),ac())}function _0(n,i){return n.queries.getByIndex(i)}function qf(n){return!!br(n)}const av=new bn("Application Initializer");let L0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,u)=>{this.resolve=o,this.reject=u}),this.appInits=at(av,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const o=[];for(const l of this.appInits){const f=l();if(gn(f))o.push(f);else if(K_(f)){const m=new Promise((I,C)=>{f.subscribe({complete:I,error:C})});o.push(m)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}static#e=this.\u0275fac=function(u){return new(u||n)};static#t=this.\u0275prov=bt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gD=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}static#e=this.\u0275fac=function(u){return new(u||n)};static#t=this.\u0275prov=bt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const rd=new bn("LocaleId",{providedIn:"root",factory:()=>at(rd,St.Optional|St.SkipSelf)||function V0(){return typeof $localize<"u"&&$localize.locale||hh}()}),uv=new bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let B0=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new b.X(!1)}add(){this.hasPendingTasks.next(!0);const o=this.taskId++;return this.pendingTasks.add(o),o}remove(o){this.pendingTasks.delete(o),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(u){return new(u||n)};static#t=this.\u0275prov=bt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class j0{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let yD=(()=>{class n{compileModuleSync(o){return new Fy(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),f=$u(br(o).declarations).reduce((m,I)=>{const C=Xt(I);return C&&m.push(new eu(C)),m},[]);return new j0(u,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}static#e=this.\u0275fac=function(u){return new(u||n)};static#t=this.\u0275prov=bt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a(...n){}class v{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ba(!1),this.onMicrotaskEmpty=new ba(!1),this.onStable=new ba(!1),this.onError=new ba(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function c(){const n="function"==typeof mn.requestAnimationFrame;let i=mn[n?"requestAnimationFrame":"setTimeout"],o=mn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&i&&o){const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function W(n){const i=()=>{!function k(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(mn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,X(n),n.isCheckStableRunning=!0,P(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),X(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,f,m,I)=>{try{return ce(n),o.invokeTask(l,f,m,I)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&i(),xe(n)}},onInvoke:(o,u,l,f,m,I,C)=>{try{return ce(n),o.invoke(l,f,m,I,C)}finally{n.shouldCoalesceRunChangeDetection&&i(),xe(n)}},onHasTask:(o,u,l,f)=>{o.hasTask(l,f),u===l&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,X(n),P(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,l,f)=>(o.handleError(l,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!v.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(v.isInAngularZone())throw new ge(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,l){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+l,i,S,a,a);try{return f.runTask(m,o,u)}finally{f.cancelTask(m)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const S={};function P(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function X(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ce(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xe(n){n._nesting--,P(n)}class Qe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ba,this.onMicrotaskEmpty=new ba,this.onStable=new ba,this.onError=new ba}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,l){return i.apply(o,u)}}const We=new bn("",{providedIn:"root",factory:It});function It(){const n=at(v);let i=!0;const o=new ue.y(l=>{i=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{l.next(i),l.complete()})}),u=new ue.y(l=>{let f;n.runOutsideAngular(()=>{f=n.onStable.subscribe(()=>{v.assertNotInAngularZone(),queueMicrotask(()=>{!i&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(i=!0,l.next(!0))})})});const m=n.onUnstable.subscribe(()=>{v.assertInAngularZone(),i&&(i=!1,n.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),m.unsubscribe()}});return(0,he.T)(o,u.pipe((0,we.B)()))}const Nt=new bn(""),lt=new bn("");let kr,Vt=(()=>{class n{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kr||(function Ln(n){kr=n}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{v.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}static#e=this.\u0275fac=function(u){return new(u||n)($e(v),$e(nn),$e(lt))};static#t=this.\u0275prov=bt({token:n,factory:n.\u0275fac})}return n})(),nn=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return kr?.findTestabilityInTree(this,o,u)??null}static#e=this.\u0275fac=function(u){return new(u||n)};static#t=this.\u0275prov=bt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),mi=null;const G0=new bn("AllowMultipleToken"),gm=new bn("PlatformDestroyListeners"),OD=new bn("appBootstrapListener");class DC{constructor(i,o){this.name=i,this.token=o}}function qA(n,i,o=[]){const u=`Platform: ${i}`,l=new bn(u);return(f=[])=>{let m=kD();if(!m||m.injector.get(G0,!1)){const I=[...o,...f,{provide:l,useValue:!0}];n?n(I):function AC(n){if(mi&&!mi.get(G0,!1))throw new ge(400,!1);(function GA(){!function Va(n){Qo=n}(()=>{throw new ge(600,!1)})})(),mi=n;const i=n.get(KA);(function WA(n){n.get(Ov,null)?.forEach(o=>o())})(n)}(function ZA(n=[],i){return Lo.create({name:i,providers:[{provide:Nl,useValue:"platform"},{provide:gm,useValue:new Set([()=>mi=null])},...n]})}(I,u))}return function SC(n){const i=kD();if(!i)throw new ge(401,!1);return i}()}}function kD(){return mi?.get(KA)??null}let KA=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function bC(n="zone.js",i){return"noop"===n?new Qe:"zone.js"===n?new v(i):n}(u?.ngZone,function QA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:u?.ngZoneEventCoalescing,runCoalescing:u?.ngZoneRunCoalescing}));return l.run(()=>{const f=function wA(n,i,o){return new ky(n,i,o)}(o.moduleType,this.injector,function tC(n){return[{provide:v,useFactory:n},{provide:Ya,multi:!0,useFactory:()=>{const i=at(PC,{optional:!0});return()=>i.initialize()}},{provide:eC,useFactory:RC},{provide:We,useFactory:It}]}(()=>l)),m=f.injector.get(Hu,null);return l.runOutsideAngular(()=>{const I=l.onError.subscribe({next:C=>{m.handleError(C)}});f.onDestroy(()=>{W0(this._modules,f),I.unsubscribe()})}),function YA(n,i,o){try{const u=o();return gn(u)?u.catch(l=>{throw i.runOutsideAngular(()=>n.handleError(l)),l}):u}catch(u){throw i.runOutsideAngular(()=>n.handleError(u)),u}}(m,l,()=>{const I=f.injector.get(L0);return I.runInitializers(),I.donePromise.then(()=>(function pI(n){pt(n,"Expected localeId to be defined"),"string"==typeof n&&(fI=n.toLowerCase().replace(/_/g,"-"))}(f.injector.get(rd,hh)||hh),this._moduleDoBootstrap(f),f))})})}bootstrapModule(o,u=[]){const l=JA({},u);return function wC(n,i,o){const u=new Fy(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(o){const u=o.injector.get(mm);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new ge(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(gm,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(u){return new(u||n)($e(Lo))};static#t=this.\u0275prov=bt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function JA(n,i){return Array.isArray(i)?i.reduce(JA,n):{...n,...i}}let mm=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=at(eC),this.zoneIsStable=at(We),this.componentTypes=[],this.components=[],this.isStable=at(B0).hasPendingTasks.pipe((0,Ue.w)(o=>o?(0,oe.of)(!1):this.zoneIsStable),(0,Ce.x)(),(0,we.B)()),this._injector=at(Ea)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof r_;if(!this._injector.get(L0).done)throw!l&&Gs(o),new ge(405,!1);let m;m=l?o:this._injector.get(af).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const I=function TC(n){return n.isBoundToModule}(m)?void 0:this._injector.get(el),x=m.create(Lo.NULL,[],u||m.selector,I),B=x.location.nativeElement,q=x.injector.get(Nt,null);return q?.registerApplication(B),x.onDestroy(()=>{this.detachView(x.hostView),W0(this.components,x),q?.unregisterApplication(B)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;W0(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(OD,[]);u.push(...this._bootstrapListeners),u.forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>W0(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new ge(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(u){return new(u||n)};static#t=this.\u0275prov=bt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W0(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}const eC=new bn("",{providedIn:"root",factory:()=>at(Hu).handleError.bind(void 0)});function RC(){const n=at(v),i=at(Hu);return o=>n.runOutsideAngular(()=>i.handleError(o))}let PC=(()=>{class n{constructor(){this.zone=at(v),this.applicationRef=at(mm)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||n)};static#t=this.\u0275prov=bt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xC(){return!1}let NC=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=OC}return n})();function OC(n){return function kC(n,i,o){if(wi(n)&&!o){const u=$n(n.index,i);return new Xa(u,u)}return 47&n.type?new Xa(i[hn],i):null}(tn(),Ve(),16==(16&n))}class sC{constructor(){}supports(i){return mg(i)}create(i){return new jC(i)}}const BC=(n,i)=>i;class jC{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||BC}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,l=0,f=null;for(;o||u;){const m=!u||o&&o.currentIndex<aC(u,l,f)?o:u,I=aC(m,l,f),C=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{f||(f=[]);const x=I-l,B=C-l;if(x!=B){for(let ne=0;ne<x;ne++){const le=ne<f.length?f[ne]:f[ne]=0,Re=le+ne;B<=Re&&Re<x&&(f[ne]=le+1)}f[m.previousIndex]=B-x}}I!==C&&i(m,I,C)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!mg(i))throw new ge(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let l,f,m,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let I=0;I<this.length;I++)f=i[I],m=this._trackByFn(I,f),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,f,m,I)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,m,I),u=!0),o=o._next}else l=0,function wE(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,I=>{m=this._trackByFn(l,I),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,I,m,l)),Object.is(o.item,I)||this._addIdentityChange(o,I)):(o=this._mismatch(o,I,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,l){let f;return null===i?f=this._itTail:(f=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,f,l)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,f,l)):i=this._addAfter(new $C(o,u),f,l),i}_verifyReinsertion(i,o,u,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?i=this._reinsertAfter(f,i._prev,l):i.currentIndex!=l&&(i.currentIndex=l,this._addToMoves(i,l)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const l=i._prevRemoved,f=i._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const l=null===o?this._itHead:o._next;return i._next=l,i._prev=o,null===l?this._itTail=i:l._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new oC),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oC),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class $C{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class HC{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class oC{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new HC,this.map.set(o,u)),u.add(i)}get(i,o){const l=this.map.get(i);return l?l.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aC(n,i,o){const u=n.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+i+l}class uC{constructor(){}supports(i){return i instanceof Map||yf(i)}create(){return new zC}}class zC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||yf(i)))throw new ge(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const l=this._records.get(i);this._maybeAddToChanges(l,o);const f=l._prev,m=l._next;return f&&(f._next=m),m&&(m._prev=f),l._next=null,l._prev=null,l}const u=new GC(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class GC{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cC(){return new BD([new sC])}let BD=(()=>{class n{static#e=this.\u0275prov=bt({token:n,providedIn:"root",factory:cC});constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||cC()),deps:[[n,new md,new yl]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new ge(901,!1)}}return n})();function lC(){return new jD([new uC])}let jD=(()=>{class n{static#e=this.\u0275prov=bt({token:n,providedIn:"root",factory:lC});constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||lC()),deps:[[n,new md,new yl]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new ge(901,!1)}}return n})();const ZC=qA(null,"core",[]);let KC=(()=>{class n{constructor(o){}static#e=this.\u0275fac=function(u){return new(u||n)($e(mm))};static#t=this.\u0275mod=zo({type:n});static#n=this.\u0275inj=Hn({})}return n})();function oS(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function uS(n){const i=Xt(n);if(!i)return null;const o=new eu(i);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},6593:(Tt,Se,V)=>{V.d(Se,{Dx:()=>Vn,b2:()=>ln,q6:()=>bt});var w=V(5879),te=V(6814);class b extends te.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ue extends b{static makeCurrent(){(0,te.HT)(new ue)}onAndCancel($,j,z){return $.addEventListener(j,z),()=>{$.removeEventListener(j,z)}}dispatchEvent($,j){$.dispatchEvent(j)}remove($){$.parentNode&&$.parentNode.removeChild($)}createElement($,j){return(j=j||this.getDefaultDocument()).createElement($)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode($){return $.nodeType===Node.ELEMENT_NODE}isShadowRoot($){return $ instanceof DocumentFragment}getGlobalEventTarget($,j){return"window"===j?window:"document"===j?$:"body"===j?$.body:null}getBaseHref($){const j=function oe(){return he=he||document.querySelector("base"),he?he.getAttribute("href"):null}();return null==j?null:function Ue(U){we=we||document.createElement("a"),we.setAttribute("href",U);const $=we.pathname;return"/"===$.charAt(0)?$:`/${$}`}(j)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie($){return(0,te.Mx)(document.cookie,$)}}let we,he=null,K=(()=>{class U{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(z){return new(z||U)};static#t=this.\u0275prov=w.Yz7({token:U,factory:U.\u0275fac})}return U})();const Y=new w.OlP("EventManagerPlugins");let se=(()=>{class U{constructor(j,z){this._zone=z,this._eventNameToPlugin=new Map,j.forEach(re=>{re.manager=this}),this._plugins=j.slice().reverse()}addEventListener(j,z,re){return this._findPluginFor(z).addEventListener(j,z,re)}getZone(){return this._zone}_findPluginFor(j){let z=this._eventNameToPlugin.get(j);if(z)return z;if(z=this._plugins.find(Le=>Le.supports(j)),!z)throw new w.vHH(5101,!1);return this._eventNameToPlugin.set(j,z),z}static#e=this.\u0275fac=function(z){return new(z||U)(w.LFG(Y),w.LFG(w.R0b))};static#t=this.\u0275prov=w.Yz7({token:U,factory:U.\u0275fac})}return U})();class qe{constructor($){this._doc=$}}const Oe="ng-app-id";let He=(()=>{class U{constructor(j,z,re,Le={}){this.doc=j,this.appId=z,this.nonce=re,this.platformId=Le,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,te.PM)(Le),this.resetHostNodes()}addStyles(j){for(const z of j)1===this.changeUsageCount(z,1)&&this.onStyleAdded(z)}removeStyles(j){for(const z of j)this.changeUsageCount(z,-1)<=0&&this.onStyleRemoved(z)}ngOnDestroy(){const j=this.styleNodesInDOM;j&&(j.forEach(z=>z.remove()),j.clear());for(const z of this.getAllStyles())this.onStyleRemoved(z);this.resetHostNodes()}addHost(j){this.hostNodes.add(j);for(const z of this.getAllStyles())this.addStyleToHost(j,z)}removeHost(j){this.hostNodes.delete(j)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(j){for(const z of this.hostNodes)this.addStyleToHost(z,j)}onStyleRemoved(j){const z=this.styleRef;z.get(j)?.elements?.forEach(re=>re.remove()),z.delete(j)}collectServerRenderedStyles(){const j=this.doc.head?.querySelectorAll(`style[${Oe}="${this.appId}"]`);if(j?.length){const z=new Map;return j.forEach(re=>{null!=re.textContent&&z.set(re.textContent,re)}),z}return null}changeUsageCount(j,z){const re=this.styleRef;if(re.has(j)){const Le=re.get(j);return Le.usage+=z,Le.usage}return re.set(j,{usage:z,elements:[]}),z}getStyleElement(j,z){const re=this.styleNodesInDOM,Le=re?.get(z);if(Le?.parentNode===j)return re.delete(z),Le.removeAttribute(Oe),Le;{const $e=this.doc.createElement("style");return this.nonce&&$e.setAttribute("nonce",this.nonce),$e.textContent=z,this.platformIsServer&&$e.setAttribute(Oe,this.appId),$e}}addStyleToHost(j,z){const re=this.getStyleElement(j,z);j.appendChild(re);const Le=this.styleRef,$e=Le.get(z)?.elements;$e?$e.push(re):Le.set(z,{elements:[re],usage:1})}resetHostNodes(){const j=this.hostNodes;j.clear(),j.add(this.doc.head)}static#e=this.\u0275fac=function(z){return new(z||U)(w.LFG(te.K0),w.LFG(w.AFp),w.LFG(w.Ojb,8),w.LFG(w.Lbi))};static#t=this.\u0275prov=w.Yz7({token:U,factory:U.\u0275fac})}return U})();const Be={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},it=/%COMP%/g,Ne=new w.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Je(U,$){return $.map(j=>j.replace(it,U))}let et=(()=>{class U{constructor(j,z,re,Le,$e,jt,at,qt=null){this.eventManager=j,this.sharedStylesHost=z,this.appId=re,this.removeStylesOnCompDestroy=Le,this.doc=$e,this.platformId=jt,this.ngZone=at,this.nonce=qt,this.rendererByCompId=new Map,this.platformIsServer=(0,te.PM)(jt),this.defaultRenderer=new Ie(j,$e,at,this.platformIsServer)}createRenderer(j,z){if(!j||!z)return this.defaultRenderer;this.platformIsServer&&z.encapsulation===w.ifc.ShadowDom&&(z={...z,encapsulation:w.ifc.Emulated});const re=this.getOrCreateRenderer(j,z);return re instanceof Wn?re.applyToHost(j):re instanceof fr&&re.applyStyles(),re}getOrCreateRenderer(j,z){const re=this.rendererByCompId;let Le=re.get(z.id);if(!Le){const $e=this.doc,jt=this.ngZone,at=this.eventManager,qt=this.sharedStylesHost,Ft=this.removeStylesOnCompDestroy,An=this.platformIsServer;switch(z.encapsulation){case w.ifc.Emulated:Le=new Wn(at,qt,z,this.appId,Ft,$e,jt,An);break;case w.ifc.ShadowDom:return new or(at,qt,j,z,$e,jt,this.nonce,An);default:Le=new fr(at,qt,z,Ft,$e,jt,An)}re.set(z.id,Le)}return Le}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(z){return new(z||U)(w.LFG(se),w.LFG(He),w.LFG(w.AFp),w.LFG(Ne),w.LFG(te.K0),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(w.Ojb))};static#t=this.\u0275prov=w.Yz7({token:U,factory:U.\u0275fac})}return U})();class Ie{constructor($,j,z,re){this.eventManager=$,this.doc=j,this.ngZone=z,this.platformIsServer=re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement($,j){return j?this.doc.createElementNS(Be[j]||j,$):this.doc.createElement($)}createComment($){return this.doc.createComment($)}createText($){return this.doc.createTextNode($)}appendChild($,j){(Fr($)?$.content:$).appendChild(j)}insertBefore($,j,z){$&&(Fr($)?$.content:$).insertBefore(j,z)}removeChild($,j){$&&$.removeChild(j)}selectRootElement($,j){let z="string"==typeof $?this.doc.querySelector($):$;if(!z)throw new w.vHH(-5104,!1);return j||(z.textContent=""),z}parentNode($){return $.parentNode}nextSibling($){return $.nextSibling}setAttribute($,j,z,re){if(re){j=re+":"+j;const Le=Be[re];Le?$.setAttributeNS(Le,j,z):$.setAttribute(j,z)}else $.setAttribute(j,z)}removeAttribute($,j,z){if(z){const re=Be[z];re?$.removeAttributeNS(re,j):$.removeAttribute(`${z}:${j}`)}else $.removeAttribute(j)}addClass($,j){$.classList.add(j)}removeClass($,j){$.classList.remove(j)}setStyle($,j,z,re){re&(w.JOm.DashCase|w.JOm.Important)?$.style.setProperty(j,z,re&w.JOm.Important?"important":""):$.style[j]=z}removeStyle($,j,z){z&w.JOm.DashCase?$.style.removeProperty(j):$.style[j]=""}setProperty($,j,z){$[j]=z}setValue($,j){$.nodeValue=j}listen($,j,z){if("string"==typeof $&&!($=(0,te.q)().getGlobalEventTarget(this.doc,$)))throw new Error(`Unsupported event target ${$} for event ${j}`);return this.eventManager.addEventListener($,j,this.decoratePreventDefault(z))}decoratePreventDefault($){return j=>{if("__ngUnwrap__"===j)return $;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>$(j)):$(j))&&j.preventDefault()}}}function Fr(U){return"TEMPLATE"===U.tagName&&void 0!==U.content}class or extends Ie{constructor($,j,z,re,Le,$e,jt,at){super($,Le,$e,at),this.sharedStylesHost=j,this.hostEl=z,this.shadowRoot=z.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const qt=Je(re.id,re.styles);for(const Ft of qt){const An=document.createElement("style");jt&&An.setAttribute("nonce",jt),An.textContent=Ft,this.shadowRoot.appendChild(An)}}nodeOrShadowRoot($){return $===this.hostEl?this.shadowRoot:$}appendChild($,j){return super.appendChild(this.nodeOrShadowRoot($),j)}insertBefore($,j,z){return super.insertBefore(this.nodeOrShadowRoot($),j,z)}removeChild($,j){return super.removeChild(this.nodeOrShadowRoot($),j)}parentNode($){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot($)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class fr extends Ie{constructor($,j,z,re,Le,$e,jt,at){super($,Le,$e,jt),this.sharedStylesHost=j,this.removeStylesOnCompDestroy=re,this.styles=at?Je(at,z.styles):z.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Wn extends fr{constructor($,j,z,re,Le,$e,jt,at){const qt=re+"-"+z.id;super($,j,z,Le,$e,jt,at,qt),this.contentAttr=function pe(U){return"_ngcontent-%COMP%".replace(it,U)}(qt),this.hostAttr=function Ze(U){return"_nghost-%COMP%".replace(it,U)}(qt)}applyToHost($){this.applyStyles(),this.setAttribute($,this.hostAttr,"")}createElement($,j){const z=super.createElement($,j);return super.setAttribute(z,this.contentAttr,""),z}}let Ni=(()=>{class U extends qe{constructor(j){super(j)}supports(j){return!0}addEventListener(j,z,re){return j.addEventListener(z,re,!1),()=>this.removeEventListener(j,z,re)}removeEventListener(j,z,re){return j.removeEventListener(z,re)}static#e=this.\u0275fac=function(z){return new(z||U)(w.LFG(te.K0))};static#t=this.\u0275prov=w.Yz7({token:U,factory:U.\u0275fac})}return U})();const _i=["alt","control","meta","shift"],me={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ye={alt:U=>U.altKey,control:U=>U.ctrlKey,meta:U=>U.metaKey,shift:U=>U.shiftKey};let De=(()=>{class U extends qe{constructor(j){super(j)}supports(j){return null!=U.parseEventName(j)}addEventListener(j,z,re){const Le=U.parseEventName(z),$e=U.eventCallback(Le.fullKey,re,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,te.q)().onAndCancel(j,Le.domEventName,$e))}static parseEventName(j){const z=j.toLowerCase().split("."),re=z.shift();if(0===z.length||"keydown"!==re&&"keyup"!==re)return null;const Le=U._normalizeKey(z.pop());let $e="",jt=z.indexOf("code");if(jt>-1&&(z.splice(jt,1),$e="code."),_i.forEach(qt=>{const Ft=z.indexOf(qt);Ft>-1&&(z.splice(Ft,1),$e+=qt+".")}),$e+=Le,0!=z.length||0===Le.length)return null;const at={};return at.domEventName=re,at.fullKey=$e,at}static matchEventFullKeyCode(j,z){let re=me[j.key]||j.key,Le="";return z.indexOf("code.")>-1&&(re=j.code,Le="code."),!(null==re||!re)&&(re=re.toLowerCase()," "===re?re="space":"."===re&&(re="dot"),_i.forEach($e=>{$e!==re&&(0,ye[$e])(j)&&(Le+=$e+".")}),Le+=re,Le===z)}static eventCallback(j,z,re){return Le=>{U.matchEventFullKeyCode(Le,j)&&re.runGuarded(()=>z(Le))}}static _normalizeKey(j){return"esc"===j?"escape":j}static#e=this.\u0275fac=function(z){return new(z||U)(w.LFG(te.K0))};static#t=this.\u0275prov=w.Yz7({token:U,factory:U.\u0275fac})}return U})();const bt=(0,w.eFA)(w._c5,"browser",[{provide:w.Lbi,useValue:te.bD},{provide:w.g9A,useValue:function Ke(){ue.makeCurrent()},multi:!0},{provide:te.K0,useFactory:function wt(){return(0,w.RDi)(document),document},deps:[]}]),Rn=new w.OlP(""),Hn=[{provide:w.rWj,useClass:class Ce{addToWindow($){w.dqk.getAngularTestability=(z,re=!0)=>{const Le=$.findTestabilityInTree(z,re);if(null==Le)throw new w.vHH(5103,!1);return Le},w.dqk.getAllAngularTestabilities=()=>$.getAllTestabilities(),w.dqk.getAllAngularRootElements=()=>$.getAllRootElements(),w.dqk.frameworkStabilizers||(w.dqk.frameworkStabilizers=[]),w.dqk.frameworkStabilizers.push(z=>{const re=w.dqk.getAllAngularTestabilities();let Le=re.length,$e=!1;const jt=function(at){$e=$e||at,Le--,0==Le&&z($e)};re.forEach(at=>{at.whenStable(jt)})})}findTestabilityInTree($,j,z){return null==j?null:$.getTestability(j)??(z?(0,te.q)().isShadowRoot(j)?this.findTestabilityInTree($,j.host,!0):this.findTestabilityInTree($,j.parentElement,!0):null)}},deps:[]},{provide:w.lri,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]},{provide:w.dDg,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]}],On=[{provide:w.zSh,useValue:"root"},{provide:w.qLn,useFactory:function Tn(){return new w.qLn},deps:[]},{provide:Y,useClass:Ni,multi:!0,deps:[te.K0,w.R0b,w.Lbi]},{provide:Y,useClass:De,multi:!0,deps:[te.K0]},et,He,se,{provide:w.FYo,useExisting:et},{provide:te.JF,useClass:K,deps:[]},[]];let ln=(()=>{class U{constructor(j){}static withServerTransition(j){return{ngModule:U,providers:[{provide:w.AFp,useValue:j.appId}]}}static#e=this.\u0275fac=function(z){return new(z||U)(w.LFG(Rn,12))};static#t=this.\u0275mod=w.oAB({type:U});static#n=this.\u0275inj=w.cJS({providers:[...On,...Hn],imports:[te.ez,w.hGG]})}return U})(),Vn=(()=>{class U{constructor(j){this._doc=j}getTitle(){return this._doc.title}setTitle(j){this._doc.title=j||""}static#e=this.\u0275fac=function(z){return new(z||U)(w.LFG(te.K0))};static#t=this.\u0275prov=w.Yz7({token:U,factory:function(z){let re=null;return re=z?new z:function Wr(){return new Vn((0,w.LFG)(te.K0))}(),re},providedIn:"root"})}return U})();typeof window<"u"&&window},6387:(Tt,Se,V)=>{V.d(Se,{F0:()=>Kn,rH:()=>ta,Bz:()=>Iu,lC:()=>Ps});var w=V(5879),te=V(5592),b=V(4674),he=V(2459),oe=V(2096),we=V(5619);const{isArray:Ue}=Array,{getPrototypeOf:Ce,prototype:K,keys:Y}=Object;var Oe=V(2737),He=V(7398);const{isArray:Be}=Array;var Wt=V(4564),ge=V(8251),Ne=V(7103);function pe(...E){const D=(0,Wt.yG)(E),_=(0,Wt.jO)(E),{args:A,keys:N}=function se(E){if(1===E.length){const D=E[0];if(Ue(D))return{args:D,keys:null};if(function qe(E){return E&&"object"==typeof E&&Ce(E)===K}(D)){const _=Y(D);return{args:_.map(A=>D[A]),keys:_}}}return{args:E,keys:null}}(E);if(0===A.length)return(0,he.D)([],D);const H=new te.y(function Ze(E,D,_=Oe.y){return A=>{Je(D,()=>{const{length:N}=E,H=new Array(N);let G=N,ee=N;for(let je=0;je<N;je++)Je(D,()=>{const Et=(0,he.D)(E[je],D);let vt=!1;Et.subscribe((0,ge.x)(A,In=>{H[je]=In,vt||(vt=!0,ee--),ee||A.next(_(H.slice()))},()=>{--G||A.complete()}))},A)},A)}}(A,D,N?G=>function rn(E,D){return E.reduce((_,A,N)=>(_[A]=D[N],_),{})}(N,G):Oe.y));return _?H.pipe(function ht(E){return(0,He.U)(D=>function it(E,D){return Be(D)?E(...D):E(D)}(E,D))}(_)):H}function Je(E,D,_){E?(0,Ne.f)(_,E,D):D()}var et=V(6973),Ie=V(5211),Mt=V(4829);function Yt(E){return new te.y(D=>{(0,Mt.Xf)(E()).subscribe(D)})}var Fr=V(8407),or=V(8504),fr=V(6232),Wn=V(7394),Ni=V(9360);function _i(){return(0,Ni.e)((E,D)=>{let _=null;E._refCount++;const A=(0,ge.x)(D,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(_=null);const N=E._connection,H=_;_=null,N&&(!H||N===H)&&N.unsubscribe(),D.unsubscribe()});E.subscribe(A),A.closed||(_=E.connect())})}class me extends te.y{constructor(D,_){super(),this.source=D,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,Ni.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Wn.w0;const _=this.getSubject();D.add(this.source.subscribe((0,ge.x)(_,void 0,()=>{this._teardown(),_.complete()},A=>{this._teardown(),_.error(A)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Wn.w0.EMPTY)}return D}refCount(){return _i()(this)}}var ye=V(8645),De=V(6814),Te=V(4664),Ae=V(8180),Pe=V(7921),pt=V(2181),Ke=V(1631),Tn=V(1374);function wt(E,D){return(0,b.m)(D)?(0,Ke.z)(E,D,1):(0,Ke.z)(E,1)}var Ut=V(9397),bt=V(6306),Rn=V(6699),Hn=V(3572);function On(E){return E<=0?()=>fr.E:(0,Ni.e)((D,_)=>{let A=[];D.subscribe((0,ge.x)(_,N=>{A.push(N),E<A.length&&A.shift()},()=>{for(const N of A)_.next(N);_.complete()},void 0,()=>{A=null}))})}var ln=V(3026);function as(E){return(0,Ni.e)((D,_)=>{try{D.subscribe(_)}finally{_.add(E)}})}var Wr=V(7537),Vn=V(6593);const Ct="primary",yr=Symbol("RouteTitle");class St{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const _=this.params[D];return Array.isArray(_)?_[0]:_}return null}getAll(D){if(this.has(D)){const _=this.params[D];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function kt(E){return new St(E)}function Bt(E,D,_){const A=_.path.split("/");if(A.length>E.length||"full"===_.pathMatch&&(D.hasChildren()||A.length<E.length))return null;const N={};for(let H=0;H<A.length;H++){const G=A[H],ee=E[H];if(G.startsWith(":"))N[G.substring(1)]=ee;else if(G!==ee.path)return null}return{consumed:E.slice(0,A.length),posParams:N}}function qn(E,D){const _=E?Object.keys(E):void 0,A=D?Object.keys(D):void 0;if(!_||!A||_.length!=A.length)return!1;let N;for(let H=0;H<_.length;H++)if(N=_[H],!Cr(E[N],D[N]))return!1;return!0}function Cr(E,D){if(Array.isArray(E)&&Array.isArray(D)){if(E.length!==D.length)return!1;const _=[...E].sort(),A=[...D].sort();return _.every((N,H)=>A[H]===N)}return E===D}function mn(E){return E.length>0?E[E.length-1]:null}function Dn(E){return function ue(E){return!!E&&(E instanceof te.y||(0,b.m)(E.lift)&&(0,b.m)(E.subscribe))}(E)?E:(0,w.QGY)(E)?(0,he.D)(Promise.resolve(E)):(0,oe.of)(E)}const us={exact:function Lr(E,D,_){if(!mr(E.segments,D.segments)||!Gi(E.segments,D.segments,_)||E.numberOfChildren!==D.numberOfChildren)return!1;for(const A in D.children)if(!E.children[A]||!Lr(E.children[A],D.children[A],_))return!1;return!0},subset:zi},sn={exact:function Zt(E,D){return qn(E,D)},subset:function Hi(E,D){return Object.keys(D).length<=Object.keys(E).length&&Object.keys(D).every(_=>Cr(E[_],D[_]))},ignored:()=>!0};function ai(E,D,_){return us[_.paths](E.root,D.root,_.matrixParams)&&sn[_.queryParams](E.queryParams,D.queryParams)&&!("exact"===_.fragment&&E.fragment!==D.fragment)}function zi(E,D,_){return Cs(E,D,D.segments,_)}function Cs(E,D,_,A){if(E.segments.length>_.length){const N=E.segments.slice(0,_.length);return!(!mr(N,_)||D.hasChildren()||!Gi(N,_,A))}if(E.segments.length===_.length){if(!mr(E.segments,_)||!Gi(E.segments,_,A))return!1;for(const N in D.children)if(!E.children[N]||!zi(E.children[N],D.children[N],A))return!1;return!0}{const N=_.slice(0,E.segments.length),H=_.slice(E.segments.length);return!!(mr(E.segments,N)&&Gi(E.segments,N,A)&&E.children[Ct])&&Cs(E.children[Ct],D,H,A)}}function Gi(E,D,_){return D.every((A,N)=>sn[_](E[N].parameters,A.parameters))}class vr{constructor(D=new Jt([],{}),_={},A=null){this.root=D,this.queryParams=_,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kt(this.queryParams)),this._queryParamMap}toString(){return U.serialize(this)}}class Jt{constructor(D,_){this.segments=D,this.children=_,this.parent=null,Object.values(_).forEach(A=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $(this)}}class pr{constructor(D,_){this.path=D,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=kt(this.parameters)),this._parameterMap}toString(){return qt(this)}}function mr(E,D){return E.length===D.length&&E.every((_,A)=>_.path===D[A].path)}let yi=(()=>{class E{static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:function(){return new J},providedIn:"root"})}return E})();class J{parse(D){const _=new Lt(D);return new vr(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(D){const _=`/${j(D.root,!0)}`,A=function An(E){const D=Object.keys(E).map(_=>{const A=E[_];return Array.isArray(A)?A.map(N=>`${re(_)}=${re(N)}`).join("&"):`${re(_)}=${re(A)}`}).filter(_=>!!_);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${_}${A}${"string"==typeof D.fragment?`#${function Le(E){return encodeURI(E)}(D.fragment)}`:""}`}}const U=new J;function $(E){return E.segments.map(D=>qt(D)).join("/")}function j(E,D){if(!E.hasChildren())return $(E);if(D){const _=E.children[Ct]?j(E.children[Ct],!1):"",A=[];return Object.entries(E.children).forEach(([N,H])=>{N!==Ct&&A.push(`${N}:${j(H,!1)}`)}),A.length>0?`${_}(${A.join("//")})`:_}{const _=function qr(E,D){let _=[];return Object.entries(E.children).forEach(([A,N])=>{A===Ct&&(_=_.concat(D(N,A)))}),Object.entries(E.children).forEach(([A,N])=>{A!==Ct&&(_=_.concat(D(N,A)))}),_}(E,(A,N)=>N===Ct?[j(E.children[Ct],!1)]:[`${N}:${j(A,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[Ct]?`${$(E)}/${_[0]}`:`${$(E)}/(${_.join("//")})`}}function z(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function re(E){return z(E).replace(/%3B/gi,";")}function $e(E){return z(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jt(E){return decodeURIComponent(E)}function at(E){return jt(E.replace(/\+/g,"%20"))}function qt(E){return`${$e(E.path)}${function Ft(E){return Object.keys(E).map(D=>`;${$e(D)}=${$e(E[D])}`).join("")}(E.parameters)}`}const vi=/^[^\/()?;#]+/;function Oi(E){const D=E.match(vi);return D?D[0]:""}const Ho=/^[^\/()?;=#]+/,de=/^[^=?&#]+/,ut=/^[^&#]+/;class Lt{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(D.length>0||Object.keys(_).length>0)&&(A[Ct]=new Jt(D,_)),A}parseSegment(){const D=Oi(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new w.vHH(4009,!1);return this.capture(D),new pr(jt(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const _=function ve(E){const D=E.match(Ho);return D?D[0]:""}(this.remaining);if(!_)return;this.capture(_);let A="";if(this.consumeOptional("=")){const N=Oi(this.remaining);N&&(A=N,this.capture(A))}D[jt(_)]=jt(A)}parseQueryParam(D){const _=function Fe(E){const D=E.match(de);return D?D[0]:""}(this.remaining);if(!_)return;this.capture(_);let A="";if(this.consumeOptional("=")){const G=function Xe(E){const D=E.match(ut);return D?D[0]:""}(this.remaining);G&&(A=G,this.capture(A))}const N=at(_),H=at(A);if(D.hasOwnProperty(N)){let G=D[N];Array.isArray(G)||(G=[G],D[N]=G),G.push(H)}else D[N]=H}parseParens(D){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=Oi(this.remaining),N=this.remaining[A.length];if("/"!==N&&")"!==N&&";"!==N)throw new w.vHH(4010,!1);let H;A.indexOf(":")>-1?(H=A.slice(0,A.indexOf(":")),this.capture(H),this.capture(":")):D&&(H=Ct);const G=this.parseChildren();_[H]=1===Object.keys(G).length?G[Ct]:new Jt([],G),this.consumeOptional("//")}return _}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new w.vHH(4011,!1)}}function Kt(E){return E.segments.length>0?new Jt([],{[Ct]:E}):E}function Pn(E){const D={};for(const A of Object.keys(E.children)){const H=Pn(E.children[A]);if(A===Ct&&0===H.segments.length&&H.hasChildren())for(const[G,ee]of Object.entries(H.children))D[G]=ee;else(H.segments.length>0||H.hasChildren())&&(D[A]=H)}return function Un(E){if(1===E.numberOfChildren&&E.children[Ct]){const D=E.children[Ct];return new Jt(E.segments.concat(D.segments),D.children)}return E}(new Jt(E.segments,D))}function Ee(E){return E instanceof vr}function Yr(E){let D;const N=Kt(function _(H){const G={};for(const je of H.children){const Et=_(je);G[je.outlet]=Et}const ee=new Jt(H.url,G);return H===E&&(D=ee),ee}(E.root));return D??N}function cn(E,D,_,A){let N=E;for(;N.parent;)N=N.parent;if(0===D.length)return tt(N,N,N,_,A);const H=function js(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new dt(!0,0,E);let D=0,_=!1;const A=E.reduce((N,H,G)=>{if("object"==typeof H&&null!=H){if(H.outlets){const ee={};return Object.entries(H.outlets).forEach(([je,Et])=>{ee[je]="string"==typeof Et?Et.split("/"):Et}),[...N,{outlets:ee}]}if(H.segmentPath)return[...N,H.segmentPath]}return"string"!=typeof H?[...N,H]:0===G?(H.split("/").forEach((ee,je)=>{0==je&&"."===ee||(0==je&&""===ee?_=!0:".."===ee?D++:""!=ee&&N.push(ee))}),N):[...N,H]},[]);return new dt(_,D,A)}(D);if(H.toRoot())return tt(N,N,new Jt([],{}),_,A);const G=function Ra(E,D,_){if(E.isAbsolute)return new $s(D,!0,0);if(!_)return new $s(D,!1,NaN);if(null===_.parent)return new $s(_,!0,0);const A=Ss(E.commands[0])?0:1;return function Pa(E,D,_){let A=E,N=D,H=_;for(;H>N;){if(H-=N,A=A.parent,!A)throw new w.vHH(4005,!1);N=A.segments.length}return new $s(A,!1,N-H)}(_,_.segments.length-1+A,E.numberOfDoubleDots)}(H,N,E),ee=G.processChildren?Hs(G.segmentGroup,G.index,H.commands):Jr(G.segmentGroup,G.index,H.commands);return tt(N,G.segmentGroup,ee,_,A)}function Ss(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function Vr(E){return"object"==typeof E&&null!=E&&E.outlets}function tt(E,D,_,A,N){let G,H={};A&&Object.entries(A).forEach(([je,Et])=>{H[je]=Array.isArray(Et)?Et.map(vt=>`${vt}`):`${Et}`}),G=E===D?_:bs(E,D,_);const ee=Kt(Pn(G));return new vr(ee,H,N)}function bs(E,D,_){const A={};return Object.entries(E.children).forEach(([N,H])=>{A[N]=H===D?_:bs(H,D,_)}),new Jt(E.segments,A)}class dt{constructor(D,_,A){if(this.isAbsolute=D,this.numberOfDoubleDots=_,this.commands=A,D&&A.length>0&&Ss(A[0]))throw new w.vHH(4003,!1);const N=A.find(Vr);if(N&&N!==mn(A))throw new w.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $s{constructor(D,_,A){this.segmentGroup=D,this.processChildren=_,this.index=A}}function Jr(E,D,_){if(E||(E=new Jt([],{})),0===E.segments.length&&E.hasChildren())return Hs(E,D,_);const A=function Er(E,D,_){let A=0,N=D;const H={match:!1,pathIndex:0,commandIndex:0};for(;N<E.segments.length;){if(A>=_.length)return H;const G=E.segments[N],ee=_[A];if(Vr(ee))break;const je=`${ee}`,Et=A<_.length-1?_[A+1]:null;if(N>0&&void 0===je)break;if(je&&Et&&"object"==typeof Et&&void 0===Et.outlets){if(!ru(je,Et,G))return H;A+=2}else{if(!ru(je,{},G))return H;A++}N++}return{match:!0,pathIndex:N,commandIndex:A}}(E,D,_),N=_.slice(A.commandIndex);if(A.match&&A.pathIndex<E.segments.length){const H=new Jt(E.segments.slice(0,A.pathIndex),{});return H.children[Ct]=new Jt(E.segments.slice(A.pathIndex),E.children),Hs(H,0,N)}return A.match&&0===N.length?new Jt(E.segments,{}):A.match&&!E.hasChildren()?zs(E,D,_):A.match?Hs(E,0,N):zs(E,D,_)}function Hs(E,D,_){if(0===_.length)return new Jt(E.segments,{});{const A=function Yu(E){return Vr(E[0])?E[0].outlets:{[Ct]:E}}(_),N={};if(Object.keys(A).some(H=>H!==Ct)&&E.children[Ct]&&1===E.numberOfChildren&&0===E.children[Ct].segments.length){const H=Hs(E.children[Ct],D,_);return new Jt(E.segments,H.children)}return Object.entries(A).forEach(([H,G])=>{"string"==typeof G&&(G=[G]),null!==G&&(N[H]=Jr(E.children[H],D,G))}),Object.entries(E.children).forEach(([H,G])=>{void 0===A[H]&&(N[H]=G)}),new Jt(E.segments,N)}}function zs(E,D,_){const A=E.segments.slice(0,D);let N=0;for(;N<_.length;){const H=_[N];if(Vr(H)){const je=_r(H.outlets);return new Jt(A,je)}if(0===N&&Ss(_[0])){A.push(new pr(E.segments[D].path,Xr(_[0]))),N++;continue}const G=Vr(H)?H.outlets[Ct]:`${H}`,ee=N<_.length-1?_[N+1]:null;G&&ee&&Ss(ee)?(A.push(new pr(G,Xr(ee))),N+=2):(A.push(new pr(G,{})),N++)}return new Jt(A,{})}function _r(E){const D={};return Object.entries(E).forEach(([_,A])=>{"string"==typeof A&&(A=[A]),null!==A&&(D[_]=zs(new Jt([],{}),0,A))}),D}function Xr(E){const D={};return Object.entries(E).forEach(([_,A])=>D[_]=`${A}`),D}function ru(E,D,_){return E==_.path&&qn(D,_.parameters)}const oo="imperative";class ui{constructor(D,_){this.id=D,this.url=_}}class iu extends ui{constructor(D,_,A="imperative",N=null){super(D,_),this.type=0,this.navigationTrigger=A,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _n extends ui{constructor(D,_,A){super(D,_),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ao extends ui{constructor(D,_,A,N){super(D,_),this.reason=A,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wi extends ui{constructor(D,_,A,N){super(D,_),this.reason=A,this.code=N,this.type=16}}class uo extends ui{constructor(D,_,A,N){super(D,_),this.error=A,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fi extends ui{constructor(D,_,A,N){super(D,_),this.urlAfterRedirects=A,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zo extends ui{constructor(D,_,A,N){super(D,_),this.urlAfterRedirects=A,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class co extends ui{constructor(D,_,A,N,H){super(D,_),this.urlAfterRedirects=A,this.state=N,this.shouldActivate=H,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class su extends ui{constructor(D,_,A,N){super(D,_),this.urlAfterRedirects=A,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cs extends ui{constructor(D,_,A,N){super(D,_),this.urlAfterRedirects=A,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ou{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xt{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ir{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sr{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gs{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class br{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Go{constructor(D,_,A){this.routerEvent=D,this.position=_,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ls{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ds,this.attachRef=null}}let ds=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(_,A){const N=this.getOrCreateContext(_);N.outlet=A,this.contexts.set(_,N)}onChildOutletDestroyed(_){const A=this.getContext(_);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let A=this.getContext(_);return A||(A=new ls,this.contexts.set(_,A)),A}getContext(_){return this.contexts.get(_)||null}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();class au{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const _=this.pathFromRoot(D);return _.length>1?_[_.length-2]:null}children(D){const _=Mn(D,this._root);return _?_.children.map(A=>A.value):[]}firstChild(D){const _=Mn(D,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(D){const _=nt(D,this._root);return _.length<2?[]:_[_.length-2].children.map(N=>N.value).filter(N=>N!==D)}pathFromRoot(D){return nt(D,this._root).map(_=>_.value)}}function Mn(E,D){if(E===D.value)return D;for(const _ of D.children){const A=Mn(E,_);if(A)return A}return null}function nt(E,D){if(E===D.value)return[D];for(const _ of D.children){const A=nt(E,_);if(A.length)return A.unshift(D),A}return[]}class Rt{constructor(D,_){this.value=D,this.children=_}toString(){return`TreeNode(${this.value})`}}function dn(E){const D={};return E&&E.children.forEach(_=>D[_.value.outlet]=_),D}class Ur extends au{constructor(D,_){super(D),this.snapshot=_,wr(this,D)}toString(){return this.snapshot.toString()}}function Rs(E,D){const _=function ur(E,D){const G=new Ii([],{},{},"",{},Ct,D,null,{});return new xt("",new Rt(G,[]))}(0,D),A=new we.X([new pr("",{})]),N=new we.X({}),H=new we.X({}),G=new we.X({}),ee=new we.X(""),je=new Ei(A,N,G,ee,H,Ct,D,_.root);return je.snapshot=_.root,new Ur(new Rt(je,[]),_)}class Ei{constructor(D,_,A,N,H,G,ee,je){this.urlSubject=D,this.paramsSubject=_,this.queryParamsSubject=A,this.fragmentSubject=N,this.dataSubject=H,this.outlet=G,this.component=ee,this._futureSnapshot=je,this.title=this.dataSubject?.pipe((0,He.U)(Et=>Et[yr]))??(0,oe.of)(void 0),this.url=D,this.params=_,this.queryParams=A,this.fragment=N,this.data=H}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,He.U)(D=>kt(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,He.U)(D=>kt(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bn(E,D="emptyOnly"){const _=E.pathFromRoot;let A=0;if("always"!==D)for(A=_.length-1;A>=1;){const N=_[A],H=_[A-1];if(N.routeConfig&&""===N.routeConfig.path)A--;else{if(H.component)break;A--}}return function qi(E){return E.reduce((D,_)=>({params:{...D.params,..._.params},data:{...D.data,..._.data},resolve:{..._.data,...D.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(A))}class Ii{get title(){return this.data?.[yr]}constructor(D,_,A,N,H,G,ee,je,Et){this.url=D,this.params=_,this.queryParams=A,this.fragment=N,this.data=H,this.outlet=G,this.component=ee,this.routeConfig=je,this._resolve=Et}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xt extends au{constructor(D,_){super(_),this.url=D,wr(this,_)}toString(){return lo(this._root)}}function wr(E,D){D.value._routerState=E,D.children.forEach(_=>wr(E,_))}function lo(E){const D=E.children.length>0?` { ${E.children.map(lo).join(", ")} } `:"";return`${E.value}${D}`}function Zi(E){if(E.snapshot){const D=E.snapshot,_=E._futureSnapshot;E.snapshot=_,qn(D.queryParams,_.queryParams)||E.queryParamsSubject.next(_.queryParams),D.fragment!==_.fragment&&E.fragmentSubject.next(_.fragment),qn(D.params,_.params)||E.paramsSubject.next(_.params),function kn(E,D){if(E.length!==D.length)return!1;for(let _=0;_<E.length;++_)if(!qn(E[_],D[_]))return!1;return!0}(D.url,_.url)||E.urlSubject.next(_.url),qn(D.data,_.data)||E.dataSubject.next(_.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function hn(E,D){const _=qn(E.params,D.params)&&function gr(E,D){return mr(E,D)&&E.every((_,A)=>qn(_.parameters,D[A].parameters))}(E.url,D.url);return _&&!(!E.parent!=!D.parent)&&(!E.parent||hn(E.parent,D.parent))}let Ps=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ct,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.parentContexts=(0,w.f3M)(ds),this.location=(0,w.f3M)(w.s_b),this.changeDetector=(0,w.f3M)(w.sBO),this.environmentInjector=(0,w.f3M)(w.lqb),this.inputBinder=(0,w.f3M)(ei,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(_){if(_.name){const{firstChange:A,previousValue:N}=_.name;if(A)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(_){return this.parentContexts.getContext(_)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const _=this.parentContexts.getContext(this.name);_?.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,!1);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,A){this.activated=_,this._activatedRoute=A,this.location.insert(_.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,A){if(this.isActivated)throw new w.vHH(4013,!1);this._activatedRoute=_;const N=this.location,G=_.snapshot.component,ee=this.parentContexts.getOrCreateContext(this.name).children,je=new Ms(_,ee,N.injector);this.activated=N.createComponent(G,{index:N.length,injector:je,environmentInjector:A??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275dir=w.lG2({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[w.TTD]})}return E})();class Ms{constructor(D,_,A){this.route=D,this.childContexts=_,this.parent=A}get(D,_){return D===Ei?this.route:D===ds?this.childContexts:this.parent.get(D,_)}}const ei=new w.OlP("");let xs=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(_){this.unsubscribeFromRouteData(_),this.subscribeToRouteData(_)}unsubscribeFromRouteData(_){this.outletDataSubscriptions.get(_)?.unsubscribe(),this.outletDataSubscriptions.delete(_)}subscribeToRouteData(_){const{activatedRoute:A}=_,N=pe([A.queryParams,A.params,A.data]).pipe((0,Te.w)(([H,G,ee],je)=>(ee={...H,...G,...ee},0===je?(0,oe.of)(ee):Promise.resolve(ee)))).subscribe(H=>{if(!_.isActivated||!_.activatedComponentRef||_.activatedRoute!==A||null===A.component)return void this.unsubscribeFromRouteData(_);const G=(0,w.qFp)(A.component);if(G)for(const{templateName:ee}of G.inputs)_.activatedComponentRef.setInput(ee,H[ee]);else this.unsubscribeFromRouteData(_)});this.outletDataSubscriptions.set(_,N)}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac})}return E})();function ti(E,D,_){if(_&&E.shouldReuseRoute(D.value,_.value.snapshot)){const A=_.value;A._futureSnapshot=D.value;const N=function Li(E,D,_){return D.children.map(A=>{for(const N of _.children)if(E.shouldReuseRoute(A.value,N.value.snapshot))return ti(E,A,N);return ti(E,A)})}(E,D,_);return new Rt(A,N)}{if(E.shouldAttach(D.value)){const H=E.retrieve(D.value);if(null!==H){const G=H.route;return G.value._futureSnapshot=D.value,G.children=D.children.map(ee=>ti(E,ee)),G}}const A=function Ma(E){return new Ei(new we.X(E.url),new we.X(E.params),new we.X(E.queryParams),new we.X(E.fragment),new we.X(E.data),E.outlet,E.component,E)}(D.value),N=D.children.map(H=>ti(E,H));return new Rt(A,N)}}const Ki="ngNavigationCancelingError";function Ht(E,D){const{redirectTo:_,navigationBehaviorOptions:A}=Ee(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,N=cu(!1,0,D);return N.url=_,N.navigationBehaviorOptions=A,N}function cu(E,D,_){const A=new Error("NavigationCancelingError: "+(E||""));return A[Ki]=!0,A.cancellationCode=D,_&&(A.url=_),A}function ho(E){return jn(E)&&Ee(E.url)}function jn(E){return E&&E[Ki]}let En=(()=>{class E{static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275cmp=w.Xpm({type:E,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(A,N){1&A&&w._UZ(0,"router-outlet")},dependencies:[Ps],encapsulation:2})}return E})();function ps(E){const D=E.children&&E.children.map(ps),_=D?{...E,children:D}:{...E};return!_.component&&!_.loadComponent&&(D||_.loadChildren)&&_.outlet&&_.outlet!==Ct&&(_.component=En),_}function Cn(E){return E.outlet||Ct}function Ws(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let D=E.parent;D;D=D.parent){const _=D.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class du{constructor(D,_,A,N,H){this.routeReuseStrategy=D,this.futureState=_,this.currState=A,this.forwardEvent=N,this.inputBindingEnabled=H}activate(D){const _=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,A,D),Zi(this.futureState.root),this.activateChildRoutes(_,A,D)}deactivateChildRoutes(D,_,A){const N=dn(_);D.children.forEach(H=>{const G=H.value.outlet;this.deactivateRoutes(H,N[G],A),delete N[G]}),Object.values(N).forEach(H=>{this.deactivateRouteAndItsChildren(H,A)})}deactivateRoutes(D,_,A){const N=D.value,H=_?_.value:null;if(N===H)if(N.component){const G=A.getContext(N.outlet);G&&this.deactivateChildRoutes(D,_,G.children)}else this.deactivateChildRoutes(D,_,A);else H&&this.deactivateRouteAndItsChildren(_,A)}deactivateRouteAndItsChildren(D,_){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,_):this.deactivateRouteAndOutlet(D,_)}detachAndStoreRouteSubtree(D,_){const A=_.getContext(D.value.outlet),N=A&&D.value.component?A.children:_,H=dn(D);for(const G of Object.keys(H))this.deactivateRouteAndItsChildren(H[G],N);if(A&&A.outlet){const G=A.outlet.detach(),ee=A.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:G,route:D,contexts:ee})}}deactivateRouteAndOutlet(D,_){const A=_.getContext(D.value.outlet),N=A&&D.value.component?A.children:_,H=dn(D);for(const G of Object.keys(H))this.deactivateRouteAndItsChildren(H[G],N);A&&(A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated()),A.attachRef=null,A.route=null)}activateChildRoutes(D,_,A){const N=dn(_);D.children.forEach(H=>{this.activateRoutes(H,N[H.value.outlet],A),this.forwardEvent(new br(H.value.snapshot))}),D.children.length&&this.forwardEvent(new Sr(D.value.snapshot))}activateRoutes(D,_,A){const N=D.value,H=_?_.value:null;if(Zi(N),N===H)if(N.component){const G=A.getOrCreateContext(N.outlet);this.activateChildRoutes(D,_,G.children)}else this.activateChildRoutes(D,_,A);else if(N.component){const G=A.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const ee=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),G.children.onOutletReAttached(ee.contexts),G.attachRef=ee.componentRef,G.route=ee.route.value,G.outlet&&G.outlet.attach(ee.componentRef,ee.route.value),Zi(ee.route.value),this.activateChildRoutes(D,null,G.children)}else{const ee=Ws(N.snapshot);G.attachRef=null,G.route=N,G.injector=ee,G.outlet&&G.outlet.activateWith(N,G.injector),this.activateChildRoutes(D,null,G.children)}}else this.activateChildRoutes(D,null,A)}}class xa{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class po{constructor(D,_){this.component=D,this.route=_}}function hu(E,D,_){const A=E._root;return xn(A,D?D._root:null,_,[A.value])}function go(E,D){const _=Symbol(),A=D.get(E,_);return A===_?"function"!=typeof E||(0,w.Z0I)(E)?D.get(E):E:A}function xn(E,D,_,A,N={canDeactivateChecks:[],canActivateChecks:[]}){const H=dn(D);return E.children.forEach(G=>{(function Xu(E,D,_,A,N={canDeactivateChecks:[],canActivateChecks:[]}){const H=E.value,G=D?D.value:null,ee=_?_.getContext(E.value.outlet):null;if(G&&H.routeConfig===G.routeConfig){const je=function Oa(E,D,_){if("function"==typeof _)return _(E,D);switch(_){case"pathParamsChange":return!mr(E.url,D.url);case"pathParamsOrQueryParamsChange":return!mr(E.url,D.url)||!qn(E.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hn(E,D)||!qn(E.queryParams,D.queryParams);default:return!hn(E,D)}}(G,H,H.routeConfig.runGuardsAndResolvers);je?N.canActivateChecks.push(new xa(A)):(H.data=G.data,H._resolvedData=G._resolvedData),xn(E,D,H.component?ee?ee.children:null:_,A,N),je&&ee&&ee.outlet&&ee.outlet.isActivated&&N.canDeactivateChecks.push(new po(ee.outlet.component,G))}else G&&qo(D,ee,N),N.canActivateChecks.push(new xa(A)),xn(E,null,H.component?ee?ee.children:null:_,A,N)})(G,H[G.value.outlet],_,A.concat([G.value]),N),delete H[G.value.outlet]}),Object.entries(H).forEach(([G,ee])=>qo(ee,_.getContext(G),N)),N}function qo(E,D,_){const A=dn(E),N=E.value;Object.entries(A).forEach(([H,G])=>{qo(G,N.component?D?D.children.getContext(H):null:D,_)}),_.canDeactivateChecks.push(new po(N.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,N))}function mo(E){return"function"==typeof E}function Vi(E){return E instanceof et.K||"EmptyError"===E?.name}const cr=Symbol("INITIAL_VALUE");function Qi(){return(0,Te.w)(E=>pe(E.map(D=>D.pipe((0,Ae.q)(1),(0,Pe.O)(cr)))).pipe((0,He.U)(D=>{for(const _ of D)if(!0!==_){if(_===cr)return cr;if(!1===_||_ instanceof vr)return _}return!0}),(0,pt.h)(D=>D!==cr),(0,Ae.q)(1)))}function Zn(E){return(0,Fr.z)((0,Ut.b)(D=>{if(Ee(D))throw Ht(0,D)}),(0,He.U)(D=>!0===D))}class _s{constructor(D){this.segmentGroup=D||null}}class Fa{constructor(D){this.urlTree=D}}function ys(E){return(0,or._)(new _s(E))}function Ko(E){return(0,or._)(new Fa(E))}class Qo{constructor(D,_){this.urlSerializer=D,this.urlTree=_}noMatchError(D){return new w.vHH(4002,!1)}lineralizeSegments(D,_){let A=[],N=_.root;for(;;){if(A=A.concat(N.segments),0===N.numberOfChildren)return(0,oe.of)(A);if(N.numberOfChildren>1||!N.children[Ct])return(0,or._)(new w.vHH(4e3,!1));N=N.children[Ct]}}applyRedirectCommands(D,_,A){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),D,A)}applyRedirectCreateUrlTree(D,_,A,N){const H=this.createSegmentGroup(D,_.root,A,N);return new vr(H,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(D,_){const A={};return Object.entries(D).forEach(([N,H])=>{if("string"==typeof H&&H.startsWith(":")){const ee=H.substring(1);A[N]=_[ee]}else A[N]=H}),A}createSegmentGroup(D,_,A,N){const H=this.createSegments(D,_.segments,A,N);let G={};return Object.entries(_.children).forEach(([ee,je])=>{G[ee]=this.createSegmentGroup(D,je,A,N)}),new Jt(H,G)}createSegments(D,_,A,N){return _.map(H=>H.path.startsWith(":")?this.findPosParam(D,H,N):this.findOrReturn(H,A))}findPosParam(D,_,A){const N=A[_.path.substring(1)];if(!N)throw new w.vHH(4001,!1);return N}findOrReturn(D,_){let A=0;for(const N of _){if(N.path===D.path)return _.splice(A),N;A++}return D}}const Yo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Va(E,D,_,A,N){const H=To(E,D,_);return H.matched?(A=function hs(E,D){return E.providers&&!E._injector&&(E._injector=(0,w.MMx)(E.providers,D,`Route: ${E.path}`)),E._injector??D}(D,A),function wo(E,D,_,A){const N=D.canMatch;if(!N||0===N.length)return(0,oe.of)(!0);const H=N.map(G=>{const ee=go(G,E);return Dn(function Zo(E){return E&&mo(E.canMatch)}(ee)?ee.canMatch(D,_):E.runInContext(()=>ee(D,_)))});return(0,oe.of)(H).pipe(Qi(),Zn())}(A,D,_).pipe((0,He.U)(G=>!0===G?H:{...Yo}))):(0,oe.of)(H)}function To(E,D,_){if(""===D.path)return"full"===D.pathMatch&&(E.hasChildren()||_.length>0)?{...Yo}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const N=(D.matcher||Bt)(_,E,D);if(!N)return{...Yo};const H={};Object.entries(N.posParams??{}).forEach(([ee,je])=>{H[ee]=je.path});const G=N.consumed.length>0?{...H,...N.consumed[N.consumed.length-1].parameters}:H;return{matched:!0,consumedSegments:N.consumed,remainingSegments:_.slice(N.consumed.length),parameters:G,positionalParamSegments:N.posParams??{}}}function Zs(E,D,_,A){return _.length>0&&function Do(E,D,_){return _.some(A=>Jo(E,D,A)&&Cn(A)!==Ct)}(E,_,A)?{segmentGroup:new Jt(D,tc(A,new Jt(_,E.children))),slicedSegments:[]}:0===_.length&&function Ks(E,D,_){return _.some(A=>Jo(E,D,A))}(E,_,A)?{segmentGroup:new Jt(E.segments,ol(E,0,_,A,E.children)),slicedSegments:_}:{segmentGroup:new Jt(E.segments,E.children),slicedSegments:_}}function ol(E,D,_,A,N){const H={};for(const G of A)if(Jo(E,_,G)&&!N[Cn(G)]){const ee=new Jt([],{});H[Cn(G)]=ee}return{...N,...H}}function tc(E,D){const _={};_[Ct]=D;for(const A of E)if(""===A.path&&Cn(A)!==Ct){const N=new Jt([],{});_[Cn(A)]=N}return _}function Jo(E,D,_){return(!(E.hasChildren()||D.length>0)||"full"!==_.pathMatch)&&""===_.path}class al{constructor(D,_,A,N,H,G,ee){this.injector=D,this.configLoader=_,this.rootComponentType=A,this.config=N,this.urlTree=H,this.paramsInheritanceStrategy=G,this.urlSerializer=ee,this.allowRedirects=!0,this.applyRedirects=new Qo(this.urlSerializer,this.urlTree)}noMatchError(D){return new w.vHH(4002,!1)}recognize(){const D=Zs(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,Ct).pipe((0,bt.K)(_=>{if(_ instanceof Fa)return this.allowRedirects=!1,this.urlTree=_.urlTree,this.match(_.urlTree);throw _ instanceof _s?this.noMatchError(_):_}),(0,He.U)(_=>{const A=new Ii([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ct,this.rootComponentType,null,{}),N=new Rt(A,_),H=new xt("",N),G=function ki(E,D,_=null,A=null){return cn(Yr(E),D,_,A)}(A,[],this.urlTree.queryParams,this.urlTree.fragment);return G.queryParams=this.urlTree.queryParams,H.url=this.urlSerializer.serialize(G),this.inheritParamsAndData(H._root),{state:H,tree:G}}))}match(D){return this.processSegmentGroup(this.injector,this.config,D.root,Ct).pipe((0,bt.K)(A=>{throw A instanceof _s?this.noMatchError(A):A}))}inheritParamsAndData(D){const _=D.value,A=Bn(_,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data),D.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(D,_,A,N){return 0===A.segments.length&&A.hasChildren()?this.processChildren(D,_,A):this.processSegment(D,_,A,A.segments,N,!0)}processChildren(D,_,A){const N=[];for(const H of Object.keys(A.children))"primary"===H?N.unshift(H):N.push(H);return(0,he.D)(N).pipe(wt(H=>{const G=A.children[H],ee=function fo(E,D){const _=E.filter(A=>Cn(A)===D);return _.push(...E.filter(A=>Cn(A)!==D)),_}(_,H);return this.processSegmentGroup(D,ee,G,H)}),(0,Rn.R)((H,G)=>(H.push(...G),H)),(0,Hn.d)(null),function Ar(E,D){const _=arguments.length>=2;return A=>A.pipe(E?(0,pt.h)((N,H)=>E(N,H,A)):Oe.y,On(1),_?(0,Hn.d)(D):(0,ln.T)(()=>new et.K))}(),(0,Ke.z)(H=>{if(null===H)return ys(A);const G=F(H);return function Ao(E){E.sort((D,_)=>D.value.outlet===Ct?-1:_.value.outlet===Ct?1:D.value.outlet.localeCompare(_.value.outlet))}(G),(0,oe.of)(G)}))}processSegment(D,_,A,N,H,G){return(0,he.D)(_).pipe(wt(ee=>this.processSegmentAgainstRoute(ee._injector??D,_,ee,A,N,H,G).pipe((0,bt.K)(je=>{if(je instanceof _s)return(0,oe.of)(null);throw je}))),(0,Tn.P)(ee=>!!ee),(0,bt.K)(ee=>{if(Vi(ee))return function rc(E,D,_){return 0===D.length&&!E.children[_]}(A,N,H)?(0,oe.of)([]):ys(A);throw ee}))}processSegmentAgainstRoute(D,_,A,N,H,G,ee){return function nc(E,D,_,A){return!!(Cn(E)===A||A!==Ct&&Jo(D,_,E))&&("**"===E.path||To(D,E,_).matched)}(A,N,H,G)?void 0===A.redirectTo?this.matchSegmentAgainstRoute(D,N,A,H,G,ee):ee&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,N,_,A,H,G):ys(N):ys(N)}expandSegmentAgainstRouteUsingRedirect(D,_,A,N,H,G){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,A,N,G):this.expandRegularSegmentAgainstRouteUsingRedirect(D,_,A,N,H,G)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,_,A,N){const H=this.applyRedirects.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Ko(H):this.applyRedirects.lineralizeSegments(A,H).pipe((0,Ke.z)(G=>{const ee=new Jt(G,{});return this.processSegment(D,_,ee,G,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,_,A,N,H,G){const{matched:ee,consumedSegments:je,remainingSegments:Et,positionalParamSegments:vt}=To(_,N,H);if(!ee)return ys(_);const In=this.applyRedirects.applyRedirectCommands(je,N.redirectTo,vt);return N.redirectTo.startsWith("/")?Ko(In):this.applyRedirects.lineralizeSegments(N,In).pipe((0,Ke.z)(di=>this.processSegment(D,A,_,di.concat(Et),G,!1)))}matchSegmentAgainstRoute(D,_,A,N,H,G){let ee;if("**"===A.path){const je=N.length>0?mn(N).parameters:{},Et=new Ii(N,je,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,O(A),Cn(A),A.component??A._loadedComponent??null,A,Z(A));ee=(0,oe.of)({snapshot:Et,consumedSegments:[],remainingSegments:[]}),_.children={}}else ee=Va(_,A,N,D).pipe((0,He.U)(({matched:je,consumedSegments:Et,remainingSegments:vt,parameters:In})=>je?{snapshot:new Ii(Et,In,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,O(A),Cn(A),A.component??A._loadedComponent??null,A,Z(A)),consumedSegments:Et,remainingSegments:vt}:null));return ee.pipe((0,Te.w)(je=>null===je?ys(_):this.getChildConfig(D=A._injector??D,A,N).pipe((0,Te.w)(({routes:Et})=>{const vt=A._loadedInjector??D,{snapshot:In,consumedSegments:di,remainingSegments:Bi}=je,{segmentGroup:vs,slicedSegments:ua}=Zs(_,di,Bi,Et);if(0===ua.length&&vs.hasChildren())return this.processChildren(vt,Et,vs).pipe((0,He.U)(Qr=>null===Qr?null:[new Rt(In,Qr)]));if(0===Et.length&&0===ua.length)return(0,oe.of)([new Rt(In,[])]);const Os=Cn(A)===H;return this.processSegment(vt,Et,vs,ua,Os?Ct:H,!0).pipe((0,He.U)(Qr=>[new Rt(In,Qr)]))}))))}getChildConfig(D,_,A){return _.children?(0,oe.of)({routes:_.children,injector:D}):_.loadChildren?void 0!==_._loadedRoutes?(0,oe.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function ms(E,D,_,A){const N=D.canLoad;if(void 0===N||0===N.length)return(0,oe.of)(!0);const H=N.map(G=>{const ee=go(G,E);return Dn(function sd(E){return E&&mo(E.canLoad)}(ee)?ee.canLoad(D,_):E.runInContext(()=>ee(D,_)))});return(0,oe.of)(H).pipe(Qi(),Zn())}(D,_,A).pipe((0,Ke.z)(N=>N?this.configLoader.loadChildren(D,_).pipe((0,Ut.b)(H=>{_._loadedRoutes=H.routes,_._loadedInjector=H.injector})):function fu(E){return(0,or._)(cu(!1,3))}())):(0,oe.of)({routes:[],injector:D})}}function T(E){const D=E.value.routeConfig;return D&&""===D.path}function F(E){const D=[],_=new Set;for(const A of E){if(!T(A)){D.push(A);continue}const N=D.find(H=>A.value.routeConfig===H.value.routeConfig);void 0!==N?(N.children.push(...A.children),_.add(N)):D.push(A)}for(const A of _){const N=F(A.children);D.push(new Rt(A.value,N))}return D.filter(A=>!_.has(A))}function O(E){return E.data||{}}function Z(E){return E.resolve||{}}function Pt(E){return"string"==typeof E.title||null===E.title}function zn(E){return(0,Te.w)(D=>{const _=E(D);return _?(0,he.D)(_).pipe((0,He.U)(()=>D)):(0,oe.of)(D)})}const en=new w.OlP("ROUTES");let Nn=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,w.f3M)(w.Sil)}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,oe.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const A=Dn(_.loadComponent()).pipe((0,He.U)(Rr),(0,Ut.b)(H=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=H}),as(()=>{this.componentLoaders.delete(_)})),N=new me(A,()=>new ye.x).pipe(_i());return this.componentLoaders.set(_,N),N}loadChildren(_,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,oe.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const H=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,He.U)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(A);let je,Et;return Array.isArray(ee)?Et=ee:(je=ee.create(_).injector,Et=je.get(en,[],w.XFs.Self|w.XFs.Optional).flat()),{routes:Et.map(ps),injector:je}}),as(()=>{this.childrenLoaders.delete(A)})),G=new me(H,()=>new ye.x).pipe(_i());return this.childrenLoaders.set(A,G),G}loadModuleFactoryOrRoutes(_){return Dn(_()).pipe((0,He.U)(Rr),(0,Ke.z)(A=>A instanceof w.YKP||Array.isArray(A)?(0,oe.of)(A):(0,he.D)(this.compiler.compileModuleAsync(A))))}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function Rr(E){return function $n(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let Yi=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ye.x,this.configLoader=(0,w.f3M)(Nn),this.environmentInjector=(0,w.f3M)(w.lqb),this.urlSerializer=(0,w.f3M)(yi),this.rootContexts=(0,w.f3M)(ds),this.inputBindingEnabled=null!==(0,w.f3M)(ei,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,oe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new Xt(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new ou(N))}complete(){this.transitions?.complete()}handleNavigationRequest(_){const A=++this.navigationId;this.transitions?.next({...this.transitions.value,..._,id:A})}setupNavigations(_){return this.transitions=new we.X({id:0,currentUrlTree:_.currentUrlTree,currentRawUrl:_.currentUrlTree,extractedUrl:_.urlHandlingStrategy.extract(_.currentUrlTree),urlAfterRedirects:_.urlHandlingStrategy.extract(_.currentUrlTree),rawUrl:_.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oo,restoredState:null,currentSnapshot:_.routerState.snapshot,targetSnapshot:null,currentRouterState:_.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,pt.h)(A=>0!==A.id),(0,He.U)(A=>({...A,extractedUrl:_.urlHandlingStrategy.extract(A.rawUrl)})),(0,Te.w)(A=>{let N=!1,H=!1;return(0,oe.of)(A).pipe((0,Ut.b)(G=>{this.currentNavigation={id:G.id,initialUrl:G.rawUrl,extractedUrl:G.extractedUrl,trigger:G.source,extras:G.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Te.w)(G=>{const ee=_.browserUrlTree.toString(),je=!_.navigated||G.extractedUrl.toString()!==ee||ee!==_.currentUrlTree.toString();if(!je&&"reload"!==(G.extras.onSameUrlNavigation??_.onSameUrlNavigation)){const vt="";return this.events.next(new Wi(G.id,_.serializeUrl(A.rawUrl),vt,0)),_.rawUrlTree=G.rawUrl,G.resolve(null),fr.E}if(_.urlHandlingStrategy.shouldProcessUrl(G.rawUrl))return li(G.source)&&(_.browserUrlTree=G.extractedUrl),(0,oe.of)(G).pipe((0,Te.w)(vt=>{const In=this.transitions?.getValue();return this.events.next(new iu(vt.id,this.urlSerializer.serialize(vt.extractedUrl),vt.source,vt.restoredState)),In!==this.transitions?.getValue()?fr.E:Promise.resolve(vt)}),function ie(E,D,_,A,N,H){return(0,Ke.z)(G=>function Ua(E,D,_,A,N,H,G="emptyOnly"){return new al(E,D,_,A,N,G,H).recognize()}(E,D,_,A,G.extractedUrl,N,H).pipe((0,He.U)(({state:ee,tree:je})=>({...G,targetSnapshot:ee,urlAfterRedirects:je}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,_.config,this.urlSerializer,_.paramsInheritanceStrategy),(0,Ut.b)(vt=>{if(A.targetSnapshot=vt.targetSnapshot,A.urlAfterRedirects=vt.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:vt.urlAfterRedirects},"eager"===_.urlUpdateStrategy){if(!vt.extras.skipLocationChange){const di=_.urlHandlingStrategy.merge(vt.urlAfterRedirects,vt.rawUrl);_.setBrowserUrl(di,vt)}_.browserUrlTree=vt.urlAfterRedirects}const In=new Fi(vt.id,this.urlSerializer.serialize(vt.extractedUrl),this.urlSerializer.serialize(vt.urlAfterRedirects),vt.targetSnapshot);this.events.next(In)}));if(je&&_.urlHandlingStrategy.shouldProcessUrl(_.rawUrlTree)){const{id:vt,extractedUrl:In,source:di,restoredState:Bi,extras:vs}=G,ua=new iu(vt,this.urlSerializer.serialize(In),di,Bi);this.events.next(ua);const Os=Rs(0,this.rootComponentType).snapshot;return A={...G,targetSnapshot:Os,urlAfterRedirects:In,extras:{...vs,skipLocationChange:!1,replaceUrl:!1}},(0,oe.of)(A)}{const vt="";return this.events.next(new Wi(G.id,_.serializeUrl(A.extractedUrl),vt,1)),_.rawUrlTree=G.rawUrl,G.resolve(null),fr.E}}),(0,Ut.b)(G=>{const ee=new zo(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot);this.events.next(ee)}),(0,He.U)(G=>A={...G,guards:hu(G.targetSnapshot,G.currentSnapshot,this.rootContexts)}),function Ui(E,D){return(0,Ke.z)(_=>{const{targetSnapshot:A,currentSnapshot:N,guards:{canActivateChecks:H,canDeactivateChecks:G}}=_;return 0===G.length&&0===H.length?(0,oe.of)({..._,guardsResult:!0}):function vo(E,D,_,A){return(0,he.D)(E).pipe((0,Ke.z)(N=>function Kr(E,D,_,A,N){const H=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!H||0===H.length)return(0,oe.of)(!0);const G=H.map(ee=>{const je=Ws(D)??N,Et=go(ee,je);return Dn(function ka(E){return E&&mo(E.canDeactivate)}(Et)?Et.canDeactivate(E,D,_,A):je.runInContext(()=>Et(E,D,_,A))).pipe((0,Tn.P)())});return(0,oe.of)(G).pipe(Qi())}(N.component,N.route,_,D,A)),(0,Tn.P)(N=>!0!==N,!0))}(G,A,N,E).pipe((0,Ke.z)(ee=>ee&&function _o(E){return"boolean"==typeof E}(ee)?function sl(E,D,_,A){return(0,he.D)(D).pipe(wt(N=>(0,Ie.z)(function qs(E,D){return null!==E&&D&&D(new Ir(E)),(0,oe.of)(!0)}(N.route.parent,A),function Eo(E,D){return null!==E&&D&&D(new Gs(E)),(0,oe.of)(!0)}(N.route,A),function Io(E,D,_){const A=D[D.length-1],H=D.slice(0,D.length-1).reverse().map(G=>function Na(E){const D=E.routeConfig?E.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:E,guards:D}:null}(G)).filter(G=>null!==G).map(G=>Yt(()=>{const ee=G.guards.map(je=>{const Et=Ws(G.node)??_,vt=go(je,Et);return Dn(function gs(E){return E&&mo(E.canActivateChild)}(vt)?vt.canActivateChild(A,E):Et.runInContext(()=>vt(A,E))).pipe((0,Tn.P)())});return(0,oe.of)(ee).pipe(Qi())}));return(0,oe.of)(H).pipe(Qi())}(E,N.path,_),function ec(E,D,_){const A=D.routeConfig?D.routeConfig.canActivate:null;if(!A||0===A.length)return(0,oe.of)(!0);const N=A.map(H=>Yt(()=>{const G=Ws(D)??_,ee=go(H,G);return Dn(function rl(E){return E&&mo(E.canActivate)}(ee)?ee.canActivate(D,E):G.runInContext(()=>ee(D,E))).pipe((0,Tn.P)())}));return(0,oe.of)(N).pipe(Qi())}(E,N.route,_))),(0,Tn.P)(N=>!0!==N,!0))}(A,H,E,D):(0,oe.of)(ee)),(0,He.U)(ee=>({..._,guardsResult:ee})))})}(this.environmentInjector,G=>this.events.next(G)),(0,Ut.b)(G=>{if(A.guardsResult=G.guardsResult,Ee(G.guardsResult))throw Ht(0,G.guardsResult);const ee=new co(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot,!!G.guardsResult);this.events.next(ee)}),(0,pt.h)(G=>!!G.guardsResult||(_.restoreHistory(G),this.cancelNavigationTransition(G,"",3),!1)),zn(G=>{if(G.guards.canActivateChecks.length)return(0,oe.of)(G).pipe((0,Ut.b)(ee=>{const je=new su(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot);this.events.next(je)}),(0,Te.w)(ee=>{let je=!1;return(0,oe.of)(ee).pipe(function be(E,D){return(0,Ke.z)(_=>{const{targetSnapshot:A,guards:{canActivateChecks:N}}=_;if(!N.length)return(0,oe.of)(_);let H=0;return(0,he.D)(N).pipe(wt(G=>function gt(E,D,_,A){const N=E.routeConfig,H=E._resolve;return void 0!==N?.title&&!Pt(N)&&(H[yr]=N.title),function At(E,D,_,A){const N=function Sn(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===N.length)return(0,oe.of)({});const H={};return(0,he.D)(N).pipe((0,Ke.z)(G=>function on(E,D,_,A){const N=Ws(D)??A,H=go(E,N);return Dn(H.resolve?H.resolve(D,_):N.runInContext(()=>H(D,_)))}(E[G],D,_,A).pipe((0,Tn.P)(),(0,Ut.b)(ee=>{H[G]=ee}))),On(1),function ar(E){return(0,He.U)(()=>E)}(H),(0,bt.K)(G=>Vi(G)?fr.E:(0,or._)(G)))}(H,E,D,A).pipe((0,He.U)(G=>(E._resolvedData=G,E.data=Bn(E,_).resolve,N&&Pt(N)&&(E.data[yr]=N.title),null)))}(G.route,A,E,D)),(0,Ut.b)(()=>H++),On(1),(0,Ke.z)(G=>H===N.length?(0,oe.of)(_):fr.E))})}(_.paramsInheritanceStrategy,this.environmentInjector),(0,Ut.b)({next:()=>je=!0,complete:()=>{je||(_.restoreHistory(ee),this.cancelNavigationTransition(ee,"",2))}}))}),(0,Ut.b)(ee=>{const je=new cs(ee.id,this.urlSerializer.serialize(ee.extractedUrl),this.urlSerializer.serialize(ee.urlAfterRedirects),ee.targetSnapshot);this.events.next(je)}))}),zn(G=>{const ee=je=>{const Et=[];je.routeConfig?.loadComponent&&!je.routeConfig._loadedComponent&&Et.push(this.configLoader.loadComponent(je.routeConfig).pipe((0,Ut.b)(vt=>{je.component=vt}),(0,He.U)(()=>{})));for(const vt of je.children)Et.push(...ee(vt));return Et};return pe(ee(G.targetSnapshot.root)).pipe((0,Hn.d)(),(0,Ae.q)(1))}),zn(()=>this.afterPreactivation()),(0,He.U)(G=>{const ee=function uu(E,D,_){const A=ti(E,D._root,_?_._root:void 0);return new Ur(A,D)}(_.routeReuseStrategy,G.targetSnapshot,G.currentRouterState);return A={...G,targetRouterState:ee}}),(0,Ut.b)(G=>{_.currentUrlTree=G.urlAfterRedirects,_.rawUrlTree=_.urlHandlingStrategy.merge(G.urlAfterRedirects,G.rawUrl),_.routerState=G.targetRouterState,"deferred"===_.urlUpdateStrategy&&(G.extras.skipLocationChange||_.setBrowserUrl(_.rawUrlTree,G),_.browserUrlTree=G.urlAfterRedirects)}),((E,D,_,A)=>(0,He.U)(N=>(new du(D,N.targetRouterState,N.currentRouterState,_,A).activate(E),N)))(this.rootContexts,_.routeReuseStrategy,G=>this.events.next(G),this.inputBindingEnabled),(0,Ae.q)(1),(0,Ut.b)({next:G=>{N=!0,this.lastSuccessfulNavigation=this.currentNavigation,_.navigated=!0,this.events.next(new _n(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(_.currentUrlTree))),_.titleStrategy?.updateTitle(G.targetRouterState.snapshot),G.resolve(!0)},complete:()=>{N=!0}}),as(()=>{N||H||this.cancelNavigationTransition(A,"",1),this.currentNavigation?.id===A.id&&(this.currentNavigation=null)}),(0,bt.K)(G=>{if(H=!0,jn(G)){ho(G)||(_.navigated=!0,_.restoreHistory(A,!0));const ee=new ao(A.id,this.urlSerializer.serialize(A.extractedUrl),G.message,G.cancellationCode);if(this.events.next(ee),ho(G)){const je=_.urlHandlingStrategy.merge(G.url,_.rawUrlTree),Et={skipLocationChange:A.extras.skipLocationChange,replaceUrl:"eager"===_.urlUpdateStrategy||li(A.source)};_.scheduleNavigation(je,oo,null,Et,{resolve:A.resolve,reject:A.reject,promise:A.promise})}else A.resolve(!1)}else{_.restoreHistory(A,!0);const ee=new uo(A.id,this.urlSerializer.serialize(A.extractedUrl),G,A.targetSnapshot??void 0);this.events.next(ee);try{A.resolve(_.errorHandler(G))}catch(je){A.reject(je)}}return fr.E}))}))}cancelNavigationTransition(_,A,N){const H=new ao(_.id,this.urlSerializer.serialize(_.extractedUrl),A,N);this.events.next(H),_.resolve(!1)}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function li(E){return E!==oo}let Br=(()=>{class E{buildTitle(_){let A,N=_.root;for(;void 0!==N;)A=this.getResolvedTitleForRoute(N)??A,N=N.children.find(H=>H.outlet===Ct);return A}getResolvedTitleForRoute(_){return _.data[yr]}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:function(){return(0,w.f3M)(Ti)},providedIn:"root"})}return E})(),Ti=(()=>{class E extends Br{constructor(_){super(),this.title=_}updateTitle(_){const A=this.buildTitle(_);void 0!==A&&this.title.setTitle(A)}static#e=this.\u0275fac=function(A){return new(A||E)(w.LFG(Vn.Dx))};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),Xo=(()=>{class E{static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:function(){return(0,w.f3M)(pu)},providedIn:"root"})}return E})();class Ih{shouldDetach(D){return!1}store(D,_){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,_){return D.routeConfig===_.routeConfig}}let pu=(()=>{class E extends Ih{static#e=this.\u0275fac=function(){let _;return function(N){return(_||(_=w.n5z(E)))(N||E)}}();static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const gu=new w.OlP("",{providedIn:"root",factory:()=>({})});let od=(()=>{class E{static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:function(){return(0,w.f3M)($t)},providedIn:"root"})}return E})(),$t=(()=>{class E{shouldProcessUrl(_){return!0}extract(_){return _}merge(_,A){return _}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();var ea=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(ea||{});function ad(E,D){E.events.pipe((0,pt.h)(_=>_ instanceof _n||_ instanceof ao||_ instanceof uo||_ instanceof Wi),(0,He.U)(_=>_ instanceof _n||_ instanceof Wi?ea.COMPLETE:_ instanceof ao&&(0===_.code||1===_.code)?ea.REDIRECTING:ea.FAILED),(0,pt.h)(_=>_!==ea.REDIRECTING),(0,Ae.q)(1)).subscribe(()=>{D()})}function wh(E){throw E}function Th(E,D,_){return D.parse("/")}const ep={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ic={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kn=(()=>{class E{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,w.f3M)(w.c2e),this.isNgZoneEnabled=!1,this.options=(0,w.f3M)(gu,{optional:!0})||{},this.pendingTasks=(0,w.f3M)(w.HDt),this.errorHandler=this.options.errorHandler||wh,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Th,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,w.f3M)(od),this.routeReuseStrategy=(0,w.f3M)(Xo),this.titleStrategy=(0,w.f3M)(Br),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,w.f3M)(en,{optional:!0})?.flat()??[],this.navigationTransitions=(0,w.f3M)(Yi),this.urlSerializer=(0,w.f3M)(yi),this.location=(0,w.f3M)(De.Ye),this.componentInputBindingEnabled=!!(0,w.f3M)(ei,{optional:!0}),this.isNgZoneEnabled=(0,w.f3M)(w.R0b)instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new vr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Rs(0,null),this.navigationTransitions.setupNavigations(this).subscribe(_=>{this.lastSuccessfulId=_.id,this.currentPageId=this.browserPageId??0},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}resetRootComponentType(_){this.routerState.root.component=_,this.navigationTransitions.rootComponentType=_}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const _=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),oo,_)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const A="popstate"===_.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{this.navigateToSyncWithBrowser(_.url,A,_.state)},0)}))}navigateToSyncWithBrowser(_,A,N){const H={replaceUrl:!0},G=N?.navigationId?N:null;if(N){const je={...N};delete je.navigationId,delete je.\u0275routerPageId,0!==Object.keys(je).length&&(H.state=je)}const ee=this.parseUrl(_);this.scheduleNavigation(ee,A,G,H)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(_){this.config=_.map(ps),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,A={}){const{relativeTo:N,queryParams:H,fragment:G,queryParamsHandling:ee,preserveFragment:je}=A,Et=je?this.currentUrlTree.fragment:G;let In,vt=null;switch(ee){case"merge":vt={...this.currentUrlTree.queryParams,...H};break;case"preserve":vt=this.currentUrlTree.queryParams;break;default:vt=H||null}null!==vt&&(vt=this.removeEmptyProps(vt));try{In=Yr(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof _[0]||!_[0].startsWith("/"))&&(_=[]),In=this.currentUrlTree.root}return cn(In,_,vt,Et??null)}navigateByUrl(_,A={skipLocationChange:!1}){const N=Ee(_)?_:this.parseUrl(_),H=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(H,oo,null,A)}navigate(_,A={skipLocationChange:!1}){return function ul(E){for(let D=0;D<E.length;D++)if(null==E[D])throw new w.vHH(4008,!1)}(_),this.navigateByUrl(this.createUrlTree(_,A),A)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let A;try{A=this.urlSerializer.parse(_)}catch(N){A=this.malformedUriErrorHandler(N,this.urlSerializer,_)}return A}isActive(_,A){let N;if(N=!0===A?{...ep}:!1===A?{...ic}:A,Ee(_))return ai(this.currentUrlTree,_,N);const H=this.parseUrl(_);return ai(this.currentUrlTree,H,N)}removeEmptyProps(_){return Object.keys(_).reduce((A,N)=>{const H=_[N];return null!=H&&(A[N]=H),A},{})}scheduleNavigation(_,A,N,H,G){if(this.disposed)return Promise.resolve(!1);let ee,je,Et;G?(ee=G.resolve,je=G.reject,Et=G.promise):Et=new Promise((In,di)=>{ee=In,je=di});const vt=this.pendingTasks.add();return ad(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(vt))}),this.navigationTransitions.handleNavigationRequest({source:A,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:_,extras:H,resolve:ee,reject:je,promise:Et,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Et.catch(In=>Promise.reject(In))}setBrowserUrl(_,A){const N=this.urlSerializer.serialize(_);if(this.location.isCurrentPathEqualTo(N)||A.extras.replaceUrl){const G={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId)};this.location.replaceState(N,"",G)}else{const H={...A.extras.state,...this.generateNgRouterState(A.id,(this.browserPageId??0)+1)};this.location.go(N,"",H)}}restoreHistory(_,A=!1){if("computed"===this.canceledNavigationResolution){const H=this.currentPageId-(this.browserPageId??this.currentPageId);0!==H?this.location.historyGo(H):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===H&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(_,A){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:A}:{navigationId:_}}static#e=this.\u0275fac=function(A){return new(A||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),ta=(()=>{class E{constructor(_,A,N,H,G,ee){this.router=_,this.route=A,this.tabIndexAttribute=N,this.renderer=H,this.el=G,this.locationStrategy=ee,this.href=null,this.commands=null,this.onChanges=new ye.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const je=G.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===je||"area"===je,this.isAnchorElement?this.subscription=_.events.subscribe(Et=>{Et instanceof _n&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(_){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",_)}ngOnChanges(_){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(_,A,N,H,G){return!!(null===this.urlTree||this.isAnchorElement&&(0!==_||A||N||H||G||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const _=null===this.href?null:(0,w.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",_)}applyAttributeValue(_,A){const N=this.renderer,H=this.el.nativeElement;null!==A?N.setAttribute(H,_,A):N.removeAttribute(H,_)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(A){return new(A||E)(w.Y36(Kn),w.Y36(Ei),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(De.S$))};static#t=this.\u0275dir=w.lG2({type:E,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(A,N){1&A&&w.NdJ("click",function(G){return N.onClick(G.button,G.ctrlKey,G.shiftKey,G.altKey,G.metaKey)}),2&A&&w.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",w.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",w.VuI],replaceUrl:["replaceUrl","replaceUrl",w.VuI],routerLink:"routerLink"},standalone:!0,features:[w.Xq5,w.TTD]})}return E})();class cl{}let na=(()=>{class E{constructor(_,A,N,H,G){this.router=_,this.injector=N,this.preloadingStrategy=H,this.loader=G}setUpPreloading(){this.subscription=this.router.events.pipe((0,pt.h)(_=>_ instanceof _n),wt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,A){const N=[];for(const H of A){H.providers&&!H._injector&&(H._injector=(0,w.MMx)(H.providers,_,`Route: ${H.path}`));const G=H._injector??_,ee=H._loadedInjector??G;(H.loadChildren&&!H._loadedRoutes&&void 0===H.canLoad||H.loadComponent&&!H._loadedComponent)&&N.push(this.preloadConfig(G,H)),(H.children||H._loadedRoutes)&&N.push(this.processRoutes(ee,H.children??H._loadedRoutes))}return(0,he.D)(N).pipe((0,Wr.J)())}preloadConfig(_,A){return this.preloadingStrategy.preload(A,()=>{let N;N=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(_,A):(0,oe.of)(null);const H=N.pipe((0,Ke.z)(G=>null===G?(0,oe.of)(void 0):(A._loadedRoutes=G.routes,A._loadedInjector=G.injector,this.processRoutes(G.injector??_,G.routes))));if(A.loadComponent&&!A._loadedComponent){const G=this.loader.loadComponent(A);return(0,he.D)([H,G]).pipe((0,Wr.J)())}return H})}static#e=this.\u0275fac=function(A){return new(A||E)(w.LFG(Kn),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(cl),w.LFG(Nn))};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const _u=new w.OlP("");let tn=(()=>{class E{constructor(_,A,N,H,G={}){this.urlSerializer=_,this.transitions=A,this.viewportScroller=N,this.zone=H,this.options=G,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},G.scrollPositionRestoration=G.scrollPositionRestoration||"disabled",G.anchorScrolling=G.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof iu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof _n?(this.lastId=_.id,this.scheduleScrollEvent(_,this.urlSerializer.parse(_.urlAfterRedirects).fragment)):_ instanceof Wi&&0===_.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(_,this.urlSerializer.parse(_.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof Go&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,A){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Go(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(A){w.$Z()};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac})}return E})();function jr(E,D){return{\u0275kind:E,\u0275providers:D}}function vu(){const E=(0,w.f3M)(w.zs3);return D=>{const _=E.get(w.z2F);if(D!==_.components[0])return;const A=E.get(Kn),N=E.get(Qn);1===E.get(Tr)&&A.initialNavigation(),E.get(Xn,null,w.XFs.Optional)?.setUpPreloading(),E.get(_u,null,w.XFs.Optional)?.init(),A.resetRootComponentType(_.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const Qn=new w.OlP("",{factory:()=>new ye.x}),Tr=new w.OlP("",{providedIn:"root",factory:()=>1}),Xn=new w.OlP("");function Ba(E){return jr(0,[{provide:Xn,useExisting:na},{provide:cl,useExisting:E}])}const Eu=new w.OlP("ROUTER_FORROOT_GUARD"),cd=[De.Ye,{provide:yi,useClass:J},Kn,ds,{provide:Ei,useFactory:function ra(E){return E.routerState.root},deps:[Kn]},Nn,[]];function Ys(){return new w.PXZ("Router",Kn)}let Iu=(()=>{class E{constructor(_){}static forRoot(_,A){return{ngModule:E,providers:[cd,[],{provide:en,multi:!0,useValue:_},{provide:Eu,useFactory:wu,deps:[[Kn,new w.FiY,new w.tp0]]},{provide:gu,useValue:A||{}},A?.useHash?{provide:De.S$,useClass:De.Do}:{provide:De.S$,useClass:De.b0},{provide:_u,useFactory:()=>{const E=(0,w.f3M)(De.EM),D=(0,w.f3M)(w.R0b),_=(0,w.f3M)(gu),A=(0,w.f3M)(Yi),N=(0,w.f3M)(yi);return _.scrollOffset&&E.setOffset(_.scrollOffset),new tn(N,A,E,D,_)}},A?.preloadingStrategy?Ba(A.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:Ys},A?.initialNavigation?aa(A):[],A?.bindToComponentInputs?jr(8,[xs,{provide:ei,useExisting:xs}]).\u0275providers:[],[{provide:Tu,useFactory:vu},{provide:w.tb,multi:!0,useExisting:Tu}]]}}static forChild(_){return{ngModule:E,providers:[{provide:en,multi:!0,useValue:_}]}}static#e=this.\u0275fac=function(A){return new(A||E)(w.LFG(Eu,8))};static#t=this.\u0275mod=w.oAB({type:E});static#n=this.\u0275inj=w.cJS({})}return E})();function wu(E){return"guarded"}function aa(E){return["disabled"===E.initialNavigation?jr(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const D=(0,w.f3M)(Kn);return()=>{D.setUpLocationChangeListener()}}},{provide:Tr,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?jr(2,[{provide:Tr,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:D=>{const _=D.get(De.V_,Promise.resolve());return()=>_.then(()=>new Promise(A=>{const N=D.get(Kn),H=D.get(Qn);ad(N,()=>{A(!0)}),D.get(Yi).afterPreactivation=()=>(A(!0),H.closed?(0,oe.of)(void 0):H),N.initialNavigation()}))}}]).\u0275providers:[]]}const Tu=new w.OlP("")},3106:(Tt,Se,V)=>{V.d(Se,{Z:()=>He});var w=V(9058),te=V(4537),b=V(534),ue=V(7879);class he{constructor(it,ht){this._delegate=it,this.firebase=ht,(0,b._addComponent)(it,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=it.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this._delegate.automaticDataCollectionEnabled=it}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(it=>{this._delegate.checkDestroyed(),it()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,b.deleteApp)(this._delegate)))}_getService(it,ht=b._DEFAULT_ENTRY_NAME){var Wt;this._delegate.checkDestroyed();const rn=this._delegate.container.getProvider(it);return!rn.isInitialized()&&"EXPLICIT"===(null===(Wt=rn.getComponent())||void 0===Wt?void 0:Wt.instantiationMode)&&rn.initialize(),rn.getImmediate({identifier:ht})}_removeServiceInstance(it,ht=b._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(it).clearInstance(ht)}_addComponent(it){(0,b._addComponent)(this._delegate,it)}_addOrOverwriteComponent(it){(0,b._addOrOverwriteComponent)(this._delegate,it)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function Ce(){const Be=function Ue(Be){const it={},ht={__esModule:!0,initializeApp:function ge(Je,et={}){const Ie=b.initializeApp(Je,et);if((0,w.r3)(it,Ie.name))return it[Ie.name];const Mt=new Be(Ie,ht);return it[Ie.name]=Mt,Mt},app:rn,registerVersion:b.registerVersion,setLogLevel:b.setLogLevel,onLog:b.onLog,apps:null,SDK_VERSION:b.SDK_VERSION,INTERNAL:{registerComponent:function pe(Je){const et=Je.name,Ie=et.replace("-compat","");if(b._registerComponent(Je)&&"PUBLIC"===Je.type){const Mt=(Yt=rn())=>{if("function"!=typeof Yt[Ie])throw we.create("invalid-app-argument",{appName:et});return Yt[Ie]()};void 0!==Je.serviceProps&&(0,w.ZB)(Mt,Je.serviceProps),ht[Ie]=Mt,Be.prototype[Ie]=function(...Yt){return this._getService.bind(this,et).apply(this,Je.multipleInstances?Yt:[])}}return"PUBLIC"===Je.type?ht[Ie]:null},removeApp:function Wt(Je){delete it[Je]},useAsService:function Ze(Je,et){return"serverAuth"===et?null:et},modularAPIs:b}};function rn(Je){if(!(0,w.r3)(it,Je=Je||b._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Je});return it[Je]}return ht.default=ht,Object.defineProperty(ht,"apps",{get:function Ne(){return Object.keys(it).map(Je=>it[Je])}}),rn.App=Be,ht}(he);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function it(ht){(0,w.ZB)(Be,ht)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),Be}(),Y=new ue.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=K;!function Oe(Be){(0,b.registerVersion)("@firebase/app-compat","0.2.26",Be)}()},534:(Tt,Se,V)=>{V.r(Se),V.d(Se,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Hi,_DEFAULT_ENTRY_NAME:()=>St,_addComponent:()=>qn,_addOrOverwriteComponent:()=>Cr,_apps:()=>Bt,_clearComponents:()=>sn,_components:()=>kn,_getProvider:()=>Dn,_registerComponent:()=>mn,_removeServiceInstance:()=>us,deleteApp:()=>vr,getApp:()=>Cs,getApps:()=>Gi,initializeApp:()=>zi,onLog:()=>gr,registerVersion:()=>pr,setLogLevel:()=>mr});var w=V(5861),te=V(4537),b=V(7879),ue=V(9058);const he=(ve,de)=>de.some(Fe=>ve instanceof Fe);let oe,we;const K=new WeakMap,Y=new WeakMap,se=new WeakMap,qe=new WeakMap,Oe=new WeakMap;let it={get(ve,de,Fe){if(ve instanceof IDBTransaction){if("done"===de)return Y.get(ve);if("objectStoreNames"===de)return ve.objectStoreNames||se.get(ve);if("store"===de)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return ge(ve[de])},set:(ve,de,Fe)=>(ve[de]=Fe,!0),has:(ve,de)=>ve instanceof IDBTransaction&&("done"===de||"store"===de)||de in ve};function rn(ve){return"function"==typeof ve?function Wt(ve){return ve!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ve)?function(...de){return ve.apply(Ne(this),de),ge(K.get(this))}:function(...de){return ge(ve.apply(Ne(this),de))}:function(de,...Fe){const ut=ve.call(Ne(this),de,...Fe);return se.set(ut,de.sort?de.sort():[de]),ge(ut)}}(ve):(ve instanceof IDBTransaction&&function Be(ve){if(Y.has(ve))return;const de=new Promise((Fe,ut)=>{const Xe=()=>{ve.removeEventListener("complete",Lt),ve.removeEventListener("error",Kt),ve.removeEventListener("abort",Kt)},Lt=()=>{Fe(),Xe()},Kt=()=>{ut(ve.error||new DOMException("AbortError","AbortError")),Xe()};ve.addEventListener("complete",Lt),ve.addEventListener("error",Kt),ve.addEventListener("abort",Kt)});Y.set(ve,de)}(ve),he(ve,function Ue(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ve,it):ve)}function ge(ve){if(ve instanceof IDBRequest)return function He(ve){const de=new Promise((Fe,ut)=>{const Xe=()=>{ve.removeEventListener("success",Lt),ve.removeEventListener("error",Kt)},Lt=()=>{Fe(ge(ve.result)),Xe()},Kt=()=>{ut(ve.error),Xe()};ve.addEventListener("success",Lt),ve.addEventListener("error",Kt)});return de.then(Fe=>{Fe instanceof IDBCursor&&K.set(Fe,ve)}).catch(()=>{}),Oe.set(de,ve),de}(ve);if(qe.has(ve))return qe.get(ve);const de=rn(ve);return de!==ve&&(qe.set(ve,de),Oe.set(de,ve)),de}const Ne=ve=>Oe.get(ve),Je=["get","getKey","getAll","getAllKeys","count"],et=["put","add","delete","clear"],Ie=new Map;function Mt(ve,de){if(!(ve instanceof IDBDatabase)||de in ve||"string"!=typeof de)return;if(Ie.get(de))return Ie.get(de);const Fe=de.replace(/FromIndex$/,""),ut=de!==Fe,Xe=et.includes(Fe);if(!(Fe in(ut?IDBIndex:IDBObjectStore).prototype)||!Xe&&!Je.includes(Fe))return;const Lt=function(){var Kt=(0,w.Z)(function*(Pn,...Un){const Ee=this.transaction(Pn,Xe?"readwrite":"readonly");let ki=Ee.store;return ut&&(ki=ki.index(Un.shift())),(yield Promise.all([ki[Fe](...Un),Xe&&Ee.done]))[0]});return function(Un){return Kt.apply(this,arguments)}}();return Ie.set(de,Lt),Lt}!function ht(ve){it=ve(it)}(ve=>({...ve,get:(de,Fe,ut)=>Mt(de,Fe)||ve.get(de,Fe,ut),has:(de,Fe)=>!!Mt(de,Fe)||ve.has(de,Fe)}));class Yt{constructor(de){this.container=de}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function Fr(ve){const de=ve.getComponent();return"VERSION"===de?.type}(Fe)){const ut=Fe.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(Fe=>Fe).join(" ")}}const or="@firebase/app",Wn=new b.Yd("@firebase/app"),St="[DEFAULT]",kt={[or]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,kn=new Map;function qn(ve,de){try{ve.container.addComponent(de)}catch(Fe){Wn.debug(`Component ${de.name} failed to register with FirebaseApp ${ve.name}`,Fe)}}function Cr(ve,de){ve.container.addOrOverwriteComponent(de)}function mn(ve){const de=ve.name;if(kn.has(de))return Wn.debug(`There were multiple attempts to register component ${de}.`),!1;kn.set(de,ve);for(const Fe of Bt.values())qn(Fe,ve);return!0}function Dn(ve,de){const Fe=ve.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),ve.container.getProvider(de)}function us(ve,de,Fe=St){Dn(ve,de).clearInstance(Fe)}function sn(){kn.clear()}const Zt=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Lr{constructor(de,Fe,ut){this._isDeleted=!1,this._options=Object.assign({},de),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this.checkDestroyed(),this._automaticDataCollectionEnabled=de}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(de){this._isDeleted=de}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}const Hi="10.7.2";function zi(ve,de={}){let Fe=ve;"object"!=typeof de&&(de={name:de});const ut=Object.assign({name:St,automaticDataCollectionEnabled:!1},de),Xe=ut.name;if("string"!=typeof Xe||!Xe)throw Zt.create("bad-app-name",{appName:String(Xe)});if(Fe||(Fe=(0,ue.aH)()),!Fe)throw Zt.create("no-options");const Lt=Bt.get(Xe);if(Lt){if((0,ue.vZ)(Fe,Lt.options)&&(0,ue.vZ)(ut,Lt.config))return Lt;throw Zt.create("duplicate-app",{appName:Xe})}const Kt=new te.H0(Xe);for(const Un of kn.values())Kt.addComponent(Un);const Pn=new Lr(Fe,ut,Kt);return Bt.set(Xe,Pn),Pn}function Cs(ve=St){const de=Bt.get(ve);if(!de&&ve===St&&(0,ue.aH)())return zi();if(!de)throw Zt.create("no-app",{appName:ve});return de}function Gi(){return Array.from(Bt.values())}function vr(ve){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,w.Z)(function*(ve){const de=ve.name;Bt.has(de)&&(Bt.delete(de),yield Promise.all(ve.container.getProviders().map(Fe=>Fe.delete())),ve.isDeleted=!0)})).apply(this,arguments)}function pr(ve,de,Fe){var ut;let Xe=null!==(ut=kt[ve])&&void 0!==ut?ut:ve;Fe&&(Xe+=`-${Fe}`);const Lt=Xe.match(/\s|\//),Kt=de.match(/\s|\//);if(Lt||Kt){const Pn=[`Unable to register library "${Xe}" with version "${de}":`];return Lt&&Pn.push(`library name "${Xe}" contains illegal characters (whitespace or "/")`),Lt&&Kt&&Pn.push("and"),Kt&&Pn.push(`version name "${de}" contains illegal characters (whitespace or "/")`),void Wn.warn(Pn.join(" "))}mn(new te.wA(`${Xe}-version`,()=>({library:Xe,version:de}),"VERSION"))}function gr(ve,de){if(null!==ve&&"function"!=typeof ve)throw Zt.create("invalid-log-argument");(0,b.Am)(ve,de)}function mr(ve){(0,b.Ub)(ve)}const qr="firebase-heartbeat-database",yi=1,J="firebase-heartbeat-store";let U=null;function $(){return U||(U=function pe(ve,de,{blocked:Fe,upgrade:ut,blocking:Xe,terminated:Lt}={}){const Kt=indexedDB.open(ve,de),Pn=ge(Kt);return ut&&Kt.addEventListener("upgradeneeded",Un=>{ut(ge(Kt.result),Un.oldVersion,Un.newVersion,ge(Kt.transaction),Un)}),Fe&&Kt.addEventListener("blocked",Un=>Fe(Un.oldVersion,Un.newVersion,Un)),Pn.then(Un=>{Lt&&Un.addEventListener("close",()=>Lt()),Xe&&Un.addEventListener("versionchange",Ee=>Xe(Ee.oldVersion,Ee.newVersion,Ee))}).catch(()=>{}),Pn}(qr,yi,{upgrade:(ve,de)=>{if(0===de)try{ve.createObjectStore(J)}catch(Fe){console.warn(Fe)}}}).catch(ve=>{throw Zt.create("idb-open",{originalErrorMessage:ve.message})})),U}function z(){return(z=(0,w.Z)(function*(ve){try{return yield(yield $()).transaction(J).objectStore(J).get($e(ve))}catch(de){if(de instanceof ue.ZR)Wn.warn(de.message);else{const Fe=Zt.create("idb-get",{originalErrorMessage:de?.message});Wn.warn(Fe.message)}}})).apply(this,arguments)}function re(ve,de){return Le.apply(this,arguments)}function Le(){return(Le=(0,w.Z)(function*(ve,de){try{const ut=(yield $()).transaction(J,"readwrite");yield ut.objectStore(J).put(de,$e(ve)),yield ut.done}catch(Fe){if(Fe instanceof ue.ZR)Wn.warn(Fe.message);else{const ut=Zt.create("idb-set",{originalErrorMessage:Fe?.message});Wn.warn(ut.message)}}})).apply(this,arguments)}function $e(ve){return`${ve.name}!${ve.options.appId}`}class qt{constructor(de){this.container=de,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new vi(Fe),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var de=this;return(0,w.Z)(function*(){var Fe,ut;const Lt=de.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Kt=Ft();if((null!=(null===(Fe=de._heartbeatsCache)||void 0===Fe?void 0:Fe.heartbeats)||(de._heartbeatsCache=yield de._heartbeatsCachePromise,null!=(null===(ut=de._heartbeatsCache)||void 0===ut?void 0:ut.heartbeats)))&&de._heartbeatsCache.lastSentHeartbeatDate!==Kt&&!de._heartbeatsCache.heartbeats.some(Pn=>Pn.date===Kt))return de._heartbeatsCache.heartbeats.push({date:Kt,agent:Lt}),de._heartbeatsCache.heartbeats=de._heartbeatsCache.heartbeats.filter(Pn=>{const Un=new Date(Pn.date).valueOf();return Date.now()-Un<=2592e6}),de._storage.overwrite(de._heartbeatsCache)})()}getHeartbeatsHeader(){var de=this;return(0,w.Z)(function*(){var Fe;if(null===de._heartbeatsCache&&(yield de._heartbeatsCachePromise),null==(null===(Fe=de._heartbeatsCache)||void 0===Fe?void 0:Fe.heartbeats)||0===de._heartbeatsCache.heartbeats.length)return"";const ut=Ft(),{heartbeatsToSend:Xe,unsentEntries:Lt}=function An(ve,de=1024){const Fe=[];let ut=ve.slice();for(const Xe of ve){const Lt=Fe.find(Kt=>Kt.agent===Xe.agent);if(Lt){if(Lt.dates.push(Xe.date),Oi(Fe)>de){Lt.dates.pop();break}}else if(Fe.push({agent:Xe.agent,dates:[Xe.date]}),Oi(Fe)>de){Fe.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:ut}}(de._heartbeatsCache.heartbeats),Kt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Xe}));return de._heartbeatsCache.lastSentHeartbeatDate=ut,Lt.length>0?(de._heartbeatsCache.heartbeats=Lt,yield de._storage.overwrite(de._heartbeatsCache)):(de._heartbeatsCache.heartbeats=[],de._storage.overwrite(de._heartbeatsCache)),Kt})()}}function Ft(){return(new Date).toISOString().substring(0,10)}class vi{constructor(de){this.app=de,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var de=this;return(0,w.Z)(function*(){if(yield de._canUseIndexedDBPromise){const ut=yield function j(ve){return z.apply(this,arguments)}(de.app);return ut?.heartbeats?ut:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(de){var Fe=this;return(0,w.Z)(function*(){var ut;if(yield Fe._canUseIndexedDBPromise){const Lt=yield Fe.read();return re(Fe.app,{lastSentHeartbeatDate:null!==(ut=de.lastSentHeartbeatDate)&&void 0!==ut?ut:Lt.lastSentHeartbeatDate,heartbeats:de.heartbeats})}})()}add(de){var Fe=this;return(0,w.Z)(function*(){var ut;if(yield Fe._canUseIndexedDBPromise){const Lt=yield Fe.read();return re(Fe.app,{lastSentHeartbeatDate:null!==(ut=de.lastSentHeartbeatDate)&&void 0!==ut?ut:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...de.heartbeats]})}})()}}function Oi(ve){return(0,ue.L)(JSON.stringify({version:2,heartbeats:ve})).length}!function Ho(ve){mn(new te.wA("platform-logger",de=>new Yt(de),"PRIVATE")),mn(new te.wA("heartbeat",de=>new qt(de),"PRIVATE")),pr(or,"0.9.26",ve),pr(or,"0.9.26","esm2017"),pr("fire-js","")}("")},4537:(Tt,Se,V)=>{V.d(Se,{H0:()=>Ue,wA:()=>b});var w=V(5861),te=V(9058);class b{constructor(K,Y,se){this.name=K,this.instanceFactory=Y,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ue="[DEFAULT]";class he{constructor(K,Y){this.name=K,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const Y=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Y)){const se=new te.BH;if(this.instancesDeferred.set(Y,se),this.isInitialized(Y)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:Y});qe&&se.resolve(qe)}catch{}}return this.instancesDeferred.get(Y).promise}getImmediate(K){var Y;const se=this.normalizeInstanceIdentifier(K?.identifier),qe=null!==(Y=K?.optional)&&void 0!==Y&&Y;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(Oe){if(qe)return null;throw Oe}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function we(Ce){return"EAGER"===Ce.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[Y,se]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(Y);try{const Oe=this.getOrInitializeService({instanceIdentifier:qe});se.resolve(Oe)}catch{}}}}clearInstance(K=ue){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,w.Z)(function*(){const Y=Array.from(K.instances.values());yield Promise.all([...Y.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...Y.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ue){return this.instances.has(K)}getOptions(K=ue){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:Y={}}=K,se=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:se,options:Y});for(const[Oe,He]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(Oe)&&He.resolve(qe);return qe}onInit(K,Y){var se;const qe=this.normalizeInstanceIdentifier(Y),Oe=null!==(se=this.onInitCallbacks.get(qe))&&void 0!==se?se:new Set;Oe.add(K),this.onInitCallbacks.set(qe,Oe);const He=this.instances.get(qe);return He&&K(He,qe),()=>{Oe.delete(K)}}invokeOnInitCallbacks(K,Y){const se=this.onInitCallbacks.get(Y);if(se)for(const qe of se)try{qe(K,Y)}catch{}}getOrInitializeService({instanceIdentifier:K,options:Y={}}){let se=this.instances.get(K);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=K,Ce===ue?void 0:Ce),options:Y}),this.instances.set(K,se),this.instancesOptions.set(K,Y),this.invokeOnInitCallbacks(se,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,se)}catch{}var Ce;return se||null}normalizeInstanceIdentifier(K=ue){return this.component?this.component.multipleInstances?K:ue:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ue{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const Y=this.getProvider(K.name);if(Y.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);Y.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const Y=new he(K,this);return this.providers.set(K,Y),Y}getProviders(){return Array.from(this.providers.values())}}},7879:(Tt,Se,V)=>{V.d(Se,{Am:()=>Ce,Ub:()=>Ue,Yd:()=>we,in:()=>te});const w=[];var te=function(K){return K[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",K}(te||{});const b={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ue=te.INFO,he={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},oe=(K,Y,...se)=>{if(Y<K.logLevel)return;const qe=(new Date).toISOString(),Oe=he[Y];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Oe](`[${qe}]  ${K.name}:`,...se)};class we{constructor(Y){this.name=Y,this._logLevel=ue,this._logHandler=oe,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in te))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?b[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...Y),this._logHandler(this,te.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...Y),this._logHandler(this,te.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,te.INFO,...Y),this._logHandler(this,te.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,te.WARN,...Y),this._logHandler(this,te.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...Y),this._logHandler(this,te.ERROR,...Y)}}function Ue(K){w.forEach(Y=>{Y.setLogLevel(K)})}function Ce(K,Y){for(const se of w){let qe=null;Y&&Y.level&&(qe=b[Y.level]),se.userLogHandler=null===K?null:(Oe,He,...Be)=>{const it=Be.map(ht=>{if(null==ht)return null;if("string"==typeof ht)return ht;if("number"==typeof ht||"boolean"==typeof ht)return ht.toString();if(ht instanceof Error)return ht.message;try{return JSON.stringify(ht)}catch{return null}}).filter(ht=>ht).join(" ");He>=(qe??Oe.logLevel)&&K({level:te[He].toLowerCase(),message:it,args:Be,type:Oe.name})}}}},6230:(Tt,Se,V)=>{V.r(Se);var w=V(5861),te=V(3106),b=V(9058),ue=V(534),he=V(7879),oe=V(7582),we=V(4537);const Ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const He=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Be=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new b.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wt=new he.Yd("@firebase/auth");function ge(g,...d){Wt.logLevel<=he.in.ERROR&&Wt.error(`Auth (${ue.SDK_VERSION}): ${g}`,...d)}function Ne(g,...d){throw et(g,...d)}function pe(g,...d){return et(g,...d)}function Ze(g,d,p){const y=Object.assign(Object.assign({},Be()),{[d]:p});return new b.LL("auth","Firebase",y).create(d,{appName:g.name})}function Je(g,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&Ne(g,"argument-error"),Ze(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function et(g,...d){if("string"!=typeof g){const p=d[0],y=[...d.slice(1)];return y[0]&&(y[0].appName=g.name),g._errorFactory.create(p,...y)}return it.create(g,...d)}function Ie(g,d,...p){if(!g)throw et(d,...p)}function Mt(g){const d="INTERNAL ASSERTION FAILED: "+g;throw ge(d),new Error(d)}function Yt(g,d){g||Mt(d)}function Fr(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function or(){return"http:"===fr()||"https:"===fr()}function fr(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class _i{constructor(d,p){this.shortDelay=d,this.longDelay=p,Yt(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,b.uI)()||(0,b.b$)()}get(){return function Wn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(or()||(0,b.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function me(g,d){Yt(g.emulator,"Emulator should always be set here");const{url:p}=g.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class ye{static initialize(d,p,y){this.fetchImpl=d,p&&(this.headersImpl=p),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Mt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Mt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Mt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const De={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Te=new _i(3e4,6e4);function Ae(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Pe(g,d,p,y){return pt.apply(this,arguments)}function pt(){return(pt=(0,w.Z)(function*(g,d,p,y,M={}){return Ke(g,M,(0,w.Z)(function*(){let L={},Q={};y&&("GET"===d?Q=y:L={body:JSON.stringify(y)});const ae=(0,b.xO)(Object.assign({key:g.config.apiKey},Q)).slice(1),Me=yield g._getAdditionalHeaders();return Me["Content-Type"]="application/json",g.languageCode&&(Me["X-Firebase-Locale"]=g.languageCode),ye.fetch()(bt(g,g.config.apiHost,p,ae),Object.assign({method:d,headers:Me,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Ke(g,d,p){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,w.Z)(function*(g,d,p){g._canInitEmulator=!1;const y=Object.assign(Object.assign({},De),d);try{const M=new Hn(g),L=yield Promise.race([p(),M.promise]);M.clearNetworkTimeout();const Q=yield L.json();if("needConfirmation"in Q)throw On(g,"account-exists-with-different-credential",Q);if(L.ok&&!("errorMessage"in Q))return Q;{const ae=L.ok?Q.errorMessage:Q.error.message,[Me,ot]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw On(g,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Me)throw On(g,"email-already-in-use",Q);if("USER_DISABLED"===Me)throw On(g,"user-disabled",Q);const _t=y[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw Ze(g,_t,ot);Ne(g,_t)}}catch(M){if(M instanceof b.ZR)throw M;Ne(g,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function wt(g,d,p,y){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,w.Z)(function*(g,d,p,y,M={}){const L=yield Pe(g,d,p,y,M);return"mfaPendingCredential"in L&&Ne(g,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function bt(g,d,p,y){const M=`${d}${p}?${y}`;return g.config.emulator?me(g.config,M):`${g.config.apiScheme}://${M}`}function Rn(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,y)=>{this.timer=setTimeout(()=>y(pe(this.auth,"network-request-failed")),Te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function On(g,d,p){const y={appName:g.name};p.email&&(y.email=p.email),p.phoneNumber&&(y.phoneNumber=p.phoneNumber);const M=pe(g,d,y);return M.customData._tokenResponse=p,M}function ln(g){return void 0!==g&&void 0!==g.getResponse}function Ar(g){return void 0!==g&&void 0!==g.enterprise}class ar{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===d)return Rn(p.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function Wr(){return(Wr=(0,w.Z)(function*(g){return(yield Pe(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vn(g,d){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,w.Z)(function*(g,d){return Pe(g,"GET","/v2/recaptchaConfig",Ae(g,d))})).apply(this,arguments)}function St(){return(St=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Bt(){return(Bt=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function qn(){return(qn=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Cr(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function us(){return(us=(0,w.Z)(function*(g,d=!1){const p=(0,b.m9)(g),y=yield p.getIdToken(d),M=ai(y);Ie(M&&M.exp&&M.auth_time&&M.iat,p.auth,"internal-error");const L="object"==typeof M.firebase?M.firebase:void 0,Q=L?.sign_in_provider;return{claims:M,token:y,authTime:Cr(sn(M.auth_time)),issuedAtTime:Cr(sn(M.iat)),expirationTime:Cr(sn(M.exp)),signInProvider:Q||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function sn(g){return 1e3*Number(g)}function ai(g){const[d,p,y]=g.split(".");if(void 0===d||void 0===p||void 0===y)return ge("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,b.tV)(p);return M?JSON.parse(M):(ge("Failed to decode base64 JWT payload"),null)}catch(M){return ge("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Lr(g,d){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,w.Z)(function*(g,d,p=!1){if(p)return d;try{return yield d}catch(y){throw y instanceof b.ZR&&function zi({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(y)&&g.auth.currentUser===g&&(yield g.auth.signOut()),y}})).apply(this,arguments)}class Cs{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const M=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const y=this.getInterval(d);this.timerId=setTimeout((0,w.Z)(function*(){yield p.iteration()}),y)}iteration(){var d=this;return(0,w.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&d.schedule(!0))}d.schedule()})()}}class Gi{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vr(g){return Jt.apply(this,arguments)}function Jt(){return Jt=(0,w.Z)(function*(g){var d;const p=g.auth,y=yield g.getIdToken(),M=yield Lr(g,function kn(g,d){return qn.apply(this,arguments)}(p,{idToken:y}));Ie(M?.users.length,p,"internal-error");const L=M.users[0];g._notifyReloadListener(L);const Q=null!==(d=L.providerUserInfo)&&void 0!==d&&d.length?function qr(g){return g.map(d=>{var{providerId:p}=d,y=(0,oe._T)(d,["providerId"]);return{providerId:p,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}(L.providerUserInfo):[],ae=function mr(g,d){return[...g.filter(y=>!d.some(M=>M.providerId===y.providerId)),...d]}(g.providerData,Q),_t=!!g.isAnonymous&&!(g.email&&L.passwordHash||ae?.length),rt={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:ae,metadata:new Gi(L.createdAt,L.lastLoginAt),isAnonymous:_t};Object.assign(g,rt)}),Jt.apply(this,arguments)}function gr(){return(gr=(0,w.Z)(function*(g){const d=(0,b.m9)(g);yield vr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function J(){return(J=(0,w.Z)(function*(g,d){const p=yield Ke(g,{},(0,w.Z)(function*(){const y=(0,b.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:M,apiKey:L}=g.config,Q=bt(g,M,"/v1/token",`key=${L}`),ae=yield g._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",ye.fetch()(Q,{method:"POST",headers:ae,body:y})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}function $(){return($=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v2/accounts:revokeToken",Ae(g,d))})).apply(this,arguments)}class j{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ie(d.idToken,"internal-error"),Ie(typeof d.idToken<"u","internal-error"),Ie(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Zt(g){const d=ai(g);return Ie(d,"internal-error"),Ie(typeof d.exp<"u","internal-error"),Ie(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var y=this;return(0,w.Z)(function*(){return Ie(!y.accessToken||y.refreshToken,d,"user-token-expired"),p||!y.accessToken||y.isExpired?y.refreshToken?(yield y.refresh(d,y.refreshToken),y.accessToken):null:y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var y=this;return(0,w.Z)(function*(){const{accessToken:M,refreshToken:L,expiresIn:Q}=yield function yi(g,d){return J.apply(this,arguments)}(d,p);y.updateTokensAndExpiration(M,L,Number(Q))})()}updateTokensAndExpiration(d,p,y){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(d,p){const{refreshToken:y,accessToken:M,expirationTime:L}=p,Q=new j;return y&&(Ie("string"==typeof y,"internal-error",{appName:d}),Q.refreshToken=y),M&&(Ie("string"==typeof M,"internal-error",{appName:d}),Q.accessToken=M),L&&(Ie("number"==typeof L,"internal-error",{appName:d}),Q.expirationTime=L),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new j,this.toJSON())}_performRefresh(){return Mt("not implemented")}}function z(g,d){Ie("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class re{constructor(d){var{uid:p,auth:y,stsTokenManager:M}=d,L=(0,oe._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=y,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new Gi(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,w.Z)(function*(){const y=yield Lr(p,p.stsTokenManager.getToken(p.auth,d));return Ie(y,p.auth,"internal-error"),p.accessToken!==y&&(p.accessToken=y,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),y})()}getIdTokenResult(d){return function Dn(g){return us.apply(this,arguments)}(this,d)}reload(){return function pr(g){return gr.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ie(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const p=new re(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(d){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var y=this;return(0,w.Z)(function*(){let M=!1;d.idToken&&d.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(d),M=!0),p&&(yield vr(y)),yield y.auth._persistUserIfCurrent(y),M&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var d=this;return(0,w.Z)(function*(){const p=yield d.getIdToken();return yield Lr(d,function yr(g,d){return St.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var y,M,L,Q,ae,Me,ot,_t;const rt=null!==(y=p.displayName)&&void 0!==y?y:void 0,rr=null!==(M=p.email)&&void 0!==M?M:void 0,bi=null!==(L=p.phoneNumber)&&void 0!==L?L:void 0,to=null!==(Q=p.photoURL)&&void 0!==Q?Q:void 0,Fu=null!==(ae=p.tenantId)&&void 0!==ae?ae:void 0,Rc=null!==(Me=p._redirectEventId)&&void 0!==Me?Me:void 0,Fo=null!==(ot=p.createdAt)&&void 0!==ot?ot:void 0,Lu=null!==(_t=p.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:Pc,emailVerified:Vu,isAnonymous:yp,providerData:Fs,stsTokenManager:vp}=p;Ie(Pc&&vp,d,"internal-error");const ns=j.fromJSON(this.name,vp);Ie("string"==typeof Pc,d,"internal-error"),z(rt,d.name),z(rr,d.name),Ie("boolean"==typeof Vu,d,"internal-error"),Ie("boolean"==typeof yp,d,"internal-error"),z(bi,d.name),z(to,d.name),z(Fu,d.name),z(Rc,d.name),z(Fo,d.name),z(Lu,d.name);const Cd=new re({uid:Pc,auth:d,email:rr,emailVerified:Vu,displayName:rt,isAnonymous:yp,photoURL:to,phoneNumber:bi,tenantId:Fu,stsTokenManager:ns,createdAt:Fo,lastLoginAt:Lu});return Fs&&Array.isArray(Fs)&&(Cd.providerData=Fs.map(Mc=>Object.assign({},Mc))),Rc&&(Cd._redirectEventId=Rc),Cd}static _fromIdTokenResponse(d,p,y=!1){return(0,w.Z)(function*(){const M=new j;M.updateFromServerResponse(p);const L=new re({uid:p.localId,auth:d,stsTokenManager:M,isAnonymous:y});return yield vr(L),L})()}}const Le=new Map;function $e(g){Yt(g instanceof Function,"Expected a class definition");let d=Le.get(g);return d?(Yt(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,Le.set(g,d),d)}const at=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(p,y){var M=this;return(0,w.Z)(function*(){M.storage[p]=y})()}_get(p){var y=this;return(0,w.Z)(function*(){const M=y.storage[p];return void 0===M?null:M})()}_remove(p){var y=this;return(0,w.Z)(function*(){delete y.storage[p]})()}_addListener(p,y){}_removeListener(p,y){}}return g.type="NONE",g})();function qt(g,d,p){return`firebase:${g}:${d}:${p}`}class Ft{constructor(d,p,y){this.persistence=d,this.auth=p,this.userKey=y;const{config:M,name:L}=this.auth;this.fullUserKey=qt(this.userKey,M.apiKey,L),this.fullPersistenceKey=qt("persistence",M.apiKey,L),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,w.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?re._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,w.Z)(function*(){if(p.persistence===d)return;const y=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,y?p.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,y="authUser"){return(0,w.Z)(function*(){if(!p.length)return new Ft($e(at),d,y);const M=(yield Promise.all(p.map(function(){var ot=(0,w.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let L=M[0]||$e(at);const Q=qt(y,d.config.apiKey,d.name);let ae=null;for(const ot of p)try{const _t=yield ot._get(Q);if(_t){const rt=re._fromJSON(d,_t);ot!==L&&(ae=rt),L=ot;break}}catch{}const Me=M.filter(ot=>ot._shouldAllowMigration);return L._shouldAllowMigration&&Me.length?(L=Me[0],ae&&(yield L._set(Q,ae.toJSON())),yield Promise.all(p.map(function(){var ot=(0,w.Z)(function*(_t){if(_t!==L)try{yield _t._remove(Q)}catch{}});return function(_t){return ot.apply(this,arguments)}}())),new Ft(L,d,y)):new Ft(L,d,y)})()}}function An(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ve(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(vi(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Fe(d))return"Blackberry";if(ut(d))return"Webos";if(Oi(d))return"Safari";if((d.includes("chrome/")||Ho(d))&&!d.includes("edge/"))return"Chrome";if(de(d))return"Android";{const y=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function vi(g=(0,b.z$)()){return/firefox\//i.test(g)}function Oi(g=(0,b.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Ho(g=(0,b.z$)()){return/crios\//i.test(g)}function ve(g=(0,b.z$)()){return/iemobile/i.test(g)}function de(g=(0,b.z$)()){return/android/i.test(g)}function Fe(g=(0,b.z$)()){return/blackberry/i.test(g)}function ut(g=(0,b.z$)()){return/webos/i.test(g)}function Xe(g=(0,b.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function Un(g=(0,b.z$)()){return Xe(g)||de(g)||ut(g)||Fe(g)||/windows phone/i.test(g)||ve(g)}function ki(g,d=[]){let p;switch(g){case"Browser":p=An((0,b.z$)());break;case"Worker":p=`${An((0,b.z$)())}-${g}`;break;default:p=g}const y=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${ue.SDK_VERSION}/${y}`}class Yr{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const y=L=>new Promise((Q,ae)=>{try{Q(d(L))}catch(Me){ae(Me)}});y.onAbort=p,this.queue.push(y);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,w.Z)(function*(){if(p.auth.currentUser===d)return;const y=[];try{for(const M of p.queue)yield M(d),M.onAbort&&y.push(M.onAbort)}catch(M){y.reverse();for(const L of y)try{L()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function Ss(){return(Ss=(0,w.Z)(function*(g,d={}){return Pe(g,"GET","/v2/passwordPolicy",Ae(g,d))})).apply(this,arguments)}class tt{constructor(d){var p,y,M,L;const Q=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=Q.minPasswordLength)&&void 0!==p?p:6,Q.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Q.maxPasswordLength),void 0!==Q.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Q.containsLowercaseCharacter),void 0!==Q.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Q.containsUppercaseCharacter),void 0!==Q.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Q.containsNumericCharacter),void 0!==Q.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Q.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(y=d.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(L=d.forceUpgradeOnSignin)&&void 0!==L&&L,this.schemaVersion=d.schemaVersion}validatePassword(d){var p,y,M,L,Q,ae;const Me={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,Me),this.validatePasswordCharacterOptions(d,Me),Me.isValid&&(Me.isValid=null===(p=Me.meetsMinPasswordLength)||void 0===p||p),Me.isValid&&(Me.isValid=null===(y=Me.meetsMaxPasswordLength)||void 0===y||y),Me.isValid&&(Me.isValid=null===(M=Me.containsLowercaseLetter)||void 0===M||M),Me.isValid&&(Me.isValid=null===(L=Me.containsUppercaseLetter)||void 0===L||L),Me.isValid&&(Me.isValid=null===(Q=Me.containsNumericCharacter)||void 0===Q||Q),Me.isValid&&(Me.isValid=null===(ae=Me.containsNonAlphanumericCharacter)||void 0===ae||ae),Me}validatePasswordLengthOptions(d,p){const y=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;y&&(p.meetsMinPasswordLength=d.length>=y),M&&(p.meetsMaxPasswordLength=d.length<=M)}validatePasswordCharacterOptions(d,p){let y;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let M=0;M<d.length;M++)y=d.charAt(M),this.updatePasswordCharacterOptionsStatuses(p,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(d,p,y,M,L){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=L))}}class bs{constructor(d,p,y,M){this.app=d,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=y,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new js(this),this.idTokenSubscription=new js(this),this.beforeStateQueue=new Yr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(d,p){var y=this;return p&&(this._popupRedirectResolver=$e(p)),this._initializationPromise=this.queue((0,w.Z)(function*(){var M,L;if(!y._deleted&&(y.persistenceManager=yield Ft.create(y,d),!y._deleted)){if(null!==(M=y._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(p),y.lastNotifiedUid=(null===(L=y.currentUser)||void 0===L?void 0:L.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,w.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,w.Z)(function*(){var y;const M=yield p.assertedPersistence.getCurrentUser();let L=M,Q=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ae=null===(y=p.redirectUser)||void 0===y?void 0:y._redirectEventId,Me=L?._redirectEventId,ot=yield p.tryRedirectSignIn(d);(!ae||ae===Me)&&ot?.user&&(L=ot.user,Q=!0)}if(!L)return p.directlySetCurrentUser(null);if(!L._redirectEventId){if(Q)try{yield p.beforeStateQueue.runMiddleware(L)}catch(ae){L=M,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ae))}return L?p.reloadAndSetCurrentUserOrClear(L):p.directlySetCurrentUser(null)}return Ie(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===L._redirectEventId?p.directlySetCurrentUser(L):p.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(d){var p=this;return(0,w.Z)(function*(){let y=null;try{y=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,w.Z)(function*(){try{yield vr(d)}catch(y){if("auth/network-request-failed"!==y?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ni(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,w.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,w.Z)(function*(){const y=d?(0,b.m9)(d):null;return y&&Ie(y.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(y&&y._clone(p))})()}_updateCurrentUser(d,p=!1){var y=this;return(0,w.Z)(function*(){if(!y._deleted)return d&&Ie(y.tenantId===d.tenantId,y,"tenant-id-mismatch"),p||(yield y.beforeStateQueue.runMiddleware(d)),y.queue((0,w.Z)(function*(){yield y.directlySetCurrentUser(d),y.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,w.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,w.Z)(function*(){yield p.assertedPersistence.setPersistence($e(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var p=this;return(0,w.Z)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const y=p._getPasswordPolicyInternal();return y.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,w.Z)(function*(){const p=yield function cn(g){return Ss.apply(this,arguments)}(d),y=new tt(p);null===d.tenantId?d._projectPasswordPolicy=y:d._tenantPasswordPolicies[d.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new b.LL("auth","Firebase",d())}onAuthStateChanged(d,p,y){return this.registerStateListener(this.authStateSubscription,d,p,y)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,y){return this.registerStateListener(this.idTokenSubscription,d,p,y)}authStateReady(){return new Promise((d,p)=>{if(this.currentUser)d();else{const y=this.onAuthStateChanged(()=>{y(),d()},p)}})}revokeAccessToken(d){var p=this;return(0,w.Z)(function*(){if(p.currentUser){const y=yield p.currentUser.getIdToken(),M={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:y};null!=p.tenantId&&(M.tenantId=p.tenantId),yield function U(g,d){return $.apply(this,arguments)}(p,M)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var y=this;return(0,w.Z)(function*(){const M=yield y.getOrInitRedirectPersistenceManager(p);return null===d?M.removeCurrentUser():M.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,w.Z)(function*(){if(!p.redirectPersistenceManager){const y=d&&$e(d)||p._popupRedirectResolver;Ie(y,p,"argument-error"),p.redirectPersistenceManager=yield Ft.create(p,[$e(y._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,w.Z)(function*(){var y,M;return p._isInitialized&&(yield p.queue((0,w.Z)(function*(){}))),(null===(y=p._currentUser)||void 0===y?void 0:y._redirectEventId)===d?p._currentUser:(null===(M=p.redirectUser)||void 0===M?void 0:M._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,w.Z)(function*(){if(d===p.currentUser)return p.queue((0,w.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,y,M){if(this._deleted)return()=>{};const L="function"==typeof p?p:p.next.bind(p);let Q=!1;const ae=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(ae,this,"internal-error"),ae.then(()=>{Q||L(this.currentUser)}),"function"==typeof p){const Me=d.addObserver(p,y,M);return()=>{Q=!0,Me()}}{const Me=d.addObserver(p);return()=>{Q=!0,Me()}}}directlySetCurrentUser(d){var p=this;return(0,w.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=ki(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,w.Z)(function*(){var p;const y={"X-Client-Version":d.clientVersion};d.app.options.appId&&(y["X-Firebase-gmpid"]=d.app.options.appId);const M=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();M&&(y["X-Firebase-Client"]=M);const L=yield d._getAppCheckToken();return L&&(y["X-Firebase-AppCheck"]=L),y})()}_getAppCheckToken(){var d=this;return(0,w.Z)(function*(){var p;const y=yield null===(p=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return y?.error&&function rn(g,...d){Wt.logLevel<=he.in.WARN&&Wt.warn(`Auth (${ue.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function dt(g){return(0,b.m9)(g)}class js{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,b.ne)(p=>this.observer=p)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ra(g){return new Promise((d,p)=>{const y=document.createElement("script");y.setAttribute("src",g),y.onload=d,y.onerror=M=>{const L=pe("internal-error");L.customData=M,p(L)},y.type="text/javascript",y.charset="UTF-8",function $s(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(y)})}function Pa(g){return`__${g}${Math.floor(1e6*Math.random())}`}class Er{constructor(d){this.type="recaptcha-enterprise",this.auth=dt(d)}verify(d="verify",p=!1){var y=this;return(0,w.Z)(function*(){function L(){return L=(0,w.Z)(function*(ae){if(!p){if(null==ae.tenantId&&null!=ae._agentRecaptchaConfig)return ae._agentRecaptchaConfig.siteKey;if(null!=ae.tenantId&&void 0!==ae._tenantRecaptchaConfigs[ae.tenantId])return ae._tenantRecaptchaConfigs[ae.tenantId].siteKey}return new Promise(function(){var Me=(0,w.Z)(function*(ot,_t){Vn(ae,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(rt=>{if(void 0!==rt.recaptchaKey){const rr=new ar(rt);return null==ae.tenantId?ae._agentRecaptchaConfig=rr:ae._tenantRecaptchaConfigs[ae.tenantId]=rr,ot(rr.siteKey)}_t(new Error("recaptcha Enterprise site key undefined"))}).catch(rt=>{_t(rt)})});return function(ot,_t){return Me.apply(this,arguments)}}())}),L.apply(this,arguments)}function Q(ae,Me,ot){const _t=window.grecaptcha;Ar(_t)?_t.enterprise.ready(()=>{_t.enterprise.execute(ae,{action:d}).then(rt=>{Me(rt)}).catch(()=>{Me("NO_RECAPTCHA")})}):ot(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ae,Me)=>{(function M(ae){return L.apply(this,arguments)})(y.auth).then(ot=>{if(!p&&Ar(window.grecaptcha))Q(ot,ae,Me);else{if(typeof window>"u")return void Me(new Error("RecaptchaVerifier is only supported in browser"));Ra("https://www.google.com/recaptcha/enterprise.js?render="+ot).then(()=>{Q(ot,ae,Me)}).catch(_t=>{Me(_t)})}}).catch(ot=>{Me(ot)})})})()}}function zs(g,d,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,w.Z)(function*(g,d,p,y=!1){const M=new Er(g);let L;try{L=yield M.verify(p)}catch{L=yield M.verify(p,!0)}const Q=Object.assign({},d);return Object.assign(Q,y?{captchaResp:L}:{captchaResponse:L}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}function Xr(g,d,p,y){return ru.apply(this,arguments)}function ru(){return ru=(0,w.Z)(function*(g,d,p,y){var M;if(null!==(M=g._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const L=yield zs(g,d,p,"getOobCode"===p);return y(g,L)}return y(g,d).catch(function(){var L=(0,w.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ae=yield zs(g,d,p,"getOobCode"===p);return y(g,ae)}return Promise.reject(Q)});return function(Q){return L.apply(this,arguments)}}())}),ru.apply(this,arguments)}function Wi(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Fi(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class co{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Mt("not implemented")}_getIdTokenResponse(d){return Mt("not implemented")}_linkToIdToken(d,p){return Mt("not implemented")}_getReauthenticationResolver(d){return Mt("not implemented")}}function su(g,d){return cs.apply(this,arguments)}function cs(){return(cs=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:resetPassword",Ae(g,d))})).apply(this,arguments)}function Xt(){return(Xt=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ir(g,d){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function br(){return(br=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",Ae(g,d))})).apply(this,arguments)}function Go(g,d){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,w.Z)(function*(g,d){return wt(g,"POST","/v1/accounts:signInWithPassword",Ae(g,d))})).apply(this,arguments)}function ls(g,d){return ds.apply(this,arguments)}function ds(){return(ds=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:sendOobCode",Ae(g,d))})).apply(this,arguments)}function Mn(){return(Mn=(0,w.Z)(function*(g,d){return ls(g,d)})).apply(this,arguments)}function nt(g,d){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,w.Z)(function*(g,d){return ls(g,d)})).apply(this,arguments)}function dn(g,d){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,w.Z)(function*(g,d){return ls(g,d)})).apply(this,arguments)}function ur(){return(ur=(0,w.Z)(function*(g,d){return ls(g,d)})).apply(this,arguments)}function Bn(){return(Bn=(0,w.Z)(function*(g,d){return wt(g,"POST","/v1/accounts:signInWithEmailLink",Ae(g,d))})).apply(this,arguments)}function Ii(){return(Ii=(0,w.Z)(function*(g,d){return wt(g,"POST","/v1/accounts:signInWithEmailLink",Ae(g,d))})).apply(this,arguments)}class xt extends co{constructor(d,p,y,M=null){super("password",y),this._email=d,this._password=p,this._tenantId=M}static _fromEmailAndPassword(d,p){return new xt(d,p,"password")}static _fromEmailAndCode(d,p,y=null){return new xt(d,p,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,w.Z)(function*(){switch(p.signInMethod){case"password":return Xr(d,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Go);case"emailLink":return function Ei(g,d){return Bn.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:Ne(d,"internal-error")}})()}_linkToIdToken(d,p){var y=this;return(0,w.Z)(function*(){switch(y.signInMethod){case"password":return Xr(d,{idToken:p,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ir);case"emailLink":return function qi(g,d){return Ii.apply(this,arguments)}(d,{idToken:p,email:y._email,oobCode:y._password});default:Ne(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function wr(g,d){return lo.apply(this,arguments)}function lo(){return(lo=(0,w.Z)(function*(g,d){return wt(g,"POST","/v1/accounts:signInWithIdp",Ae(g,d))})).apply(this,arguments)}class hn extends co{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new hn(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):Ne("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:M}=p,L=(0,oe._T)(p,["providerId","signInMethod"]);if(!y||!M)return null;const Q=new hn(y,M);return Q.idToken=L.idToken||void 0,Q.accessToken=L.accessToken||void 0,Q.secret=L.secret,Q.nonce=L.nonce,Q.pendingToken=L.pendingToken||null,Q}_getIdTokenResponse(d){return wr(d,this.buildRequest())}_linkToIdToken(d,p){const y=this.buildRequest();return y.idToken=p,wr(d,y)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,wr(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,b.xO)(p)}return d}}function Ms(){return(Ms=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:sendVerificationCode",Ae(g,d))})).apply(this,arguments)}function xs(){return(xs=(0,w.Z)(function*(g,d){return wt(g,"POST","/v1/accounts:signInWithPhoneNumber",Ae(g,d))})).apply(this,arguments)}function ti(){return(ti=(0,w.Z)(function*(g,d){const p=yield wt(g,"POST","/v1/accounts:signInWithPhoneNumber",Ae(g,d));if(p.temporaryProof)throw On(g,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Li={USER_NOT_FOUND:"user-not-found"};function Ki(){return(Ki=(0,w.Z)(function*(g,d){return wt(g,"POST","/v1/accounts:signInWithPhoneNumber",Ae(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Li)})).apply(this,arguments)}class Ht extends co{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new Ht({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new Ht({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function ei(g,d){return xs.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function uu(g,d){return ti.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Ma(g,d){return Ki.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:y,verificationCode:M}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:y,code:M}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:y,phoneNumber:M,temporaryProof:L}=d;return y||p||M||L?new Ht({verificationId:p,verificationCode:y,phoneNumber:M,temporaryProof:L}):null}}class jn{constructor(d){var p,y,M,L,Q,ae;const Me=(0,b.zd)((0,b.pd)(d)),ot=null!==(p=Me.apiKey)&&void 0!==p?p:null,_t=null!==(y=Me.oobCode)&&void 0!==y?y:null,rt=function cu(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Me.mode)&&void 0!==M?M:null);Ie(ot&&_t&&rt,"argument-error"),this.apiKey=ot,this.operation=rt,this.code=_t,this.continueUrl=null!==(L=Me.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(Q=Me.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(ae=Me.tenantId)&&void 0!==ae?ae:null}static parseLink(d){const p=function ho(g){const d=(0,b.zd)((0,b.pd)(g)).link,p=d?(0,b.zd)((0,b.pd)(d)).deep_link_id:null,y=(0,b.zd)((0,b.pd)(g)).deep_link_id;return(y?(0,b.zd)((0,b.pd)(y)).link:null)||y||p||d||g}(d);try{return new jn(p)}catch{return null}}}let hs=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(p,y){return xt._fromEmailAndPassword(p,y)}static credentialWithLink(p,y){const M=jn.parseLink(y);return Ie(M,"argument-error"),xt._fromEmailAndCode(p,M.code,M.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class ni{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class fs extends ni{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Jn extends fs{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return Ie("providerId"in p&&"signInMethod"in p,"argument-error"),hn._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ie(d.idToken||d.accessToken,"argument-error"),hn._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Jn.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Jn.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:y,oauthTokenSecret:M,pendingToken:L,nonce:Q,providerId:ae}=d;if(!y&&!M&&!p&&!L||!ae)return null;try{return new Jn(ae)._credential({idToken:p,accessToken:y,nonce:Q,pendingToken:L})}catch{return null}}}let Eh=(()=>{class g extends fs{constructor(){super("facebook.com")}static credential(p){return hn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return g.credential(p.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Zr=(()=>{class g extends fs{constructor(){super("google.com"),this.addScope("profile")}static credential(p,y){return hn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:y})}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:y,oauthAccessToken:M}=p;if(!y&&!M)return null;try{return g.credential(y,M)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),ri=(()=>{class g extends fs{constructor(){super("github.com")}static credential(p){return hn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return g.credential(p.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class wi extends co{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return wr(d,this.buildRequest())}_linkToIdToken(d,p){const y=this.buildRequest();return y.idToken=p,wr(d,y)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,wr(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:M,pendingToken:L}=p;return y&&M&&L&&y===M?new wi(y,L):null}static _create(d,p){return new wi(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cn extends ni{constructor(d){Ie(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Cn.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Cn.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=wi.fromJSON(d);return Ie(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:y}=d;if(!p||!y)return null;try{return wi._create(y,p)}catch{return null}}}let fo=(()=>{class g extends fs{constructor(){super("twitter.com")}static credential(p,y){return hn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:y})}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:y,oauthTokenSecret:M}=p;if(!y||!M)return null;try{return g.credential(y,M)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Ws(g,d){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,w.Z)(function*(g,d){return wt(g,"POST","/v1/accounts:signUp",Ae(g,d))})).apply(this,arguments)}class ci{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,y,M=!1){return(0,w.Z)(function*(){const L=yield re._fromIdTokenResponse(d,y,M),Q=du(y);return new ci({user:L,providerId:Q,_tokenResponse:y,operationType:p})})()}static _forOperation(d,p,y){return(0,w.Z)(function*(){yield d._updateTokensIfNecessary(y,!0);const M=du(y);return new ci({user:d,providerId:M,_tokenResponse:y,operationType:p})})()}}function du(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function po(){return(po=(0,w.Z)(function*(g){var d;const p=dt(g);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new ci({user:p.currentUser,providerId:null,operationType:"signIn"});const y=yield Ws(p,{returnSecureToken:!0}),M=yield ci._fromIdTokenResponse(p,"signIn",y,!0);return yield p._updateCurrentUser(M.user),M})).apply(this,arguments)}class hu extends b.ZR{constructor(d,p,y,M){var L;super(p.code,p.message),this.operationType=y,this.user=M,Object.setPrototypeOf(this,hu.prototype),this.customData={appName:d.name,tenantId:null!==(L=d.tenantId)&&void 0!==L?L:void 0,_serverResponse:p.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(d,p,y,M){return new hu(d,p,y,M)}}function Na(g,d,p,y){return("reauthenticate"===d?p._getReauthenticationResolver(g):p._getIdTokenResponse(g)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?hu._fromErrorAndOperation(g,L,d,y):L})}function go(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function Xu(){return Xu=(0,w.Z)(function*(g,d){const p=(0,b.m9)(g);yield mo(!0,p,d);const{providerUserInfo:y}=yield function kt(g,d){return Bt.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),M=go(y||[]);return p.providerData=p.providerData.filter(L=>M.has(L.providerId)),M.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Xu.apply(this,arguments)}function Oa(g,d){return qo.apply(this,arguments)}function qo(){return(qo=(0,w.Z)(function*(g,d,p=!1){const y=yield Lr(g,d._linkToIdToken(g.auth,yield g.getIdToken()),p);return ci._forOperation(g,"link",y)})).apply(this,arguments)}function mo(g,d,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,w.Z)(function*(g,d,p){yield vr(d);const M=!1===g?"provider-already-linked":"no-such-provider";Ie(go(d.providerData).has(p)===g,d.auth,M)})).apply(this,arguments)}function sd(g,d){return rl.apply(this,arguments)}function rl(){return(rl=(0,w.Z)(function*(g,d,p=!1){const{auth:y}=g,M="reauthenticate";try{const L=yield Lr(g,Na(y,M,d,g),p);Ie(L.idToken,y,"internal-error");const Q=ai(L.idToken);Ie(Q,y,"internal-error");const{sub:ae}=Q;return Ie(g.uid===ae,y,"user-mismatch"),ci._forOperation(g,M,L)}catch(L){throw"auth/user-not-found"===L?.code&&Ne(y,"user-mismatch"),L}})).apply(this,arguments)}function gs(g,d){return ka.apply(this,arguments)}function ka(){return(ka=(0,w.Z)(function*(g,d,p=!1){const y="signIn",M=yield Na(g,y,d),L=yield ci._fromIdTokenResponse(g,y,M);return p||(yield g._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Zo(g,d){return il.apply(this,arguments)}function il(){return(il=(0,w.Z)(function*(g,d){return gs(dt(g),d)})).apply(this,arguments)}function yo(g,d){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,w.Z)(function*(g,d){const p=(0,b.m9)(g);return yield mo(!1,p,d.providerId),Oa(p,d)})).apply(this,arguments)}function cr(g,d){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,w.Z)(function*(g,d){return sd((0,b.m9)(g),d)})).apply(this,arguments)}function vo(){return(vo=(0,w.Z)(function*(g,d){return wt(g,"POST","/v1/accounts:signInWithCustomToken",Ae(g,d))})).apply(this,arguments)}function Eo(){return Eo=(0,w.Z)(function*(g,d){const p=dt(g),y=yield function Ui(g,d){return vo.apply(this,arguments)}(p,{token:d,returnSecureToken:!0}),M=yield ci._fromIdTokenResponse(p,"signIn",y);return yield p._updateCurrentUser(M.user),M}),Eo.apply(this,arguments)}class qs{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?ec._fromServerResponse(d,p):"totpInfo"in p?Io._fromServerResponse(d,p):Ne(d,"internal-error")}}class ec extends qs{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new ec(p)}}class Io extends qs{constructor(d){super("totp",d)}static _fromServerResponse(d,p){return new Io(p)}}function Kr(g,d,p){var y;Ie((null===(y=p.url)||void 0===y?void 0:y.length)>0,g,"invalid-continue-uri"),Ie(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Ie(p.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(Ie(p.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function ms(g){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,w.Z)(function*(g){const d=dt(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function _s(){return(_s=(0,w.Z)(function*(g,d,p){const y=dt(g),M={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};p&&Kr(y,M,p),yield Xr(y,M,"getOobCode",nt)})).apply(this,arguments)}function ys(){return ys=(0,w.Z)(function*(g,d,p){yield su((0,b.m9)(g),{oobCode:d,newPassword:p}).catch(function(){var y=(0,w.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&ms(g),M});return function(M){return y.apply(this,arguments)}}())}),ys.apply(this,arguments)}function La(){return La=(0,w.Z)(function*(g,d){yield function Gs(g,d){return br.apply(this,arguments)}((0,b.m9)(g),{oobCode:d})}),La.apply(this,arguments)}function fu(g,d){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,w.Z)(function*(g,d){const p=(0,b.m9)(g),y=yield su(p,{oobCode:d}),M=y.requestType;switch(Ie(M,p,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ie(y.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ie(y.mfaInfo,p,"internal-error");default:Ie(y.email,p,"internal-error")}let L=null;return y.mfaInfo&&(L=qs._fromServerResponse(dt(p),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:L},operation:M}})).apply(this,arguments)}function Va(){return(Va=(0,w.Z)(function*(g,d){const{data:p}=yield fu((0,b.m9)(g),d);return p.email})).apply(this,arguments)}function Zs(){return(Zs=(0,w.Z)(function*(g,d,p){const y=dt(g),Q=yield Xr(y,{returnSecureToken:!0,email:d,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ws).catch(Me=>{throw"auth/password-does-not-meet-requirements"===Me.code&&ms(g),Me}),ae=yield ci._fromIdTokenResponse(y,"signIn",Q);return yield y._updateCurrentUser(ae.user),ae})).apply(this,arguments)}function Do(){return(Do=(0,w.Z)(function*(g,d,p){const y=dt(g),M={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function L(Q,ae){Ie(ae.handleCodeInApp,y,"argument-error"),ae&&Kr(y,Q,ae)})(M,p),yield Xr(y,M,"getOobCode",dn)})).apply(this,arguments)}function nc(){return(nc=(0,w.Z)(function*(g,d,p){const y=(0,b.m9)(g),M=hs.credentialWithLink(d,p||Fr());return Ie(M._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),Zo(y,M)})).apply(this,arguments)}function Ua(){return(Ua=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:createAuthUri",Ae(g,d))})).apply(this,arguments)}function Ao(){return Ao=(0,w.Z)(function*(g,d){const y={identifier:d,continueUri:or()?Fr():"http://localhost"},{signinMethods:M}=yield function rc(g,d){return Ua.apply(this,arguments)}((0,b.m9)(g),y);return M||[]}),Ao.apply(this,arguments)}function F(){return F=(0,w.Z)(function*(g,d){const p=(0,b.m9)(g),M={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Kr(p.auth,M,d);const{email:L}=yield function au(g,d){return Mn.apply(this,arguments)}(p.auth,M);L!==g.email&&(yield g.reload())}),F.apply(this,arguments)}function O(){return O=(0,w.Z)(function*(g,d,p){const y=(0,b.m9)(g),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};p&&Kr(y.auth,L,p);const{email:Q}=yield function Rs(g,d){return ur.apply(this,arguments)}(y.auth,L);Q!==g.email&&(yield g.reload())}),O.apply(this,arguments)}function ie(){return(ie=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function gt(){return gt=(0,w.Z)(function*(g,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const y=(0,b.m9)(g),L={idToken:yield y.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},Q=yield Lr(y,function Z(g,d){return ie.apply(this,arguments)}(y.auth,L));y.displayName=Q.displayName||null,y.photoURL=Q.photoUrl||null;const ae=y.providerData.find(({providerId:Me})=>"password"===Me);ae&&(ae.displayName=y.displayName,ae.photoURL=y.photoURL),yield y._updateTokensIfNecessary(Q)}),gt.apply(this,arguments)}function on(g,d,p){return Pt.apply(this,arguments)}function Pt(){return Pt=(0,w.Z)(function*(g,d,p){const{auth:y}=g,L={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(L.email=d),p&&(L.password=p);const Q=yield Lr(g,function ou(g,d){return Xt.apply(this,arguments)}(y,L));yield g._updateTokensIfNecessary(Q,!0)}),Pt.apply(this,arguments)}class en{constructor(d,p,y={}){this.isNewUser=d,this.providerId=p,this.profile=y}}class Nn extends en{constructor(d,p,y,M){super(d,p,y),this.username=M}}class $n extends en{constructor(d,p){super(d,"facebook.com",p)}}class Rr extends Nn{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Yi extends en{constructor(d,p){super(d,"google.com",p)}}class li extends Nn{constructor(d,p,y){super(d,"twitter.com",p,y)}}function Br(g){const{user:d,_tokenResponse:p}=g;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function zn(g){var d,p;if(!g)return null;const{providerId:y}=g,M=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},L=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!y&&g?.idToken){const Q=null===(p=null===(d=ai(g.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(Q)return new en(L,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!y)return null;switch(y){case"facebook.com":return new $n(L,M);case"github.com":return new Rr(L,M);case"google.com":return new Yi(L,M);case"twitter.com":return new li(L,M,g.screenName||null);case"custom":case"anonymous":return new en(L,null);default:return new en(L,y,M)}}(p)}class Kn{constructor(d,p,y){this.type=d,this.credential=p,this.user=y}static _fromIdtoken(d,p){return new Kn("enroll",d,p)}static _fromMfaPendingCredential(d){return new Kn("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,y;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Kn._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(y=d.multiFactorSession)&&void 0!==y&&y.idToken)return Kn._fromIdtoken(d.multiFactorSession.idToken)}return null}}class ul{constructor(d,p,y){this.session=d,this.hints=p,this.signInResolver=y}static _fromError(d,p){const y=dt(d),M=p.customData._serverResponse,L=(M.mfaInfo||[]).map(ae=>qs._fromServerResponse(y,ae));Ie(M.mfaPendingCredential,y,"internal-error");const Q=Kn._fromMfaPendingCredential(M.mfaPendingCredential);return new ul(Q,L,function(){var ae=(0,w.Z)(function*(Me){const ot=yield Me._process(y,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const _t=Object.assign(Object.assign({},M),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(p.operationType){case"signIn":const rt=yield ci._fromIdTokenResponse(y,p.operationType,_t);return yield y._updateCurrentUser(rt.user),rt;case"reauthenticate":return Ie(p.user,y,"internal-error"),ci._forOperation(p.user,p.operationType,_t);default:Ne(y,"internal-error")}});return function(Me){return ae.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,w.Z)(function*(){return p.signInResolver(d)})()}}class na{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(y=>qs._fromServerResponse(d.auth,y)))})}static _fromUser(d){return new na(d)}getSession(){var d=this;return(0,w.Z)(function*(){return Kn._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,p){var y=this;return(0,w.Z)(function*(){const M=d,L=yield y.getSession(),Q=yield Lr(y.user,M._process(y.user.auth,L,p));return yield y.user._updateTokensIfNecessary(Q),y.user.reload()})()}unenroll(d){var p=this;return(0,w.Z)(function*(){const y="string"==typeof d?d:d.uid,M=yield p.user.getIdToken();try{const L=yield Lr(p.user,function an(g,d){return Pe(g,"POST","/v2/accounts/mfaEnrollment:withdraw",Ae(g,d))}(p.user.auth,{idToken:M,mfaEnrollmentId:y}));p.enrolledFactors=p.enrolledFactors.filter(({uid:Q})=>Q!==y),yield p.user._updateTokensIfNecessary(L),yield p.user.reload()}catch(L){throw L}})()}}const _u=new WeakMap,yu="__sak";class ra{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(yu,"1"),this.storage.removeItem(yu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const hl=(()=>{class g extends ra{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,y)=>this.onStorageEvent(p,y),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function jr(){const g=(0,b.z$)();return Oi(g)||Xe(g)}()&&function Ee(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Un(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const y of Object.keys(this.listeners)){const M=this.storage.getItem(y),L=this.localCache[y];M!==L&&p(y,L,M)}}onStorageEvent(p,y=!1){if(!p.key)return void this.forAllChangedKeys((ae,Me,ot)=>{this.notifyListeners(ae,ot)});const M=p.key;if(y?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(M);if(p.newValue!==ae)null!==p.newValue?this.storage.setItem(M,p.newValue):this.storage.removeItem(M);else if(this.localCache[M]===p.newValue&&!y)return}const L=()=>{const ae=this.storage.getItem(M);!y&&this.localCache[M]===ae||this.notifyListeners(M,ae)},Q=this.storage.getItem(M);!function Pn(){return(0,b.w1)()&&10===document.documentMode}()||Q===p.newValue||p.newValue===p.oldValue?L():setTimeout(L,10)}notifyListeners(p,y){this.localCache[p]=y;const M=this.listeners[p];if(M)for(const L of Array.from(M))L(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,y,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:y,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(y)}_removeListener(p,y){this.listeners[p]&&(this.listeners[p].delete(y),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,y){var M=()=>super._set,L=this;return(0,w.Z)(function*(){yield M().call(L,p,y),L.localCache[p]=JSON.stringify(y)})()}_get(p){var y=()=>super._get,M=this;return(0,w.Z)(function*(){const L=yield y().call(M,p);return M.localCache[p]=JSON.stringify(L),L})()}_remove(p){var y=()=>super._remove,M=this;return(0,w.Z)(function*(){yield y().call(M,p),delete M.localCache[p]})()}}return g.type="LOCAL",g})(),Qn=(()=>{class g extends ra{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,y){}_removeListener(p,y){}}return g.type="SESSION",g})();let fl=(()=>{class g{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const y=this.receivers.find(L=>L.isListeningto(p));if(y)return y;const M=new g(p);return this.receivers.push(M),M}isListeningto(p){return this.eventTarget===p}handleEvent(p){var y=this;return(0,w.Z)(function*(){const M=p,{eventId:L,eventType:Q,data:ae}=M.data,Me=y.handlersMap[Q];if(!Me?.size)return;M.ports[0].postMessage({status:"ack",eventId:L,eventType:Q});const ot=Array.from(Me).map(function(){var rt=(0,w.Z)(function*(rr){return rr(M.origin,ae)});return function(rr){return rt.apply(this,arguments)}}()),_t=yield function Tr(g){return Promise.all(g.map(function(){var d=(0,w.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(y){return{fulfilled:!1,reason:y}}});return function(p){return d.apply(this,arguments)}}()))}(ot);M.ports[0].postMessage({status:"done",eventId:L,eventType:Q,response:_t})})()}_subscribe(p,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(y)}_unsubscribe(p,y){this.handlersMap[p]&&y&&this.handlersMap[p].delete(y),(!y||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Ns(g="",d=10){let p="";for(let y=0;y<d;y++)p+=Math.floor(10*Math.random());return g+p}class Qs{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,y=50){var M=this;return(0,w.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let Q,ae;return new Promise((Me,ot)=>{const _t=Ns("",20);L.port1.start();const rt=setTimeout(()=>{ot(new Error("unsupported_event"))},y);ae={messageChannel:L,onMessage(rr){const bi=rr;if(bi.data.eventId===_t)switch(bi.data.status){case"ack":clearTimeout(rt),Q=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Me(bi.data.response);break;default:clearTimeout(rt),clearTimeout(Q),ot(new Error("invalid_response"))}}},M.handlers.add(ae),L.port1.addEventListener("message",ae.onMessage),M.target.postMessage({eventType:d,eventId:_t,data:p},[L.port2])}).finally(()=>{ae&&M.removeMessageHandler(ae)})})()}}function Xn(){return window}function pl(){return typeof Xn().WorkerGlobalScope<"u"&&"function"==typeof Xn().importScripts}function ia(){return(ia=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Eu="firebaseLocalStorageDb",Ys="firebaseLocalStorage",Iu="fbase_key";class sa{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function oa(g,d){return g.transaction([Ys],d?"readwrite":"readonly").objectStore(Ys)}function wu(){const g=indexedDB.open(Eu,1);return new Promise((d,p)=>{g.addEventListener("error",()=>{p(g.error)}),g.addEventListener("upgradeneeded",()=>{const y=g.result;try{y.createObjectStore(Ys,{keyPath:Iu})}catch(M){p(M)}}),g.addEventListener("success",(0,w.Z)(function*(){const y=g.result;y.objectStoreNames.contains(Ys)?d(y):(y.close(),yield function uc(){const g=indexedDB.deleteDatabase(Eu);return new sa(g).toPromise()}(),d(yield wu()))}))})}function aa(g,d,p){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,w.Z)(function*(g,d,p){const y=oa(g,!0).put({[Iu]:d,value:p});return new sa(y).toPromise()})).apply(this,arguments)}function lr(){return(lr=(0,w.Z)(function*(g,d){const p=oa(g,!1).get(d),y=yield new sa(p).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function Co(g,d){const p=oa(g,!0).delete(d);return new sa(p).toPromise()}const So=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,w.Z)(function*(){return p.db||(p.db=yield wu()),p.db})()}_withRetries(p){var y=this;return(0,w.Z)(function*(){let M=0;for(;;)try{const L=yield y._openDb();return yield p(L)}catch(L){if(M++>3)throw L;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,w.Z)(function*(){return pl()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,w.Z)(function*(){p.receiver=fl._getInstance(function ac(){return pl()?self:null}()),p.receiver._subscribe("keyChanged",function(){var y=(0,w.Z)(function*(M,L){return{keyProcessed:(yield p._poll()).includes(L.key)}});return function(M,L){return y.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var y=(0,w.Z)(function*(M,L){return["keyChanged"]});return function(M,L){return y.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,w.Z)(function*(){var y,M;if(p.activeServiceWorker=yield function ud(){return ia.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Qs(p.activeServiceWorker);const L=yield p.sender._send("ping",{},800);L&&null!==(y=L[0])&&void 0!==y&&y.fulfilled&&null!==(M=L[0])&&void 0!==M&&M.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var y=this;return(0,w.Z)(function*(){if(y.sender&&y.activeServiceWorker&&function oc(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:p},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const p=yield wu();return yield aa(p,yu,"1"),yield Co(p,yu),!0}catch{}return!1})()}_withPendingWrite(p){var y=this;return(0,w.Z)(function*(){y.pendingWrites++;try{yield p()}finally{y.pendingWrites--}})()}_set(p,y){var M=this;return(0,w.Z)(function*(){return M._withPendingWrite((0,w.Z)(function*(){return yield M._withRetries(L=>aa(L,p,y)),M.localCache[p]=y,M.notifyServiceWorker(p)}))})()}_get(p){var y=this;return(0,w.Z)(function*(){const M=yield y._withRetries(L=>function ld(g,d){return lr.apply(this,arguments)}(L,p));return y.localCache[p]=M,M})()}_remove(p){var y=this;return(0,w.Z)(function*(){return y._withPendingWrite((0,w.Z)(function*(){return yield y._withRetries(M=>Co(M,p)),delete y.localCache[p],y.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,w.Z)(function*(){const y=yield p._withRetries(Q=>{const ae=oa(Q,!1).getAll();return new sa(ae).toPromise()});if(!y)return[];if(0!==p.pendingWrites)return[];const M=[],L=new Set;if(0!==y.length)for(const{fbase_key:Q,value:ae}of y)L.add(Q),JSON.stringify(p.localCache[Q])!==JSON.stringify(ae)&&(p.notifyListeners(Q,ae),M.push(Q));for(const Q of Object.keys(p.localCache))p.localCache[Q]&&!L.has(Q)&&(p.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(p,y){this.localCache[p]=y;const M=this.listeners[p];if(M)for(const L of Array.from(M))L(y)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(y)}_removeListener(p,y){this.listeners[p]&&(this.listeners[p].delete(y),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),H=1e12;class G{constructor(d){this.auth=d,this.counter=H,this._widgets=new Map}render(d,p){const y=this.counter;return this._widgets.set(y,new ee(d,this.auth.name,p||{})),this.counter++,y}reset(d){var p;const y=d||H;null===(p=this._widgets.get(y))||void 0===p||p.delete(),this._widgets.delete(y)}getResponse(d){var p;return(null===(p=this._widgets.get(d||H))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,w.Z)(function*(){var y;return null===(y=p._widgets.get(d||H))||void 0===y||y.execute(),""})()}}class ee{constructor(d,p,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof d?document.getElementById(d):d;Ie(M,"argument-error",{appName:p}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function je(g){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<g;y++)d.push(p.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Et=Pa("rcb"),vt=new _i(3e4,6e4);class di{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Xn().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return Ie(function Bi(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(p),d,"argument-error"),this.shouldResolveImmediately(p)&&ln(Xn().grecaptcha)?Promise.resolve(Xn().grecaptcha):new Promise((y,M)=>{const L=Xn().setTimeout(()=>{M(pe(d,"network-request-failed"))},vt.get());Xn()[Et]=()=>{Xn().clearTimeout(L),delete Xn()[Et];const ae=Xn().grecaptcha;if(!ae||!ln(ae))return void M(pe(d,"internal-error"));const Me=ae.render;ae.render=(ot,_t)=>{const rt=Me(ot,_t);return this.counter++,rt},this.hostLanguage=p,y(ae)},Ra(`https://www.google.com/recaptcha/api.js??${(0,b.xO)({onload:Et,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(L),M(pe(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=Xn().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vs{load(d){return(0,w.Z)(function*(){return new G(d)})()}clearedOneInstance(){}}const ua="recaptcha",Os={theme:"light",type:"image"};class Qr{constructor(d,p,y=Object.assign({},Os)){this.parameters=y,this.type=ua,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dt(d),this.isInvisible="invisible"===this.parameters.size,Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;Ie(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vs:new di,this.validateStartingState()}verify(){var d=this;return(0,w.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),y=d.getAssertedRecaptcha();return y.getResponse(p)||new Promise(L=>{const Q=ae=>{ae&&(d.tokenChangeListeners.delete(Q),L(ae))};d.tokenChangeListeners.add(Q),d.isInvisible&&y.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ie(!this.parameters.sitekey,this.auth,"argument-error"),Ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(y=>y(p)),"function"==typeof d)d(p);else if("string"==typeof d){const y=Xn()[d];"function"==typeof y&&y(p)}}}assertNotDestroyed(){Ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,w.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const y=document.createElement("div");p.appendChild(y),p=y}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,w.Z)(function*(){Ie(or()&&!pl(),d.auth,"internal-error"),yield function Di(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function as(g){return Wr.apply(this,arguments)}(d.auth);Ie(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return Ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cc{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=Ht._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function lc(){return(lc=(0,w.Z)(function*(g,d,p){const y=dt(g),M=yield ja(y,d,(0,b.m9)(p));return new cc(M,L=>Zo(y,L))})).apply(this,arguments)}function dc(){return(dc=(0,w.Z)(function*(g,d,p){const y=(0,b.m9)(g);yield mo(!1,y,"phone");const M=yield ja(y.auth,d,(0,b.m9)(p));return new cc(M,L=>yo(y,L))})).apply(this,arguments)}function Ch(){return(Ch=(0,w.Z)(function*(g,d,p){const y=(0,b.m9)(g),M=yield ja(y.auth,d,(0,b.m9)(p));return new cc(M,L=>cr(y,L))})).apply(this,arguments)}function ja(g,d,p){return Du.apply(this,arguments)}function Du(){return Du=(0,w.Z)(function*(g,d,p){var y;const M=yield p.verify();try{let L;if(Ie("string"==typeof M,g,"argument-error"),Ie(p.type===ua,g,"argument-error"),L="string"==typeof d?{phoneNumber:d}:d,"session"in L){const Q=L.session;if("phoneNumber"in L)return Ie("enroll"===Q.type,g,"internal-error"),(yield function mu(g,d){return Pe(g,"POST","/v2/accounts/mfaEnrollment:start",Ae(g,d))}(g,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Ie("signin"===Q.type,g,"internal-error");const ae=(null===(y=L.multiFactorHint)||void 0===y?void 0:y.uid)||L.multiFactorUid;return Ie(ae,g,"missing-multi-factor-info"),(yield function E(g,d){return Pe(g,"POST","/v2/accounts/mfaSignIn:start",Ae(g,d))}(g,{mfaPendingCredential:Q.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function Ps(g,d){return Ms.apply(this,arguments)}(g,{phoneNumber:L.phoneNumber,recaptchaToken:M});return Q}}finally{p._reset()}}),Du.apply(this,arguments)}function rp(){return(rp=(0,w.Z)(function*(g,d){yield Oa((0,b.m9)(g),d)})).apply(this,arguments)}let Au=(()=>{class g{constructor(p){this.providerId=g.PROVIDER_ID,this.auth=dt(p)}verifyPhoneNumber(p,y){return ja(this.auth,p,(0,b.m9)(y))}static credential(p,y){return Ht._fromVerification(p,y)}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:y,temporaryProof:M}=p;return y&&M?Ht._fromTokenResponse(y,M):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Cu(g,d){return d?$e(d):(Ie(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class hc extends co{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return wr(d,this._buildIdpRequest())}_linkToIdToken(d,p){return wr(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return wr(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function Ro(g){return gs(g.auth,new hc(g),g.bypassAuthState)}function ym(g){const{auth:d,user:p}=g;return Ie(p,d,"internal-error"),sd(p,new hc(g),g.bypassAuthState)}function ca(g){return fc.apply(this,arguments)}function fc(){return(fc=(0,w.Z)(function*(g){const{auth:d,user:p}=g;return Ie(p,d,"internal-error"),Oa(p,new hc(g),g.bypassAuthState)})).apply(this,arguments)}class $r{constructor(d,p,y,M,L=!1){this.auth=d,this.resolver=y,this.user=M,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,w.Z)(function*(y,M){d.pendingPromise={resolve:y,reject:M};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(L){d.reject(L)}});return function(y,M){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,w.Z)(function*(){const{urlResponse:y,sessionId:M,postBody:L,tenantId:Q,error:ae,type:Me}=d;if(ae)return void p.reject(ae);const ot={auth:p.auth,requestUri:y,sessionId:M,tenantId:Q||void 0,postBody:L||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Me)(ot))}catch(_t){p.reject(_t)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Ro;case"linkViaPopup":case"linkViaRedirect":return ca;case"reauthViaPopup":case"reauthViaRedirect":return ym;default:Ne(this.auth,"internal-error")}}resolve(d){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const la=new _i(2e3,1e4);function $a(){return($a=(0,w.Z)(function*(g,d,p){const y=dt(g);Je(g,d,ni);const M=Cu(y,p);return new gl(y,"signInViaPopup",d,M).executeNotNull()})).apply(this,arguments)}function ze(){return(ze=(0,w.Z)(function*(g,d,p){const y=(0,b.m9)(g);Je(y.auth,d,ni);const M=Cu(y.auth,p);return new gl(y.auth,"reauthViaPopup",d,M,y).executeNotNull()})).apply(this,arguments)}function hi(){return(hi=(0,w.Z)(function*(g,d,p){const y=(0,b.m9)(g);Je(y.auth,d,ni);const M=Cu(y.auth,p);return new gl(y.auth,"linkViaPopup",d,M,y).executeNotNull()})).apply(this,arguments)}let gl=(()=>{class g extends $r{constructor(p,y,M,L,Q){super(p,y,L,Q),this.provider=M,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var p=this;return(0,w.Z)(function*(){const y=yield p.execute();return Ie(y,p.auth,"internal-error"),y})()}onExecution(){var p=this;return(0,w.Z)(function*(){Yt(1===p.filter.length,"Popup operations only handle one event");const y=Ns();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],y),p.authWindow.associatedEvent=y,p.resolver._originValidation(p.auth).catch(M=>{p.reject(M)}),p.resolver._isIframeWebStorageSupported(p.auth,M=>{M||p.reject(pe(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const p=()=>{var y,M;this.pollId=null!==(M=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,la.get())};p()}}return g.currentPopupAction=null,g})();const mt="pendingRedirect",yt=new Map;class vm extends $r{constructor(d,p,y=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,y),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,w.Z)(function*(){let y=yt.get(p.auth._key());if(!y){try{const L=(yield function st(g,d){return _e.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;y=()=>Promise.resolve(L)}catch(M){y=()=>Promise.reject(M)}yt.set(p.auth._key(),y)}return p.bypassAuthState||yt.set(p.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,y=this;return(0,w.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(y,d);if("unknown"!==d.type){if(d.eventId){const M=yield y.auth._redirectUserForId(d.eventId);if(M)return y.user=M,p().call(y,d);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function _e(){return(_e=(0,w.Z)(function*(g,d){const p=fd(d),y=bh(g);if(!(yield y._isAvailable()))return!1;const M="true"===(yield y._get(p));return yield y._remove(p),M})).apply(this,arguments)}function ke(g,d){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,w.Z)(function*(g,d){return bh(g)._set(fd(d),"true")})).apply(this,arguments)}function Sh(g,d){yt.set(g._key(),d)}function bh(g){return $e(g._redirectPersistence)}function fd(g){return qt(mt,g.config.apiKey,g.name)}function Em(g,d,p){return function sp(g,d,p){return pc.apply(this,arguments)}(g,d,p)}function pc(){return(pc=(0,w.Z)(function*(g,d,p){const y=dt(g);Je(g,d,ni),yield y._initializationPromise;const M=Cu(y,p);return yield ke(M,y),M._openRedirect(y,d,"signInViaRedirect")})).apply(this,arguments)}function gc(g,d,p){return function ml(g,d,p){return Ha.apply(this,arguments)}(g,d,p)}function Ha(){return(Ha=(0,w.Z)(function*(g,d,p){const y=(0,b.m9)(g);Je(y.auth,d,ni),yield y.auth._initializationPromise;const M=Cu(y.auth,p);yield ke(M,y.auth);const L=yield yn(y);return M._openRedirect(y.auth,d,"reauthViaRedirect",L)})).apply(this,arguments)}function Rh(g,d,p){return function zt(g,d,p){return Es.apply(this,arguments)}(g,d,p)}function Es(){return(Es=(0,w.Z)(function*(g,d,p){const y=(0,b.m9)(g);Je(y.auth,d,ni),yield y.auth._initializationPromise;const M=Cu(y.auth,p);yield mo(!1,y,d.providerId),yield ke(M,y.auth);const L=yield yn(y);return M._openRedirect(y.auth,d,"linkViaRedirect",L)})).apply(this,arguments)}function Yn(){return(Yn=(0,w.Z)(function*(g,d){return yield dt(g)._initializationPromise,Dt(g,d,!1)})).apply(this,arguments)}function Dt(g,d){return mc.apply(this,arguments)}function mc(){return(mc=(0,w.Z)(function*(g,d,p=!1){const y=dt(g),M=Cu(y,d),Q=yield new vm(y,M,p).execute();return Q&&!p&&(delete Q.user._redirectEventId,yield y._persistUserIfCurrent(Q.user),yield y._setRedirectUser(null,d)),Q})).apply(this,arguments)}function yn(g){return op.apply(this,arguments)}function op(){return(op=(0,w.Z)(function*(g){const d=Ns(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class ct{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(d,y)&&(p=!0,this.sendToConsumer(d,y),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Su(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pd(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var y;if(d.error&&!pd(d)){const M=(null===(y=d.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";p.onError(pe(this.auth,M))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const y=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&y}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ks(d))}saveEventToCache(d){this.cachedEventUids.add(ks(d)),this.lastProcessedEventTime=Date.now()}}function ks(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function pd({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Hr(g){return da.apply(this,arguments)}function da(){return(da=(0,w.Z)(function*(g,d={}){return Pe(g,"GET","/v1/projects",d)})).apply(this,arguments)}const _l=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_c=/^https?/;function ha(){return(ha=(0,w.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Hr(g);for(const p of d)try{if(Ji(p))return}catch{}Ne(g,"unauthorized-domain")})).apply(this,arguments)}function Ji(g){const d=Fr(),{protocol:p,hostname:y}=new URL(d);if(g.startsWith("chrome-extension://")){const Q=new URL(g);return""===Q.hostname&&""===y?"chrome-extension:"===p&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&Q.hostname===y}if(!_c.test(p))return!1;if(_l.test(g))return y===g;const M=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(y)}const yc=new _i(3e4,6e4);function bu(){const g=Xn().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let p=0;p<g.CP.length;p++)g.CP[p]=null}let Mo=null;const fe=new _i(5e3,15e3),Ci="__/auth/iframe",Xi="emulator/auth/iframe",vc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fa(g){const d=g.config;Ie(d.authDomain,g,"auth-domain-config-required");const p=d.emulator?me(d,Xi):`https://${g.config.authDomain}/${Ci}`,y={apiKey:d.apiKey,appName:g.name,v:ue.SDK_VERSION},M=gd.get(g.config.apiHost);M&&(y.eid=M);const L=g._getFrameworks();return L.length&&(y.fw=L.join(",")),`${p}?${(0,b.xO)(y).slice(1)}`}function pa(){return pa=(0,w.Z)(function*(g){const d=yield function Ph(g){return Mo=Mo||function ap(g){return new Promise((d,p)=>{var y,M,L;function Q(){bu(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{bu(),p(pe(g,"network-request-failed"))},timeout:yc.get()})}if(null!==(M=null===(y=Xn().gapi)||void 0===y?void 0:y.iframes)&&void 0!==M&&M.Iframe)d(gapi.iframes.getContext());else{if(null===(L=Xn().gapi)||void 0===L||!L.load){const ae=Pa("iframefcb");return Xn()[ae]=()=>{gapi.load?Q():p(pe(g,"network-request-failed"))},Ra(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Me=>p(Me))}Q()}}).catch(d=>{throw Mo=null,d})}(g),Mo}(g),p=Xn().gapi;return Ie(p,g,"internal-error"),d.open({where:document.body,url:fa(g),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vc,dontclear:!0},y=>new Promise(function(){var M=(0,w.Z)(function*(L,Q){yield y.restyle({setHideOnLeave:!1});const ae=pe(g,"network-request-failed"),Me=Xn().setTimeout(()=>{Q(ae)},fe.get());function ot(){Xn().clearTimeout(Me),L(y)}y.ping(ot).then(ot,()=>{Q(ae)})});return function(L,Q){return M.apply(this,arguments)}}()))}),pa.apply(this,arguments)}const up={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ga{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Si="__/auth/handler",md="emulator/auth/handler",cp=encodeURIComponent("fac");function ws(g,d,p,y,M,L){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,w.Z)(function*(g,d,p,y,M,L){Ie(g.config.authDomain,g,"auth-domain-config-required"),Ie(g.config.apiKey,g,"invalid-api-key");const Q={apiKey:g.config.apiKey,appName:g.name,authType:p,redirectUrl:y,v:ue.SDK_VERSION,eventId:M};if(d instanceof ni){d.setDefaultLanguage(g.languageCode),Q.providerId=d.providerId||"",(0,b.xb)(d.getCustomParameters())||(Q.customParameters=JSON.stringify(d.getCustomParameters()));for(const[_t,rt]of Object.entries(L||{}))Q[_t]=rt}if(d instanceof fs){const _t=d.getScopes().filter(rt=>""!==rt);_t.length>0&&(Q.scopes=_t.join(","))}g.tenantId&&(Q.tid=g.tenantId);const ae=Q;for(const _t of Object.keys(ae))void 0===ae[_t]&&delete ae[_t];const Me=yield g._getAppCheckToken(),ot=Me?`#${cp}=${encodeURIComponent(Me)}`:"";return`${function Ru({config:g}){return g.emulator?me(g,md):`https://${g.authDomain}/${Si}`}(g)}?${(0,b.xO)(ae).slice(1)}${ot}`})).apply(this,arguments)}const vl="webStorageSupport",lp=class Am{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qn,this._completeRedirectFn=Dt,this._overrideRedirectResult=Sh}_openPopup(d,p,y,M){var L=this;return(0,w.Z)(function*(){var Q;Yt(null===(Q=L.eventManagers[d._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const ae=yield ws(d,p,y,Fr(),M);return function Ec(g,d,p,y=500,M=600){const L=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-y)/2,0).toString();let ae="";const Me=Object.assign(Object.assign({},up),{width:y.toString(),height:M.toString(),top:L,left:Q}),ot=(0,b.z$)().toLowerCase();p&&(ae=Ho(ot)?"_blank":p),vi(ot)&&(d=d||"http://localhost",Me.scrollbars="yes");const _t=Object.entries(Me).reduce((rr,[bi,to])=>`${rr}${bi}=${to},`,"");if(function Kt(g=(0,b.z$)()){var d;return Xe(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(ot)&&"_self"!==ae)return function yl(g,d){const p=document.createElement("a");p.href=g,p.target=d;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(y)}(d||"",ae),new ga(null);const rt=window.open(d||"",ae,_t);Ie(rt,g,"popup-blocked");try{rt.focus()}catch{}return new ga(rt)}(d,ae,Ns())})()}_openRedirect(d,p,y,M){var L=this;return(0,w.Z)(function*(){return yield L._originValidation(d),function Ba(g){Xn().location.href=g}(yield ws(d,p,y,Fr(),M)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:M,promise:L}=this.eventManagers[p];return M?Promise.resolve(M):(Yt(L,"If manager is not set, promise should be"),L)}const y=this.initAndGetManager(d);return this.eventManagers[p]={promise:y},y.catch(()=>{delete this.eventManagers[p]}),y}initAndGetManager(d){var p=this;return(0,w.Z)(function*(){const y=yield function wm(g){return pa.apply(this,arguments)}(d),M=new ct(d);return y.register("authEvent",L=>(Ie(L?.authEvent,d,"invalid-auth-event"),{status:M.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:M},p.iframes[d._key()]=y,M})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(vl,{type:vl},M=>{var L;const Q=null===(L=M?.[0])||void 0===L?void 0:L[vl];void 0!==Q&&p(!!Q),Ne(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Is(g){return ha.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return Un()||Oi()||Xe()}};class wc{constructor(d){this.factorId=d}_process(d,p,y){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,y);case"signin":return this._finalizeSignIn(d,p.credential);default:return Mt("unexpected MultiFactorSessionType")}}}class Pu extends wc{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Pu(d)}_finalizeEnroll(d,p,y){return function sc(g,d){return Pe(g,"POST","/v2/accounts/mfaEnrollment:finalize",Ae(g,d))}(d,{idToken:p,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function D(g,d){return Pe(g,"POST","/v2/accounts/mfaSignIn:finalize",Ae(g,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Cm=(()=>{class g{constructor(){}static assertion(p){return Pu._fromCredential(p)}}return g.FACTOR_ID="phone",g})();var hp="@firebase/auth";class Sm{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,w.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(y=>{d(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);p&&(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Mu(){return window}(0,b.Pz)("authIdTokenMaxAge"),function pp(g){(0,ue._registerComponent)(new we.wA("auth",(d,{options:p})=>{const y=d.getProvider("app").getImmediate(),M=d.getProvider("heartbeat"),L=d.getProvider("app-check-internal"),{apiKey:Q,authDomain:ae}=y.options;Ie(Q&&!Q.includes(":"),"invalid-api-key",{appName:y.name});const Me={apiKey:Q,authDomain:ae,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ki(g)},ot=new bs(y,M,L,Me);return function _n(g,d){const p=d?.persistence||[],y=(Array.isArray(p)?p:[p]).map($e);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(y,d?.popupRedirectResolver)}(ot,p),ot},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,y)=>{d.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new we.wA("auth-internal",d=>{const p=dt(d.getProvider("auth").getImmediate());return new Sm(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(hp,"1.5.1",function yd(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,ue.registerVersion)(hp,"1.5.1","esm2017")}("Browser");function Fh(){return Fh=(0,w.Z)(function*(g,d,p){var y;const{BuildInfo:M}=Mu();Yt(d.sessionId,"AuthEvent did not contain a session ID");const L=yield function Pm(g){return za.apply(this,arguments)}(d.sessionId),Q={};return Xe()?Q.ibi=M.packageName:de()?Q.apn=M.packageName:Ne(g,"operation-not-supported-in-this-environment"),M.displayName&&(Q.appDisplayName=M.displayName),Q.sessionId=L,ws(g,p,d.type,void 0,null!==(y=d.eventId)&&void 0!==y?y:void 0,Q)}),Fh.apply(this,arguments)}function Tc(){return(Tc=(0,w.Z)(function*(g){const{BuildInfo:d}=Mu(),p={};Xe()?p.iosBundleId=d.packageName:de()?p.androidPackageName=d.packageName:Ne(g,"operation-not-supported-in-this-environment"),yield Hr(g,p)})).apply(this,arguments)}function ii(){return(ii=(0,w.Z)(function*(g,d,p){const{cordova:y}=Mu();let M=()=>{};try{yield new Promise((L,Q)=>{let ae=null;function Me(){var rt;L();const rr=null===(rt=y.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof rr&&rr(),"function"==typeof p?.close&&p.close()}function ot(){ae||(ae=window.setTimeout(()=>{Q(pe(g,"redirect-cancelled-by-user"))},2e3))}function _t(){"visible"===document?.visibilityState&&ot()}d.addPassiveListener(Me),document.addEventListener("resume",ot,!1),de()&&document.addEventListener("visibilitychange",_t,!1),M=()=>{d.removePassiveListener(Me),document.removeEventListener("resume",ot,!1),document.removeEventListener("visibilitychange",_t,!1),ae&&window.clearTimeout(ae)}})}finally{M()}})).apply(this,arguments)}function za(){return(za=(0,w.Z)(function*(g){const d=function fi(g){if(Yt(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),p=new Uint8Array(d);for(let y=0;y<g.length;y++)p[y]=g.charCodeAt(y);return p}(g),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class gp extends ct{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,w.Z)(function*(){yield d.initPromise})()}}function es(g){return nr.apply(this,arguments)}function nr(){return(nr=(0,w.Z)(function*(g){const d=yield ma()._get(No(g));return d&&(yield ma()._remove(No(g))),d})).apply(this,arguments)}function Nu(){const g=[];for(let p=0;p<20;p++){const y=Math.floor(62*Math.random());g.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return g.join("")}function ma(){return $e(hl)}function No(g){return qt("authEvent",g.config.apiKey,g.name)}function Js(g){if(!g?.includes("?"))return{};const[d,...p]=g.split("?");return(0,b.zd)(p.join("?"))}const ko=class Oo{constructor(){this._redirectPersistence=Qn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Dt,this._overrideRedirectResult=Sh}_initialize(d){var p=this;return(0,w.Z)(function*(){const y=d._key();let M=p.eventManagers.get(y);return M||(M=new gp(d),p.eventManagers.set(y,M),p.attachCallbackListeners(d,M)),M})()}_openPopup(d){Ne(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,y,M){var L=this;return(0,w.Z)(function*(){!function Gn(g){var d,p,y,M,L,Q,ae,Me,ot,_t;const rt=Mu();Ie("function"==typeof(null===(d=rt?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ie(typeof(null===(p=rt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ie("function"==typeof(null===(L=null===(M=null===(y=rt?.cordova)||void 0===y?void 0:y.plugins)||void 0===M?void 0:M.browsertab)||void 0===L?void 0:L.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(Me=null===(ae=null===(Q=rt?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Me?void 0:Me.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ie("function"==typeof(null===(_t=null===(ot=rt?.cordova)||void 0===ot?void 0:ot.InAppBrowser)||void 0===_t?void 0:_t.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Q=yield L._initialize(d);yield Q.initialized(),Q.resetRedirect(),function Ai(){yt.clear()}(),yield L._originValidation(d);const ae=function Gr(g,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:Nu(),postBody:null,tenantId:g.tenantId,error:pe(g,"no-auth-event")}}(d,y,M);yield function mp(g,d){return ma()._set(No(g),d)}(d,ae);const Me=yield function zr(g,d,p){return Fh.apply(this,arguments)}(d,ae,p),ot=yield function tr(g){const{cordova:d}=Mu();return new Promise(p=>{d.plugins.browsertab.isAvailable(y=>{let M=null;y?d.plugins.browsertab.openUrl(g):M=d.InAppBrowser.open(g,function Lt(g=(0,b.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),p(M)})})}(Me);return function Lh(g,d,p){return ii.apply(this,arguments)}(d,Q,ot)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function xu(g){return Tc.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:y,handleOpenURL:M,BuildInfo:L}=Mu(),Q=setTimeout((0,w.Z)(function*(){yield es(d),p.onEvent(Dc())}),500),ae=function(){var _t=(0,w.Z)(function*(rt){clearTimeout(Q);const rr=yield es(d);let bi=null;rr&&rt?.url&&(bi=function xo(g,d){var p,y;const M=function Ga(g){const d=Js(g),p=d.link?decodeURIComponent(d.link):void 0,y=Js(p).link,M=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Js(M).link||M||y||p||g}(d);if(M.includes("/__/auth/callback")){const L=Js(M),Q=L.firebaseError?function Mm(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(L.firebaseError)):null,ae=null===(y=null===(p=Q?.code)||void 0===p?void 0:p.split("auth/"))||void 0===y?void 0:y[1],Me=ae?pe(ae):null;return Me?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:M,postBody:null}}return null}(rr,rt.url)),p.onEvent(bi||Dc())});return function(rr){return _t.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,ae);const Me=M,ot=`${L.packageName.toLowerCase()}://`;Mu().handleOpenURL=function(){var _t=(0,w.Z)(function*(rt){if(rt.toLowerCase().startsWith(ot)&&ae({url:rt}),"function"==typeof Me)try{Me(rt)}catch(rr){console.error(rr)}});return function(rt){return _t.apply(this,arguments)}}()}};function Dc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pe("no-auth-event")}}function Mr(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function wl(g=(0,b.z$)()){return!("file:"!==Mr()&&"ionic:"!==Mr()&&"capacitor:"!==Mr()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function ku(){try{const g=self.localStorage,d=Ns();if(g)return g.setItem(d,"1"),g.removeItem(d),!function Tl(g=(0,b.z$)()){return function pi(){return(0,b.w1)()&&11===document?.documentMode}()||function Cc(g=(0,b.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,b.hl)()}catch{return vd()&&(0,b.hl)()}return!1}function vd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ed(){return(function _a(){return"http:"===Mr()||"https:"===Mr()}()||(0,b.ru)()||wl())&&!function Ou(){return(0,b.b$)()||(0,b.UG)()}()&&ku()&&!vd()}function _p(){return wl()&&typeof document<"u"}function Id(){return(Id=(0,w.Z)(function*(){return!!_p()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const ts={LOCAL:"local",NONE:"none",SESSION:"session"},Fn=Ie,Xs="persistence";function Td(g){return eo.apply(this,arguments)}function eo(){return(eo=(0,w.Z)(function*(g){yield g._initializationPromise;const d=jh(),p=qt(Xs,g.config.apiKey,g.name);d&&d.setItem(p,g._getPersistence())})).apply(this,arguments)}function jh(){var g;try{return(null===(g=function si(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const fn=Ie;class pn{constructor(){this.browserResolver=$e(lp),this.cordovaResolver=$e(ko),this.underlyingResolver=null,this._redirectPersistence=Qn,this._completeRedirectFn=Dt,this._overrideRedirectResult=Sh}_initialize(d){var p=this;return(0,w.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,y,M){var L=this;return(0,w.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openPopup(d,p,y,M)})()}_openRedirect(d,p,y,M){var L=this;return(0,w.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openRedirect(d,p,y,M)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return _p()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,w.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Bh(){return Id.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function qa(g){return g.unwrap()}function Sc(g){return bc(g)}function bc(g){const{_tokenResponse:d}=g instanceof b.ZR?g.customData:g;if(!d)return null;if(!(g instanceof b.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Au.credentialFromResult(g);const p=d.providerId;if(!p||p===Ce.PASSWORD)return null;let y;switch(p){case Ce.GOOGLE:y=Zr;break;case Ce.FACEBOOK:y=Eh;break;case Ce.GITHUB:y=ri;break;case Ce.TWITTER:y=fo;break;default:const{oauthIdToken:M,oauthAccessToken:L,oauthTokenSecret:Q,pendingToken:ae,nonce:Me}=d;return L||Q||M||ae?ae?p.startsWith("saml.")?wi._create(p,ae):hn._fromParams({providerId:p,signInMethod:p,pendingToken:ae,idToken:M,accessToken:L}):new Jn(p).credential({idToken:M,accessToken:L,rawNonce:Me}):null}return g instanceof b.ZR?y.credentialFromError(g):y.credentialFromResult(g)}function oi(g,d){return d.catch(p=>{throw p instanceof b.ZR&&function $h(g,d){var p;const y=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new Nm(g,function ta(g,d){var p;const y=(0,b.m9)(g),M=d;return Ie(d.customData.operationType,y,"argument-error"),Ie(null===(p=M.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,y,"argument-error"),ul._fromError(y,M)}(g,d));else if(y){const M=bc(d),L=d;M&&(L.credential=M,L.tenantId=y.tenantId||void 0,L.email=y.email||void 0,L.phoneNumber=y.phoneNumber||void 0)}}(g,p),p}).then(p=>{const M=p.user;return{operationType:p.operationType,credential:Sc(p),additionalUserInfo:Br(p),user:ya.getOrCreate(M)}})}function Dd(g,d){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,w.Z)(function*(g,d){const p=yield d;return{verificationId:p.verificationId,confirm:y=>oi(g,p.confirm(y))}})).apply(this,arguments)}class Nm{constructor(d,p){this.resolver=p,this.auth=function Za(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return oi(qa(this.auth),this.resolver.resolveSignIn(d))}}class ya{constructor(d){this._delegate=d,this.multiFactor=function tn(g){const d=(0,b.m9)(g);return _u.has(d)||_u.set(d,na._fromUser(d)),_u.get(d)}(d)}static getOrCreate(d){return ya.USER_MAP.has(d)||ya.USER_MAP.set(d,new ya(d)),ya.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,w.Z)(function*(){return oi(p.auth,yo(p._delegate,d))})()}linkWithPhoneNumber(d,p){var y=this;return(0,w.Z)(function*(){return Dd(y.auth,function Ah(g,d,p){return dc.apply(this,arguments)}(y._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,w.Z)(function*(){return oi(p.auth,function Dr(g,d,p){return hi.apply(this,arguments)}(p._delegate,d,pn))})()}linkWithRedirect(d){var p=this;return(0,w.Z)(function*(){return yield Td(dt(p.auth)),Rh(p._delegate,d,pn)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,w.Z)(function*(){return oi(p.auth,cr(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return Dd(this.auth,function bo(g,d,p){return Ch.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return oi(this.auth,function ip(g,d,p){return ze.apply(this,arguments)}(this._delegate,d,pn))}reauthenticateWithRedirect(d){var p=this;return(0,w.Z)(function*(){return yield Td(dt(p.auth)),gc(p._delegate,d,pn)})()}sendEmailVerification(d){return function T(g,d){return F.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,w.Z)(function*(){return yield function xn(g,d){return Xu.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function At(g,d){return on((0,b.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function Sn(g,d){return on((0,b.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function hd(g,d){return rp.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function be(g,d){return gt.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function R(g,d,p){return O.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ya.USER_MAP=new WeakMap;const Dl=Ie;let Hh=(()=>{class g{constructor(p,y){if(this.app=p,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=p.options;Dl(M,"invalid-api-key",{appName:p.name}),Dl(M,"invalid-api-key",{appName:p.name});const L=typeof window<"u"?pn:void 0;this._delegate=y.initialize({options:{persistence:Al(M,p.name),popupRedirectResolver:L}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ya.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,y){!function ao(g,d,p){const y=dt(g);Ie(y._canInitEmulator,y,"emulator-config-failed"),Ie(/^https?:\/\//.test(d),y,"invalid-emulator-scheme");const M=!!p?.disableWarnings,L=Wi(d),{host:Q,port:ae}=function uo(g){const d=Wi(g),p=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!p)return{host:"",port:null};const y=p[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(y);if(M){const L=M[1];return{host:L,port:Fi(y.substr(L.length+1))}}{const[L,Q]=y.split(":");return{host:L,port:Fi(Q)}}}(d);y.config.emulator={url:`${L}//${Q}${null===ae?"":`:${ae}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:Q,port:ae,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function zo(){function g(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,p,y)}applyActionCode(p){return function Ko(g,d){return La.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return fu(this._delegate,p)}confirmPasswordReset(p,y){return function Fa(g,d,p){return ys.apply(this,arguments)}(this._delegate,p,y)}createUserWithEmailAndPassword(p,y){var M=this;return(0,w.Z)(function*(){return oi(M._delegate,function To(g,d,p){return Zs.apply(this,arguments)}(M._delegate,p,y))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function al(g,d){return Ao.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Ks(g,d){const p=jn.parseLink(d);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,w.Z)(function*(){Dl(Ed(),p._delegate,"operation-not-supported-in-this-environment");const y=yield function Im(g,d){return Yn.apply(this,arguments)}(p._delegate,pn);return y?oi(p._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Wa(g,d){dt(g)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,y,M){const{next:L,error:Q,complete:ae}=zh(p,y,M);return this._delegate.onAuthStateChanged(L,Q,ae)}onIdTokenChanged(p,y,M){const{next:L,error:Q,complete:ae}=zh(p,y,M);return this._delegate.onIdTokenChanged(L,Q,ae)}sendSignInLinkToEmail(p,y){return function tc(g,d,p){return Do.apply(this,arguments)}(this._delegate,p,y)}sendPasswordResetEmail(p,y){return function wo(g,d,p){return _s.apply(this,arguments)}(this._delegate,p,y||void 0)}setPersistence(p){var y=this;return(0,w.Z)(function*(){let M;switch(function wd(g,d){Fn(Object.values(ts).includes(d),g,"invalid-persistence-type"),(0,b.b$)()?Fn(d!==ts.SESSION,g,"unsupported-persistence-type"):(0,b.UG)()?Fn(d===ts.NONE,g,"unsupported-persistence-type"):vd()?Fn(d===ts.NONE||d===ts.LOCAL&&(0,b.hl)(),g,"unsupported-persistence-type"):Fn(d===ts.NONE||ku(),g,"unsupported-persistence-type")}(y._delegate,p),p){case ts.SESSION:M=Qn;break;case ts.LOCAL:M=(yield $e(So)._isAvailable())?So:hl;break;case ts.NONE:M=at;break;default:return Ne("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return oi(this._delegate,function xa(g){return po.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return oi(this._delegate,Zo(this._delegate,p))}signInWithCustomToken(p){return oi(this._delegate,function sl(g,d){return Eo.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,y){return oi(this._delegate,function ol(g,d,p){return Zo((0,b.m9)(g),hs.credential(d,p)).catch(function(){var y=(0,w.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&ms(g),M});return function(M){return y.apply(this,arguments)}}())}(this._delegate,p,y))}signInWithEmailLink(p,y){return oi(this._delegate,function Jo(g,d,p){return nc.apply(this,arguments)}(this._delegate,p,y))}signInWithPhoneNumber(p,y){return Dd(this._delegate,function dd(g,d,p){return lc.apply(this,arguments)}(this._delegate,p,y))}signInWithPopup(p){var y=this;return(0,w.Z)(function*(){return Dl(Ed(),y._delegate,"operation-not-supported-in-this-environment"),oi(y._delegate,function Po(g,d,p){return $a.apply(this,arguments)}(y._delegate,p,pn))})()}signInWithRedirect(p){var y=this;return(0,w.Z)(function*(){return Dl(Ed(),y._delegate,"operation-not-supported-in-this-environment"),yield Td(y._delegate),Em(y._delegate,p,pn)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Yo(g,d){return Va.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=ts,g})();function zh(g,d,p){let y=g;"function"!=typeof g&&({next:y,error:d,complete:p}=g);const M=y;return{next:Q=>M(Q&&ya.getOrCreate(Q)),error:d,complete:p}}function Al(g,d){const p=function xm(g,d){const p=jh();if(!p)return[];const y=qt(Xs,g,d);switch(p.getItem(y)){case ts.NONE:return[at];case ts.LOCAL:return[So,Qn];case ts.SESSION:return[Qn];default:return[]}}(g,d);if(typeof self<"u"&&!p.includes(So)&&p.push(So),typeof window<"u")for(const y of[hl,Qn])p.includes(y)||p.push(y);return p.includes(at)||p.push(at),p}class Cl{constructor(){this.providerId="phone",this._delegate=new Au(qa(te.Z.auth()))}static credential(d,p){return Au.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}Cl.PHONE_SIGN_IN_METHOD=Au.PHONE_SIGN_IN_METHOD,Cl.PROVIDER_ID=Au.PROVIDER_ID;const Gh=Ie;class Om{constructor(d,p,y=te.Z.app()){var M;Gh(null===(M=y.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new Qr(y.auth(),d,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function va(g){g.INTERNAL.registerComponent(new we.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),y=d.getProvider("auth");return new Hh(p,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:hs,FacebookAuthProvider:Eh,GithubAuthProvider:ri,GoogleAuthProvider:Zr,OAuthProvider:Jn,SAMLAuthProvider:Cn,PhoneAuthProvider:Cl,PhoneMultiFactorGenerator:Cm,RecaptchaVerifier:Om,TwitterAuthProvider:fo,Auth:Hh,AuthCredential:co,Error:b.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.5.1")}(te.Z)},5861:(Tt,Se,V)=>{function w(b,ue,he,oe,we,Ue,Ce){try{var K=b[Ue](Ce),Y=K.value}catch(se){return void he(se)}K.done?ue(Y):Promise.resolve(Y).then(oe,we)}function te(b){return function(){var ue=this,he=arguments;return new Promise(function(oe,we){var Ue=b.apply(ue,he);function Ce(Y){w(Ue,oe,we,Ce,K,"next",Y)}function K(Y){w(Ue,oe,we,Ce,K,"throw",Y)}Ce(void 0)})}}V.d(Se,{Z:()=>te})},7582:(Tt,Se,V)=>{function ue(me,ye){var De={};for(var Te in me)Object.prototype.hasOwnProperty.call(me,Te)&&ye.indexOf(Te)<0&&(De[Te]=me[Te]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(Te=Object.getOwnPropertySymbols(me);Ae<Te.length;Ae++)ye.indexOf(Te[Ae])<0&&Object.prototype.propertyIsEnumerable.call(me,Te[Ae])&&(De[Te[Ae]]=me[Te[Ae]])}return De}function se(me,ye,De,Te){return new(De||(De=Promise))(function(Pe,pt){function Ke(Ut){try{wt(Te.next(Ut))}catch(bt){pt(bt)}}function Tn(Ut){try{wt(Te.throw(Ut))}catch(bt){pt(bt)}}function wt(Ut){Ut.done?Pe(Ut.value):function Ae(Pe){return Pe instanceof De?Pe:new De(function(pt){pt(Pe)})}(Ut.value).then(Ke,Tn)}wt((Te=Te.apply(me,ye||[])).next())})}function ge(me){return this instanceof ge?(this.v=me,this):new ge(me)}function Ne(me,ye,De){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Te=De.apply(me,ye||[]),Pe=[];return Ae={},pt("next"),pt("throw"),pt("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function pt(Rn){Te[Rn]&&(Ae[Rn]=function(Hn){return new Promise(function(On,ln){Pe.push([Rn,Hn,On,ln])>1||Ke(Rn,Hn)})})}function Ke(Rn,Hn){try{!function Tn(Rn){Rn.value instanceof ge?Promise.resolve(Rn.value.v).then(wt,Ut):bt(Pe[0][2],Rn)}(Te[Rn](Hn))}catch(On){bt(Pe[0][3],On)}}function wt(Rn){Ke("next",Rn)}function Ut(Rn){Ke("throw",Rn)}function bt(Rn,Hn){Rn(Hn),Pe.shift(),Pe.length&&Ke(Pe[0][0],Pe[0][1])}}function Ze(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,ye=me[Symbol.asyncIterator];return ye?ye.call(me):(me=function Be(me){var ye="function"==typeof Symbol&&Symbol.iterator,De=ye&&me[ye],Te=0;if(De)return De.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&Te>=me.length&&(me=void 0),{value:me&&me[Te++],done:!me}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),De={},Te("next"),Te("throw"),Te("return"),De[Symbol.asyncIterator]=function(){return this},De);function Te(Pe){De[Pe]=me[Pe]&&function(pt){return new Promise(function(Ke,Tn){!function Ae(Pe,pt,Ke,Tn){Promise.resolve(Tn).then(function(wt){Pe({value:wt,done:Ke})},pt)}(Ke,Tn,(pt=me[Pe](pt)).done,pt.value)})}}}V.d(Se,{FC:()=>Ne,KL:()=>Ze,_T:()=>ue,mG:()=>se,qq:()=>ge}),"function"==typeof SuppressedError&&SuppressedError}},Tt=>{Tt(Tt.s=6788)}]);