"use strict";(self.webpackChunkopen_lib=self.webpackChunkopen_lib||[]).push([[179],{9058:(Et,Ce,V)=>{V.d(Ce,{BH:()=>pe,G6:()=>gi,L:()=>De,LL:()=>Pe,Pz:()=>Ne,Sg:()=>Ke,UG:()=>Ee,ZB:()=>ie,ZR:()=>Ae,aH:()=>ge,b$:()=>si,eu:()=>ye,hl:()=>_e,jU:()=>Nt,m9:()=>Qi,ne:()=>Vn,pd:()=>Bt,r3:()=>En,ru:()=>sn,tV:()=>K,uI:()=>it,vZ:()=>Zr,w1:()=>gr,xO:()=>Tr,xb:()=>qr,z$:()=>Je,zd:()=>yt});const oe=function(X){const j=[];let $=0;for(let B=0;B<X.length;B++){let H=X.charCodeAt(B);H<128?j[$++]=H:H<2048?(j[$++]=H>>6|192,j[$++]=63&H|128):55296==(64512&H)&&B+1<X.length&&56320==(64512&X.charCodeAt(B+1))?(H=65536+((1023&H)<<10)+(1023&X.charCodeAt(++B)),j[$++]=H>>18|240,j[$++]=H>>12&63|128,j[$++]=H>>6&63|128,j[$++]=63&H|128):(j[$++]=H>>12|224,j[$++]=H>>6&63|128,j[$++]=63&H|128)}return j},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,j){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let H=0;H<X.length;H+=3){const ne=X[H],Ve=H+1<X.length,Fe=Ve?X[H+1]:0,Ot=H+2<X.length,Xe=Ot?X[H+2]:0;let pn=(15&Fe)<<2|Xe>>6,Dn=63&Xe;Ot||(Dn=64,Ve||(pn=64)),B.push($[ne>>2],$[(3&ne)<<4|Fe>>4],$[pn],$[Dn])}return B.join("")},encodeString(X,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(X):this.encodeByteArray(oe(X),j)},decodeString(X,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(X):function(X){const j=[];let $=0,B=0;for(;$<X.length;){const H=X[$++];if(H<128)j[B++]=String.fromCharCode(H);else if(H>191&&H<224){const ne=X[$++];j[B++]=String.fromCharCode((31&H)<<6|63&ne)}else if(H>239&&H<365){const Ot=((7&H)<<18|(63&X[$++])<<12|(63&X[$++])<<6|63&X[$++])-65536;j[B++]=String.fromCharCode(55296+(Ot>>10)),j[B++]=String.fromCharCode(56320+(1023&Ot))}else{const ne=X[$++],Ve=X[$++];j[B++]=String.fromCharCode((15&H)<<12|(63&ne)<<6|63&Ve)}}return j.join("")}(this.decodeStringToByteArray(X,j))},decodeStringToByteArray(X,j){this.init_();const $=j?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let H=0;H<X.length;){const ne=$[X.charAt(H++)],Fe=H<X.length?$[X.charAt(H)]:0;++H;const Xe=H<X.length?$[X.charAt(H)]:64;++H;const Rt=H<X.length?$[X.charAt(H)]:64;if(++H,null==ne||null==Fe||null==Xe||null==Rt)throw new Ie;B.push(ne<<2|Fe>>4),64!==Xe&&(B.push(Fe<<4&240|Xe>>2),64!==Rt&&B.push(Xe<<6&192|Rt))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}};class Ie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const De=function(X){return function(X){const j=oe(X);return se.encodeByteArray(j,!0)}(X).replace(/\./g,"")},K=function(X){try{return se.decodeString(X,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function ie(X,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return j}for(const $ in j)!j.hasOwnProperty($)||!qe($)||(X[$]=ie(X[$],j[$]));return X}function qe(X){return"__proto__"!==X}const lt=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const X=process.env.__FIREBASE_DEFAULTS__;return X?JSON.parse(X):void 0})()||(()=>{if(typeof document>"u")return;let X;try{X=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=X&&K(X[1]);return j&&JSON.parse(j)})()}catch(X){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${X}`)}},ge=()=>{var X;return null===(X=lt())||void 0===X?void 0:X.config},Ne=X=>{var j;return null===(j=lt())||void 0===j?void 0:j[`_${X}`]};class pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,$)=>{this.resolve=j,this.reject=$})}wrapCallback(j){return($,B)=>{$?this.reject($):this.resolve(B),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j($):j($,B))}}}function Ke(X,j){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=j||"demo-project",H=X.iat||0,ne=X.sub||X.user_id;if(!ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:H,exp:H+3600,auth_time:H,sub:ne,user_id:ne,firebase:{sign_in_provider:"custom",identities:{}}},X);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(Ve)),""].join(".")}function Je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function it(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function Ee(){var X;const j=null===(X=lt())||void 0===X?void 0:X.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Nt(){return"object"==typeof self&&self.self===self}function sn(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function si(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function gr(){const X=Je();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function gi(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){try{return"object"==typeof indexedDB}catch{return!1}}function ye(){return new Promise((X,j)=>{try{let $=!0;const B="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(B);H.onsuccess=()=>{H.result.close(),$||self.indexedDB.deleteDatabase(B),X(!0)},H.onupgradeneeded=()=>{$=!1},H.onerror=()=>{var ne;j((null===(ne=H.error)||void 0===ne?void 0:ne.message)||"")}}catch($){j($)}})}class Ae extends Error{constructor(j,$,B){super($),this.code=j,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(j,$,B){this.service=j,this.serviceName=$,this.errors=B}create(j,...$){const B=$[0]||{},H=`${this.service}/${j}`,ne=this.errors[j],Ve=ne?function dt(X,j){return X.replace(We,($,B)=>{const H=j[B];return null!=H?String(H):`<${B}?>`})}(ne,B):"Error";return new Ae(H,`${this.serviceName}: ${Ve} (${H}).`,B)}}const We=/\{\$([^}]+)}/g;function En(X,j){return Object.prototype.hasOwnProperty.call(X,j)}function qr(X){for(const j in X)if(Object.prototype.hasOwnProperty.call(X,j))return!1;return!0}function Zr(X,j){if(X===j)return!0;const $=Object.keys(X),B=Object.keys(j);for(const H of $){if(!B.includes(H))return!1;const ne=X[H],Ve=j[H];if(Ti(ne)&&Ti(Ve)){if(!Zr(ne,Ve))return!1}else if(ne!==Ve)return!1}for(const H of B)if(!$.includes(H))return!1;return!0}function Ti(X){return null!==X&&"object"==typeof X}function Tr(X){const j=[];for(const[$,B]of Object.entries(X))Array.isArray(B)?B.forEach(H=>{j.push(encodeURIComponent($)+"="+encodeURIComponent(H))}):j.push(encodeURIComponent($)+"="+encodeURIComponent(B));return j.length?"&"+j.join("&"):""}function yt(X){const j={};return X.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[H,ne]=B.split("=");j[decodeURIComponent(H)]=decodeURIComponent(ne)}}),j}function Bt(X){const j=X.indexOf("?");if(!j)return"";const $=X.indexOf("#",j);return X.substring(j,$>0?$:void 0)}function Vn(X,j){const $=new kn(X,j);return $.subscribe.bind($)}class kn{constructor(j,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{j(this)}).catch(B=>{this.error(B)})}next(j){this.forEachObserver($=>{$.next(j)})}error(j){this.forEachObserver($=>{$.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,$,B){let H;if(void 0===j&&void 0===$&&void 0===B)throw new Error("Missing Observer.");H=function en(X,j){if("object"!=typeof X||null===X)return!1;for(const $ of j)if($ in X&&"function"==typeof X[$])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:$,complete:B},void 0===H.next&&(H.next=jn),void 0===H.error&&(H.error=jn),void 0===H.complete&&(H.complete=jn);const ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),ne}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,j)}sendOne(j,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{$(this.observers[j])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jn(){}function Qi(X){return X&&X._delegate?X._delegate:X}},5356:(Et,Ce,V)=>{var w=V(6593),ee=V(6387),D=V(5879);let oe=(()=>{class n{constructor(t){this.customClass=t}static#e=this.\u0275fac=function(s){return new(s||n)(D.$8M("custom-style"))};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-custom-button"]],decls:2,vars:2,consts:[["href",""]],template:function(s,a){1&s&&(D.TgZ(0,"a",0),D._uU(1," \u6309\u9215\u6e2c\u8a66\n"),D.qZA()),2&s&&D.Tol(a.customClass)},styles:[".black[_ngcontent-%COMP%]{color:#000}.red[_ngcontent-%COMP%]{color:red}.blue[_ngcontent-%COMP%]{color:#00f}"]})}return n})(),fe=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-demo-buttons"]],decls:7,vars:0,consts:[["custom-style","black"],["custom-style","red"],["custom-style","blue"]],template:function(s,a){1&s&&(D.TgZ(0,"h2"),D._uU(1,"Attribute Demo"),D.qZA(),D._UZ(2,"app-custom-button",0)(3,"br")(4,"app-custom-button",1)(5,"br")(6,"app-custom-button",2))},dependencies:[oe]})}return n})();const se=function(){return["page-one"]},Ie=function(){return["page-two"]},je=function(){return["page-three"]};let De=(()=>{class n{constructor(t){this.router=t,console.log(this.router?.config)}static#e=this.\u0275fac=function(s){return new(s||n)(D.Y36(ee.F0))};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-default-template"]],decls:12,vars:6,consts:[[3,"routerLink"]],template:function(s,a){1&s&&(D._UZ(0,"br"),D.TgZ(1,"a",0),D._uU(2,"go one"),D.qZA(),D._UZ(3,"br")(4,"br"),D.TgZ(5,"a",0),D._uU(6,"go two"),D.qZA(),D._UZ(7,"br")(8,"br"),D.TgZ(9,"a",0),D._uU(10,"go three"),D.qZA(),D._UZ(11,"br")),2&s&&(D.xp6(1),D.Q6J("routerLink",D.DdM(3,se)),D.xp6(4),D.Q6J("routerLink",D.DdM(4,Ie)),D.xp6(4),D.Q6J("routerLink",D.DdM(5,je)))},dependencies:[ee.rH]})}return n})(),K=(()=>{class n{constructor(){this.size=0}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Y=(()=>{class n{constructor(t){this.fontSizeService=t}static#e=this.\u0275fac=function(s){return new(s||n)(D.Y36(K))};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-child-element"]],decls:5,vars:1,template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1,"child-element works!"),D.qZA(),D._uU(2),D.TgZ(3,"p"),D._uU(4,"child-element works! end"),D.qZA()),2&s&&(D.xp6(2),D.hij("\n",a.fontSizeService.size,"\n"))}})}return n})(),ie=(()=>{class n{constructor(t){this.fontSizeService=t}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(s){return new(s||n)(D.Y36(K))};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-aaa-element"]],features:[D._Bn([K])],decls:10,vars:1,consts:[[3,"click"]],template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1),D.qZA(),D.TgZ(2,"div",0),D.NdJ("click",function(){return a.add()}),D._uU(3,"\u52a0\u52a0\u52a0\u52a0"),D.qZA(),D._UZ(4,"br"),D.TgZ(5,"div",0),D.NdJ("click",function(){return a.minus()}),D._uU(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),D.qZA(),D._UZ(7,"hr"),D._uU(8,"\nchild\n------------\n"),D._UZ(9,"app-child-element")),2&s&&(D.xp6(1),D.Oqu(a.fontSizeService.size))},dependencies:[Y]})}return n})(),qe=(()=>{class n{constructor(t){this.fontSizeService=t}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(s){return new(s||n)(D.Y36(K))};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-bbb-element"]],features:[D._Bn([K])],decls:9,vars:1,consts:[[3,"click"]],template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1),D.qZA(),D.TgZ(2,"div",0),D.NdJ("click",function(){return a.add()}),D._uU(3,"\u52a0\u52a0\u52a0\u52a0"),D.qZA(),D._UZ(4,"br"),D.TgZ(5,"div",0),D.NdJ("click",function(){return a.minus()}),D._uU(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),D.qZA(),D._uU(7,"\nchild\n------------\n"),D._UZ(8,"app-child-element")),2&s&&(D.xp6(1),D.Oqu(a.fontSizeService.size))},dependencies:[Y]})}return n})();const Oe=new D.OlP("FONT_SIZE_SERVICE");let He=(()=>{class n{constructor(t){this.fontSizeService=t}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(s){return new(s||n)(D.Y36(Oe))};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-ccc-element"]],decls:10,vars:1,consts:[[3,"click"]],template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1),D.qZA(),D.TgZ(2,"div",0),D.NdJ("click",function(){return a.add()}),D._uU(3,"\u52a0\u52a0\u52a0\u52a0"),D.qZA(),D._UZ(4,"br"),D.TgZ(5,"div",0),D.NdJ("click",function(){return a.minus()}),D._uU(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),D.qZA(),D._UZ(7,"hr"),D._uU(8,"\nchild\n------------\n"),D._UZ(9,"app-child-element")),2&s&&(D.xp6(1),D.Oqu(a.fontSizeService.size))},dependencies:[Y]})}return n})(),$e=(()=>{class n{constructor(t){this.fontSizeService=t}add(){this.fontSizeService.size++}minus(){this.fontSizeService.size--}static#e=this.\u0275fac=function(s){return new(s||n)(D.Y36(K))};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-ddd-element"]],decls:10,vars:1,consts:[[3,"click"]],template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1),D.qZA(),D.TgZ(2,"div",0),D.NdJ("click",function(){return a.add()}),D._uU(3,"\u52a0\u52a0\u52a0\u52a0"),D.qZA(),D._UZ(4,"br"),D.TgZ(5,"div",0),D.NdJ("click",function(){return a.minus()}),D._uU(6,"\u6e1b\u6e1b\u6e1b\u6e1b\u6e1b"),D.qZA(),D._UZ(7,"hr"),D._uU(8,"\nchild\n------------\n"),D._UZ(9,"app-child-element")),2&s&&(D.xp6(1),D.Oqu(a.fontSizeService.size))},dependencies:[Y]})}return n})(),rt=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-demo-element-injector"]],decls:20,vars:0,consts:[[1,"demo-block"],[1,"demo-block__title"]],template:function(s,a){1&s&&(D.TgZ(0,"div",0)(1,"div",1),D._uU(2," \u5143\u7d20\u6ce8\u5165\u5668 (Element Injector) DEMO "),D.qZA(),D._uU(3," app-aaa-element: "),D._UZ(4,"app-aaa-element"),D.qZA(),D.TgZ(5,"div",0)(6,"div",1),D._uU(7," \u5143\u7d20\u6ce8\u5165\u5668 (Element Injector) DEMO "),D.qZA(),D._uU(8," app-bbb-element: "),D._UZ(9,"app-bbb-element"),D.qZA(),D.TgZ(10,"div",0)(11,"div",1),D._uU(12," Injection Token Injector "),D.qZA(),D._uU(13," app-ccc-element: "),D._UZ(14,"app-ccc-element"),D.qZA(),D.TgZ(15,"div",0)(16,"div",1),D._uU(17," \u6a21\u7d44\u6ce8\u5165\u5668 (Module Injector) DEMO "),D.qZA(),D._uU(18," app-ddd-element: "),D._UZ(19,"app-ddd-element"),D.qZA())},dependencies:[ie,qe,He,$e]})}return n})(),lt=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-same-component"]],decls:15,vars:0,template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1,"same-component works!"),D.qZA(),D._UZ(2,"br"),D.TgZ(3,"p"),D._uU(4,"same-component works!"),D.qZA(),D._UZ(5,"br"),D.TgZ(6,"p"),D._uU(7,"same-component works!"),D.qZA(),D._UZ(8,"br"),D.TgZ(9,"p"),D._uU(10,"same-component works!"),D.qZA(),D._UZ(11,"br"),D.TgZ(12,"p"),D._uU(13,"same-component works!"),D.qZA(),D._UZ(14,"br"))}})}return n})(),qt=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-same-two-component"]],decls:2,vars:0,template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1,"same-two-component works!"),D.qZA())}})}return n})();const fn=function(){return["/","page-two"]},ge=function(){return["/","page-three"]};let Ne=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-page-one"]],decls:11,vars:4,consts:[[3,"routerLink"]],template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1,"page-one works!"),D.qZA(),D._UZ(2,"app-same-component")(3,"app-same-two-component"),D.TgZ(4,"p"),D._uU(5,"page-one works!"),D.qZA(),D.TgZ(6,"a",0),D._uU(7,"go page-two"),D.qZA(),D._UZ(8,"br"),D.TgZ(9,"a",0),D._uU(10,"go page-two"),D.qZA()),2&s&&(D.xp6(6),D.Q6J("routerLink",D.DdM(2,fn)),D.xp6(3),D.Q6J("routerLink",D.DdM(3,ge)))},dependencies:[ee.rH,lt,qt]})}return n})(),pe=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-diffenent-component"]],decls:2,vars:0,template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1,"diffenent-component works!"),D.qZA())}})}return n})();const Ke=function(){return["/","page-one"]},Je=function(){return["/","page-three"]};let it=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-page-two"]],decls:15,vars:4,consts:[[3,"routerLink"]],template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1,"page-two works!"),D.qZA(),D._UZ(2,"app-same-component"),D.TgZ(3,"p"),D._uU(4,"page-two works!"),D.qZA(),D.TgZ(5,"a",0),D._uU(6,"go page-one"),D.qZA(),D._UZ(7,"br"),D.TgZ(8,"a",0),D._uU(9,"go page-one"),D.qZA(),D._UZ(10,"app-diffenent-component")(11,"app-diffenent-component")(12,"app-diffenent-component")(13,"app-diffenent-component")(14,"app-same-two-component")),2&s&&(D.xp6(5),D.Q6J("routerLink",D.DdM(2,Ke)),D.xp6(3),D.Q6J("routerLink",D.DdM(3,Je)))},dependencies:[ee.rH,lt,pe,qt]})}return n})();const Ee=function(){return["/","page-two"]},Nt=function(){return["/","page-one"]},si=[{path:"element-injector-demo",component:rt},{path:"demo-attribute",component:fe},{path:"page-one",component:Ne,loadChildren:()=>Promise.all([V.e(592),V.e(913)]).then(V.bind(V,7913)).then(n=>n.PageOneModule)},{path:"page-two",component:it,loadChildren:()=>Promise.all([V.e(592),V.e(929)]).then(V.bind(V,6929)).then(n=>n.PageTwoModule)},{path:"page-three",component:(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-page-three"]],decls:10,vars:4,consts:[[3,"routerLink"]],template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1,"page-three works!"),D.qZA(),D._UZ(2,"app-diffenent-component")(3,"br"),D.TgZ(4,"a",0),D._uU(5,"go page-two"),D.qZA(),D._UZ(6,"br"),D.TgZ(7,"a",0),D._uU(8,"go page-one"),D.qZA(),D._UZ(9,"br")),2&s&&(D.xp6(4),D.Q6J("routerLink",D.DdM(2,Ee)),D.xp6(3),D.Q6J("routerLink",D.DdM(3,Nt)))},dependencies:[pe,ee.rH]})}return n})(),loadChildren:()=>Promise.all([V.e(592),V.e(608)]).then(V.bind(V,5608)).then(n=>n.PageThreeModule)},{path:"**",component:De}];let Fr=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=D.oAB({type:n});static#n=this.\u0275inj=D.cJS({imports:[ee.Bz.forRoot(si),ee.Bz]})}return n})();var gr=V(6814),On=V(534);(0,On.registerVersion)("firebase","10.7.2","app");var _e=V(7394);class ye extends _e.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const we={setInterval(n,e,...t){const{delegate:s}=we;return s?.setInterval?s.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=we;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Te=V(9039);class Ae extends ye{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var s;if(this.closed)return this;this.state=e;const a=this.id,c=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(c,a,t)),this.pending=!0,this.delay=t,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(c,this.id,t),this}requestAsyncId(e,t,s=0){return we.setInterval(e.flush.bind(e,this),s)}recycleAsyncId(e,t,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return t;null!=t&&we.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(e,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let a,s=!1;try{this.work(e)}catch(c){s=!0,a=c||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:s}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Te.P)(s,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const dt={now:()=>(dt.delegate||Date).now(),delegate:void 0};class We{constructor(e,t=We.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,s){return new this.schedulerActionCtor(this,e).schedule(s,t)}}We.now=dt.now;class Mn extends We{constructor(e,t=We.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let s;this._active=!0;do{if(s=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,s){for(;e=t.shift();)e.unsubscribe();throw s}}}const kt=new class It extends Mn{}(class Pe extends Ae{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,s=0){return null!=s&&s>0||null==s&&this.delay>0?super.requestAsyncId(e,t,s):(e.flush(this),0)}}),Ln=new Mn(Ae);var Gn=V(9397),En=V(5137),rr=V(3093);const qr=new D.GfV("ANGULARFIRE2_VERSION");class Dt{constructor(){return((n,e)=>{const t=(0,On.getApps)(),s=[];return t.forEach(a=>{a.container.getProvider(n).instances.forEach(h=>{s.includes(h)||s.push(h)})}),s})(Tr)}}const Tr="app-check";function yt(){}class Bt{zone;delegate;constructor(e,t=kt){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,s){const a=this.zone;return this.delegate.schedule(function(h){a.runGuarded(()=>{e.apply(this,[h])})},t,s)}}class Vt{zone;task=null;constructor(e){this.zone=e}call(e,t){const s=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yt,{},yt,yt)),t.pipe((0,Gn.b)({next:s,complete:s,error:s})).subscribe(e).add(s)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Bt(Zone.current)),this.insideAngular=t.run(()=>new Bt(Zone.current,Ln)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(s){return new(s||n)(D.LFG(D.R0b))};static \u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zt(n){return function Vi(n){return function(t){return(t=t.lift(new Vt(n.ngZone))).pipe((0,En.R)(n.outsideAngular),(0,rr.Q)(n.insideAngular))}}(function kn(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Lr=V(3106);Lr.Z.registerVersion("firebase","10.7.2","app-compat");const Ki=["ngOnDestroy"];class Vr{constructor(e){return e}}const Ur=new D.OlP("angularfire2.app.options"),Br=new D.OlP("angularfire2.app.name");function Di(n,e,t){const a="object"==typeof t&&t||{};a.name=a.name||"string"==typeof t&&t||"[DEFAULT]";const h=Lr.Z.apps.filter(v=>v&&v.name===a.name)[0]||e.runOutsideAngular(()=>Lr.Z.initializeApp(n,a));try{if(JSON.stringify(n)!==JSON.stringify(h.options)){const v=!!module.hot;Qi("error",`${h.name} Firebase App already initialized with different options${v?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Vr(h)}const Qi=(n,...e)=>{(0,D.X6Q)()&&typeof console<"u"&&console[n](...e)},X={provide:Vr,useFactory:Di,deps:[Ur,D.R0b,[new D.FiY,Br]]};let j=(()=>{class n{static initializeApp(t,s){return{ngModule:n,providers:[{provide:Ur,useValue:t},{provide:Br,useValue:s}]}}constructor(t){Lr.Z.registerVersion("angularfire",qr.full,"core"),Lr.Z.registerVersion("angularfire",qr.full,"app-compat"),Lr.Z.registerVersion("angular",D.q4F.full,t.toString())}static \u0275fac=function(s){return new(s||n)(D.LFG(D.Lbi))};static \u0275mod=D.oAB({type:n});static \u0275inj=D.cJS({providers:[X]})}return n})();function $(n,e,t,s,a){const[,c,h]=globalThis.\u0275AngularfireInstanceCache.find(v=>v[0]===n)||[];if(c)return function B(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(a,h)||(ne("error",`${e} was already initialized on the ${t} Firebase App with different settings.${H?" You may need to reload as Firebase is not HMR aware.":""}`),ne("warn",{is:a,was:h})),c;{const v=s();return globalThis.\u0275AngularfireInstanceCache.push([n,v,a]),v}}const H=typeof module<"u"&&!!module.hot,ne=(n,...e)=>{(0,D.X6Q)()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[],V(6230);var Fe=V(8645),Ot=V(2096),Xe=V(5592),Gt=V(2459),Rt=V(3019),pn=V(4664),Dn=V(7398);class Yi extends Fe.x{constructor(e=1/0,t=1/0,s=dt){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:h}=this;t||(s.push(e),!a&&s.push(c.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:a}=this,c=a.slice();for(let h=0;h<c.length&&!e.closed;h+=s?1:2)e.next(c[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<s.length&&s.splice(0,s.length-c),!a){const h=t.now();let v=0;for(let b=1;b<s.length&&s[b]<=h;b+=2)v=b;v&&s.splice(0,v+1)}}}var Ca=V(3020);function ve(n,e,t){let s,a=!1;return n&&"object"==typeof n?({bufferSize:s=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):s=n??1/0,(0,Ca.B)({connector:()=>new Yi(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var le=V(1374),ke=V(4674);function ut(n,e){return(0,ke.m)(e)?(0,pn.w)(()=>n,e):(0,pn.w)(()=>n)}var tt=V(2181);const tn=new D.OlP("angularfire2.auth.use-emulator"),Wn=new D.OlP("angularfire2.auth.settings"),qn=new D.OlP("angularfire2.auth.tenant-id"),Yn=new D.OlP("angularfire2.auth.langugage-code"),Ui=new D.OlP("angularfire2.auth.use-device-language"),po=new D.OlP("angularfire.auth.persistence"),Go=(n,e,t,s,a,c,h,v)=>$(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=e.runOutsideAngular(()=>n.auth());if(t&&b.useEmulator(...t),s&&(b.tenantId=s),b.languageCode=a,c&&b.useDeviceLanguage(),h)for(const[P,k]of Object.entries(h))b.settings[P]=k;return v&&b.setPersistence(v),b},[t,s,a,c,h,v]);let hs=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,s,a,c,h,v,b,P,k,W,J,ae){const xe=new Fe.x,Qe=(0,Ot.of)(void 0).pipe((0,rr.Q)(h.outsideAngular),(0,pn.w)(()=>c.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,6230)))),(0,Dn.U)(()=>Di(t,c,s)),(0,Dn.U)(Ze=>Go(Ze,c,v,P,k,W,b,J)),ve({bufferSize:1,refCount:!1}));if((0,gr.PM)(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ot.of)(null);else{Qe.pipe((0,le.P)()).subscribe();const Ze=Qe.pipe((0,pn.w)(ct=>ct.getRedirectResult().then(Ft=>Ft,()=>null)),zt,ve({bufferSize:1,refCount:!1})),wt=Qe.pipe((0,pn.w)(ct=>new Xe.y(Ft=>({unsubscribe:c.runOutsideAngular(()=>ct.onAuthStateChanged(hn=>Ft.next(hn),hn=>Ft.error(hn),()=>Ft.complete()))})))),Mt=Qe.pipe((0,pn.w)(ct=>new Xe.y(Ft=>({unsubscribe:c.runOutsideAngular(()=>ct.onIdTokenChanged(hn=>Ft.next(hn),hn=>Ft.error(hn),()=>Ft.complete()))}))));this.authState=Ze.pipe(ut(wt),(0,En.R)(h.outsideAngular),(0,rr.Q)(h.insideAngular)),this.user=Ze.pipe(ut(Mt),(0,En.R)(h.outsideAngular),(0,rr.Q)(h.insideAngular)),this.idToken=this.user.pipe((0,pn.w)(ct=>ct?(0,Gt.D)(ct.getIdToken()):(0,Ot.of)(null))),this.idTokenResult=this.user.pipe((0,pn.w)(ct=>ct?(0,Gt.D)(ct.getIdTokenResult()):(0,Ot.of)(null))),this.credential=(0,Rt.T)(Ze,xe,this.authState.pipe((0,tt.h)(ct=>!ct))).pipe((0,Dn.U)(ct=>ct?.user?ct:null),(0,En.R)(h.outsideAngular),(0,rr.Q)(h.insideAngular))}return((n,e,t,s={})=>new Proxy(n,{get:(a,c)=>t.runOutsideAngular(()=>{if(n[c])return s?.spy?.get&&s.spy.get(c,n[c]),n[c];if(Ki.indexOf(c)>-1)return()=>{};const h=e.toPromise().then(v=>{const b=v?.[c];return"function"==typeof b?b.bind(v):b?.then?b.then(P=>t.run(()=>P)):t.run(()=>b)});return new Proxy(()=>{},{get:(v,b)=>h[b],apply:(v,b,P)=>h.then(k=>{const W=k?.(...P);return s?.spy?.apply&&s.spy.apply(c,P,W),W})})})}))(this,Qe,c,{spy:{apply:(Ze,wt,Mt)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&Mt.then(ct=>xe.next(ct))}}})}static \u0275fac=function(s){return new(s||n)(D.LFG(Ur),D.LFG(Br,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(Vn),D.LFG(tn,8),D.LFG(Wn,8),D.LFG(qn,8),D.LFG(Yn,8),D.LFG(Ui,8),D.LFG(po,8),D.LFG(Dt,8))};static \u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Gs=V(7921),Ai=V(9360),an=V(8251);function go(){return(0,Ai.e)((n,e)=>{let t,s=!1;n.subscribe((0,an.x)(e,a=>{const c=t;t=a,s&&e.next([c,a]),s=!0}))})}var st,mo=V(6699),qo=V(3997),Se=V(5861),du=V(4537),Jn=V(7879),on=V(9058),hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oi={},fs=fs||{},Ut=hu||self;function Ps(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var mr="closure_uid_"+(1e9*Math.random()>>>0),_o=0;function yo(n,e,t){return n.call.apply(n.bind,arguments)}function fu(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Mr(n,e,t){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yo:fu).apply(null,arguments)}function vo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function Xn(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(s,a,c){for(var h=Array(arguments.length-2),v=2;v<arguments.length;v++)h[v-2]=arguments[v];return e.prototype[a].apply(s,h)}}function Ji(){this.s=this.s,this.o=this.o}Ji.prototype.s=!1,Ji.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Xu(n){Object.prototype.hasOwnProperty.call(n,mr)&&n[mr]||(n[mr]=++_o)}(this)},Ji.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pu=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function nn(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function Dr(n,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Ps(s)){const a=n.length||0,c=s.length||0;n.length=a+c;for(let h=0;h<c;h++)n[a+h]=s[h]}else n.push(s)}}function _n(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_n.prototype.h=function(){this.defaultPrevented=!0};var Eo=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};Ut.addEventListener("test",t,e),Ut.removeEventListener("test",t,e)}catch{}return n}();function _r(n){return/^[\s\xa0]*$/.test(n)}function Io(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function Ci(n){return-1!=Io().indexOf(n)}function ps(n){return ps[" "](n),n}ps[" "]=function(){};var yr,n,ec=Ci("Opera"),In=Ci("Trident")||Ci("MSIE"),ot=Ci("Edge"),At=ot||In,Tn=Ci("Gecko")&&!(-1!=Io().toLowerCase().indexOf("webkit")&&!Ci("Edge"))&&!(Ci("Trident")||Ci("MSIE"))&&!Ci("Edge"),jr=-1!=Io().toLowerCase().indexOf("webkit")&&!Ci("Edge");function gs(){var n=Ut.document;return n?n.documentMode:void 0}e:{var Si="",Un=(n=Io(),Tn?/rv:([^\);]+)(\)|;)/.exec(n):ot?/Edge\/([\d\.]+)/.exec(n):In?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jr?/WebKit\/(\S+)/.exec(n):ec?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Un&&(Si=Un?Un[1]:""),In){var Bi=gs();if(null!=Bi&&Bi>parseFloat(Si)){yr=String(Bi);break e}}yr=Si}var Yr=Ut.document&&In&&(gs()||parseInt(yr,10))||void 0;function Ms(n,e){if(_n.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Tn){e:{try{ps(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:xs[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ms.$.h.call(this)}}Xn(Ms,_n);var xs={2:"touch",3:"pen",4:"mouse"};Ms.prototype.h=function(){Ms.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ln="closure_listenable_"+(1e6*Math.random()|0),wo=0;function qs(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++wo,this.fa=this.ia=!1}function $r(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Xi(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function ai(n){const e={};for(const t in n)e[t]=n[t];return e}const es="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ba(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let c=0;c<es.length;c++)t=es[c],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function _i(n){this.src=n,this.g={},this.h=0}function jt(n,e){var t=e.type;if(t in n.g){var c,s=n.g[t],a=pu(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&($r(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function gu(n,e,t,s){for(var a=0;a<n.length;++a){var c=n[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==s)return a}return-1}_i.prototype.add=function(n,e,t,s,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=gu(n,e,s,a);return-1<h?(e=n[h],t||(e.ia=!1)):((e=new qs(e,this.src,c,!!s,a)).ia=t,n.push(e)),e};var To="closure_lm_"+(1e6*Math.random()|0),ms={};function ui(n,e,t,s,a){if(s&&s.once)return ts(n,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)ui(n,e[c],t,s,a);return null}return t=Ks(t),n&&n[ln]?n.O(e,t,Qr(s)?!!s.capture:!!s,a):Zs(n,e,t,!1,s,a)}function Zs(n,e,t,s,a,c){if(!e)throw Error("Invalid event type");var h=Qr(a)?!!a.capture:!!a,v=Zo(n);if(v||(n[To]=v=new _i(n)),(t=v.add(e,t,s,h,c)).proxy)return t;if(s=function bi(){const e=ci;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)Eo||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(Jr(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function ts(n,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)ts(n,e[c],t,s,a);return null}return t=Ks(t),n&&n[ln]?n.P(e,t,Qr(s)?!!s.capture:!!s,a):Zs(n,e,t,!0,s,a)}function ir(n,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)ir(n,e[c],t,s,a);else s=Qr(s)?!!s.capture:!!s,t=Ks(t),n&&n[ln]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=gu(c=n.g[e],t,s,a))&&($r(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Zo(n))&&(e=n.g[e.toString()],n=-1,e&&(n=gu(e,t,s,a)),(t=-1<n?e[n]:null)&&Jc(t))}function Jc(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[ln])jt(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(Jr(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Zo(e))?(jt(t,n),0==t.h&&(t.src=null,e[To]=null)):$r(n)}}}function Jr(n){return n in ms?ms[n]:ms[n]="on"+n}function ci(n,e){if(n.fa)n=!0;else{e=new Ms(e,this);var t=n.listener,s=n.la||n.src;n.ia&&Jc(n),n=t.call(s,e)}return n}function Zo(n){return(n=n[To])instanceof _i?n:null}var li="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ks(n){return"function"==typeof n?n:(n[li]||(n[li]=function(e){return n.handleEvent(e)}),n[li])}function Kt(){Ji.call(this),this.i=new _i(this),this.S=this,this.J=null}function hr(n,e){var t,s=n.J;if(s)for(t=[];s;s=s.J)t.push(s);if(n=n.S,s=e.type||e,"string"==typeof e)e=new _n(e,n);else if(e instanceof _n)e.target=e.target||n;else{var a=e;ba(e=new _n(s,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=_s(h,s,!0,e)&&a}if(a=_s(h=e.g=n,s,!0,e)&&a,a=_s(h,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=_s(h=e.g=t[c],s,!1,e)&&a}function _s(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.fa&&h.capture==t){var v=h.listener,b=h.la||h.src;h.ia&&jt(n.i,h),a=!1!==v.call(b,s)&&a}}return a&&!s.defaultPrevented}Xn(Kt,Ji),Kt.prototype[ln]=!0,Kt.prototype.removeEventListener=function(n,e,t,s){ir(this,n,e,t,s)},Kt.prototype.N=function(){if(Kt.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)$r(t[s]);delete n.g[e],n.h--}}this.J=null},Kt.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},Kt.prototype.P=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var Ra=Ut.JSON.stringify;function Xc(){var n=_u;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Do=new class ns{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mu,n=>n.reset());class mu{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function rd(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Ko(n){Ut.setTimeout(()=>{throw n},0)}let An,Qo=!1,_u=new class nc{constructor(){this.h=this.g=null}add(e,t){const s=Do.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},Ao=()=>{const n=Ut.Promise.resolve(void 0);An=()=>{n.then(Co)}};var Co=()=>{for(var n;n=Xc();){try{n.h.call(n.g)}catch(t){Ko(t)}var e=Do;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Qo=!1};function Pa(n,e){Kt.call(this),this.h=n||1,this.g=e||Ut,this.j=Mr(this.qb,this),this.l=Date.now()}function rc(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function yu(n,e,t){if("function"==typeof n)t&&(n=Mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function Ma(n){n.g=yu(()=>{n.g=null,n.i&&(n.i=!1,Ma(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Xn(Pa,Kt),(st=Pa.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hr(this,"tick"),this.ga&&(rc(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){Pa.$.N.call(this),rc(this),delete this.g};class vu extends Ji{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ma(this)}N(){super.N(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function So(n){Ji.call(this),this.h=n,this.g={}}Xn(So,Ji);var el=[];function Eu(n,e,t,s){Array.isArray(t)||(t&&(el[0]=t.toString()),t=el);for(var a=0;a<t.length;a++){var c=ui(e,t[a],s||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function ji(n){Xi(n.g,function(e,t){this.g.hasOwnProperty(t)&&Jc(e)},n),n.g={}}function ys(){this.g=!0}function Ns(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function xa(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return Ra(t)}catch{return e}}(n,t)+(s?" "+s:"")})}So.prototype.N=function(){So.$.N.call(this),ji(this)},So.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ys.prototype.Ea=function(){this.g=!1},ys.prototype.info=function(){};var Ri={},ic=null;function Yo(){return ic=ic||new Kt}function di(n){_n.call(this,Ri.Ta,n)}function $i(n){const e=Yo();hr(e,new di(e))}function ar(n,e){_n.call(this,Ri.STAT_EVENT,n),this.stat=e}function xr(n){const e=Yo();hr(e,new ar(e,n))}function bo(n,e){_n.call(this,Ri.Ua,n),this.size=e}function Ys(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}Ri.Ta="serverreachability",Xn(di,_n),Ri.STAT_EVENT="statevent",Xn(ar,_n),Ri.Ua="timingevent",Xn(bo,_n);var Pi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Jo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Na(){}function Xo(){}Na.prototype.h=null;var ta,Os={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ea(){_n.call(this,"d")}function ks(){_n.call(this,"c")}function Iu(){}function wu(n,e,t,s){this.l=n,this.j=e,this.m=t,this.W=s||1,this.U=new So(this),this.P=tl,this.V=new Pa(n=At?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Tu}function Tu(){this.i=null,this.g="",this.h=!1}Xn(ea,_n),Xn(ks,_n),Xn(Iu,Na),Iu.prototype.g=function(){return new XMLHttpRequest},Iu.prototype.i=function(){return{}},ta=new Iu;var tl=45e3,Oa={},ka={};function Fa(n,e,t){n.L=1,n.A=Xr($t(e)),n.u=t,n.S=!0,La(n,null)}function La(n,e){n.G=Date.now(),F(n),n.B=$t(n.A);var t=n.B,s=n.W;Array.isArray(s)||(s=[String(s)]),jh(t.i,"t",s),n.o=0,t=n.l.J,n.h=new Tu,n.g=_t(n.l,t?e:null,!n.u),0<n.O&&(n.M=new vu(Mr(n.Pa,n,n.g),n.O)),Eu(n.U,n.g,"readystatechange",n.nb),e=n.I?ai(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),$i(),function vs(n,e,t,s,a,c){n.info(function(){if(n.g)if(c)for(var h="",v=c.split("&"),b=0;b<v.length;b++){var P=v[b].split("=");if(1<P.length){var k=P[0];P=P[1];var W=k.split("_");h=2<=W.length&&"type"==W[1]?h+(k+"=")+P+"&":h+(k+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.v,n.B,n.m,n.W,n.u)}function nl(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function Js(n,e,t){let a,s=!0;for(;!n.J&&n.o<t.length;){if(a=T(n,t),a==ka){4==e&&(n.s=4,xr(14),s=!1),Ns(n.j,n.m,null,"[Incomplete Response]");break}if(a==Oa){n.s=4,xr(15),Ns(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}Ns(n.j,n.m,a,null),Re(n,a)}nl(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,xr(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),A(e),e.M=!0,xr(11))):(Ns(n.j,n.m,t,"[Invalid Chunked Response]"),de(n),Z(n))}function T(n,e){var t=n.o,s=e.indexOf("\n",t);return-1==s?ka:(t=Number(e.substring(t,s)),isNaN(t)?Oa:(s+=1)+t>e.length?ka:(e=e.slice(s,s+t),n.o=s+t,e))}function F(n){n.Y=Date.now()+n.P,R(n,n.P)}function R(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=Ys(Mr(n.lb,n),e)}function O(n){n.C&&(Ut.clearTimeout(n.C),n.C=null)}function Z(n){0==n.l.H||n.J||N(n.l,n)}function de(n){O(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,rc(n.V),ji(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Re(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Le(t.i,n)))if(!n.K&&Le(t.i,n)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;C(t),aa(t)}E(t),xr(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Ys(Mr(t.ib,t),6e3));if(1>=ad(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else z(t,11)}else if((n.K||t.g==n)&&C(t),!_r(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let P=a[e];if(t.V=P[0],P=P[1],2==t.H)if("c"==P[0]){t.K=P[1],t.pa=P[2];const k=P[3];null!=k&&(t.ra=k,t.l.info("VER="+t.ra));const W=P[4];null!=W&&(t.Ga=W,t.l.info("SVER="+t.Ga));const J=P[5];null!=J&&"number"==typeof J&&0<J&&(t.L=s=1.5*J,t.l.info("backChannelRequestTimeoutMs_="+s)),s=t;const ae=n.g;if(ae){const xe=ae.g?ae.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xe){var c=s.i;c.g||-1==xe.indexOf("spdy")&&-1==xe.indexOf("quic")&&-1==xe.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(mn(c,c.h),c.h=null))}if(s.F){const Qe=ae.g?ae.g.getResponseHeader("X-HTTP-Session-Id"):null;Qe&&(s.Da=Qe,gn(s.I,s.F,Qe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var h=n;if((s=t).wa=Ue(s,s.J?s.pa:null,s.Y),h.K){ac(s.i,h);var v=h,b=s.L;b&&v.setTimeout(b),v.C&&(O(v),F(v)),s.g=h}else Ga(s);0<t.j.length&&Nr(t)}else"stop"!=P[0]&&"close"!=P[0]||z(t,7);else 3==t.H&&("stop"==P[0]||"close"==P[0]?"stop"==P[0]?z(t,7):za(t):"noop"!=P[0]&&t.h&&t.h.Aa(P),t.A=0)}$i()}catch{}}function xn(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ps(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function bt(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ps(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const s in n)e[t++]=s;return e}}}(n),s=function mt(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ps(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n),a=s.length,c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],n)}(st=wu.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==Fs(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const k=Fs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>k)&&(3!=k||At||this.g&&(this.h.h||this.g.ja()||$a(this.g)))){this.J||4!=k||7==e||$i(),O(this);var t=this.g.da();this.ca=t;t:if(nl(this)){var s=$a(this.g);n="";var a=s.length,c=4==Fs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){de(this),Z(this);var h="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:c&&e==a-1});s.length=0,this.h.g+=n,this.o=0,h=this.h.g}else h=this.g.ja();if(this.i=200==t,function Qs(n,e,t,s,a,c,h){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.v,this.B,this.m,this.W,k,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var v,b=this.g;if((v=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_r(v)){var P=v;break t}}P=null}if(!(t=P)){this.i=!1,this.s=3,xr(12),de(this),Z(this);break e}Ns(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Re(this,t)}this.S?(Js(this,k,h),At&&this.i&&3==k&&(Eu(this.U,this.V,"tick",this.mb),this.V.start())):(Ns(this.j,this.m,h,null),Re(this,h)),4==k&&de(this),this.i&&!this.J&&(4==k?N(this.l,this):(this.i=!1,F(this)))}else(function hc(n){const e={};n=(n.g&&2<=Fs(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<n.length;s++){if(_r(n[s]))continue;var t=rd(n[s]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[a]||[];e[a]=c,c.push(t)}!function tc(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(s){return s.join(", ")})})(this.g),400==t&&0<h.indexOf("Unknown SID")?(this.s=3,xr(12)):(this.s=0,xr(13)),de(this),Z(this)}}}catch{}},st.mb=function(){if(this.g){var n=Fs(this.g),e=this.g.ja();this.o<e.length&&(O(this),Js(this,n,e),this.i&&4!=n&&F(this))}},st.cancel=function(){this.J=!0,de(this)},st.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function id(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&($i(),xr(17)),de(this),this.s=2,Z(this)):R(this,this.Y-n)};var dn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cn(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Cn){this.h=n.h,Sn(this,n.j),this.s=n.s,this.g=n.g,er(this,n.m),this.l=n.l;var e=n.i,t=new Xs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Hi(this,t),this.o=n.o}else n&&(e=String(n).match(dn))?(this.h=!1,Sn(this,e[1]||"",!0),this.s=vr(e[2]||""),this.g=vr(e[3]||"",!0),er(this,e[4]),this.l=vr(e[5]||"",!0),Hi(this,e[6]||"",!0),this.o=vr(e[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}function $t(n){return new Cn(n)}function Sn(n,e,t){n.j=t?vr(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function er(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Hi(n,e,t){e instanceof Xs?(n.i=e,function sr(n,e){e&&!n.j&&(ra(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Uh(this,s),jh(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=zi(e,Vh)),n.i=new Xs(e,n.h))}function gn(n,e,t){n.i.set(e,t)}function Xr(n){return gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function vr(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function zi(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,na),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function na(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Cn.prototype.toString=function(){var n=[],e=this.j;e&&n.push(zi(e,sd,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(zi(e,sd,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(zi(t,"/"==t.charAt(0)?Du:oc,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",zi(t,Ht)),n.join("")};var sd=/[#\/\?@]/g,oc=/[#\?:]/g,Du=/[#\?]/g,Vh=/[#\?@]/g,Ht=/#/g;function Xs(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ra(n){n.g||(n.g=new Map,n.h=0,n.i&&function St(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var c=n[t].substring(0,s);a=n[t].substring(s+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Uh(n,e){ra(n),e=eo(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Bh(n,e){return ra(n),e=eo(n,e),n.g.has(e)}function jh(n,e,t){Uh(n,e),0<t.length&&(n.i=null,n.g.set(eo(n,e),nn(t)),n.h+=t.length)}function eo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Au(n){this.l=n||$h,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ka&&Ut.g.Ka()&&Ut.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=Xs.prototype).add=function(n,e){ra(this),this.i=null,n=eo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){ra(this),this.g.forEach(function(t,s){t.forEach(function(a){n.call(e,a,s,this)},this)},this)},st.ta=function(){ra(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=n[s];for(let c=0;c<a.length;c++)t.push(e[s])}return t},st.Z=function(n){ra(this);let e=[];if("string"==typeof n)Bh(this,n)&&(e=e.concat(this.g.get(eo(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return ra(this),this.i=null,Bh(this,n=eo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const c=encodeURIComponent(String(s)),h=this.Z(s);for(s=0;s<h.length;s++){var a=c;""!==h[s]&&(a+="="+encodeURIComponent(String(h[s]))),n.push(a)}}return this.i=n.join("&")};var $h=10;function od(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ad(n){return n.h?1:n.g?n.g.size:0}function Le(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function mn(n,e){n.g?n.g.add(e):n.h=e}function ac(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Va(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return nn(n.i)}Au.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Hr=class{stringify(n){return Ut.JSON.stringify(n,void 0)}parse(n){return Ut.JSON.parse(n,void 0)}};function uc(){this.g=new Hr}function ia(n,e,t){const s=t||"";try{xn(n,function(a,c){let h=a;Qr(a)&&(h=Ra(a)),e.push(s+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Ua(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function Ba(n){this.l=n.ec||null,this.j=n.ob||!1}function ud(n,e){Kt.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=cc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xn(Ba,Na),Ba.prototype.g=function(){return new ud(this.l,this.j)},Ba.prototype.i=function(n){return function(){return n}}({}),Xn(ud,Kt);var cc=0;function il(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function $n(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yi(n)}function yi(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=ud.prototype).open=function(n,e){if(this.readyState!=cc)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yi(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ut).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$n(this)),this.readyState=cc},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yi(this)),this.g&&(this.readyState=3,yi(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;il(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?$n(this):yi(this),3==this.readyState&&il(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,$n(this))},st.Ya=function(n){this.g&&(this.response=n,$n(this))},st.ka=function(){this.g&&$n(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ud.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var cd=Ut.JSON.parse;function bn(n){Kt.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=to,this.L=this.M=!1}Xn(bn,Kt);var to="",Er=/^https?$/i,ld=["POST","PUT"];function Hh(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Cu(n),dc(n)}function Cu(n){n.F||(n.F=!0,hr(n,"complete"),hr(n,"error"))}function lc(n){if(n.h&&typeof fs<"u"&&(!n.C[1]||4!=Fs(n)||2!=n.da()))if(n.v&&4==Fs(n))yu(n.La,0,n);else if(hr(n,"readystatechange"),4==Fs(n)){n.h=!1;try{const h=n.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===h){var a=String(n.I).match(dn)[1]||null;!a&&Ut.self&&Ut.self.location&&(a=Ut.self.location.protocol.slice(0,-1)),s=!Er.test(a?a.toLowerCase():"")}t=s}if(t)hr(n,"complete"),hr(n,"success");else{n.m=6;try{var c=2<Fs(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.da()+"]",Cu(n)}}finally{dc(n)}}}function dc(n,e){if(n.g){ja(n);const t=n.g,s=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||hr(n,"ready");try{t.onreadystatechange=s}catch{}}}function ja(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Fs(n){return n.g?n.g.readyState:0}function $a(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case to:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function sa(n){let e="";return Xi(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function oa(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=sa(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):gn(n,e,t))}function Ha(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Su(n){this.Ga=0,this.j=[],this.l=new ys,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ha("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ha("baseRetryDelayMs",5e3,n),this.hb=Ha("retryDelaySeedMs",1e4,n),this.eb=Ha("forwardChannelMaxRetries",2,n),this.xa=Ha("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Au(n&&n.concurrentRequestLimit),this.Ja=new uc,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function za(n){if(hd(n),3==n.H){var e=n.W++,t=$t(n.I);if(gn(t,"SID",n.K),gn(t,"RID",e),gn(t,"TYPE","terminate"),fc(n,t),(e=new wu(n,n.l,e)).L=2,e.A=Xr($t(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon)try{t=Ut.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&Ut.Image&&((new Image).src=e.A,t=!0),t||(e.g=_t(e.l,null),e.g.ha(e.A)),e.G=Date.now(),F(e)}re(n)}function aa(n){n.g&&(A(n),n.g.cancel(),n.g=null)}function hd(n){aa(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),C(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function Nr(n){if(!od(n.i)&&!n.m){n.m=!0;var e=n.Na;An||Ao(),Qo||(An(),Qo=!0),_u.add(e,n),n.C=0}}function ur(n,e){var t;t=e?e.m:n.W++;const s=$t(n.I);gn(s,"SID",n.K),gn(s,"RID",t),gn(s,"AID",n.V),fc(n,s),n.o&&n.s&&oa(s,n.o,n.s),t=new wu(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=mp(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),mn(n.i,t),Fa(t,s,e)}function fc(n,e){n.na&&Xi(n.na,function(t,s){gn(e,s,t)}),n.h&&xn({},function(t,s){gn(e,s,t)})}function mp(n,e,t){t=Math.min(n.j.length,t);var s=n.h?Mr(n.h.Va,n.h,n):null;e:{var a=n.j;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].g,h.push("ofs="+c)):c=0:h.push("ofs="+c);let v=!0;for(let b=0;b<t;b++){let P=a[b].g;const k=a[b].map;if(P-=c,0>P)c=Math.max(0,a[b].g-100),v=!1;else try{ia(k,h,"req"+P+"_")}catch{s&&s(k)}}if(v){s=h.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,s}function Ga(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;An||Ao(),Qo||(An(),Qo=!0),_u.add(e,n),n.A=0}}function E(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Ys(Mr(n.Ma,n),G(n,n.A)),n.A++,0))}function A(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function _(n){n.g=new wu(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=$t(n.wa);gn(e,"RID","rpc"),gn(e,"SID",n.K),gn(e,"AID",n.V),gn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&gn(e,"TO",n.qa),gn(e,"TYPE","xmlhttp"),fc(n,e),n.o&&n.s&&oa(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Xr($t(e)),t.u=null,t.S=!0,La(t,n)}function C(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function N(n,e){var t=null;if(n.g==e){C(n),A(n),n.g=null;var s=2}else{if(!Le(n.i,e))return;t=e.F,ac(n.i,e),s=1}if(0!=n.H)if(e.i)if(1==s){t=e.u?e.u.length:0,e=Date.now()-e.G;var a=n.C;hr(s=Yo(),new bo(s,t)),Nr(n)}else Ga(n);else if(3==(a=e.s)||0==a&&0<e.ca||!(1==s&&function ua(n,e){return!(ad(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Ys(Mr(n.Na,n,e),G(n,n.C)),n.C++,0)))}(n,e)||2==s&&E(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:z(n,5);break;case 4:z(n,10);break;case 3:z(n,6);break;default:z(n,2)}}function G(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function z(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var s=Mr(n.pb,n);t||(t=new Cn("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Sn(t,"https"),Xr(t)),function zr(n,e){const t=new ys;if(Ut.Image){const s=new Image;s.onload=vo(Ua,t,s,"TestLoadImage: loaded",!0,e),s.onerror=vo(Ua,t,s,"TestLoadImage: error",!1,e),s.onabort=vo(Ua,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=vo(Ua,t,s,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else xr(2);n.H=0,n.h&&n.h.za(e),re(n),hd(n)}function re(n){if(n.H=0,n.ma=[],n.h){const e=Va(n.i);(0!=e.length||0!=n.j.length)&&(Dr(n.ma,e),Dr(n.ma,n.j),n.i.i.length=0,nn(n.j),n.j.length=0),n.h.ya()}}function Ue(n,e,t){var s=t instanceof Cn?$t(t):new Cn(t);if(""!=s.g)e&&(s.g=e+"."+s.g),er(s,s.m);else{var a=Ut.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Cn(null);s&&Sn(c,s),e&&(c.g=e),a&&er(c,a),t&&(c.l=t),s=c}return e=n.Da,(t=n.F)&&e&&gn(s,t,e),gn(s,"VER",n.ra),fc(n,s),s}function _t(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new bn(n.Ha&&!n.va?new Ba({ob:t}):n.va)).Oa(n.J),e}function Tt(){}function wn(){if(In&&!(10<=Number(Yr)))throw Error("Environmental error: no available transport.")}function tr(n,e){Kt.call(this),this.g=new Su(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_r(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_r(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Es(this)}function no(n){ea.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ls(){ks.call(this),this.status=1}function Es(n){this.g=n}function hi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function _p(n,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=n.g[3],h=(e=n.g[0])+(c^(t=n.g[1])&((a=n.g[2])^c))+s[0]+3614090360&4294967295;h=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(h<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+s[3]+3250441966&4294967295)<<22&4294967295|h>>>10))+((h=e+(c^t&(a^c))+s[4]+4118548399&4294967295)<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+s[7]+4249261313&4294967295)<<22&4294967295|h>>>10))+((h=e+(c^t&(a^c))+s[8]+1770035416&4294967295)<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+s[11]+2304563134&4294967295)<<22&4294967295|h>>>10))+((h=e+(c^t&(a^c))+s[12]+1804603682&4294967295)<<7&4294967295|h>>>25))+((h=c+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|h>>>20))+((h=a+(t^c&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|h>>>15))+((h=t+(e^a&(c^e))+s[15]+1236535329&4294967295)<<22&4294967295|h>>>10))+((h=e+(a^c&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+s[11]+643717713&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+s[0]+3921069994&4294967295)<<20&4294967295|h>>>12))+((h=e+(a^c&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+s[15]+3634488961&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+s[4]+3889429448&4294967295)<<20&4294967295|h>>>12))+((h=e+(a^c&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+s[3]+4107603335&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+s[8]+1163531501&4294967295)<<20&4294967295|h>>>12))+((h=e+(a^c&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|h>>>27))+((h=c+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|h>>>23))+((h=a+(e^t&(c^e))+s[7]+1735328473&4294967295)<<14&4294967295|h>>>18))+((h=t+(c^e&(a^c))+s[12]+2368359562&4294967295)<<20&4294967295|h>>>12))+((h=e+(t^a^c)+s[5]+4294588738&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+s[14]+4259657740&4294967295)<<23&4294967295|h>>>9))+((h=e+(t^a^c)+s[1]+2763975236&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+s[10]+3200236656&4294967295)<<23&4294967295|h>>>9))+((h=e+(t^a^c)+s[13]+681279174&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+s[6]+76029189&4294967295)<<23&4294967295|h>>>9))+((h=e+(t^a^c)+s[9]+3654602809&4294967295)<<4&4294967295|h>>>28))+((h=c+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|h>>>21))+((h=a+(c^e^t)+s[15]+530742520&4294967295)<<16&4294967295|h>>>16))+((h=t+(a^c^e)+s[2]+3299628645&4294967295)<<23&4294967295|h>>>9))+((h=e+(a^(t|~c))+s[0]+4096336452&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|h>>>22))+((h=a+(e^(c|~t))+s[14]+2878612391&4294967295)<<15&4294967295|h>>>17))+((h=t+(c^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|h>>>11))+((h=e+(a^(t|~c))+s[12]+1700485571&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|h>>>22))+((h=a+(e^(c|~t))+s[10]+4293915773&4294967295)<<15&4294967295|h>>>17))+((h=t+(c^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|h>>>11))+((h=e+(a^(t|~c))+s[8]+1873313359&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|h>>>22))+((h=a+(e^(c|~t))+s[6]+2734768916&4294967295)<<15&4294967295|h>>>17))+((h=t+(c^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|h>>>11))+((c=(e=t+((h=e+(a^(t|~c))+s[4]+4149444226&4294967295)<<6&4294967295|h>>>26))+((h=c+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|h>>>22))^((a=c+((h=a+(e^(c|~t))+s[2]+718787259&4294967295)<<15&4294967295|h>>>17))|~e))+s[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(a+(h<<21&4294967295|h>>>11))&4294967295,n.g[2]=n.g[2]+a&4294967295,n.g[3]=n.g[3]+c&4294967295}function Fn(n,e){this.h=e;for(var t=[],s=!0,a=n.length-1;0<=a;a--){var c=0|n[a];s&&c==e||(t[a]=c,s=!1)}this.g=t}(st=bn.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ta.g(),this.C=function sc(n){return n.h||(n.h=n.i())}(this.u?this.u:ta),this.g.onreadystatechange=Mr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(c){return void Hh(this,c)}if(n=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const c of s.keys())t.set(c,s.get(c))}s=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=Ut.FormData&&n instanceof Ut.FormData,!(0<=pu(ld,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,h]of t)this.g.setRequestHeader(c,h);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ja(this),0<this.B&&((this.L=function dd(n){return In&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.ua,this)):this.A=yu(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){Hh(this,c)}},st.ua=function(){typeof fs<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hr(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,hr(this,"complete"),hr(this,"abort"),dc(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dc(this,!0)),bn.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?lc(this):this.kb())},st.kb=function(){lc(this)},st.isActive=function(){return!!this.g},st.da=function(){try{return 2<Fs(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),cd(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=Su.prototype).ra=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const a=new wu(this,this.l,n);let c=this.s;if(this.U&&(c?(c=ai(c),ba(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var s=this.j[t];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mp(this,a,e),gn(t=$t(this.I),"RID",n),gn(t,"CVER",22),this.F&&gn(t,"X-HTTP-Session-Id",this.F),fc(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(sa(c)))+"&"+e:this.o&&oa(t,this.o,c)),mn(this.i,a),this.bb&&gn(t,"TYPE","init"),this.P?(gn(t,"$req",e),gn(t,"SID","null"),a.aa=!0,Fa(a,t,null)):Fa(a,t,e),this.H=2}}else 3==this.H&&(n?ur(this,n):0==this.j.length||od(this.i)||ur(this))},st.Ma=function(){if(this.u=null,_(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Ys(Mr(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xr(10),aa(this),_(this))},st.ib=function(){null!=this.v&&(this.v=null,aa(this),E(this),xr(19))},st.pb=function(n){n?(this.l.info("Successfully pinged google.com"),xr(2)):(this.l.info("Failed to ping google.com"),xr(1))},st.isActive=function(){return!!this.h&&this.h.isActive(this)},(st=Tt.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.isActive=function(){return!0},st.Va=function(){},wn.prototype.g=function(n,e){return new tr(n,e)},Xn(tr,Kt),tr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;xr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Ue(n,null,n.Y),Nr(n)},tr.prototype.close=function(){za(this.g)},tr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Ra(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Nr(e)},tr.prototype.N=function(){this.g.h=null,delete this.j,za(this.g),delete this.g,tr.$.N.call(this)},Xn(no,ea),Xn(Ls,ks),Xn(Es,Tt),Es.prototype.Ba=function(){hr(this.g,"a")},Es.prototype.Aa=function(n){hr(this.g,new no(n))},Es.prototype.za=function(n){hr(this.g,new Ls)},Es.prototype.ya=function(){hr(this.g,"b")},Xn(hi,function fd(){this.blockSize=-1}),hi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},hi.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,s=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)_p(this,n,c),c+=this.blockSize;if("string"==typeof n){for(;c<e;)if(s[a++]=n.charCodeAt(c++),a==this.blockSize){_p(this,s),a=0;break}}else for(;c<e;)if(s[a++]=n[c++],a==this.blockSize){_p(this,s),a=0;break}}this.h=a,this.i+=e},hi.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)n[t++]=this.g[e]>>>s&255;return n};var Em={};function pd(n){return-128<=n&&128>n?function Ws(n,e){var t=Em;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Fn([0|e],0>e?-1:0)}):new Fn([0|n],0>n?-1:0)}function ca(n){if(isNaN(n)||!isFinite(n))return Wa;if(0>n)return Ar(ca(-n));for(var e=[],t=1,s=0;n>=t;s++)e[s]=n/t|0,t*=bu;return new Fn(e,0)}var bu=4294967296,Wa=pd(0),Ro=pd(1),gc=pd(16777216);function Vs(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Is(n){return-1==n.h}function Ar(n){for(var e=n.g.length,t=[],s=0;s<e;s++)t[s]=~n.g[s];return new Fn(t,~n.h).add(Ro)}function ro(n,e){return n.add(Ar(e))}function mc(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function rs(n,e){this.g=n,this.h=e}function gd(n,e){if(Vs(e))throw Error("division by zero");if(Vs(n))return new rs(Wa,Wa);if(Is(n))return e=gd(Ar(n),e),new rs(Ar(e.g),Ar(e.h));if(Is(e))return e=gd(n,Ar(e)),new rs(Ar(e.g),e.h);if(30<n.g.length){if(Is(n)||Is(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Ro,s=e;0>=s.X(n);)t=sl(t),s=sl(s);var a=Po(t,1),c=Po(s,1);for(s=Po(s,2),t=Po(t,2);!Vs(s);){var h=c.add(s);0>=h.X(n)&&(a=a.add(t),c=h),s=Po(s,1),t=Po(t,1)}return e=ro(n,a.R(e)),new rs(a,e)}for(a=Wa;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),h=(c=ca(t)).R(e);Is(h)||0<h.X(n);)h=(c=ca(t-=s)).R(e);Vs(c)&&(c=Ro),a=a.add(c),n=ro(n,h)}return new rs(a,n)}function sl(n){for(var e=n.g.length+1,t=[],s=0;s<e;s++)t[s]=n.D(s)<<1|n.D(s-1)>>>31;return new Fn(t,n.h)}function Po(n,e){var t=e>>5;e%=32;for(var s=n.g.length-t,a=[],c=0;c<s;c++)a[c]=0<e?n.D(c+t)>>>e|n.D(c+t+1)<<32-e:n.D(c+t);return new Fn(a,n.h)}(st=Fn.prototype).ea=function(){if(Is(this))return-Ar(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);n+=(0<=s?s:bu+s)*e,e*=bu}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Vs(this))return"0";if(Is(this))return"-"+Ar(this).toString(n);for(var e=ca(Math.pow(n,6)),t=this,s="";;){var a=gd(t,e).g,c=((0<(t=ro(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Vs(t=a))return c+s;for(;6>c.length;)c="0"+c;s=c+s}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return Is(n=ro(this,n))?-1:Vs(n)?0:1},st.abs=function(){return Is(this)?Ar(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],s=0,a=0;a<=e;a++){var c=s+(65535&this.D(a))+(65535&n.D(a)),h=(c>>>16)+(this.D(a)>>>16)+(n.D(a)>>>16);s=h>>>16,t[a]=(h&=65535)<<16|(c&=65535)}return new Fn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(Vs(this)||Vs(n))return Wa;if(Is(this))return Is(n)?Ar(this).R(Ar(n)):Ar(Ar(this).R(n));if(Is(n))return Ar(this.R(Ar(n)));if(0>this.X(gc)&&0>n.X(gc))return ca(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<n.g.length;a++){var c=this.D(s)>>>16,h=65535&this.D(s),v=n.D(a)>>>16,b=65535&n.D(a);t[2*s+2*a]+=h*b,mc(t,2*s+2*a),t[2*s+2*a+1]+=c*b,mc(t,2*s+2*a+1),t[2*s+2*a+1]+=h*v,mc(t,2*s+2*a+1),t[2*s+2*a+2]+=c*v,mc(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Fn(t,0)},st.gb=function(n){return gd(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&n.D(s);return new Fn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|n.D(s);return new Fn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^n.D(s);return new Fn(t,this.h^n.h)},wn.prototype.createWebChannel=wn.prototype.g,tr.prototype.send=tr.prototype.u,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,Jo.COMPLETE="complete",Xo.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",Kt.prototype.listen=Kt.prototype.O,bn.prototype.listenOnce=bn.prototype.P,bn.prototype.getLastError=bn.prototype.Sa,bn.prototype.getLastErrorCode=bn.prototype.Ia,bn.prototype.getStatus=bn.prototype.da,bn.prototype.getResponseJson=bn.prototype.Wa,bn.prototype.getResponseText=bn.prototype.ja,bn.prototype.send=bn.prototype.ha,bn.prototype.setWithCredentials=bn.prototype.Oa,hi.prototype.digest=hi.prototype.l,hi.prototype.reset=hi.prototype.reset,hi.prototype.update=hi.prototype.j,Fn.prototype.add=Fn.prototype.add,Fn.prototype.multiply=Fn.prototype.R,Fn.prototype.modulo=Fn.prototype.gb,Fn.prototype.compare=Fn.prototype.X,Fn.prototype.toNumber=Fn.prototype.ea,Fn.prototype.toString=Fn.prototype.toString,Fn.prototype.getBits=Fn.prototype.D,Fn.fromNumber=ca,Fn.fromString=function pc(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ar(pc(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ca(Math.pow(e,8)),s=Wa,a=0;a<n.length;a+=8){var c=Math.min(8,n.length-a),h=parseInt(n.substring(a,a+c),e);8>c?(c=ca(Math.pow(e,c)),s=s.R(c).add(ca(h))):s=(s=s.R(t)).add(ca(h))}return s};var zh=oi.createWebChannelTransport=function(){return new wn},md=oi.getStatEventTarget=function(){return Yo()},ol=oi.ErrorCode=Pi,Gh=oi.EventType=Jo,yp=oi.Event=Ri,al=oi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ru=(oi.FetchXmlHttpFactory=Ba,oi.WebChannel=Xo),Wh=oi.XhrIo=bn,_d=oi.Md5=hi,Mi=oi.Integer=Fn;const vp="@firebase/firestore";class ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let la="10.7.2";const is=new Jn.Yd("@firebase/firestore");function qa(){return is.logLevel}function ze(n,...e){if(is.logLevel<=Jn.in.DEBUG){const t=e.map(qh);is.debug(`Firestore (${la}): ${n}`,...t)}}function Ir(n,...e){if(is.logLevel<=Jn.in.ERROR){const t=e.map(qh);is.error(`Firestore (${la}): ${n}`,...t)}}function vi(n,...e){if(is.logLevel<=Jn.in.WARN){const t=e.map(qh);is.warn(`Firestore (${la}): ${n}`,...t)}}function qh(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: `+n;throw Ir(e),new Error(e)}function vt(n,e){n||pt()}function et(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends on.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class da{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ev{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ei.UNAUTHENTICATED))}shutdown(){}}class Zh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Kh{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const c=P=>this.i!==a?(a=this.i,t(P)):Promise.resolve();let h=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Or,e.enqueueRetryable(()=>c(this.currentUser))};const v=()=>{const P=h;e.enqueueRetryable((0,Se.Z)(function*(){yield P.promise,yield c(s.currentUser)}))},b=P=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=P,this.auth.addAuthTokenListener(this.o),v()};this.t.onInit(P=>b(P)),setTimeout(()=>{if(!this.auth){const P=this.t.getImmediate({optional:!0});P?b(P):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Or)}},0),v()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(vt("string"==typeof s.accessToken),new da(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new ei(e)}}class Ep{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=ei.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wm{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new Ep(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Iv{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const s=c=>{null!=c.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.R;return this.R=c.token,ze("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),this.R=t.token,new Qh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Pu(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class Yh{static newId(){const t=62*Math.floor(256/62);let s="";for(;s.length<20;){const a=Pu(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(a[c]%62))}return s}}function Wt(n,e){return n<e?-1:n>e?1:0}function cr(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function yd(n){return n+"\0"}class Zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Be(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zn.fromMillis(Date.now())}static fromDate(e){return Zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Zn(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Zn(0,0))}static max(){return new Ct(new Zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xi{constructor(e,t,s){void 0===t?t=0:t>e.length&&pt(),void 0===s?s=e.length-t:s>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===xi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends xi{construct(e,t,s){return new Jt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Be(me.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const Ip=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends xi{construct(e,t,s){return new Kn(e,t,s)}static isValidIdentifier(e){return Ip.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kn(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(0===s.length)throw new Be(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;a<e.length;){const v=e[a];if("\\"===v){if(a+1===e.length)throw new Be(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[a+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new Be(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,a+=2}else"`"===v?(h=!h,a++):"."!==v||h?(s+=v,a++):(c(),a++)}if(c(),h)throw new Be(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(t)}static emptyPath(){return new Kn([])}}class nt{constructor(e){this.path=e}static fromPath(e){return new nt(Jt.fromString(e))}static fromName(e){return new nt(Jt.fromString(e).popFirst(5))}static empty(){return new nt(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new Jt(e.slice()))}}class yc{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function ul(n){return n.fields.find(e=>2===e.kind)}function Mu(n){return n.fields.filter(e=>2!==e.kind)}yc.UNKNOWN_ID=-1;class ti{constructor(e,t){this.fieldPath=e,this.kind=t}}class io{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new io(0,ws.min())}}function Tm(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Ct.fromTimestamp(1e9===s?new Zn(t+1,0):new Zn(t,s));return new ws(a,nt.empty(),e)}function Xh(n){return new ws(n.readTime,n.key,-1)}class ws{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ws(Ct.min(),nt.empty(),-1)}static max(){return new ws(Ct.max(),nt.empty(),-1)}}function cl(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=nt.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const wp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Za(n){return ef.apply(this,arguments)}function ef(){return ef=(0,Se.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==wp)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),ef.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,s)=>{t(e)})}static reject(e){return new he((t,s)=>{s(e)})}static waitFor(e){return new he((t,s)=>{let a=0,c=0,h=!1;e.forEach(v=>{++a,v.next(()=>{++c,h&&c===a&&t()},b=>s(b))}),h=!0,c===a&&t()})}static or(e){let t=he.resolve(!1);for(const s of e)t=t.next(a=>a?he.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new he((s,a)=>{const c=e.length,h=new Array(c);let v=0;for(let b=0;b<c;b++){const P=b;t(e[P]).next(k=>{h[P]=k,++v,v===c&&s(h)},k=>a(k))}})}static doWhile(e,t){return new he((s,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):s()};c()})}}class Ka{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Or,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ll(e,t.error)):this.V.resolve()},this.transaction.onerror=s=>{const a=Ec(s.target.error);this.V.reject(new ll(e,a))}}static open(e,t,s,a){try{return new Ka(t,e.transaction(a,s))}catch(c){throw new ll(t,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Dm(t)}}class Ts{constructor(e,t,s){this.name=e,this.version=t,this.p=s,12.2===Ts.S((0,on.z$)())&&Ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),Mo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,on.hl)())return!1;if(Ts.C())return!0;const e=(0,on.z$)(),t=Ts.S(e),s=0<t&&t<10,a=Ts.v(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,Se.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{s(h.target.result)},c.onblocked=()=>{a(new ll(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const v=h.target.error;a("VersionError"===v.name?new Be(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===v.name?new Be(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+v):new ll(e,v))},c.onupgradeneeded=h=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.p.N(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var c=this;return(0,Se.Z)(function*(){const h="readonly"===t;let v=0;for(;;){++v;try{c.db=yield c.O(e);const b=Ka.open(c.db,e,h?"readonly":"readwrite",s),P=a(b).next(k=>(b.g(),k)).catch(k=>(b.abort(k),he.reject(k))).toPromise();return P.catch(()=>{}),yield b.m,P}catch(b){const P=b,k="FirebaseError"!==P.name&&v<3;if(ze("SimpleDb","Transaction failed with error:",P.message,"Retrying:",k),c.close(),!k)return Promise.reject(P)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class vd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Mo(this.k.delete())}}class ll extends Be{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function so(n){return"IndexedDbTransactionError"===n.name}class Dm{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Mo(s)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),Mo(this.store.add(e))}get(e){return Mo(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),Mo(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),Mo(this.store.count())}W(e,t){const s=this.options(e,t),a=s.index?this.store.index(s.index):this.store;if("function"==typeof a.getAll){const c=a.getAll(s.range);return new he((h,v)=>{c.onerror=b=>{v(b.target.error)},c.onsuccess=b=>{h(b.target.result)}})}{const c=this.cursor(s),h=[];return this.G(c,(v,b)=>{h.push(b)}).next(()=>h)}}j(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new he((a,c)=>{s.onerror=h=>{c(h.target.error)},s.onsuccess=h=>{a(h.target.result)}})}H(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.J=!1;const a=this.cursor(s);return this.G(a,(c,h,v)=>v.delete())}Y(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.G(a,t)}Z(e){const t=this.cursor({});return new he((s,a)=>{t.onerror=c=>{const h=Ec(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(v=>{v?h.continue():s()}):s()}})}G(e,t){const s=[];return new he((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const v=h.target.result;if(!v)return void a();const b=new vd(v),P=t(v.primaryKey,v.value,b);if(P instanceof he){const k=P.catch(W=>(b.done(),he.reject(W)));s.push(k)}b.isDone?a():null===b.$?v.continue():v.continue(b.$)}}).next(()=>he.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.J?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Mo(n){return new he((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=Ec(s.target.error);t(a)}})}let vc=!1;function Ec(n){const e=Ts.S((0,on.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vc||(vc=!0,setTimeout(()=>{throw s},0)),s}}return n}class Ed{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;ze("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Se.Z)(function*(){t.task=null;try{ze("IndexBackfiller",`Documents written: ${yield t.X.te()}`)}catch(s){so(s)?ze("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield Za(s)}yield t.ee(6e4)}))}}class Am{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,Se.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.ne(s,e))})()}ne(e,t){const s=new Set;let a=t,c=!0;return he.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!s.has(h))return ze("IndexBackfiller",`Processing collection: ${h}`),this.re(e,h,a).next(v=>{a-=v,s.add(h)});c=!1})).next(()=>t-a)}re(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(c=>{const h=c.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ie(a,c)).next(v=>(ze("IndexBackfiller",`Updating offset: ${v}`),this.localStore.indexManager.updateCollectionGroup(e,t,v))).next(()=>h.size)}))}ie(e,t){let s=e;return t.changes.forEach((a,c)=>{const h=Xh(c);cl(h,s)>0&&(s=h)}),new ws(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ss=(()=>{class n{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.se(a),this.oe=a=>s.writeSequenceNumber(a))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function xo(n){return null==n}function oo(n){return 0===n&&1/n==-1/0}function Dp(n){return"number"==typeof n&&Number.isInteger(n)&&!oo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function os(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tf(e)),e=Id(n.get(t),e);return tf(e)}function Id(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function tf(n){return n+"\x01\x01"}function Us(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,s=[];let a="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&pt(),n.charAt(h+1)){case"\x01":const v=n.substring(c,h);let b;0===a.length?b=v:(a+=v,b=a,a=""),s.push(b);break;case"\x10":a+=n.substring(c,h),a+="\0";break;case"\x11":a+=n.substring(c,h+1);break;default:pt()}c=h+2}return new Jt(s)}const nf=["userId","batchId"];function dl(n,e){return[n,os(e)]}function Ap(n,e,t){return[n,os(e),t]}const wd={},Cp=["prefixPath","collectionGroup","readTime","documentId"],Cm=["prefixPath","collectionGroup","documentId"],Sp=["collectionGroup","readTime","prefixPath","documentId"],Sm=["canonicalId","targetId"],bp=["targetId","path"],Z0=["path","targetId"],xu=["collectionId","parent"],bm=["indexId","uid"],rf=["uid","sequenceNumber"],Rp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Dv=["indexId","uid","orderedDocumentKey"],hl=["userId","collectionPath","documentId"],Av=["userId","collectionPath","largestBatchId"],Cv=["userId","collectionGroup","largestBatchId"],sf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Sv=[...sf,"documentOverlays"],Rm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Td=Rm,Dd=[...Td,"indexConfiguration","indexState","indexEntries"];class Ic extends Tp{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function ni(n,e){const t=et(n);return Ts.M(t.ae,e)}function af(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ha(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Qa(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hn{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new Hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fl(this.root,e,this.comparator,!0)}}class fl{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gr{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??Gr.RED,this.left=a??Gr.EMPTY,this.right=c??Gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new Gr(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Gr.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1,Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(e,t,s,a,c){return this}insert(e,t,s){return new Gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nu(this.data.getIterator())}getIteratorFrom(e){return new Nu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class Nu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wc(n){return n.hasNext()?n.getNext():void 0}class as{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new as([])}unionWith(e){let t=new Rn(Kn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new as(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cr(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class pl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new pl("Invalid base64 string: "+c):c}}(e);return new kr(t)}static fromUint8Array(e){const t=function(a){let c="";for(let h=0;h<a.length;++h)c+=String.fromCharCode(a[h]);return c}(e);return new kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const Pm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(n){if(vt(!!n),"string"==typeof n){let e=0;const t=Pm.exec(n);if(vt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Cr(n.seconds),nanos:Cr(n.nanos)}}function Cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function No(n){return"string"==typeof n?kr.fromBase64String(n):kr.fromUint8Array(n)}function Ad(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Cd(n){const e=n.mapValue.fields.__previous_value__;return Ad(e)?Cd(e):e}function Sr(n){const e=fa(n.mapValue.fields.__local_write_time__.timestampValue);return new Zn(e.seconds,e.nanos)}class uf{constructor(e,t,s,a,c,h,v,b,P){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=v,this.longPollingOptions=b,this.useFetchStreams=P}}class Oo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}const ko={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ri={nullValue:"NULL_VALUE"};function Bs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ad(n)?4:Mp(n)?9007199254740991:10:pt()}function ao(n,e){if(n===e)return!0;const t=Bs(n);if(t!==Bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sr(n).isEqual(Sr(e));case 3:return function(a,c){if("string"==typeof a.timestampValue&&"string"==typeof c.timestampValue&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const h=fa(a.timestampValue),v=fa(c.timestampValue);return h.seconds===v.seconds&&h.nanos===v.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return c=e,No(n.bytesValue).isEqual(No(c.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,c){return Cr(a.geoPointValue.latitude)===Cr(c.geoPointValue.latitude)&&Cr(a.geoPointValue.longitude)===Cr(c.geoPointValue.longitude)}(n,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return Cr(a.integerValue)===Cr(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const h=Cr(a.doubleValue),v=Cr(c.doubleValue);return h===v?oo(h)===oo(v):isNaN(h)&&isNaN(v)}return!1}(n,e);case 9:return cr(n.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(a,c){const h=a.mapValue.fields||{},v=c.mapValue.fields||{};if(af(h)!==af(v))return!1;for(const b in h)if(h.hasOwnProperty(b)&&(void 0===v[b]||!ao(h[b],v[b])))return!1;return!0}(n,e);default:return pt()}var c}function Ou(n,e){return void 0!==(n.values||[]).find(t=>ao(t,e))}function Fo(n,e){if(n===e)return 0;const t=Bs(n),s=Bs(e);if(t!==s)return Wt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(c,h){const v=Cr(c.integerValue||c.doubleValue),b=Cr(h.integerValue||h.doubleValue);return v<b?-1:v>b?1:v===b?0:isNaN(v)?isNaN(b)?0:-1:1}(n,e);case 3:return gl(n.timestampValue,e.timestampValue);case 4:return gl(Sr(n),Sr(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(c,h){const v=No(c),b=No(h);return v.compareTo(b)}(n.bytesValue,e.bytesValue);case 7:return function(c,h){const v=c.split("/"),b=h.split("/");for(let P=0;P<v.length&&P<b.length;P++){const k=Wt(v[P],b[P]);if(0!==k)return k}return Wt(v.length,b.length)}(n.referenceValue,e.referenceValue);case 8:return function(c,h){const v=Wt(Cr(c.latitude),Cr(h.latitude));return 0!==v?v:Wt(Cr(c.longitude),Cr(h.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(c,h){const v=c.values||[],b=h.values||[];for(let P=0;P<v.length&&P<b.length;++P){const k=Fo(v[P],b[P]);if(k)return k}return Wt(v.length,b.length)}(n.arrayValue,e.arrayValue);case 10:return function(c,h){if(c===ko.mapValue&&h===ko.mapValue)return 0;if(c===ko.mapValue)return 1;if(h===ko.mapValue)return-1;const v=c.fields||{},b=Object.keys(v),P=h.fields||{},k=Object.keys(P);b.sort(),k.sort();for(let W=0;W<b.length&&W<k.length;++W){const J=Wt(b[W],k[W]);if(0!==J)return J;const ae=Fo(v[b[W]],P[k[W]]);if(0!==ae)return ae}return Wt(b.length,k.length)}(n.mapValue,e.mapValue);default:throw pt()}}function gl(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=fa(n),s=fa(e),a=Wt(t.seconds,s.seconds);return 0!==a?a:Wt(t.nanos,s.nanos)}function ku(n){return Sd(n)}function Sd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=fa(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?No(n.bytesValue).toBase64():"referenceValue"in n?nt.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=Sd(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const h of s)c?c=!1:a+=",",a+=`${h}:${Sd(t.fields[h])}`;return a+"}"}(n.mapValue):pt()}function Ya(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wi(n){return!!n&&"integerValue"in n}function pa(n){return!!n&&"arrayValue"in n}function ml(n){return!!n&&"nullValue"in n}function bd(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dc(n){return!!n&&"mapValue"in n}function uo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ha(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=uo(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Mp(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xp(n){return"nullValue"in n?ri:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ya(Oo.empty(),nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function Np(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ya(Oo.empty(),nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ko:pt()}function Lo(n,e){const t=Fo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Rd(n,e){const t=Fo(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class br{constructor(e){this.value=e}static empty(){return new br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Dc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uo(t)}setAll(e){let t=Kn.emptyPath(),s={},a=[];e.forEach((h,v)=>{if(!t.isImmediateParentOf(v)){const b=this.getFieldsMap(t);this.applyChanges(b,s,a),s={},a=[],t=v.popLast()}h?s[v.lastSegment()]=uo(h):a.push(v.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());Dc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Dc(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ha(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new br(uo(this.value))}}function _l(n){const e=[];return ha(n.fields,(t,s)=>{const a=new Kn([t]);if(Dc(s)){const c=_l(s.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new as(e)}class or{constructor(e,t,s,a,c,h,v){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=h,this.documentState=v}static newInvalidDocument(e){return new or(e,0,Ct.min(),Ct.min(),Ct.min(),br.empty(),0)}static newFoundDocument(e,t,s,a){return new or(e,1,t,Ct.min(),s,a,0)}static newNoDocument(e,t){return new or(e,2,t,Ct.min(),Ct.min(),br.empty(),0)}static newUnknownDocument(e,t){return new or(e,3,t,Ct.min(),Ct.min(),br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class co{constructor(e,t){this.position=e,this.inclusive=t}}function fi(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(s=c.field.isKeyField()?nt.comparator(nt.fromName(h.referenceValue),t.key):Fo(h,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return s}function Pd(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ao(n.position[t],e.position[t]))return!1;return!0}class Fu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mm(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Vo{}class un extends Vo{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new d(e,t,s):"array-contains"===t?new L(e,s):"in"===t?new Q(e,s):"not-in"===t?new ce(e,s):"array-contains-any"===t?new Me(e,s):new un(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new p(e,s):new y(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fo(t,this.value)):null!==t&&Bs(this.value)===Bs(t)&&this.matchesComparison(Fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends Vo{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Bn(e,t)}matches(e){return Ja(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ja(n){return"and"===n.op}function Ac(n){return"or"===n.op}function Lu(n){return Md(n)&&Ja(n)}function Md(n){for(const e of n.filters)if(e instanceof Bn)return!1;return!0}function cf(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+ku(n.value);if(Lu(n))return n.filters.map(e=>cf(e)).join(",");{const e=n.filters.map(t=>cf(t)).join(",");return`${n.op}(${e})`}}function Op(n,e){return n instanceof un?(s=n,(a=e)instanceof un&&s.op===a.op&&s.field.isEqual(a.field)&&ao(s.value,a.value)):n instanceof Bn?function(s,a){return a instanceof Bn&&s.op===a.op&&s.filters.length===a.filters.length&&s.filters.reduce((c,h,v)=>c&&Op(h,a.filters[v]),!0)}(n,e):void pt();var s,a}function xd(n,e){const t=n.filters.concat(e);return Bn.create(t,n.op)}function g(n){return n instanceof un?`${(t=n).field.canonicalString()} ${t.op} ${ku(t.value)}`:n instanceof Bn?function(t){return t.op.toString()+" {"+t.getFilters().map(g).join(" ,")+"}"}(n):"Filter";var t}class d extends un{constructor(e,t,s){super(e,t,s),this.key=nt.fromName(s.referenceValue)}matches(e){const t=nt.comparator(e.key,this.key);return this.matchesComparison(t)}}class p extends un{constructor(e,t){super(e,"in",t),this.keys=M(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class y extends un{constructor(e,t){super(e,"not-in",t),this.keys=M(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function M(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>nt.fromName(s.referenceValue))}class L extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pa(t)&&Ou(t.arrayValue,this.value)}}class Q extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ou(this.value.arrayValue,t)}}class ce extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ou(this.value.arrayValue,t)}}class Me extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ou(this.value.arrayValue,s))}}class at{constructor(e,t=null,s=[],a=[],c=null,h=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=h,this.endAt=v,this.ce=null}}function gt(n,e=null,t=[],s=[],a=null,c=null,h=null){return new at(n,e,t,s,a,c,h)}function ht(n){const e=et(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>cf(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),xo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ku(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ku(s)).join(",")),e.ce=t}return e.ce}function Qn(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Mm(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Op(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pd(n.startAt,e.startAt)&&Pd(n.endAt,e.endAt)}function Ei(n){return nt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function lo(n,e){return n.filters.filter(t=>t instanceof un&&t.field.isEqual(e))}function Nd(n,e,t){let s=ri,a=!0;for(const c of lo(n,e)){let h=ri,v=!0;switch(c.op){case"<":case"<=":h=xp(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,v=!1;break;case"!=":case"not-in":h=ri}Lo({value:s,inclusive:a},{value:h,inclusive:v})<0&&(s=h,a=v)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];Lo({value:s,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(s=h,a=t.inclusive);break}return{value:s,inclusive:a}}function Cc(n,e,t){let s=ko,a=!0;for(const c of lo(n,e)){let h=ko,v=!0;switch(c.op){case">=":case">":h=Np(c.value),v=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,v=!1;break;case"!=":case"not-in":h=ko}Rd({value:s,inclusive:a},{value:h,inclusive:v})>0&&(s=h,a=v)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];Rd({value:s,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(s=h,a=t.inclusive);break}return{value:s,inclusive:a}}class Ds{constructor(e,t=null,s=[],a=[],c=null,h="F",v=null,b=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=h,this.startAt=v,this.endAt=b,this.le=null,this.he=null,this.Pe=null}}function Od(n,e,t,s,a,c,h,v){return new Ds(n,e,t,s,a,c,h,v)}function Uo(n){return new Ds(n)}function Vu(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function kd(n){return null!==n.collectionGroup}function ga(n){const e=et(n);if(null===e.le){e.le=[];const t=new Set;for(const c of e.explicitOrderBy)e.le.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let v=new Rn(Kn.comparator);return h.filters.forEach(b=>{b.getFlattenedFilters().forEach(P=>{P.isInequality()&&(v=v.add(P.field))})}),v})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.le.push(new Fu(c,s))}),t.has(Kn.keyField().canonicalString())||e.le.push(new Fu(Kn.keyField(),s))}return e.le}function Ni(n){const e=et(n);return e.he||(e.he=function kp(n,e){if("F"===n.limitType)return gt(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>new Fu(a.field,"desc"===a.dir?"asc":"desc"));const t=n.endAt?new co(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new co(n.startAt.position,n.startAt.inclusive):null;return gt(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}(e,ga(n))),e.he}function yl(n,e){const t=n.filters.concat([e]);return new Ds(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vl(n,e,t){return new Ds(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fd(n,e){return Qn(Ni(n),Ni(e))&&n.limitType===e.limitType}function lf(n){return`${ht(Ni(n))}|lt:${n.limitType}`}function Sc(n){return`Query(target=${function(t){let s=t.path.canonicalString();return null!==t.collectionGroup&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>g(a)).join(", ")}]`),xo(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>{return`${(h=a).field.canonicalString()} (${h.dir})`;var h}).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>ku(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>ku(a)).join(",")),`Target(${s})`}(Ni(n))}; limitType=${n.limitType})`}function Xa(n,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return null!==s.collectionGroup?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):nt.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(n,e)&&function(s,a){for(const c of ga(s))if(!c.field.isKeyField()&&null===a.data.field(c.field))return!1;return!0}(n,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(n,e)&&(a=e,!((s=n).startAt&&!function(h,v,b){const P=fi(h,v,b);return h.inclusive?P<=0:P<0}(s.startAt,ga(s),a)||s.endAt&&!function(h,v,b){const P=fi(h,v,b);return h.inclusive?P>=0:P>0}(s.endAt,ga(s),a)));var s,a}function bv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Rv(n){return(e,t)=>{let s=!1;for(const a of ga(n)){const c=nA(a,e,t);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function nA(n,e,t){const s=n.field.isKeyField()?nt.comparator(e.key,t.key):function(c,h,v){const b=h.data.field(c),P=v.data.field(c);return null!==b&&null!==P?Fo(b,P):pt()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return pt()}}class Uu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Qa(this.inner)}size(){return this.innerSize}}const xm=new Hn(nt.comparator);function js(){return xm}const El=new Hn(nt.comparator);function bc(...n){let e=El;for(const t of n)e=e.insert(t.key,t);return e}function Fp(n){let e=El;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ma(){return Ld()}function Nm(){return Ld()}function Ld(){return new Uu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Pv=new Hn(nt.comparator),K0=new Rn(nt.comparator);function cn(...n){let e=K0;for(const t of n)e=e.add(t);return e}const Q0=new Rn(Wt);function Om(){return Q0}function Mv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oo(e)?"-0":e}}function Bu(n){return{integerValue:""+n}}function Vd(n,e){return Dp(e)?Bu(e):Mv(n,e)}class Lp{constructor(){this._=void 0}}function rA(n,e,t){return n instanceof df?function(a,c){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Ad(c)&&(c=Cd(c)),c&&(h.fields.__previous_value__=c),{mapValue:h}}(t,e):n instanceof Ud?km(n,e):n instanceof Il?xv(n,e):function(a,c){const h=Y0(a,c),v=Nv(h)+Nv(a.Ie);return Wi(h)&&Wi(a.Ie)?Bu(v):Mv(a.serializer,v)}(n,e)}function iA(n,e,t){return n instanceof Ud?km(n,e):n instanceof Il?xv(n,e):t}function Y0(n,e){return n instanceof Bd?Wi(s=e)||(c=s)&&"doubleValue"in c?e:{integerValue:0}:null;var s,c}class df extends Lp{}class Ud extends Lp{constructor(e){super(),this.elements=e}}function km(n,e){const t=Vp(e);for(const s of n.elements)t.some(a=>ao(a,s))||t.push(s);return{arrayValue:{values:t}}}class Il extends Lp{constructor(e){super(),this.elements=e}}function xv(n,e){let t=Vp(e);for(const s of n.elements)t=t.filter(a=>!ao(a,s));return{arrayValue:{values:t}}}class Bd extends Lp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Nv(n){return Cr(n.integerValue||n.doubleValue)}function Vp(n){return pa(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ho{constructor(e,t){this.field=e,this.transform=t}}class Ov{constructor(e,t){this.version=e,this.transformResults=t}}class wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ff(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fm{}function J0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new jd(n.key,wr.none()):new pf(n.key,n.data,wr.none());{const t=n.data,s=br.empty();let a=new Rn(Kn.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);null===h&&c.length>1&&(c=c.popLast(),h=t.field(c)),null===h?s.delete(c):s.set(c,h),a=a.add(c)}return new eu(n.key,s,new as(a.toArray()),wr.none())}}function sA(n,e,t){n instanceof pf?function(a,c,h){const v=a.value.clone(),b=Fv(a.fieldTransforms,c,h.transformResults);v.setAll(b),c.convertToFoundDocument(h.version,v).setHasCommittedMutations()}(n,e,t):n instanceof eu?function(a,c,h){if(!ff(a.precondition,c))return void c.convertToUnknownDocument(h.version);const v=Fv(a.fieldTransforms,c,h.transformResults),b=c.data;b.setAll(kv(a)),b.setAll(v),c.convertToFoundDocument(h.version,b).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wl(n,e,t,s){return n instanceof pf?function(c,h,v,b){if(!ff(c.precondition,h))return v;const P=c.value.clone(),k=Lv(c.fieldTransforms,b,h);return P.setAll(k),h.convertToFoundDocument(h.version,P).setHasLocalMutations(),null}(n,e,t,s):n instanceof eu?function(c,h,v,b){if(!ff(c.precondition,h))return v;const P=Lv(c.fieldTransforms,b,h),k=h.data;return k.setAll(kv(c)),k.setAll(P),h.convertToFoundDocument(h.version,k).setHasLocalMutations(),null===v?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(W=>W.field))}(n,e,t,s):(v=t,ff(n.precondition,h=e)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):v);var h,v}function Lm(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),c=Y0(s.transform,a||null);null!=c&&(null===t&&(t=br.empty()),t.set(s.field,c))}return t||null}function X0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(s=n.fieldTransforms)&&void 0===a||s&&a&&cr(s,a,(c,h)=>function hf(n,e){return n.field.isEqual(e.field)&&(a=e.transform,(s=n.transform)instanceof Ud&&a instanceof Ud||s instanceof Il&&a instanceof Il?cr(s.elements,a.elements,ao):s instanceof Bd&&a instanceof Bd?ao(s.Ie,a.Ie):s instanceof df&&a instanceof df);var s,a}(c,h))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var s,a}class pf extends Fm{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class eu extends Fm{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function kv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function Fv(n,e,t){const s=new Map;vt(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,v=e.data.field(c.field);s.set(c.field,iA(h,v,t[a]))}return s}function Lv(n,e,t){const s=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);s.set(a.field,rA(c,h,e))}return s}class jd extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Up extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $d{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&sA(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=wl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=wl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Nm();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let v=this.applyToLocalView(h,c.mutatedFields);v=t.has(a.key)?null:v;const b=J0(h,v);null!==b&&s.set(a.key,b),h.isValidDocument()||h.convertToNoDocument(Ct.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cn())}isEqual(e){return this.batchId===e.batchId&&cr(this.mutations,e.mutations,(t,s)=>X0(t,s))&&cr(this.baseMutations,e.baseMutations,(t,s)=>X0(t,s))}}class Vm{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){vt(e.mutations.length===s.length);let a=Pv;const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,s[h].version);return new Vm(e,t,s,a)}}class gf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hd{constructor(e,t){this.count=e,this.unchangedNames=t}}var pi,Nn;function Um(n){switch(n){default:return pt();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function Bm(n){if(void 0===n)return Ir("GRPC error has no .code"),me.UNKNOWN;switch(n){case pi.OK:return me.OK;case pi.CANCELLED:return me.CANCELLED;case pi.UNKNOWN:return me.UNKNOWN;case pi.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case pi.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case pi.INTERNAL:return me.INTERNAL;case pi.UNAVAILABLE:return me.UNAVAILABLE;case pi.UNAUTHENTICATED:return me.UNAUTHENTICATED;case pi.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case pi.NOT_FOUND:return me.NOT_FOUND;case pi.ALREADY_EXISTS:return me.ALREADY_EXISTS;case pi.PERMISSION_DENIED:return me.PERMISSION_DENIED;case pi.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case pi.ABORTED:return me.ABORTED;case pi.OUT_OF_RANGE:return me.OUT_OF_RANGE;case pi.UNIMPLEMENTED:return me.UNIMPLEMENTED;case pi.DATA_LOSS:return me.DATA_LOSS;default:return pt()}}(Nn=pi||(pi={}))[Nn.OK=0]="OK",Nn[Nn.CANCELLED=1]="CANCELLED",Nn[Nn.UNKNOWN=2]="UNKNOWN",Nn[Nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nn[Nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nn[Nn.NOT_FOUND=5]="NOT_FOUND",Nn[Nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nn[Nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nn[Nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nn[Nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nn[Nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nn[Nn.ABORTED=10]="ABORTED",Nn[Nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nn[Nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nn[Nn.INTERNAL=13]="INTERNAL",Nn[Nn.UNAVAILABLE=14]="UNAVAILABLE",Nn[Nn.DATA_LOSS=15]="DATA_LOSS";function Vv(){return new TextEncoder}const tw=new Mi([4294967295,4294967295],0);function Uv(n){const e=Vv().encode(n),t=new _d;return t.update(e),new Uint8Array(t.digest())}function jm(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Mi([t,s],0),new Mi([a,c],0)]}class Bv{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new jp(`Invalid padding: ${t}`);if(s<0)throw new jp(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new jp(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new jp(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Mi.fromNumber(this.Te)}de(e,t,s){let a=e.add(t.multiply(Mi.fromNumber(s)));return 1===a.compare(tw)&&(a=new Mi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Uv(e),[s,a]=jm(t);for(let c=0;c<this.hashCount;c++){const h=this.de(s,a,c);if(!this.Ae(h))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Bv(c,a,t);return s.forEach(v=>h.insert(v)),h}insert(e){if(0===this.Te)return;const t=Uv(e),[s,a]=jm(t);for(let c=0;c<this.hashCount;c++){const h=this.de(s,a,c);this.Re(h)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class jp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ju{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Pn.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ju(Ct.min(),a,new Hn(Wt),js(),cn())}}class Pn{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Pn(s,t,cn(),cn(),cn())}}class Rc{constructor(e,t,s,a){this.Ve=e,this.removedTargetIds=t,this.key=s,this.me=a}}class $m{constructor(e,t){this.targetId=e,this.fe=t}}class Hm{constructor(e,t,s=kr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class $p{constructor(){this.ge=0,this.pe=zm(),this.ye=kr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=cn(),t=cn(),s=cn();return this.pe.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:pt()}}),new Pn(this.ye,this.we,e,t,s)}Fe(){this.Se=!1,this.pe=zm()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,vt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class jv{constructor(e){this.Le=e,this.ke=new Map,this.qe=js(),this.Qe=$v(),this.Ke=new Hn(Wt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.Ce(e.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(e.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(t);break;case 3:this.je(t)&&(s.Be(),s.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.Ce(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((s,a)=>{this.je(a)&&t(a)})}Je(e){const t=e.targetId,s=e.fe.count,a=this.Ye(t);if(a){const c=a.target;if(Ei(c))if(0===s){const h=new nt(c.path);this.We(t,h,or.newNoDocument(h,Ct.min()))}else vt(1===s);else{const h=this.Ze(t);if(h!==s){const v=this.Xe(e),b=v?this.et(v,e,h):1;0!==b&&(this.He(t),this.Ke=this.Ke.insert(t,2===b?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let h,v;try{h=No(s).toUint8Array()}catch(b){if(b instanceof pl)return vi("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{v=new Bv(h,a,c)}catch(b){return vi(b instanceof jp?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return 0===v.Te?null:v}et(e,t,s){return t.fe.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let a=0;return s.forEach(c=>{const h=this.Le.nt(),v=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(v)||(this.We(t,c,null),a++)}),a}it(e){const t=new Map;this.ke.forEach((c,h)=>{const v=this.Ye(h);if(v){if(c.current&&Ei(v.target)){const b=new nt(v.target.path);null!==this.qe.get(b)||this.st(h,b)||this.We(h,b,or.newNoDocument(b,e))}c.De&&(t.set(h,c.ve()),c.Fe())}});let s=cn();this.Qe.forEach((c,h)=>{let v=!0;h.forEachWhile(b=>{const P=this.Ye(b);return!P||"TargetPurposeLimboResolution"===P.purpose||(v=!1,!1)}),v&&(s=s.add(c))}),this.qe.forEach((c,h)=>h.setReadTime(e));const a=new ju(e,t,this.Ke,this.qe,s);return this.qe=js(),this.Qe=$v(),this.Ke=new Hn(Wt),a}Ue(e,t){if(!this.je(e))return;const s=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,s),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const a=this.ze(e);this.st(e,t)?a.Me(t,1):a.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),s&&(this.qe=this.qe.insert(t,s))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new $p,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Rn(Wt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new $p),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function $v(){return new Hn(nt.comparator)}function zm(){return new Hn(nt.comparator)}const Hv={asc:"ASCENDING",desc:"DESCENDING"},Hp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oA={and:"AND",or:"OR"};class Gm{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wm(n,e){return n.useProto3Json||xo(e)?e:{value:e}}function Pc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qm(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zv(n,e){return Pc(n,e.toTimestamp())}function lr(n){return vt(!!n),Ct.fromTimestamp(function(t){const s=fa(t);return new Zn(s.seconds,s.nanos)}(n))}function Zm(n,e){return mf(n,e).canonicalString()}function mf(n,e){const t=(a=n,new Jt(["projects",a.projectId,"databases",a.database])).child("documents");var a;return void 0===e?t:t.child(e)}function _f(n){const e=Jt.fromString(n);return vt(Qv(e)),e}function yf(n,e){return Zm(n.databaseId,e.path)}function Bo(n,e){const t=_f(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nt(zp(t))}function vf(n,e){return Zm(n.databaseId,e)}function _a(n){const e=_f(n);return 4===e.length?Jt.emptyPath():zp(e)}function zd(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zp(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Gv(n,e,t){return{name:yf(n,e),fields:t.value.mapValue.fields}}function Wv(n,e,t){const s=Bo(n,e.name),a=lr(e.updateTime),c=e.createTime?lr(e.createTime):Ct.min(),h=new br({mapValue:{fields:e.fields}}),v=or.newFoundDocument(s,a,c,h);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Ef(n,e){let t;if(e instanceof pf)t={update:Gv(n,e.key,e.value)};else if(e instanceof jd)t={delete:yf(n,e.key)};else if(e instanceof eu)t={update:Gv(n,e.key,e.data),updateMask:Zp(e.fieldMask)};else{if(!(e instanceof Up))return pt();t={verify:yf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,h){const v=h.transform;if(v instanceof df)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Ud)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Il)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Bd)return{fieldPath:h.field.canonicalString(),increment:v.Ie};throw pt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:zv(n,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:pt()),t;var c}function Km(n,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?wr.updateTime(lr(c.updateTime)):void 0!==c.exists?wr.exists(c.exists):wr.none():wr.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(h,v){let b=null;"setToServerValue"in v?(vt("REQUEST_TIME"===v.setToServerValue),b=new df):"appendMissingElements"in v?b=new Ud(v.appendMissingElements.values||[]):"removeAllFromArray"in v?b=new Il(v.removeAllFromArray.values||[]):"increment"in v?b=new Bd(h,v.increment):pt();const P=Kn.fromServerFormat(v.fieldPath);return new ho(P,b)}(n,a)):[];var c;if(e.update){const a=Bo(n,e.update.name),c=new br({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new as((e.updateMask.fieldPaths||[]).map(k=>Kn.fromServerFormat(k)));return new eu(a,c,h,t,s)}return new pf(a,c,t,s)}if(e.delete){const a=Bo(n,e.delete);return new jd(a,t)}if(e.verify){const a=Bo(n,e.verify);return new Up(a,t)}return pt()}function Gp(n,e){return{documents:[vf(n,e.path)]}}function Wp(n,e){const t={structuredQuery:{}},s=e.path;let a;null!==e.collectionGroup?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=vf(n,a);const c=function(P){if(0!==P.length)return iw(Bn.create(P,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const h=function(P){if(0!==P.length)return P.map(k=>{return{field:Mc((J=k).field),direction:aA(J.dir)};var J})}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const v=Wm(n,e.limit);return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(P=e.startAt).inclusive,values:P.position}),e.endAt&&(t.structuredQuery.endAt=function(P){return{before:!P.inclusive,values:P.position}}(e.endAt)),{ut:t,parent:a};var P}function Zv(n){let e=_a(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){vt(1===s);const k=t.from[0];k.allDescendants?a=k.collectionId:e=e.child(k.collectionId)}let c=[];t.where&&(c=function(W){const J=qp(W);return J instanceof Bn&&Lu(J)?J.getFilters():[J]}(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(J=>{return new Fu(If((xe=J).field),function(Ze){switch(Ze){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(xe.direction));var xe}));let v=null;t.limit&&(v=function(W){let J;return J="object"==typeof W?W.value:W,xo(J)?null:J}(t.limit));let b=null;var W;t.startAt&&(b=new co((W=t.startAt).values||[],!!W.before));let P=null;return t.endAt&&(P=function(W){return new co(W.values||[],!W.before)}(t.endAt)),Od(e,a,h,c,v,"F",b,P)}function qp(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=If(t.unaryFilter.field);return un.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=If(t.unaryFilter.field);return un.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=If(t.unaryFilter.field);return un.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=If(t.unaryFilter.field);return un.create(h,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(n):void 0!==n.fieldFilter?un.create(If((t=n).fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Bn.create(t.compositeFilter.filters.map(s=>qp(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pt()}}(t.compositeFilter.op))}(n):pt();var t}function aA(n){return Hv[n]}function uA(n){return Hp[n]}function rw(n){return oA[n]}function Mc(n){return{fieldPath:n.canonicalString()}}function If(n){return Kn.fromServerFormat(n.fieldPath)}function iw(n){return n instanceof un?function(t){if("=="===t.op){if(bd(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NAN"}};if(ml(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(bd(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NOT_NAN"}};if(ml(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mc(t.field),op:uA(t.op),value:t.value}}}(n):n instanceof Bn?function(t){const s=t.getFilters().map(a=>iw(a));return 1===s.length?s[0]:{compositeFilter:{op:rw(t.op),filters:s}}}(n):pt()}function Zp(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ya{constructor(e,t,s,a,c=Ct.min(),h=Ct.min(),v=kr.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=v,this.expectedCount=b}withSequenceNumber(e){return new ya(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Kp{constructor(e){this.ct=e}}function Qp(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:yf(c=n.ct,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:Pc(c,h.version.toTimestamp()),createTime:Pc(c,h.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:va(e.version)};else{if(!e.isUnknownDocument())return pt();s.unknownDocument={path:t.path.toArray(),version:va(e.version)}}var c,h;return s}function qd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function va(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tu(n){const e=new Zn(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function Ea(n,e){const t=(e.baseMutations||[]).map(c=>Km(n.ct,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const s=e.mutations.map(c=>Km(n.ct,c)),a=Zn.fromMillis(e.localWriteTimeMs);return new $d(e.batchId,a,t,s)}function Zd(n){const e=tu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?tu(n.lastLimboFreeSnapshotVersion):Ct.min();let s;return s=void 0!==n.query.documents?(vt(1===(c=n.query).documents.length),Ni(Uo(_a(c.documents[0])))):function(c){return Ni(Zv(c))}(n.query),new ya(s,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,kr.fromBase64String(n.resumeToken));var c}function Yp(n,e){const t=va(e.snapshotVersion),s=va(e.lastLimboFreeSnapshotVersion);let a;a=Ei(e.target)?Gp(n.ct,e.target):Wp(n.ct,e.target).ut;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ht(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Kd(n){const e=Zv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?vl(e,e.limit,"L"):e}function Yv(n,e){return new gf(e.largestBatchId,Km(n.ct,e.overlayMutation))}function Jp(n,e){const t=e.path.lastSegment();return[n,os(e.path.popLast()),t]}function Qd(n,e,t,s){return{indexId:n,uid:e,sequenceNumber:t,readTime:va(s.readTime),documentKey:os(s.documentKey.path),largestBatchId:s.largestBatchId}}class sw{getBundleMetadata(e,t){return Qm(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:tu(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return Qm(e).put({bundleId:(a=t).id,createTime:va(lr(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return Jv(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:Kd(c.bundledQuery),readTime:tu(c.readTime)};var c})}saveNamedQuery(e,t){return Jv(e).put({name:(a=t).name,readTime:va(lr(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Qm(n){return ni(n,"bundles")}function Jv(n){return ni(n,"namedQueries")}class Xp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new Xp(e,t.uid||"")}getOverlay(e,t){return Tl(e).get(Jp(this.userId,t)).next(s=>s?Yv(this.serializer,s):null)}getOverlays(e,t){const s=ma();return he.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((c,h)=>{const v=new gf(t,h);a.push(this.ht(e,v))}),he.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(h=>a.add(os(h.getCollectionPath())));const c=[];return a.forEach(h=>{const v=IDBKeyRange.bound([this.userId,h,s],[this.userId,h,s+1],!1,!0);c.push(Tl(e).H("collectionPathOverlayIndex",v))}),he.waitFor(c)}getOverlaysForCollection(e,t,s){const a=ma(),c=os(t),h=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Tl(e).W("collectionPathOverlayIndex",h).next(v=>{for(const b of v){const P=Yv(this.serializer,b);a.set(P.getKey(),P)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const c=ma();let h;const v=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tl(e).Y({index:"collectionGroupOverlayIndex",range:v},(b,P,k)=>{const W=Yv(this.serializer,P);c.size()<a||W.largestBatchId===h?(c.set(W.getKey(),W),h=W.largestBatchId):k.done()}).next(()=>c)}ht(e,t){return Tl(e).put(function(a,c,h){const[v,b,P]=Jp(c,h.mutation.key);return{userId:c,collectionPath:b,documentId:P,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Ef(a.ct,h.mutation)}}(this.serializer,this.userId,t))}}function Tl(n){return ni(n,"documentOverlays")}class xc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Cr(e.integerValue));else if("doubleValue"in e){const s=Cr(e.doubleValue);isNaN(s)?this.Et(t,13):(this.Et(t,15),oo(s)?t.dt(0):t.dt(s))}else if("timestampValue"in e){const s=e.timestampValue;this.Et(t,20),"string"==typeof s?t.At(s):(t.At(`${s.seconds||""}`),t.dt(s.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(No(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Et(t,45),t.dt(s.latitude||0),t.dt(s.longitude||0)}else"mapValue"in e?Mp(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):pt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const s=e.fields||{};this.Et(t,55);for(const a of Object.keys(s))this.Rt(a,t),this.It(s[a],t)}wt(e,t){const s=e.values||[];this.Et(t,50);for(const a of s)this.It(a,t)}gt(e,t){this.Et(t,37),nt.fromName(e).path.forEach(s=>{this.Et(t,60),this.St(s,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function ow(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Xv(n){const e=64-function(s){let a=0;for(let c=0;c<8;++c){const h=ow(255&s[c]);if(a+=h,8!==h)break}return a}(n);return Math.ceil(e/8)}xc.bt=new xc;class cA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ct(s.value),s=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Mt(s.value),s=t.next();this.xt()}Ot(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ct(s);else if(s<2048)this.Ct(960|s>>>6),this.Ct(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s);else{const a=t.codePointAt(0);this.Ct(240|a>>>18),this.Ct(128|63&a>>>12),this.Ct(128|63&a>>>6),this.Ct(128|63&a)}}this.vt()}Nt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Mt(s);else if(s<2048)this.Mt(960|s>>>6),this.Mt(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s);else{const a=t.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}this.xt()}Bt(e){const t=this.Lt(e),s=Xv(t);this.kt(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}qt(e){const t=this.Lt(e),s=Xv(t);this.kt(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(c){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,c,!1),new Uint8Array(h.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class aw{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class eg{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Dl{constructor(){this.Gt=new cA,this.zt=new aw(this.Gt),this.jt=new eg(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Al{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Al(this.indexId,this.documentKey,this.arrayValue,s)}}function $u(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=tg(n.arrayValue,e.arrayValue),0!==t?t:(t=tg(n.directionalValue,e.directionalValue),0!==t?t:nt.comparator(n.documentKey,e.documentKey)))}function tg(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(0!==s)return s}return n.length-e.length}class wf{constructor(e){this.Yt=new Rn((t,s)=>Kn.comparator(t.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const s=t;s.isInequality()?this.Yt=this.Yt.add(s):this.Xt.push(s)}}get en(){return this.Yt.size>1}tn(e){if(vt(e.collectionGroup===this.collectionId),this.en)return!1;const t=ul(e);if(void 0!==t&&!this.nn(t))return!1;const s=Mu(e);let a=new Set,c=0,h=0;for(;c<s.length&&this.nn(s[c]);++c)a=a.add(s[c].fieldPath.canonicalString());if(c===s.length)return!0;if(this.Yt.size>0){const v=this.Yt.getIterator().getNext();if(!a.has(v.field.canonicalString())){const b=s[c];if(!this.rn(v,b)||!this.sn(this.Zt[h++],b))return!1}++c}for(;c<s.length;++c)if(h>=this.Zt.length||!this.sn(this.Zt[h++],s[c]))return!1;return!0}on(){if(this.en)return null;let e=new Rn(Kn.comparator);const t=[];for(const s of this.Xt)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)t.push(new ti(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new ti(s.field,0))}for(const s of this.Zt)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new ti(s.field,"asc"===s.dir?0:1)));return new yc(yc.UNKNOWN_ID,this.collectionId,t,io.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function eE(n){var e,t;if(vt(n instanceof un||n instanceof Bn),n instanceof un){if(n instanceof Q){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>un.create(n.field,"==",c)))||[];return Bn.create(a,"or")}return n}const s=n.filters.map(a=>eE(a));return Bn.create(s,n.op)}function tE(n){if(0===n.getFilters().length)return[];const e=Jm(eE(n));return vt(uw(e)),Ym(e)||ng(e)?[e]:e.getFilters()}function Ym(n){return n instanceof un}function ng(n){return n instanceof Bn&&Lu(n)}function uw(n){return Ym(n)||ng(n)||function(t){if(t instanceof Bn&&Ac(t)){for(const s of t.getFilters())if(!Ym(s)&&!ng(s))return!1;return!0}return!1}(n)}function Jm(n){if(vt(n instanceof un||n instanceof Bn),n instanceof un)return n;if(1===n.filters.length)return Jm(n.filters[0]);const e=n.filters.map(s=>Jm(s));let t=Bn.create(e,n.op);return t=Hu(t),uw(t)?t:(vt(t instanceof Bn),vt(Ja(t)),vt(t.filters.length>1),t.filters.reduce((s,a)=>Yd(s,a)))}function Yd(n,e){let t;return vt(n instanceof un||n instanceof Bn),vt(e instanceof un||e instanceof Bn),t=n instanceof un?e instanceof un?Bn.create([n,e],"and"):nE(n,e):e instanceof un?nE(e,n):function(a,c){if(vt(a.filters.length>0&&c.filters.length>0),Ja(a)&&Ja(c))return xd(a,c.getFilters());const h=Ac(a)?a:c,v=Ac(a)?c:a,b=h.filters.map(P=>Yd(P,v));return Bn.create(b,"or")}(n,e),Hu(t)}function nE(n,e){if(Ja(e))return xd(e,n.getFilters());{const t=e.filters.map(s=>Yd(n,s));return Bn.create(t,"or")}}function Hu(n){if(vt(n instanceof un||n instanceof Bn),n instanceof un)return n;const e=n.getFilters();if(1===e.length)return Hu(e[0]);if(Md(n))return n;const t=e.map(a=>Hu(a)),s=[];return t.forEach(a=>{a instanceof un?s.push(a):a instanceof Bn&&(a.op===n.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Bn.create(s,n.op)}class Tf{constructor(){this._n=new Xm}addToCollectionParentIndex(e,t){return this._n.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(ws.min())}updateCollectionGroup(e,t,s){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Xm{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Rn(Jt.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Rn(Jt.comparator)).toArray()}}const Df=new Uint8Array(0);class cw{constructor(e,t){this.databaseId=t,this.an=new Xm,this.un=new Uu(s=>ht(s),(s,a)=>Qn(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const c={collectionId:s,parent:os(a)};return rE(e).put(c)}return he.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[yd(t),""],!1,!0);return rE(e).W(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;s.push(Us(h.parent))}return s})}addFieldIndex(e,t){const s=Xd(e),a={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(b=>[b.fieldPath.canonicalString(),b.kind])};var v;delete a.indexId;const c=s.add(a);if(t.indexState){const h=Cl(e);return c.next(v=>{h.put(Qd(v,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const s=Xd(e),a=Cl(e),c=Jd(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Xd(e),s=Jd(e),a=Cl(e);return t.H().next(()=>s.H()).next(()=>a.H())}createTargetIndexes(e,t){return he.forEach(this.cn(t),s=>this.getIndexType(e,s).next(a=>{if(0===a||1===a){const c=new wf(s).on();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,t){const s=Jd(e);let a=!0;const c=new Map;return he.forEach(this.cn(t),h=>this.ln(e,h).next(v=>{a&&(a=!!v),c.set(h,v)})).next(()=>{if(a){let h=cn();const v=[];return he.forEach(c,(b,P)=>{var ct;ze("IndexedDbIndexManager",`Using index ${ct=b,`id=${ct.indexId}|cg=${ct.collectionGroup}|f=${ct.fields.map(Ft=>`${Ft.fieldPath}:${Ft.kind}`).join(",")}`} to execute ${ht(t)}`);const k=function(ct,Ft){const hn=ul(Ft);if(void 0===hn)return null;for(const zn of lo(ct,hn.fieldPath))switch(zn.op){case"array-contains-any":return zn.value.arrayValue.values||[];case"array-contains":return[zn.value]}return null}(P,b),W=function(ct,Ft){const hn=new Map;for(const zn of Mu(Ft))for(const Wr of lo(ct,zn.fieldPath))switch(Wr.op){case"==":case"in":hn.set(zn.fieldPath.canonicalString(),Wr.value);break;case"not-in":case"!=":return hn.set(zn.fieldPath.canonicalString(),Wr.value),Array.from(hn.values())}return null}(P,b),J=function(ct,Ft){const hn=[];let zn=!0;for(const Wr of Mu(Ft)){const Aa=0===Wr.kind?Nd(ct,Wr.fieldPath,ct.startAt):Cc(ct,Wr.fieldPath,ct.startAt);hn.push(Aa.value),zn&&(zn=Aa.inclusive)}return new co(hn,zn)}(P,b),ae=function(ct,Ft){const hn=[];let zn=!0;for(const Wr of Mu(Ft)){const Aa=0===Wr.kind?Cc(ct,Wr.fieldPath,ct.endAt):Nd(ct,Wr.fieldPath,ct.endAt);hn.push(Aa.value),zn&&(zn=Aa.inclusive)}return new co(hn,zn)}(P,b),xe=this.hn(b,P,J),Qe=this.hn(b,P,ae),Ze=this.Pn(b,P,W),wt=this.In(b.indexId,k,xe,J.inclusive,Qe,ae.inclusive,Ze);return he.forEach(wt,Mt=>s.j(Mt,t.limit).next(ct=>{ct.forEach(Ft=>{const hn=nt.fromSegments(Ft.documentKey);h.has(hn)||(h=h.add(hn),v.push(hn))})}))}).next(()=>v)}return he.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:tE(Bn.create(e.filters,"and")).map(s=>gt(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,s,a,c,h,v){const b=(null!=t?t.length:1)*Math.max(s.length,c.length),P=b/(null!=t?t.length:1),k=[];for(let W=0;W<b;++W){const J=t?this.Tn(t[W/P]):Df,ae=this.En(e,J,s[W%P],a),xe=this.dn(e,J,c[W%P],h),Qe=v.map(Ze=>this.En(e,J,Ze,!0));k.push(...this.createRange(ae,xe,Qe))}return k}En(e,t,s,a){const c=new Al(e,nt.empty(),t,s);return a?c:c.Jt()}dn(e,t,s,a){const c=new Al(e,nt.empty(),t,s);return a?c.Jt():c}ln(e,t){const s=new wf(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let h=null;for(const v of c)s.tn(v)&&(!h||v.fields.length>h.fields.length)&&(h=v);return h})}getIndexType(e,t){let s=2;const a=this.cn(t);return he.forEach(a,c=>this.ln(e,c).next(h=>{h?0!==s&&h.fields.length<function(b){let P=new Rn(Kn.comparator),k=!1;for(const W of b.filters)for(const J of W.getFlattenedFilters())J.field.isKeyField()||("array-contains"===J.op||"array-contains-any"===J.op?k=!0:P=P.add(J.field));for(const W of b.orderBy)W.field.isKeyField()||(P=P.add(W.field));return P.size+(k?1:0)}(c)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}An(e,t){const s=new Dl;for(const a of Mu(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const h=s.Ht(a.kind);xc.bt.Pt(c,h)}return s.Wt()}Tn(e){const t=new Dl;return xc.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const s=new Dl;return xc.bt.Pt(Ya(this.databaseId,t),s.Ht(function(c){const h=Mu(c);return 0===h.length?0:h[h.length-1].kind}(e))),s.Wt()}Pn(e,t,s){if(null===s)return[];let a=[];a.push(new Dl);let c=0;for(const h of Mu(e)){const v=s[c++];for(const b of a)if(this.Vn(t,h.fieldPath)&&pa(v))a=this.mn(a,h,v);else{const P=b.Ht(h.kind);xc.bt.Pt(v,P)}}return this.fn(a)}hn(e,t,s){return this.Pn(e,t,s.position)}fn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Wt();return t}mn(e,t,s){const a=[...e],c=[];for(const h of s.arrayValue.values||[])for(const v of a){const b=new Dl;b.seed(v.Wt()),xc.bt.Pt(h,b.Ht(t.kind)),c.push(b)}return c}Vn(e,t){return!!e.filters.find(s=>s instanceof un&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Xd(e),a=Cl(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(c=>{const h=[];return he.forEach(c,v=>a.get([v.indexId,this.uid]).next(b=>{h.push(function(k,W){const J=W?new io(W.sequenceNumber,new ws(tu(W.readTime),new nt(Us(W.documentKey)),W.largestBatchId)):io.empty(),ae=k.fields.map(([xe,Qe])=>new ti(Kn.fromServerFormat(xe),Qe));return new yc(k.indexId,k.collectionGroup,ae,J)}(v,b))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const c=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Wt(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Xd(e),c=Cl(e);return this.gn(e).next(h=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(v=>he.forEach(v,b=>c.put(Qd(b.indexId,this.uid,h,s)))))}updateIndexEntries(e,t){const s=new Map;return he.forEach(t,(a,c)=>{const h=s.get(a.collectionGroup);return(h?he.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(v=>(s.set(a.collectionGroup,v),he.forEach(v,b=>this.pn(e,a,b).next(P=>{const k=this.yn(c,b);return P.isEqual(k)?he.resolve():this.wn(e,c,b,P,k)}))))})}Sn(e,t,s,a){return Jd(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.Rn(s,t.key),documentKey:t.key.path.toArray()})}bn(e,t,s,a){return Jd(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.Rn(s,t.key),t.key.path.toArray()])}pn(e,t,s){const a=Jd(e);let c=new Rn($u);return a.Y({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.Rn(s,t)])},(h,v)=>{c=c.add(new Al(s.indexId,t,v.arrayValue,v.directionalValue))}).next(()=>c)}yn(e,t){let s=new Rn($u);const a=this.An(t,e);if(null==a)return s;const c=ul(t);if(null!=c){const h=e.data.field(c.fieldPath);if(pa(h))for(const v of h.arrayValue.values||[])s=s.add(new Al(t.indexId,e.key,this.Tn(v),a))}else s=s.add(new Al(t.indexId,e.key,Df,a));return s}wn(e,t,s,a,c){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(b,P,k,W,J){const ae=b.getIterator(),xe=P.getIterator();let Qe=wc(ae),Ze=wc(xe);for(;Qe||Ze;){let wt=!1,Mt=!1;if(Qe&&Ze){const ct=k(Qe,Ze);ct<0?Mt=!0:ct>0&&(wt=!0)}else null!=Qe?Mt=!0:wt=!0;wt?(W(Ze),Ze=wc(xe)):Mt?(J(Qe),Qe=wc(ae)):(Qe=wc(ae),Ze=wc(xe))}}(a,c,$u,v=>{h.push(this.Sn(e,t,s,v))},v=>{h.push(this.bn(e,t,s,v))}),he.waitFor(h)}gn(e){let t=1;return Cl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((h,v)=>$u(h,v)).filter((h,v,b)=>!v||0!==$u(h,b[v-1]));const a=[];a.push(e);for(const h of s){const v=$u(h,e),b=$u(h,t);if(0===v)a[0]=e.Jt();else if(v>0&&b<0)a.push(h),a.push(h.Jt());else if(b>0)break}a.push(t);const c=[];for(let h=0;h<a.length;h+=2){if(this.Dn(a[h],a[h+1]))return[];c.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,Df,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,Df,[]]))}return c}Dn(e,t){return $u(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rg)}getMinOffset(e,t){return he.mapArray(this.cn(t),s=>this.ln(e,s).next(a=>a||pt())).next(rg)}}function rE(n){return ni(n,"collectionParents")}function Jd(n){return ni(n,"indexEntries")}function Xd(n){return ni(n,"indexConfiguration")}function Cl(n){return ni(n,"indexState")}function rg(n){vt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<n.length;s++){const a=n[s].indexState.offset;cl(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ws(e.readTime,e.documentKey,t)}const lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ii{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Ii(e,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function e_(n,e,t){const s=n.store("mutations"),a=n.store("documentMutations"),c=[],h=IDBKeyRange.only(t.batchId);let v=0;const b=s.Y({range:h},(k,W,J)=>(v++,J.delete()));c.push(b.next(()=>{vt(1===v)}));const P=[];for(const k of t.mutations){const W=Ap(e,k.key.path,t.batchId);c.push(a.delete(W)),P.push(k.key)}return he.waitFor(c).next(()=>P)}function ig(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pt();e=n.noDocument}return JSON.stringify(e).length}Ii.DEFAULT_COLLECTION_PERCENTILE=10,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ii.DEFAULT=new Ii(41943040,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ii.DISABLED=new Ii(-1,0,0);class sg{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Cn={}}static lt(e,t,s,a){vt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new sg(c,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nc(e).Y({index:"userMutationsIndex",range:s},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const c=Sl(e),h=Nc(e);return h.add({}).next(v=>{vt("number"==typeof v);const b=new $d(v,t,s,a),P=function(ae,xe,Qe){const Ze=Qe.baseMutations.map(Mt=>Ef(ae.ct,Mt)),wt=Qe.mutations.map(Mt=>Ef(ae.ct,Mt));return{userId:xe,batchId:Qe.batchId,localWriteTimeMs:Qe.localWriteTime.toMillis(),baseMutations:Ze,mutations:wt}}(this.serializer,this.userId,b),k=[];let W=new Rn((J,ae)=>Wt(J.canonicalString(),ae.canonicalString()));for(const J of a){const ae=Ap(this.userId,J.key.path,v);W=W.add(J.key.path.popLast()),k.push(h.put(P)),k.push(c.put(ae,wd))}return W.forEach(J=>{k.push(this.indexManager.addToCollectionParentIndex(e,J))}),e.addOnCommittedListener(()=>{this.Cn[v]=b.keys()}),he.waitFor(k).next(()=>b)})}lookupMutationBatch(e,t){return Nc(e).get(t).next(s=>s?(vt(s.userId===this.userId),Ea(this.serializer,s)):null)}vn(e,t){return this.Cn[t]?he.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Cn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return Nc(e).Y({index:"userMutationsIndex",range:a},(h,v,b)=>{v.userId===this.userId&&(vt(v.batchId>=s),c=Ea(this.serializer,v)),b.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Nc(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(a,c,h)=>{s=c.batchId,h.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nc(e).W("userMutationsIndex",t).next(s=>s.map(a=>Ea(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=dl(this.userId,t.path),a=IDBKeyRange.lowerBound(s),c=[];return Sl(e).Y({range:a},(h,v,b)=>{const[P,k,W]=h,J=Us(k);if(P===this.userId&&t.path.isEqual(J))return Nc(e).get(W).next(ae=>{if(!ae)throw pt();vt(ae.userId===this.userId),c.push(Ea(this.serializer,ae))});b.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Rn(Wt);const a=[];return t.forEach(c=>{const h=dl(this.userId,c.path),v=IDBKeyRange.lowerBound(h),b=Sl(e).Y({range:v},(P,k,W)=>{const[J,ae,xe]=P,Qe=Us(ae);J===this.userId&&c.path.isEqual(Qe)?s=s.add(xe):W.done()});a.push(b)}),he.waitFor(a).next(()=>this.Fn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,c=dl(this.userId,s),h=IDBKeyRange.lowerBound(c);let v=new Rn(Wt);return Sl(e).Y({range:h},(b,P,k)=>{const[W,J,ae]=b,xe=Us(J);W===this.userId&&s.isPrefixOf(xe)?xe.length===a&&(v=v.add(ae)):k.done()}).next(()=>this.Fn(e,v))}Fn(e,t){const s=[],a=[];return t.forEach(c=>{a.push(Nc(e).get(c).next(h=>{if(null===h)throw pt();vt(h.userId===this.userId),s.push(Ea(this.serializer,h))}))}),he.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return e_(e.ae,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),he.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Sl(e).Y({range:s},(c,h,v)=>{if(c[0]===this.userId){const b=Us(c[1]);a.push(b)}else v.done()}).next(()=>{vt(0===a.length)})})}containsKey(e,t){return t_(e,this.userId,t)}xn(e){return iE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function t_(n,e,t){const s=dl(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s);let h=!1;return Sl(n).Y({range:c,J:!0},(v,b,P)=>{const[k,W,J]=v;k===e&&W===a&&(h=!0),P.done()}).next(()=>h)}function Nc(n){return ni(n,"mutations")}function Sl(n){return ni(n,"documentMutations")}function iE(n){return ni(n,"mutationQueues")}class bl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new bl(0)}static Bn(){return new bl(-1)}}class lA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next(t=>{const s=new bl(t.highestTargetId);return t.highestTargetId=s.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(t=>Ct.fromTimestamp(new Zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Ln(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.kn(e,a)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Ln(e).next(s=>(s.targetCount+=1,this.Qn(t,s),this.kn(e,s))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Rl(e).delete(t.targetId)).next(()=>this.Ln(e)).next(s=>(vt(s.targetCount>0),s.targetCount-=1,this.kn(e,s)))}removeTargets(e,t,s){let a=0;const c=[];return Rl(e).Y((h,v)=>{const b=Zd(v);b.sequenceNumber<=t&&null===s.get(b.targetId)&&(a++,c.push(this.removeTargetData(e,b)))}).next(()=>he.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Rl(e).Y((s,a)=>{const c=Zd(a);t(c)})}Ln(e){return n_(e).get("targetGlobalKey").next(t=>(vt(null!==t),t))}kn(e,t){return n_(e).put("targetGlobalKey",t)}qn(e,t){return Rl(e).put(Yp(this.serializer,t))}Qn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Ln(e).next(t=>t.targetCount)}getTargetData(e,t){const s=ht(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return Rl(e).Y({range:a,index:"queryTargetsIndex"},(h,v,b)=>{const P=Zd(v);Qn(t,P.target)&&(c=P,b.done())}).next(()=>c)}addMatchingKeys(e,t,s){const a=[],c=Oi(e);return t.forEach(h=>{const v=os(h.path);a.push(c.put({targetId:s,path:v})),a.push(this.referenceDelegate.addReference(e,s,h))}),he.waitFor(a)}removeMatchingKeys(e,t,s){const a=Oi(e);return he.forEach(t,c=>{const h=os(c.path);return he.waitFor([a.delete([s,h]),this.referenceDelegate.removeReference(e,s,c)])})}removeMatchingKeysForTargetId(e,t){const s=Oi(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Oi(e);let c=cn();return a.Y({range:s,J:!0},(h,v,b)=>{const P=Us(h[1]),k=new nt(P);c=c.add(k)}).next(()=>c)}containsKey(e,t){const s=os(t.path),a=IDBKeyRange.bound([s],[yd(s)],!1,!0);let c=0;return Oi(e).Y({index:"documentTargetsIndex",J:!0,range:a},([h,v],b,P)=>{0!==h&&(c++,P.done())}).next(()=>c>0)}_t(e,t){return Rl(e).get(t).next(s=>s?Zd(s):null)}}function Rl(n){return ni(n,"targets")}function n_(n){return ni(n,"targetGlobal")}function Oi(n){return ni(n,"targetDocuments")}function eh([n,e],[t,s]){const a=Wt(n,t);return 0===a?Wt(e,s):a}class dw{constructor(e){this.Kn=e,this.buffer=new Rn(eh),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();eh(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sE{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Se.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){so(s)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Za(s)}yield t.zn(3e5)}))}}class hw{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return he.resolve(ss._e);const s=new dw(t);return this.jn.forEachTarget(e,a=>s.Wn(a.sequenceNumber)).next(()=>this.jn.Jn(e,a=>s.Wn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(lw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lw):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let s,a,c,h,v,b,P;const k=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(W=>(W>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${W}`),a=this.params.maximumSequenceNumbersToCollect):a=W,h=Date.now(),this.nthSequenceNumber(e,a))).next(W=>(s=W,v=Date.now(),this.removeTargets(e,s,t))).next(W=>(c=W,b=Date.now(),this.removeOrphanedDocuments(e,s))).next(W=>(P=Date.now(),qa()<=Jn.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-k}ms\n\tDetermined least recently used ${a} in `+(v-h)+`ms\n\tRemoved ${c} targets in `+(b-v)+`ms\n\tRemoved ${W} documents in `+(P-b)+`ms\nTotal Duration: ${P-k}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:W})))}}class aE{constructor(e,t){this.db=e,this.garbageCollector=function oE(n,e){return new hw(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Zn(e){let t=0;return this.Jn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(s,a)=>t(a))}addReference(e,t,s){return zu(e,s)}removeReference(e,t,s){return zu(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return zu(e,t)}er(e,t){return function(a,c){let h=!1;return iE(a).Z(v=>t_(a,v,c).next(b=>(b&&(h=!0),he.resolve(!b)))).next(()=>h)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Xn(e,(h,v)=>{if(v<=t){const b=this.er(e,h).next(P=>{if(!P)return c++,s.getEntry(e,h).next(()=>(s.removeEntry(h,Ct.min()),Oi(e).delete([0,os(h.path)])))});a.push(b)}}).next(()=>he.waitFor(a)).next(()=>s.apply(e)).next(()=>c)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return zu(e,t)}Xn(e,t){const s=Oi(e);let a,c=ss._e;return s.Y({index:"documentTargetsIndex"},([h,v],{path:b,sequenceNumber:P})=>{0===h?(c!==ss._e&&t(new nt(Us(a)),c),c=P,a=b):c=ss._e}).next(()=>{c!==ss._e&&t(new nt(Us(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zu(n,e){return Oi(n).put((a=n.currentSequenceNumber,{targetId:0,path:os(e.path),sequenceNumber:a}));var a}class nu{constructor(){this.changes=new Uu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?he.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class th{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Gu(e).put(s)}removeEntry(e,t,s){return Gu(e).delete(function(c,h){const v=c.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],qd(h),v[v.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.tr(e,s)))}getEntry(e,t){let s=or.newInvalidDocument(t);return Gu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Wu(t))},(a,c)=>{s=this.nr(t,c)}).next(()=>s)}rr(e,t){let s={size:0,document:or.newInvalidDocument(t)};return Gu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Wu(t))},(a,c)=>{s={document:this.nr(t,c),size:ig(c)}}).next(()=>s)}getEntries(e,t){let s=js();return this.ir(e,t,(a,c)=>{const h=this.nr(a,c);s=s.insert(a,h)}).next(()=>s)}sr(e,t){let s=js(),a=new Hn(nt.comparator);return this.ir(e,t,(c,h)=>{const v=this.nr(c,h);s=s.insert(c,v),a=a.insert(c,ig(h))}).next(()=>({documents:s,_r:a}))}ir(e,t,s){if(t.isEmpty())return he.resolve();let a=new Rn(pw);t.forEach(b=>a=a.add(b));const c=IDBKeyRange.bound(Wu(a.first()),Wu(a.last())),h=a.getIterator();let v=h.getNext();return Gu(e).Y({index:"documentKeyIndex",range:c},(b,P,k)=>{const W=nt.fromSegments([...P.prefixPath,P.collectionGroup,P.documentId]);for(;v&&pw(v,W)<0;)s(v,null),v=h.getNext();v&&v.isEqual(W)&&(s(v,P),v=h.hasNext()?h.getNext():null),v?k.U(Wu(v)):k.done()}).next(()=>{for(;v;)s(v,null),v=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(e,t,s,a,c){const h=t.path,v=[h.popLast().toArray(),h.lastSegment(),qd(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],b=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gu(e).W(IDBKeyRange.bound(v,b,!0)).next(P=>{c?.incrementDocumentReadCount(P.length);let k=js();for(const W of P){const J=this.nr(nt.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);J.isFoundDocument()&&(Xa(t,J)||a.has(J.key))&&(k=k.insert(J.key,J))}return k})}getAllFromCollectionGroup(e,t,s,a){let c=js();const h=i_(t,s),v=i_(t,ws.max());return Gu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,v,!0)},(b,P,k)=>{const W=this.nr(nt.fromSegments(P.prefixPath.concat(P.collectionGroup,P.documentId)),P);c=c.insert(W.key,W),c.size===a&&k.done()}).next(()=>c)}newChangeBuffer(e){return new fw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return r_(e).get("remoteDocumentGlobalKey").next(t=>(vt(!!t),t))}tr(e,t){return r_(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const s=function Wd(n,e){let t;if(e.document)t=Wv(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=nt.fromSegments(e.noDocument.path),a=tu(e.noDocument.readTime);t=or.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const s=nt.fromSegments(e.unknownDocument.path),a=tu(e.unknownDocument.version);t=or.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(a){const c=new Zn(a[0],a[1]);return Ct.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Ct.min()))return s}return or.newInvalidDocument(e)}}function uE(n){return new th(n)}class fw extends nu{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Uu(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Rn((c,h)=>Wt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const v=this.ur.get(c);if(t.push(this.ar.removeEntry(e,c,v.readTime)),h.isValidDocument()){const b=Qp(this.ar.serializer,h);a=a.add(c.path.popLast());const P=ig(b);s+=P-v.size,t.push(this.ar.addEntry(e,c,b))}else if(s-=v.size,this.trackRemovals){const b=Qp(this.ar.serializer,h.convertToNoDocument(Ct.min()));t.push(this.ar.addEntry(e,c,b))}}),a.forEach(c=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.ar.updateMetadata(e,s)),he.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(s=>(this.ur.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:s,_r:a})=>(a.forEach((c,h)=>{this.ur.set(c,{size:h,readTime:s.get(c).readTime})}),s))}}function r_(n){return ni(n,"remoteDocumentGlobal")}function Gu(n){return ni(n,"remoteDocumentsV14")}function Wu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function i_(n,e){const t=e.documentKey.path.toArray();return[n,qd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pw(n,e){const t=n.path.toArray(),s=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(a=Wt(t[c],s[c]),a)return a;return a=Wt(t.length,s.length),a||(a=Wt(t[t.length-2],s[s.length-2]),a||Wt(t[t.length-1],s[s.length-1]))}class s_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pl{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&wl(s.mutation,a,as.empty(),Zn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,cn()).next(()=>s))}getLocalViewOfDocuments(e,t,s=cn()){const a=ma();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let h=bc();return c.forEach((v,b)=>{h=h.insert(v,b.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=ma();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,cn()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,v)=>{t.set(h,v)})})}computeViews(e,t,s,a){let c=js();const h=Ld(),v=Ld();return t.forEach((b,P)=>{const k=s.get(P.key);a.has(P.key)&&(void 0===k||k.mutation instanceof eu)?c=c.insert(P.key,P):void 0!==k?(h.set(P.key,k.mutation.getFieldMask()),wl(k.mutation,P,k.mutation.getFieldMask(),Zn.now())):h.set(P.key,as.empty())}),this.recalculateAndSaveOverlays(e,c).next(b=>(b.forEach((P,k)=>h.set(P,k)),t.forEach((P,k)=>{var W;return v.set(P,new s_(k,null!==(W=h.get(P))&&void 0!==W?W:null))}),v))}recalculateAndSaveOverlays(e,t){const s=Ld();let a=new Hn((h,v)=>h-v),c=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const v of h)v.keys().forEach(b=>{const P=t.get(b);if(null===P)return;let k=s.get(b)||as.empty();k=v.applyToLocalView(P,k),s.set(b,k);const W=(a.get(v.batchId)||cn()).add(b);a=a.insert(v.batchId,W)})}).next(()=>{const h=[],v=a.getReverseIterator();for(;v.hasNext();){const b=v.getNext(),P=b.key,k=b.value,W=Nm();k.forEach(J=>{if(!c.has(J)){const ae=J0(t.get(J),s.get(J));null!==ae&&W.set(J,ae),c=c.add(J)}}),h.push(this.documentOverlayCache.saveOverlays(e,P,W))}return he.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return nt.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):kd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a);var h}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):he.resolve(ma());let v=-1,b=c;return h.next(P=>he.forEach(P,(k,W)=>(v<W.largestBatchId&&(v=W.largestBatchId),c.get(k)?he.resolve():this.remoteDocumentCache.getEntry(e,k).next(J=>{b=b.insert(k,J)}))).next(()=>this.populateOverlays(e,P,c)).next(()=>this.computeViews(e,b,P,cn())).next(k=>({batchId:v,changes:Fp(k)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nt(t)).next(s=>{let a=bc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let h=bc();return this.indexManager.getCollectionParents(e,c).next(v=>he.forEach(v,b=>{const P=(W=t,J=b.child(c),new Ds(J,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt));var W,J;return this.getDocumentsMatchingCollectionQuery(e,P,s,a).next(k=>{k.forEach((W,J)=>{h=h.insert(W,J)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a))).next(h=>{c.forEach((b,P)=>{const k=P.getKey();null===h.get(k)&&(h=h.insert(k,or.newInvalidDocument(k)))});let v=bc();return h.forEach((b,P)=>{const k=c.get(b);void 0!==k&&wl(k.mutation,P,as.empty(),Zn.now()),Xa(t,P)&&(v=v.insert(b,P))}),v})}}class og{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return he.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(a=t).id,version:a.version,createTime:lr(a.createTime)}),he.resolve();var a}getNamedQuery(e,t){return he.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(a=t).name,query:Kd(a.bundledQuery),readTime:lr(a.readTime)}),he.resolve();var a}}class cE{constructor(){this.overlays=new Hn(nt.comparator),this.hr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ma();return he.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.ht(e,t,c)}),he.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.hr.get(s);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.hr.delete(s)),he.resolve()}getOverlaysForCollection(e,t,s){const a=ma(),c=t.length+1,h=new nt(t.child("")),v=this.overlays.getIteratorFrom(h);for(;v.hasNext();){const b=v.getNext().value,P=b.getKey();if(!t.isPrefixOf(P.path))break;P.path.length===c&&b.largestBatchId>s&&a.set(b.getKey(),b)}return he.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Hn((P,k)=>P-k);const h=this.overlays.getIterator();for(;h.hasNext();){const P=h.getNext().value;if(P.getKey().getCollectionGroup()===t&&P.largestBatchId>s){let k=c.get(P.largestBatchId);null===k&&(k=ma(),c=c.insert(P.largestBatchId,k)),k.set(P.getKey(),P)}}const v=ma(),b=c.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach((P,k)=>v.set(P,k)),!(v.size()>=a)););return he.resolve(v)}ht(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const h=this.hr.get(a.largestBatchId).delete(s.key);this.hr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new gf(t,s));let c=this.hr.get(t);void 0===c&&(c=cn(),this.hr.set(t,c)),this.hr.set(t,c.add(s.key))}}class ag{constructor(){this.Pr=new Rn(ki.Ir),this.Tr=new Rn(ki.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const s=new ki(e,t);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Ar(new ki(e,t))}Rr(e,t){e.forEach(s=>this.removeReference(s,t))}Vr(e){const t=new nt(new Jt([])),s=new ki(t,e),a=new ki(t,e+1),c=[];return this.Tr.forEachInRange([s,a],h=>{this.Ar(h),c.push(h.key)}),c}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new nt(new Jt([])),s=new ki(t,e),a=new ki(t,e+1);let c=cn();return this.Tr.forEachInRange([s,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new ki(e,0),s=this.Pr.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class ki{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return nt.comparator(e.key,t.key)||Wt(e.pr,t.pr)}static Er(e,t){return Wt(e.pr,t.pr)||nt.comparator(e.key,t.key)}}class gw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Rn(ki.Ir)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const c=this.yr;this.yr++;const h=new $d(c,t,s,a);this.mutationQueue.push(h);for(const v of a)this.wr=this.wr.add(new ki(v.key,c)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return he.resolve(h)}lookupMutationBatch(e,t){return he.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.br(t+1),c=a<0?0:a;return he.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ki(t,0),a=new ki(t,Number.POSITIVE_INFINITY),c=[];return this.wr.forEachInRange([s,a],h=>{const v=this.Sr(h.pr);c.push(v)}),he.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Rn(Wt);return t.forEach(a=>{const c=new ki(a,0),h=new ki(a,Number.POSITIVE_INFINITY);this.wr.forEachInRange([c,h],v=>{s=s.add(v.pr)})}),he.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;nt.isDocumentKey(c)||(c=c.child(""));const h=new ki(new nt(c),0);let v=new Rn(Wt);return this.wr.forEachWhile(b=>{const P=b.key.path;return!!s.isPrefixOf(P)&&(P.length===a&&(v=v.add(b.pr)),!0)},h),he.resolve(this.Dr(v))}Dr(e){const t=[];return e.forEach(s=>{const a=this.Sr(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){vt(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let s=this.wr;return he.forEach(t.mutations,a=>{const c=new ki(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,t){const s=new ki(t,0),a=this.wr.firstAfterOrEqual(s);return he.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return he.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mw{constructor(e){this.vr=e,this.docs=new Hn(nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,h=this.vr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return he.resolve(s?s.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let s=js();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():or.newInvalidDocument(a))}),he.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=js();const h=t.path,v=new nt(h.child("")),b=this.docs.getIteratorFrom(v);for(;b.hasNext();){const{key:P,value:{document:k}}=b.getNext();if(!h.isPrefixOf(P.path))break;P.path.length>h.length+1||cl(Xh(k),s)<=0||(a.has(k.key)||Xa(t,k))&&(c=c.insert(k.key,k.mutableCopy()))}return he.resolve(c)}getAllFromCollectionGroup(e,t,s,a){pt()}Fr(e,t){return he.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new _w(this)}getSize(e){return he.resolve(this.size)}}class _w extends nu{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.ar.addEntry(e,a)):this.ar.removeEntry(s)}),he.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class lE{constructor(e){this.persistence=e,this.Mr=new Uu(t=>ht(t),Qn),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ag,this.targetCount=0,this.Br=bl.Nn()}forEachTarget(e,t){return this.Mr.forEach((s,a)=>t(a)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Or&&(this.Or=t),he.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new bl(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.qn(t),he.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.Mr.forEach((h,v)=>{v.sequenceNumber<=t&&null===s.get(v.targetId)&&(this.Mr.delete(h),c.push(this.removeMatchingKeysForTargetId(e,v.targetId)),a++)}),he.waitFor(c).next(()=>a)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const s=this.Mr.get(t)||null;return he.resolve(s)}addMatchingKeys(e,t,s){return this.Nr.dr(t,s),he.resolve()}removeMatchingKeys(e,t,s){this.Nr.Rr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),he.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Nr.gr(t);return he.resolve(s)}containsKey(e,t){return he.resolve(this.Nr.containsKey(t))}}class dE{constructor(e,t){this.Lr={},this.overlays={},this.kr=new ss(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new lE(this),this.indexManager=new Tf,this.remoteDocumentCache=new mw(s=>this.referenceDelegate.Kr(s)),this.serializer=new Kp(t),this.$r=new og(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Lr[e.toKey()];return s||(s=new gw(t,this.referenceDelegate),this.Lr[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,s){ze("MemoryPersistence","Starting transaction:",e);const a=new yw(this.kr.next());return this.referenceDelegate.Ur(),s(a).next(c=>this.referenceDelegate.Wr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gr(e,t){return he.or(Object.values(this.Lr).map(s=>()=>s.containsKey(e,t)))}}class yw extends Tp{constructor(e){super(),this.currentSequenceNumber=e}}class o_{constructor(e){this.persistence=e,this.zr=new ag,this.jr=null}static Hr(e){return new o_(e)}get Jr(){if(this.jr)return this.jr;throw pt()}addReference(e,t,s){return this.zr.addReference(s,t),this.Jr.delete(s.toString()),he.resolve()}removeReference(e,t,s){return this.zr.removeReference(s,t),this.Jr.add(s.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),he.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(a=>this.Jr.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Jr.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Jr,s=>{const a=nt.fromPath(s);return this.Yr(e,a).next(c=>{c||t.removeEntry(a,Ct.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(s=>{s?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return he.or([()=>he.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class hE{constructor(e){this.serializer=e}N(e,t,s,a){const c=new Ka("createOrUpgrade",t);var b;s<1&&a>=1&&(e.createObjectStore("owner"),(b=e).createObjectStore("mutationQueues",{keyPath:"userId"}),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nf,{unique:!0}),b.createObjectStore("documentMutations"),u_(e),function(b){b.createObjectStore("remoteDocuments")}(e));let h=he.resolve();return s<3&&a>=3&&(0!==s&&(function(b){b.deleteObjectStore("targetDocuments"),b.deleteObjectStore("targets"),b.deleteObjectStore("targetGlobal")}(e),u_(e)),h=h.next(()=>function(b){const P=b.store("targetGlobal"),k={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return P.put("targetGlobalKey",k)}(c))),s<4&&a>=4&&(0!==s&&(h=h.next(()=>function(b,P){return P.store("mutations").W().next(k=>{b.deleteObjectStore("mutations"),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nf,{unique:!0});const W=P.store("mutations"),J=k.map(ae=>W.put(ae));return he.waitFor(J)})}(e,c))),h=h.next(()=>{!function(b){b.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(h=h.next(()=>this.Xr(c))),s<6&&a>=6&&(h=h.next(()=>(function(b){b.createObjectStore("remoteDocumentGlobal")}(e),this.ei(c)))),s<7&&a>=7&&(h=h.next(()=>this.ti(c))),s<8&&a>=8&&(h=h.next(()=>this.ni(e,c))),s<9&&a>=9&&(h=h.next(()=>{!function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(h=h.next(()=>this.ri(c))),s<11&&a>=11&&(h=h.next(()=>{(function(b){b.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(b){b.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(h=h.next(()=>{!function(b){const P=b.createObjectStore("documentOverlays",{keyPath:hl});P.createIndex("collectionPathOverlayIndex",Av,{unique:!1}),P.createIndex("collectionGroupOverlayIndex",Cv,{unique:!1})}(e)})),s<13&&a>=13&&(h=h.next(()=>function(b){const P=b.createObjectStore("remoteDocumentsV14",{keyPath:Cp});P.createIndex("documentKeyIndex",Cm),P.createIndex("collectionGroupIndex",Sp)}(e)).next(()=>this.ii(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(h=h.next(()=>this.si(e,c))),s<15&&a>=15&&(h=h.next(()=>function(b){b.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),b.createObjectStore("indexState",{keyPath:bm}).createIndex("sequenceNumberIndex",rf,{unique:!1}),b.createObjectStore("indexEntries",{keyPath:Rp}).createIndex("documentKeyIndex",Dv,{unique:!1})}(e))),h}ei(e){let t=0;return e.store("remoteDocuments").Y((s,a)=>{t+=ig(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Xr(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(a=>he.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",h).next(v=>he.forEach(v,b=>{vt(b.userId===c.userId);const P=Ea(this.serializer,b);return e_(e,c.userId,P).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return s.Y((h,v)=>{const b=new Jt(h),P=[0,os(b)];c.push(t.get(P).next(k=>k?he.resolve():t.put({targetId:0,path:os(b),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>he.waitFor(c))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:xu});const s=t.store("collectionParents"),a=new Xm,c=h=>{if(a.add(h)){const v=h.lastSegment(),b=h.popLast();return s.put({collectionId:v,parent:os(b)})}};return t.store("remoteDocuments").Y({J:!0},(h,v)=>{const b=new Jt(h);return c(b.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([h,v,b],P)=>{const k=Us(v);return c(k.popLast())}))}ri(e){const t=e.store("targets");return t.Y((s,a)=>{const c=Zd(a),h=Yp(this.serializer,c);return t.put(h)})}ii(e,t){const s=t.store("remoteDocuments"),a=[];return s.Y((c,h)=>{const v=t.store("remoteDocumentsV14"),b=(W=h,W.document?new nt(Jt.fromString(W.document.name).popFirst(5)):W.noDocument?nt.fromSegments(W.noDocument.path):W.unknownDocument?nt.fromSegments(W.unknownDocument.path):pt()).path.toArray(),P={prefixPath:b.slice(0,b.length-2),collectionGroup:b[b.length-2],documentId:b[b.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};var W;a.push(v.put(P))}).next(()=>he.waitFor(a))}si(e,t){const s=t.store("mutations"),a=uE(this.serializer),c=new dE(o_.Hr,this.serializer.ct);return s.W().next(h=>{const v=new Map;return h.forEach(b=>{var P;let k=null!==(P=v.get(b.userId))&&void 0!==P?P:cn();Ea(this.serializer,b).keys().forEach(W=>k=k.add(W)),v.set(b.userId,k)}),he.forEach(v,(b,P)=>{const k=new ei(P),W=Xp.lt(this.serializer,k),J=c.getIndexManager(k),ae=sg.lt(k,this.serializer,J,c.referenceDelegate);return new Pl(a,ae,W,J).recalculateAndSaveOverlaysForDocumentKeys(new Ic(t,ss._e),b).next()})})}}function u_(n){n.createObjectStore("targetDocuments",{keyPath:bp}).createIndex("documentTargetsIndex",Z0,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Sm,{unique:!0}),n.createObjectStore("targetGlobal")}const fE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ug{constructor(e,t,s,a,c,h,v,b,P,k,W=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.oi=c,this.window=h,this.document=v,this._i=P,this.ai=k,this.ui=W,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=J=>Promise.resolve(),!ug.D())throw new Be(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aE(this,a),this.Ti=t+"main",this.serializer=new Kp(b),this.Ei=new Ts(this.Ti,this.ui,new hE(this.serializer)),this.Qr=new lA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uE(this.serializer),this.$r=new sw,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===k&&Ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(me.FAILED_PRECONDITION,fE);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ss(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var s=(0,Se.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,Se.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,Se.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Af(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(so(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Oc(e).get("owner").next(t=>he.resolve(this.Si(t)))}bi(e){return Af(e).delete(this.clientId)}Di(){var e=this;return(0,Se.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=ni(s,"clientMetadata");return a.W().next(c=>{const h=e.vi(c,18e5),v=c.filter(b=>-1===h.indexOf(b));return he.forEach(v,b=>a.delete(b.clientId)).next(()=>v)})}).catch(()=>[]);if(e.di)for(const s of t)e.di.removeItem(e.Fi(s.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?he.resolve(!0):Oc(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Be(me.FAILED_PRECONDITION,fE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Af(e).W().next(s=>void 0===this.vi(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Se.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Ic(t,ss._e);return e.yi(s).next(()=>e.bi(s))}),e.Ei.close(),e.Bi()})()}vi(e,t){return e.filter(s=>this.Ci(s.updateTimeMs,t)&&!this.Mi(s.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Af(e).W().next(t=>this.vi(t,18e5).map(s=>s.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return sg.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Xp.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,s){ze("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(b=this.ui)?Dd:14===b?Td:13===b?Rm:12===b?Sv:11===b?sf:void pt();var b;let h;return this.Ei.runTransaction(e,a,c,v=>(h=new Ic(v,this.kr?this.kr.next():ss._e),"readwrite-primary"===t?this.gi(h).next(b=>!!b||this.pi(h)).next(b=>{if(!b)throw Ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Be(me.FAILED_PRECONDITION,wp);return s(h)}).next(b=>this.wi(h).next(()=>b)):this.ki(h).next(()=>s(h)))).then(v=>(h.raiseOnCommittedEvent(),v))}ki(e){return Oc(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Be(me.FAILED_PRECONDITION,fE)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oc(e).put("owner",t)}static D(){return Ts.D()}yi(e){const t=Oc(e);return t.get("owner").next(s=>this.Si(s)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}Ci(e,t){const s=Date.now();return!(e<s-t||e>s&&(Ir(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,on.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const s=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ze("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ir("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ir("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Oc(n){return ni(n,"owner")}function Af(n){return ni(n,"clientMetadata")}function cg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class lg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.qi=s,this.Qi=a}static Ki(e,t){let s=cn(),a=cn();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new lg(e,t.fromCache,s,a)}}class rn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class c_{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,on.G6)()?8:Ts.v((0,on.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.ji(e,t).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.Hi(e,t,a,s).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new rn;return this.Ji(e,t,h).next(v=>{if(c.result=v,this.Ui)return this.Yi(e,t,h,v.size)})}).next(()=>c.result)}Yi(e,t,s,a){return s.documentReadCount<this.Wi?(qa()<=Jn.in.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",Sc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),he.resolve()):(qa()<=Jn.in.DEBUG&&ze("QueryEngine","Query:",Sc(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Gi*a?(qa()<=Jn.in.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",Sc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):he.resolve())}ji(e,t){if(Vu(t))return he.resolve(null);let s=Ni(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=vl(t,null,"F"),s=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const h=cn(...c);return this.zi.getDocuments(e,h).next(v=>this.indexManager.getMinOffset(e,s).next(b=>{const P=this.Zi(t,v);return this.Xi(t,P,h,b.readTime)?this.ji(e,vl(t,null,"F")):this.es(e,P,t,b)}))})))}Hi(e,t,s,a){return Vu(t)||a.isEqual(Ct.min())?he.resolve(null):this.zi.getDocuments(e,s).next(c=>{const h=this.Zi(t,c);return this.Xi(t,h,s,a)?he.resolve(null):(qa()<=Jn.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Sc(t)),this.es(e,h,t,Tm(a,-1)).next(v=>v))})}Zi(e,t){let s=new Rn(Rv(e));return t.forEach((a,c)=>{Xa(e,c)&&(s=s.add(c))}),s}Xi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ji(e,t,s){return qa()<=Jn.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Sc(t)),this.zi.getDocumentsMatchingQuery(e,t,ws.min(),s)}es(e,t,s,a){return this.zi.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}class pE{constructor(e,t,s,a){this.persistence=e,this.ts=t,this.serializer=a,this.ns=new Hn(Wt),this.rs=new Uu(c=>ht(c),Qn),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pl(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function Ml(n,e,t,s){return new pE(n,e,t,s)}function l_(n,e){return d_.apply(this,arguments)}function d_(){return d_=(0,Se.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t._s(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const h=[],v=[];let b=cn();for(const P of a){h.push(P.batchId);for(const k of P.mutations)b=b.add(k.key)}for(const P of c){v.push(P.batchId);for(const k of P.mutations)b=b.add(k.key)}return t.localDocuments.getDocuments(s,b).next(P=>({us:P,removedBatchIds:h,addedBatchIds:v}))})})}),d_.apply(this,arguments)}function xl(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function nh(n,e,t){let s=cn(),a=cn();return t.forEach(c=>s=s.add(c)),e.getEntries(n,s).next(c=>{let h=js();return t.forEach((v,b)=>{const P=c.get(v);b.isFoundDocument()!==P.isFoundDocument()&&(a=a.add(v)),b.isNoDocument()&&b.version.isEqual(Ct.min())?(e.removeEntry(v,b.readTime),h=h.insert(v,b)):!P.isValidDocument()||b.version.compareTo(P.version)>0||0===b.version.compareTo(P.version)&&P.hasPendingWrites?(e.addEntry(b),h=h.insert(v,b)):ze("LocalStore","Ignoring outdated watch update for ",v,". Current version:",P.version," Watch version:",b.version)}),{cs:h,ls:a}})}function gE(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function kc(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Qr.getTargetData(s,e).next(c=>c?(a=c,he.resolve(a)):t.Qr.allocateTargetId(s).next(h=>(a=new ya(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Qr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.ns.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.ns=t.ns.insert(s.targetId,s),t.rs.set(e,s.targetId)),s})}function Fc(n,e,t){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,Se.Z)(function*(n,e,t){const s=et(n),a=s.ns.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",c,h=>s.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!so(h))throw h;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.ns=s.ns.remove(e),s.rs.delete(a.target)}),Cf.apply(this,arguments)}function Sf(n,e,t){const s=et(n);let a=Ct.min(),c=cn();return s.persistence.runTransaction("Execute query","readwrite",h=>function(b,P,k){const W=et(b),J=W.rs.get(k);return void 0!==J?he.resolve(W.ns.get(J)):W.Qr.getTargetData(P,k)}(s,h,Ni(e)).next(v=>{if(v)return a=v.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(h,v.targetId).next(b=>{c=b})}).next(()=>s.ts.getDocumentsMatchingQuery(h,e,t?a:Ct.min(),t?c:cn())).next(v=>(_E(s,bv(e),v),{documents:v,hs:c})))}function hg(n,e){const t=et(n),s=et(t.Qr),a=t.ns.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>s._t(c,e).next(h=>h?h.target:null))}function mE(n,e){const t=et(n),s=t.ss.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.os.getAllFromCollectionGroup(a,e,Tm(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(_E(t,e,a),a))}function _E(n,e,t){let s=n.ss.get(e)||Ct.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),n.ss.set(e,s)}function fg(){return fg=(0,Se.Z)(function*(n,e,t,s){const a=et(n);let c=cn(),h=js();for(const P of t){const k=e.Ps(P.metadata.name);P.document&&(c=c.add(k));const W=e.Is(P);W.setReadTime(e.Ts(P.metadata.readTime)),h=h.insert(k,W)}const v=a.os.newChangeBuffer({trackRemovals:!0}),b=yield kc(a,(k=s,Ni(Uo(Jt.fromString(`__bundle__/docs/${k}`)))));var k;return a.persistence.runTransaction("Apply bundle documents","readwrite",P=>nh(P,v,h).next(k=>(v.apply(P),k)).next(k=>a.Qr.removeMatchingKeysForTargetId(P,b.targetId).next(()=>a.Qr.addMatchingKeys(P,c,b.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(P,k.cs,k.ls)).next(()=>k.cs)))}),fg.apply(this,arguments)}function Ew(n,e){return f_.apply(this,arguments)}function f_(){return f_=(0,Se.Z)(function*(n,e,t=cn()){const s=yield kc(n,Ni(Kd(e.bundledQuery))),a=et(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=lr(e.readTime);if(s.snapshotVersion.compareTo(h)>=0)return a.$r.saveNamedQuery(c,e);const v=s.withResumeToken(kr.EMPTY_BYTE_STRING,h);return a.ns=a.ns.insert(v.targetId,v),a.Qr.updateTargetData(c,v).next(()=>a.Qr.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.Qr.addMatchingKeys(c,t,s.targetId)).next(()=>a.$r.saveNamedQuery(c,e))})}),f_.apply(this,arguments)}function yE(n,e){return`firestore_clients_${n}_${e}`}function vE(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function pg(n,e){return`firestore_targets_${n}_${e}`}class bf{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static Es(e,t,s){const a=JSON.parse(s);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new Be(a.error.code,a.error.message))),h?new bf(e,t,a.state,c):(Ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rf{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Es(e,t){const s=JSON.parse(t);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new Be(s.error.code,s.error.message))),c?new Rf(e,s.state,a):(Ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=Om();for(let h=0;a&&h<s.activeTargetIds.length;++h)a=Dp(s.activeTargetIds[h]),c=c.add(s.activeTargetIds[h]);return a?new gg(e,c):(Ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class As{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new As(t.clientId,t.onlineState):(Ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class p_{constructor(){this.activeTargetIds=Om()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g_{constructor(e,t,s,a,c){this.window=e,this.oi=t,this.persistenceKey=s,this.Vs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Hn(Wt),this.started=!1,this.ys=[];const h=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ws=yE(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new p_),this.bs=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(b){return`firestore_bundle_loaded_v2_${b}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Se.Z)(function*(){const t=yield e.syncEngine.Li();for(const a of t){if(a===e.Vs)continue;const c=e.getItem(yE(e.persistenceKey,a));if(c){const h=gg.Es(a,c);h&&(e.ps=e.ps.insert(h.clientId,h))}}e.Ms();const s=e.storage.getItem(e.vs);if(s){const a=e.xs(s);a&&e.Os(a)}for(const a of e.ys)e.gs(a);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,s){this.Bs(e,t,s),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(pg(this.persistenceKey,e));if(s){const a=Rf.Es(e,s);a&&(t=a.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pg(this.persistenceKey,e))}updateQueryState(e,t,s){this.qs(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Ls(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const s=e;if(s.storageArea===this.storage){if(ze("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ws)return void Ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,Se.Z)(function*(){if(t.started){if(null!==s.key)if(t.bs.test(s.key)){if(null==s.newValue){const a=t.$s(s.key);return t.Us(a,null)}{const a=t.Ws(s.key,s.newValue);if(a)return t.Us(a.clientId,a)}}else if(t.Ds.test(s.key)){if(null!==s.newValue){const a=t.Gs(s.key,s.newValue);if(a)return t.zs(a)}}else if(t.Cs.test(s.key)){if(null!==s.newValue){const a=t.js(s.key,s.newValue);if(a)return t.Hs(a)}}else if(s.key===t.vs){if(null!==s.newValue){const a=t.xs(s.newValue);if(a)return t.Os(a)}}else if(s.key===t.Ss){const a=function(h){let v=ss._e;if(null!=h)try{const b=JSON.parse(h);vt("number"==typeof b),v=b}catch(b){Ir("SharedClientState","Failed to read sequence number from WebStorage",b)}return v}(s.newValue);a!==ss._e&&t.sequenceNumberHandler(a)}else if(s.key===t.Fs){const a=t.Js(s.newValue);yield Promise.all(a.map(c=>t.syncEngine.Ys(c)))}}else t.ys.push(s)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,s){const a=new bf(this.currentUser,e,t,s),c=vE(this.persistenceKey,this.currentUser,e);this.setItem(c,a.ds())}Ls(e){const t=vE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,s){const a=pg(this.persistenceKey,e),c=new Rf(e,t,s);this.setItem(a,c.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const s=this.$s(e);return gg.Es(s,t)}Gs(e,t){const s=this.Ds.exec(e),a=Number(s[1]);return bf.Es(new ei(void 0!==s[2]?s[2]:null),a,t)}js(e,t){const s=this.Cs.exec(e),a=Number(s[1]);return Rf.Es(a,t)}xs(e){return As.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,Se.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const s=t?this.ps.insert(e,t):this.ps.remove(e),a=this.Ns(this.ps),c=this.Ns(s),h=[],v=[];return c.forEach(b=>{a.has(b)||h.push(b)}),a.forEach(b=>{c.has(b)||v.push(b)}),this.syncEngine.eo(h,v).then(()=>{this.ps=s})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Om();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Iw{constructor(){this.no=new p_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,s){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new p_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class m_{io(e){}shutdown(){}}class __{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mg=null;function y_(){return null===mg?mg=268435456+Math.round(2147483648*Math.random()):mg++,"0x"+mg.toString(16)}const ww={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EE{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const us="WebChannelConnection";class Tw extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+t.host,this.po=`projects/${a}/databases/${c}`,this.yo="(default)"===this.databaseId.database?`project_id=${a}`:`project_id=${a}&database_id=${c}`}get wo(){return!1}So(t,s,a,c,h){const v=y_(),b=this.bo(t,s.toUriEncodedString());ze("RestConnection",`Sending RPC '${t}' ${v}:`,b,a);const P={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(P,c,h),this.Co(t,b,P,a).then(k=>(ze("RestConnection",`Received RPC '${t}' ${v}: `,k),k),k=>{throw vi("RestConnection",`RPC '${t}' ${v} failed with error: `,k,"url: ",b,"request:",a),k})}vo(t,s,a,c,h,v){return this.So(t,s,a,c,h)}Do(t,s,a){t["X-Goog-Api-Client"]="gl-js/ fire/"+la,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,h)=>t[h]=c),a&&a.headers.forEach((c,h)=>t[h]=c)}bo(t,s){return`${this.fo}/v1/${s}:${ww[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,s,a){const c=y_();return new Promise((h,v)=>{const b=new Wh;b.setWithCredentials(!0),b.listenOnce(Gh.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case ol.NO_ERROR:const k=b.getResponseJson();ze(us,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(k)),h(k);break;case ol.TIMEOUT:ze(us,`RPC '${e}' ${c} timed out`),v(new Be(me.DEADLINE_EXCEEDED,"Request time out"));break;case ol.HTTP_ERROR:const W=b.getStatus();if(ze(us,`RPC '${e}' ${c} failed with status:`,W,"response text:",b.getResponseText()),W>0){let J=b.getResponseJson();Array.isArray(J)&&(J=J[0]);const ae=J?.error;if(ae&&ae.status&&ae.message){const xe=function(Ze){const wt=Ze.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(wt)>=0?wt:me.UNKNOWN}(ae.status);v(new Be(xe,ae.message))}else v(new Be(me.UNKNOWN,"Server responded with status "+b.getStatus()))}else v(new Be(me.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{ze(us,`RPC '${e}' ${c} completed.`)}});const P=JSON.stringify(a);ze(us,`RPC '${e}' ${c} sending request:`,a),b.send(t,"POST",P,s,15)})}Fo(e,t,s){const a=y_(),c=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=zh(),v=md(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},P=this.longPollingOptions.timeoutSeconds;void 0!==P&&(b.longPollingTimeout=Math.round(1e3*P)),this.useFetchStreams&&(b.useFetchStreams=!0),this.Do(b.initMessageHeaders,t,s),b.encodeInitMessageHeaders=!0;const k=c.join("");ze(us,`Creating RPC '${e}' stream ${a}: ${k}`,b);const W=h.createWebChannel(k,b);let J=!1,ae=!1;const xe=new EE({lo:Ze=>{ae?ze(us,`Not sending because RPC '${e}' stream ${a} is closed:`,Ze):(J||(ze(us,`Opening RPC '${e}' stream ${a} transport.`),W.open(),J=!0),ze(us,`RPC '${e}' stream ${a} sending:`,Ze),W.send(Ze))},ho:()=>W.close()}),Qe=(Ze,wt,Mt)=>{Ze.listen(wt,ct=>{try{Mt(ct)}catch(Ft){setTimeout(()=>{throw Ft},0)}})};return Qe(W,Ru.EventType.OPEN,()=>{ae||ze(us,`RPC '${e}' stream ${a} transport opened.`)}),Qe(W,Ru.EventType.CLOSE,()=>{ae||(ae=!0,ze(us,`RPC '${e}' stream ${a} transport closed`),xe.Vo())}),Qe(W,Ru.EventType.ERROR,Ze=>{ae||(ae=!0,vi(us,`RPC '${e}' stream ${a} transport errored:`,Ze),xe.Vo(new Be(me.UNAVAILABLE,"The operation could not be completed")))}),Qe(W,Ru.EventType.MESSAGE,Ze=>{var wt;if(!ae){const Mt=Ze.data[0];vt(!!Mt);const Ft=Mt.error||(null===(wt=Mt[0])||void 0===wt?void 0:wt.error);if(Ft){ze(us,`RPC '${e}' stream ${a} received error:`,Ft);const hn=Ft.status;let zn=function($0){const H0=pi[$0];if(void 0!==H0)return Bm(H0)}(hn),Wr=Ft.message;void 0===zn&&(zn=me.INTERNAL,Wr="Unknown error status: "+hn+" with message "+Ft.message),ae=!0,xe.Vo(new Be(zn,Wr)),W.close()}else ze(us,`RPC '${e}' stream ${a} received:`,Mt),xe.mo(Mt)}}),Qe(v,yp.STAT_EVENT,Ze=>{Ze.stat===al.PROXY?ze(us,`RPC '${e}' stream ${a} detected buffering proxy`):Ze.stat===al.NOPROXY&&ze(us,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{xe.Ro()},0),xe}}function _g(){return typeof window<"u"?window:null}function yg(){return typeof document<"u"?document:null}function Pf(n){return new Gm(n,!0)}class v_{constructor(e,t,s=1e3,a=1.5,c=6e4){this.oi=e,this.timerId=t,this.Mo=s,this.xo=a,this.Oo=c,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Lo),a=Math.max(0,t-s);a>0&&ze("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,a,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class IE{constructor(e,t,s,a,c,h,v,b){this.oi=e,this.$o=s,this.Uo=a,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=v,this.listener=b,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new v_(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,Se.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,Se.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var s=this;return(0,Se.Z)(function*(){s.n_(),s.r_(),s.jo.cancel(),s.Wo++,4!==e?s.jo.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),s.jo.ko()):t&&t.code===me.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.i_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Wo===t&&this.o_(s,a)},s=>{e(()=>{const a=new Be(me.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(a)})})}o_(e,t){const s=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(a=>{s(()=>this.__(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Yo(){var e=this;this.state=5,this.jo.qo((0,Se.Z)(function*(){e.state=0,e.start()}))}__(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dw extends IE{constructor(e,t,s,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,h),this.serializer=c}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function Gd(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(P=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===P?1:"REMOVE"===P?2:"CURRENT"===P?3:"RESET"===P?4:pt(),a=e.targetChange.targetIds||[],c=function(P,k){return P.useProto3Json?(vt(void 0===k||"string"==typeof k),kr.fromBase64String(k||"")):(vt(void 0===k||k instanceof Uint8Array),kr.fromUint8Array(k||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,v=h&&function(P){const k=void 0===P.code?me.UNKNOWN:Bm(P.code);return new Be(k,P.message||"")}(h);t=new Hm(s,a,c,v||null)}else if("documentChange"in e){const s=e.documentChange,a=Bo(n,s.document.name),c=lr(s.document.updateTime),h=s.document.createTime?lr(s.document.createTime):Ct.min(),v=new br({mapValue:{fields:s.document.fields}}),b=or.newFoundDocument(a,c,h,v);t=new Rc(s.targetIds||[],s.removedTargetIds||[],b.key,b)}else if("documentDelete"in e){const s=e.documentDelete,a=Bo(n,s.document),c=s.readTime?lr(s.readTime):Ct.min(),h=or.newNoDocument(a,c);t=new Rc([],s.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const s=e.documentRemove,a=Bo(n,s.document);t=new Rc([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return pt();{const s=e.filter,{count:a=0,unchangedNames:c}=s,h=new Hd(a,c);t=new $m(s.targetId,h)}}var P;return t}(this.serializer,e),s=function(c){if(!("targetChange"in c))return Ct.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Ct.min():h.readTime?lr(h.readTime):Ct.min()}(e);return this.listener.u_(t,s)}c_(e){const t={};t.database=zd(this.serializer),t.addTarget=function(c,h){let v;const b=h.target;if(v=Ei(b)?{documents:Gp(c,b)}:{query:Wp(c,b).ut},v.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){v.resumeToken=qm(c,h.resumeToken);const P=Wm(c,h.expectedCount);null!==P&&(v.expectedCount=P)}else if(h.snapshotVersion.compareTo(Ct.min())>0){v.readTime=Pc(c,h.snapshotVersion.toTimestamp());const P=Wm(c,h.expectedCount);null!==P&&(v.expectedCount=P)}return v}(this.serializer,e);const s=function Kv(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.t_(t)}l_(e){const t={};t.database=zd(this.serializer),t.removeTarget=e,this.t_(t)}}class ru extends IE{constructor(e,t,s,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,h),this.serializer=c,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function nw(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(a,c){let h=lr(a.updateTime?a.updateTime:c);return h.isEqual(Ct.min())&&(h=lr(c)),new Ov(h,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=lr(e.commitTime);return this.listener.T_(s,t)}return vt(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=zd(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Ef(this.serializer,s))};this.t_(t)}}class E_ extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.A_=!1}R_(){if(this.A_)throw new Be(me.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,s,a){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.So(e,mf(t,s),a,c,h)).catch(c=>{throw"FirebaseError"===c.name?(c.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Be(me.UNKNOWN,c.toString())})}vo(e,t,s,a,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,v])=>this.connection.vo(e,mf(t,s),a,h,v,c)).catch(h=>{throw"FirebaseError"===h.name?(h.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Be(me.UNKNOWN,h.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Cw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ir(t),this.g_=!1):ze("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class wE{constructor(e,t,s,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=c,this.M_.io(v=>{s.enqueueAndForget((0,Se.Z)(function*(){var b;Vc(h)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,Se.Z)(function*(k){const W=et(k);W.v_.add(4),yield Lc(W),W.x_.set("Unknown"),W.v_.delete(4),yield rh(W)}),function P(k){return b.apply(this,arguments)})(h))}))}),this.x_=new Cw(s,a)}}function rh(n){return ih.apply(this,arguments)}function ih(){return ih=(0,Se.Z)(function*(n){if(Vc(n))for(const e of n.F_)yield e(!0)}),ih.apply(this,arguments)}function Lc(n){return TE.apply(this,arguments)}function TE(){return TE=(0,Se.Z)(function*(n){for(const e of n.F_)yield e(!1)}),TE.apply(this,arguments)}function Mf(n,e){const t=et(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),Ia(t)?xf(t):oh(t).Jo()&&Eg(t,e))}function sh(n,e){const t=et(n),s=oh(t);t.C_.delete(e),s.Jo()&&I_(t,e),0===t.C_.size&&(s.Jo()?s.Xo():Vc(t)&&t.x_.set("Unknown"))}function Eg(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oh(n).c_(e)}function I_(n,e){n.O_.Oe(e),oh(n).l_(e)}function xf(n){n.O_=new jv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),oh(n).start(),n.x_.p_()}function Ia(n){return Vc(n)&&!oh(n).Ho()&&n.C_.size>0}function Vc(n){return 0===et(n).v_.size}function DE(n){n.O_=void 0}function w_(n){return T_.apply(this,arguments)}function T_(){return T_=(0,Se.Z)(function*(n){n.C_.forEach((e,t)=>{Eg(n,e)})}),T_.apply(this,arguments)}function AE(n,e){return D_.apply(this,arguments)}function D_(){return D_=(0,Se.Z)(function*(n,e){DE(n),Ia(n)?(n.x_.S_(e),xf(n)):n.x_.set("Unknown")}),D_.apply(this,arguments)}function Ig(n,e,t){return Nl.apply(this,arguments)}function Nl(){return Nl=(0,Se.Z)(function*(n,e,t){if(n.x_.set("Online"),e instanceof Hm&&2===e.state&&e.cause)try{yield(s=(0,Se.Z)(function*(c,h){const v=h.cause;for(const b of h.targetIds)c.C_.has(b)&&(yield c.remoteSyncer.rejectListen(b,v),c.C_.delete(b),c.O_.removeTarget(b))}),function a(c,h){return s.apply(this,arguments)})(n,e)}catch(s){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Ol(n,s)}else if(e instanceof Rc?n.O_.$e(e):e instanceof $m?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(Ct.min()))try{const s=yield xl(n.localStore);t.compareTo(s)>=0&&(yield function(c,h){const v=c.O_.it(h);return v.targetChanges.forEach((b,P)=>{if(b.resumeToken.approximateByteSize()>0){const k=c.C_.get(P);k&&c.C_.set(P,k.withResumeToken(b.resumeToken,h))}}),v.targetMismatches.forEach((b,P)=>{const k=c.C_.get(b);if(!k)return;c.C_.set(b,k.withResumeToken(kr.EMPTY_BYTE_STRING,k.snapshotVersion)),I_(c,b);const W=new ya(k.target,b,P,k.sequenceNumber);Eg(c,W)}),c.remoteSyncer.applyRemoteEvent(v)}(n,t))}catch(s){ze("RemoteStore","Failed to raise snapshot:",s),yield Ol(n,s)}var s}),Nl.apply(this,arguments)}function Ol(n,e,t){return CE.apply(this,arguments)}function CE(){return CE=(0,Se.Z)(function*(n,e,t){if(!so(e))throw e;n.v_.add(1),yield Lc(n),n.x_.set("Offline"),t||(t=()=>xl(n.localStore)),n.asyncQueue.enqueueRetryable((0,Se.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield rh(n)}))}),CE.apply(this,arguments)}function SE(n,e){return e().catch(t=>Ol(n,t,e))}function kl(n){return wg.apply(this,arguments)}function wg(){return wg=(0,Se.Z)(function*(n){const e=et(n),t=Uc(e);let s=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Sw(e);)try{const a=yield gE(e.localStore,s);if(null===a){0===e.D_.length&&t.Xo();break}s=a.batchId,bw(e,a)}catch(a){yield Ol(e,a)}A_(e)&&C_(e)}),wg.apply(this,arguments)}function Sw(n){return Vc(n)&&n.D_.length<10}function bw(n,e){n.D_.push(e);const t=Uc(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function A_(n){return Vc(n)&&!Uc(n).Ho()&&n.D_.length>0}function C_(n){Uc(n).start()}function Nf(n){return S_.apply(this,arguments)}function S_(){return S_=(0,Se.Z)(function*(n){Uc(n).d_()}),S_.apply(this,arguments)}function bE(n){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,Se.Z)(function*(n){const e=Uc(n);for(const t of n.D_)e.I_(t.mutations)}),Tg.apply(this,arguments)}function Rw(n,e,t){return b_.apply(this,arguments)}function b_(){return b_=(0,Se.Z)(function*(n,e,t){const s=n.D_.shift(),a=Vm.from(s,e,t);yield SE(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield kl(n)}),b_.apply(this,arguments)}function Of(n,e){return R_.apply(this,arguments)}function R_(){return R_=(0,Se.Z)(function*(n,e){var t;e&&Uc(n).P_&&(yield(t=(0,Se.Z)(function*(a,c){if(Um(v=c.code)&&v!==me.ABORTED){const h=a.D_.shift();Uc(a).Zo(),yield SE(a,()=>a.remoteSyncer.rejectFailedWrite(h.batchId,c)),yield kl(a)}var v}),function s(a,c){return t.apply(this,arguments)})(n,e)),A_(n)&&C_(n)}),R_.apply(this,arguments)}function RE(n,e){return P_.apply(this,arguments)}function P_(){return P_=(0,Se.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const s=Vc(t);t.v_.add(3),yield Lc(t),s&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield rh(t)}),P_.apply(this,arguments)}function M_(n,e){return x_.apply(this,arguments)}function x_(){return x_=(0,Se.Z)(function*(n,e){const t=et(n);e?(t.v_.delete(2),yield rh(t)):e||(t.v_.add(2),yield Lc(t),t.x_.set("Unknown"))}),x_.apply(this,arguments)}function oh(n){return n.N_||(n.N_=function(t,s,a){const c=et(t);return c.R_(),new Dw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(n.datastore,n.asyncQueue,{Po:w_.bind(null,n),To:AE.bind(null,n),u_:Ig.bind(null,n)}),n.F_.push(function(){var e=(0,Se.Z)(function*(t){t?(n.N_.Zo(),Ia(n)?xf(n):n.x_.set("Unknown")):(yield n.N_.stop(),DE(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function Uc(n){return n.B_||(n.B_=function(t,s,a){const c=et(t);return c.R_(),new ru(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(n.datastore,n.asyncQueue,{Po:Nf.bind(null,n),To:Of.bind(null,n),E_:bE.bind(null,n),T_:Rw.bind(null,n)}),n.F_.push(function(){var e=(0,Se.Z)(function*(t){t?(n.B_.Zo(),yield kl(n)):(yield n.B_.stop(),n.D_.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.B_}class N_{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const h=Date.now()+s,v=new N_(e,t,h,a,c);return v.start(s),v}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fl(n,e){if(Ir("AsyncQueue",`${e}: ${n}`),so(n))return new Be(me.UNAVAILABLE,`${e}: ${n}`);throw n}class Ll{constructor(e){this.comparator=e?(t,s)=>e(t,s)||nt.comparator(t.key,s.key):(t,s)=>nt.comparator(t.key,s.key),this.keyedMap=bc(),this.sortedSet=new Hn(this.comparator)}static emptySet(e){return new Ll(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Ll;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class PE{constructor(){this.L_=new Hn(nt.comparator)}track(e){const t=e.doc.key,s=this.L_.get(t);s?0!==e.type&&3===s.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==s.type?this.L_=this.L_.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.L_=this.L_.remove(t):1===e.type&&2===s.type?this.L_=this.L_.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):pt():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,s)=>{e.push(s)}),e}}class qu{constructor(e,t,s,a,c,h,v,b,P){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=v,this.excludesMetadataChanges=b,this.hasCachedResults=P}static fromInitialDocuments(e,t,s,a,c){const h=[];return t.forEach(v=>{h.push({type:0,doc:v})}),new qu(e,t,Ll.emptySet(t),h,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Pw{constructor(){this.q_=void 0,this.Q_=[]}}class Mw{constructor(){this.queries=new Uu(e=>lf(e),Fd),this.onlineState="Unknown",this.K_=new Set}}function O_(n,e){return k_.apply(this,arguments)}function k_(){return k_=(0,Se.Z)(function*(n,e){const t=et(n),s=e.query;let a=!1,c=t.queries.get(s);if(c||(a=!0,c=new Pw),a)try{c.q_=yield t.onListen(s)}catch(h){const v=Fl(h,`Initialization of query '${Sc(e.query)}' failed`);return void e.onError(v)}t.queries.set(s,c),c.Q_.push(e),e.U_(t.onlineState),c.q_&&e.W_(c.q_)&&Dg(t)}),k_.apply(this,arguments)}function F_(n,e){return L_.apply(this,arguments)}function L_(){return L_=(0,Se.Z)(function*(n,e){const t=et(n),s=e.query;let a=!1;const c=t.queries.get(s);if(c){const h=c.Q_.indexOf(e);h>=0&&(c.Q_.splice(h,1),a=0===c.Q_.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),L_.apply(this,arguments)}function xw(n,e){const t=et(n);let s=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const v of h.Q_)v.W_(a)&&(s=!0);h.q_=a}}s&&Dg(t)}function ME(n,e,t){const s=et(n),a=s.queries.get(e);if(a)for(const c of a.Q_)c.onError(t);s.queries.delete(e)}function Dg(n){n.K_.forEach(e=>{e.next()})}class V_{constructor(e,t,s){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=s||{}}W_(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new qu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=qu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class dA{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class U_{constructor(e){this.serializer=e}Ps(e){return Bo(this.serializer,e)}Is(e){return e.metadata.exists?Wv(this.serializer,e.document,!1):or.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return lr(e)}}class xE{constructor(e,t,s){this.ta=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Nw(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const s=Jt.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,s=new U_(this.serializer);for(const a of e)if(a.metadata.queries){const c=s.Ps(a.metadata.name);for(const h of a.metadata.queries){const v=(t.get(h)||cn()).add(c);t.set(h,v)}}return t}complete(){var e=this;return(0,Se.Z)(function*(){const t=yield function vw(n,e,t,s){return fg.apply(this,arguments)}(e.localStore,new U_(e.serializer),e.documents,e.ta.id),s=e.ra(e.documents);for(const a of e.queries)yield Ew(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:t}})()}}function Nw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class kf{constructor(e){this.key=e}}class NE{constructor(e){this.key=e}}class OE{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=cn(),this.mutatedKeys=cn(),this.ua=Rv(e),this.ca=new Ll(this.ua)}get la(){return this.oa}ha(e,t){const s=t?t.Pa:new PE,a=t?t.ca:this.ca;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,v=!1;const b="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,P="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((k,W)=>{const J=a.get(k),ae=Xa(this.query,W)?W:null,xe=!!J&&this.mutatedKeys.has(J.key),Qe=!!ae&&(ae.hasLocalMutations||this.mutatedKeys.has(ae.key)&&ae.hasCommittedMutations);let Ze=!1;J&&ae?J.data.isEqual(ae.data)?xe!==Qe&&(s.track({type:3,doc:ae}),Ze=!0):this.Ia(J,ae)||(s.track({type:2,doc:ae}),Ze=!0,(b&&this.ua(ae,b)>0||P&&this.ua(ae,P)<0)&&(v=!0)):!J&&ae?(s.track({type:0,doc:ae}),Ze=!0):J&&!ae&&(s.track({type:1,doc:J}),Ze=!0,(b||P)&&(v=!0)),Ze&&(ae?(h=h.add(ae),c=Qe?c.add(k):c.delete(k)):(h=h.delete(k),c=c.delete(k)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const k="F"===this.query.limitType?h.last():h.first();h=h.delete(k.key),c=c.delete(k.key),s.track({type:1,doc:k})}return{ca:h,Pa:s,Xi:v,mutatedKeys:c}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const h=e.Pa.k_();h.sort((k,W)=>function(ae,xe){const Qe=Ze=>{switch(Ze){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return Qe(ae)-Qe(xe)}(k.type,W.type)||this.ua(k.doc,W.doc)),this.Ta(s),a=null!=a&&a;const v=t&&!a?this.Ea():[],b=0===this.aa.size&&this.current&&!a?1:0,P=b!==this._a;return this._a=b,0!==h.length||P?{snapshot:new qu(this.query,e.ca,c,h,e.mutatedKeys,0===b,P,!1,!!s&&s.resumeToken.approximateByteSize()>0),da:v}:{da:v}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new PE,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=cn(),this.ca.forEach(s=>{this.Aa(s.key)&&(this.aa=this.aa.add(s.key))});const t=[];return e.forEach(s=>{this.aa.has(s)||t.push(new NE(s))}),this.aa.forEach(s=>{e.has(s)||t.push(new kf(s))}),t}Ra(e){this.oa=e.hs,this.aa=cn();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return qu.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class B_{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Ow{constructor(e){this.key=e,this.ma=!1}}class iu{constructor(e,t,s,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.fa={},this.ga=new Uu(v=>lf(v),Fd),this.pa=new Map,this.ya=new Set,this.wa=new Hn(nt.comparator),this.Sa=new Map,this.ba=new ag,this.Da={},this.Ca=new Map,this.va=bl.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function Ff(n,e){return Fi.apply(this,arguments)}function Fi(){return Fi=(0,Se.Z)(function*(n,e){const t=q_(n);let s,a;const c=t.ga.get(e);if(c)s=c.targetId,t.sharedClientState.addLocalQueryTarget(s),a=c.view.Va();else{const h=yield kc(t.localStore,Ni(e)),v=t.sharedClientState.addLocalQueryTarget(h.targetId);s=h.targetId,a=yield Zu(t,e,s,"current"===v,h.resumeToken),t.isPrimaryClient&&Mf(t.remoteStore,h)}return a}),Fi.apply(this,arguments)}function Zu(n,e,t,s,a){return ah.apply(this,arguments)}function ah(){return ah=(0,Se.Z)(function*(n,e,t,s,a){n.Ma=(W,J,ae)=>{return(xe=(0,Se.Z)(function*(Ze,wt,Mt,ct){let Ft=wt.view.ha(Mt);Ft.Xi&&(Ft=yield Sf(Ze.localStore,wt.query,!1).then(({documents:Aa})=>wt.view.ha(Aa,Ft)));const hn=ct&&ct.targetChanges.get(wt.targetId),zn=ct&&null!=ct.targetMismatches.get(wt.targetId),Wr=wt.view.applyChanges(Ft,Ze.isPrimaryClient,hn,zn);return Rg(Ze,wt.targetId,Wr.da),Wr.snapshot}),function Qe(Ze,wt,Mt,ct){return xe.apply(this,arguments)})(n,W,J,ae);var xe};const c=yield Sf(n.localStore,e,!0),h=new OE(e,c.hs),v=h.ha(c.documents),b=Pn.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState,a),P=h.applyChanges(v,n.isPrimaryClient,b);Rg(n,t,P.da);const k=new B_(e,t,h);return n.ga.set(e,k),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),P.snapshot}),ah.apply(this,arguments)}function jo(n,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Se.Z)(function*(n,e){const t=et(n),s=t.ga.get(e),a=t.pa.get(s.targetId);if(a.length>1)return t.pa.set(s.targetId,a.filter(c=>!Fd(c,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Fc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),sh(t.remoteStore,s.targetId),Bl(t,s.targetId)}).catch(Za))):(Bl(t,s.targetId),yield Fc(t.localStore,s.targetId,!0))}),Lf.apply(this,arguments)}function Bc(){return Bc=(0,Se.Z)(function*(n,e,t){const s=Z_(n);try{const a=yield function(h,v){const b=et(h),P=Zn.now(),k=v.reduce((ae,xe)=>ae.add(xe.key),cn());let W,J;return b.persistence.runTransaction("Locally write mutations","readwrite",ae=>{let xe=js(),Qe=cn();return b.os.getEntries(ae,k).next(Ze=>{xe=Ze,xe.forEach((wt,Mt)=>{Mt.isValidDocument()||(Qe=Qe.add(wt))})}).next(()=>b.localDocuments.getOverlayedDocuments(ae,xe)).next(Ze=>{W=Ze;const wt=[];for(const Mt of v){const ct=Lm(Mt,W.get(Mt.key).overlayedDocument);null!=ct&&wt.push(new eu(Mt.key,ct,_l(ct.value.mapValue),wr.exists(!0)))}return b.mutationQueue.addMutationBatch(ae,P,wt,v)}).next(Ze=>{J=Ze;const wt=Ze.applyToLocalDocumentSet(W,Qe);return b.documentOverlayCache.saveOverlays(ae,Ze.batchId,wt)})}).then(()=>({batchId:J.batchId,changes:Fp(W)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,v,b){let P=h.Da[h.currentUser.toKey()];P||(P=new Hn(Wt)),P=P.insert(v,b),h.Da[h.currentUser.toKey()]=P}(s,a.batchId,t),yield zc(s,a.changes),yield kl(s.remoteStore)}catch(a){const c=Fl(a,"Failed to persist write");t.reject(c)}}),Bc.apply(this,arguments)}function Vl(n,e){return jc.apply(this,arguments)}function jc(){return jc=(0,Se.Z)(function*(n,e){const t=et(n);try{const s=yield function h_(n,e){const t=et(n),s=e.snapshotVersion;let a=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.os.newChangeBuffer({trackRemovals:!0});a=t.ns;const v=[];e.targetChanges.forEach((k,W)=>{const J=a.get(W);if(!J)return;v.push(t.Qr.removeMatchingKeys(c,k.removedDocuments,W).next(()=>t.Qr.addMatchingKeys(c,k.addedDocuments,W)));let ae=J.withSequenceNumber(c.currentSequenceNumber);var Qe,Ze,wt;null!==e.targetMismatches.get(W)?ae=ae.withResumeToken(kr.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):k.resumeToken.approximateByteSize()>0&&(ae=ae.withResumeToken(k.resumeToken,s)),a=a.insert(W,ae),Ze=ae,wt=k,(0===(Qe=J).resumeToken.approximateByteSize()||Ze.snapshotVersion.toMicroseconds()-Qe.snapshotVersion.toMicroseconds()>=3e8||wt.addedDocuments.size+wt.modifiedDocuments.size+wt.removedDocuments.size>0)&&v.push(t.Qr.updateTargetData(c,ae))});let b=js(),P=cn();if(e.documentUpdates.forEach(k=>{e.resolvedLimboDocuments.has(k)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(c,k))}),v.push(nh(c,h,e.documentUpdates).next(k=>{b=k.cs,P=k.ls})),!s.isEqual(Ct.min())){const k=t.Qr.getLastRemoteSnapshotVersion(c).next(W=>t.Qr.setTargetsMetadata(c,c.currentSequenceNumber,s));v.push(k)}return he.waitFor(v).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,b,P)).next(()=>b)}).then(c=>(t.ns=a,c))}(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.Sa.get(c);h&&(vt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.ma=!0:a.modifiedDocuments.size>0?vt(h.ma):a.removedDocuments.size>0&&(vt(h.ma),h.ma=!1))}),yield zc(t,s,e)}catch(s){yield Za(s)}}),jc.apply(this,arguments)}function Ul(n,e,t){const s=et(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.ga.forEach((c,h)=>{const v=h.view.U_(e);v.snapshot&&a.push(v.snapshot)}),function(h,v){const b=et(h);b.onlineState=v;let P=!1;b.queries.forEach((k,W)=>{for(const J of W.Q_)J.U_(v)&&(P=!0)}),P&&Dg(b)}(s.eventManager,e),a.length&&s.fa.u_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function ch(n,e,t){return $c.apply(this,arguments)}function $c(){return $c=(0,Se.Z)(function*(n,e,t){const s=et(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Sa.get(e),c=a&&a.key;if(c){let h=new Hn(nt.comparator);h=h.insert(c,or.newNoDocument(c,Ct.min()));const v=cn().add(c),b=new ju(Ct.min(),new Map,new Hn(Wt),h,v);yield Vl(s,b),s.wa=s.wa.remove(c),s.Sa.delete(e),H_(s)}else yield Fc(s.localStore,e,!1).then(()=>Bl(s,e,t)).catch(Za)}),$c.apply(this,arguments)}function lh(n,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,Se.Z)(function*(n,e){const t=et(n),s=e.batch.batchId;try{const a=yield function dg(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.os.newChangeBuffer({trackRemovals:!0});return function(v,b,P,k){const W=P.batch,J=W.keys();let ae=he.resolve();return J.forEach(xe=>{ae=ae.next(()=>k.getEntry(b,xe)).next(Qe=>{const Ze=P.docVersions.get(xe);vt(null!==Ze),Qe.version.compareTo(Ze)<0&&(W.applyToRemoteDocument(Qe,P),Qe.isValidDocument()&&(Qe.setReadTime(P.commitVersion),k.addEntry(Qe)))})}),ae.next(()=>v.mutationQueue.removeMutationBatch(b,W))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(v){let b=cn();for(let P=0;P<v.mutationResults.length;++P)v.mutationResults[P].transformResults.length>0&&(b=b.add(v.batch.mutations[P].key));return b}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}(t.localStore,e);bg(t,s,null),Sg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield zc(t,a)}catch(a){yield Za(a)}}),Hc.apply(this,arguments)}function kE(n,e,t){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,Se.Z)(function*(n,e,t){const s=et(n);try{const a=yield function(h,v){const b=et(h);return b.persistence.runTransaction("Reject batch","readwrite-primary",P=>{let k;return b.mutationQueue.lookupMutationBatch(P,v).next(W=>(vt(null!==W),k=W.keys(),b.mutationQueue.removeMutationBatch(P,W))).next(()=>b.mutationQueue.performConsistencyCheck(P)).next(()=>b.documentOverlayCache.removeOverlaysForBatchId(P,k,v)).next(()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(P,k)).next(()=>b.localDocuments.getDocuments(P,k))})}(s.localStore,e);bg(s,e,t),Sg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield zc(s,a)}catch(a){yield Za(a)}}),Ag.apply(this,arguments)}function Cg(){return Cg=(0,Se.Z)(function*(n,e){const t=et(n);Vc(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(h){const v=et(h);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",b=>v.mutationQueue.getHighestUnacknowledgedBatchId(b))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ca.get(s)||[];a.push(e),t.Ca.set(s,a)}catch(s){const a=Fl(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Cg.apply(this,arguments)}function Sg(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function bg(n,e,t){const s=et(n);let a=s.Da[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Da[s.currentUser.toKey()]=a}}function Bl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.pa.get(e))n.ga.delete(s),t&&n.fa.xa(s,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(s=>{n.ba.containsKey(s)||j_(n,s)})}function j_(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(sh(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),H_(n))}function Rg(n,e,t){for(const s of t)s instanceof kf?(n.ba.addReference(s.key,e),$_(n,s)):s instanceof NE?(ze("SyncEngine","Document no longer in limbo: "+s.key),n.ba.removeReference(s.key,e),n.ba.containsKey(s.key)||j_(n,s.key)):pt()}function $_(n,e){const t=e.key,s=t.path.canonicalString();n.wa.get(t)||n.ya.has(s)||(ze("SyncEngine","New document in limbo: "+t),n.ya.add(s),H_(n))}function H_(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new nt(Jt.fromString(e)),s=n.va.next();n.Sa.set(s,new Ow(t)),n.wa=n.wa.insert(t,s),Mf(n.remoteStore,new ya(Ni(Uo(t.path)),s,"TargetPurposeLimboResolution",ss._e))}}function zc(n,e,t){return LE.apply(this,arguments)}function LE(){return LE=(0,Se.Z)(function*(n,e,t){const s=et(n),a=[],c=[],h=[];var v;s.ga.isEmpty()||(s.ga.forEach((v,b)=>{h.push(s.Ma(b,e,t).then(P=>{if((P||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(b.targetId,P?.fromCache?"not-current":"current"),P){a.push(P);const k=lg.Ki(b.targetId,P);c.push(k)}}))}),yield Promise.all(h),s.fa.u_(a),yield(v=(0,Se.Z)(function*(P,k){const W=et(P);try{yield W.persistence.runTransaction("notifyLocalViewChanges","readwrite",J=>he.forEach(k,ae=>he.forEach(ae.qi,xe=>W.persistence.referenceDelegate.addReference(J,ae.targetId,xe)).next(()=>he.forEach(ae.Qi,xe=>W.persistence.referenceDelegate.removeReference(J,ae.targetId,xe)))))}catch(J){if(!so(J))throw J;ze("LocalStore","Failed to update sequence numbers: "+J)}for(const J of k){const ae=J.targetId;if(!J.fromCache){const xe=W.ns.get(ae),Ze=xe.withLastLimboFreeSnapshotVersion(xe.snapshotVersion);W.ns=W.ns.insert(ae,Ze)}}}),function b(P,k){return v.apply(this,arguments)})(s.localStore,c))}),LE.apply(this,arguments)}function kw(n,e){return z_.apply(this,arguments)}function z_(){return z_=(0,Se.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const s=yield l_(t.localStore,e);t.currentUser=e,(c=t).Ca.forEach(v=>{v.forEach(b=>{b.reject(new Be(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Ca.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield zc(t,s.us)}var c}),z_.apply(this,arguments)}function hA(n,e){const t=et(n),s=t.Sa.get(e);if(s&&s.ma)return cn().add(s.key);{let a=cn();const c=t.pa.get(e);if(!c)return a;for(const h of c){const v=t.ga.get(h);a=a.unionWith(v.view.la)}return a}}function Fw(n,e){return VE.apply(this,arguments)}function VE(){return VE=(0,Se.Z)(function*(n,e){const t=et(n),s=yield Sf(t.localStore,e.query,!0),a=e.view.Ra(s);return t.isPrimaryClient&&Rg(t,e.targetId,a.da),a}),VE.apply(this,arguments)}function Lw(n,e){return G_.apply(this,arguments)}function G_(){return G_=(0,Se.Z)(function*(n,e){const t=et(n);return mE(t.localStore,e).then(s=>zc(t,s))}),G_.apply(this,arguments)}function Vw(n,e,t,s){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,Se.Z)(function*(n,e,t,s){const a=et(n),c=yield function(v,b){const P=et(v),k=et(P.mutationQueue);return P.persistence.runTransaction("Lookup mutation documents","readonly",W=>k.vn(W,b).next(J=>J?P.localDocuments.getDocuments(W,J):he.resolve(null)))}(a.localStore,e);var b;null!==c?("pending"===t?yield kl(a.remoteStore):"acknowledged"===t||"rejected"===t?(bg(a,e,s||null),Sg(a,e),b=e,et(et(a.localStore).mutationQueue).Mn(b)):pt(),yield zc(a,c)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),Vf.apply(this,arguments)}function Bf(){return Bf=(0,Se.Z)(function*(n,e){const t=et(n);if(q_(t),Z_(t),!0===e&&!0!==t.Fa){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield jf(t,s.toArray());t.Fa=!0,yield M_(t.remoteStore,!0);for(const c of a)Mf(t.remoteStore,c)}else if(!1===e&&!1!==t.Fa){const s=[];let a=Promise.resolve();t.pa.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?s.push(h):a=a.then(()=>(Bl(t,h),Fc(t.localStore,h,!0))),sh(t.remoteStore,h)}),yield a,yield jf(t,s),function(h){const v=et(h);v.Sa.forEach((b,P)=>{sh(v.remoteStore,P)}),v.ba.mr(),v.Sa=new Map,v.wa=new Hn(nt.comparator)}(t),t.Fa=!1,yield M_(t.remoteStore,!1)}}),Bf.apply(this,arguments)}function jf(n,e,t){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,Se.Z)(function*(n,e,t){const s=et(n),a=[],c=[];for(const h of e){let v;const b=s.pa.get(h);if(b&&0!==b.length){v=yield kc(s.localStore,Ni(b[0]));for(const P of b){const k=s.ga.get(P),W=yield Fw(s,k);W.snapshot&&c.push(W.snapshot)}}else{const P=yield hg(s.localStore,h);v=yield kc(s.localStore,P),yield Zu(s,dh(P),h,!1,v.resumeToken)}a.push(v)}return s.fa.u_(c),a}),Pg.apply(this,arguments)}function dh(n){return Od(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function UE(n){return t=et(n).localStore,et(et(t).persistence).Li();var t}function Uw(n,e,t,s){return jl.apply(this,arguments)}function jl(){return jl=(0,Se.Z)(function*(n,e,t,s){const a=et(n);if(a.Fa)return void ze("SyncEngine","Ignoring unexpected query state notification.");const c=a.pa.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const h=yield mE(a.localStore,bv(c[0])),v=ju.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,kr.EMPTY_BYTE_STRING);yield zc(a,h,v);break}case"rejected":yield Fc(a.localStore,e,!0),Bl(a,e,s);break;default:pt()}}),jl.apply(this,arguments)}function Bw(n,e,t){return W_.apply(this,arguments)}function W_(){return W_=(0,Se.Z)(function*(n,e,t){const s=q_(n);if(s.Fa){for(const a of e){if(s.pa.has(a)){ze("SyncEngine","Adding an already active target "+a);continue}const c=yield hg(s.localStore,a),h=yield kc(s.localStore,c);yield Zu(s,dh(c),h.targetId,!1,h.resumeToken),Mf(s.remoteStore,h)}for(const a of t)s.pa.has(a)&&(yield Fc(s.localStore,a,!1).then(()=>{sh(s.remoteStore,a),Bl(s,a)}).catch(Za))}}),W_.apply(this,arguments)}function q_(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ch.bind(null,e),e.fa.u_=xw.bind(null,e.eventManager),e.fa.xa=ME.bind(null,e.eventManager),e}function Z_(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kE.bind(null,e),e}class Gc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Se.Z)(function*(){t.serializer=Pf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ml(this.persistence,new c_,e.initialUser,this.serializer)}createPersistence(e){return new dE(o_.Hr,this.serializer)}createSharedClientState(e){return new Iw}terminate(){var e=this;return(0,Se.Z)(function*(){var t,s;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(s=e.indexBackfillerScheduler)||void 0===s||s.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class BE extends Gc{constructor(e,t,s){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Se.Z)(function*(){yield t().call(s,e),yield s.Na.initialize(s,e),yield Z_(s.Na.syncEngine),yield kl(s.Na.remoteStore),yield s.persistence.fi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Ml(this.persistence,new c_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new sE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new Am(t,this.persistence);return new Ed(e.asyncQueue,s)}createPersistence(e){const t=cg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ii.withCacheSize(this.cacheSizeBytes):Ii.DEFAULT;return new ug(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,_g(),yg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Iw}}class jE extends BE{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Se.Z)(function*(){yield t().call(s,e);const a=s.Na.syncEngine;s.sharedClientState instanceof g_&&(s.sharedClientState.syncEngine={Zs:Vw.bind(null,a),Xs:Uw.bind(null,a),eo:Bw.bind(null,a),Li:UE.bind(null,a),Ys:Lw.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.fi(function(){var c=(0,Se.Z)(function*(h){yield function Uf(n,e){return Bf.apply(this,arguments)}(s.Na.syncEngine,h),s.gcScheduler&&(h&&!s.gcScheduler.started?s.gcScheduler.start():h||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(h&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():h||s.indexBackfillerScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=_g();if(!g_.D(t))throw new Be(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=cg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new g_(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class hh{initialize(e,t){var s=this;return(0,Se.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>Ul(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=kw.bind(null,s.syncEngine),yield M_(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Mw}createDatastore(e){const t=Pf(e.databaseInfo.databaseId),s=new Tw(e.databaseInfo);return new E_(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return s=this.localStore,a=this.datastore,c=e.asyncQueue,h=t=>Ul(this.syncEngine,t,0),v=__.D()?new __:new m_,new wE(s,a,c,h,v);var s,a,c,h,v}createSyncEngine(e,t){return function(a,c,h,v,b,P,k){const W=new iu(a,c,h,v,b,P);return k&&(W.Fa=!0),W}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,Se.Z)(function*(){var t,s;yield(s=(0,Se.Z)(function*(c){const h=et(c);ze("RemoteStore","RemoteStore shutting down."),h.v_.add(5),yield Lc(h),h.M_.shutdown(),h.x_.set("Unknown")}),function a(c){return s.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function xg(n,e=10240){let t=0;return{read:()=>(0,Se.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Se.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ng{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $E{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Or,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(s=>{s&&s.ea()?this.metadata.resolve(s.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.X_)}`))},s=>this.metadata.reject(s))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,Se.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,Se.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,Se.Z)(function*(){const t=yield e.Ka();if(null===t)return null;const s=e.qa.decode(t),a=Number(s);isNaN(a)&&e.$a(`length string (${s}) is not valid number`);const c=yield e.Ua(a);return new dA(JSON.parse(c),t.length+a)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,Se.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const t=e.Wa();t<0&&e.$a("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Ua(e){var t=this;return(0,Se.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ga())&&t.$a("Reached the end of bundle when more is expected.");const s=t.qa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,Se.Z)(function*(){const t=yield e.ka.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class jw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Se.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Be(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const s=yield(a=(0,Se.Z)(function*(h,v){const b=et(h),P={documents:v.map(ae=>yf(b.serializer,ae))},k=yield b.vo("BatchGetDocuments",b.serializer.databaseId,Jt.emptyPath(),P,v.length),W=new Map;k.forEach(ae=>{const xe=function qv(n,e){return"found"in e?function(s,a){vt(!!a.found);const c=Bo(s,a.found.name),h=lr(a.found.updateTime),v=a.found.createTime?lr(a.found.createTime):Ct.min(),b=new br({mapValue:{fields:a.found.fields}});return or.newFoundDocument(c,h,v,b)}(n,e):"missing"in e?function(s,a){vt(!!a.missing),vt(!!a.readTime);const c=Bo(s,a.missing),h=lr(a.readTime);return or.newNoDocument(c,h)}(n,e):pt()}(b.serializer,ae);W.set(xe.key.toString(),xe)});const J=[];return v.forEach(ae=>{const xe=W.get(ae.toString());vt(!!xe),J.push(xe)}),J}),function c(h,v){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new jd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const c=nt.fromPath(a);e.mutations.push(new Up(c,e.precondition(c)))}),yield(s=(0,Se.Z)(function*(c,h){const v=et(c),b={writes:h.map(P=>Ef(v.serializer,P))};yield v.So("Commit",v.serializer.databaseId,Jt.emptyPath(),b)}),function a(c,h){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pt();t=Ct.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Be(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ct.min())?wr.exists(!1):wr.updateTime(t):wr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Be(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wr.updateTime(t)}return wr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $w{constructor(e,t,s,a,c){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=c,this.za=s.maxAttempts,this.jo=new v_(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,Se.Z)(function*(){const t=new jw(e.datastore),s=e.Ja(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Ya(c)}))}).catch(a=>{e.Ya(a)})}))}Ja(e){try{const t=this.updateFunction(e);return!xo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Um(t)}return!1}}class Hw{constructor(e,t,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=ei.UNAUTHENTICATED,this.clientId=Yh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var h=(0,Se.Z)(function*(v){ze("FirestoreClient","Received user=",v.uid),yield c.authCredentialListener(v),c.user=v});return function(v){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(s,h=>(ze("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Fl(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function $f(n,e){return Og.apply(this,arguments)}function Og(){return Og=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,Se.Z)(function*(c){s.isEqual(c)||(yield l_(e.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Og.apply(this,arguments)}function Q_(n,e){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield J_(n);ze("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>RE(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,a)=>RE(e.remoteStore,a)),n._onlineComponents=e}),Y_.apply(this,arguments)}function HE(n){return"FirebaseError"===n.name?n.code===me.FAILED_PRECONDITION||n.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function J_(n){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,Se.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $f(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!HE(t))throw t;vi("Error using user provided cache. Falling back to memory cache: "+t),yield $f(n,new Gc)}}else ze("FirestoreClient","Using default OfflineComponentProvider"),yield $f(n,new Gc);return n._offlineComponents}),Hf.apply(this,arguments)}function fh(n){return X_.apply(this,arguments)}function X_(){return X_=(0,Se.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze("FirestoreClient","Using user provided OnlineComponentProvider"),yield Q_(n,n._uninitializedComponentsProvider._online)):(ze("FirestoreClient","Using default OnlineComponentProvider"),yield Q_(n,new hh))),n._onlineComponents}),X_.apply(this,arguments)}function zf(n){return J_(n).then(e=>e.persistence)}function Ku(n){return J_(n).then(e=>e.localStore)}function kg(n){return fh(n).then(e=>e.remoteStore)}function Fg(n){return fh(n).then(e=>e.syncEngine)}function ph(n){return ey.apply(this,arguments)}function ey(){return ey=(0,Se.Z)(function*(n){const e=yield fh(n),t=e.eventManager;return t.onListen=Ff.bind(null,e.syncEngine),t.onUnlisten=jo.bind(null,e.syncEngine),t}),ey.apply(this,arguments)}function ty(n,e,t={}){const s=new Or;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(c,h,v,b,P){const k=new Ng({next:J=>{h.enqueueAndForget(()=>F_(c,W));const ae=J.docs.has(v);!ae&&J.fromCache?P.reject(new Be(me.UNAVAILABLE,"Failed to get document because the client is offline.")):ae&&J.fromCache&&b&&"server"===b.source?P.reject(new Be(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):P.resolve(J)},error:J=>P.reject(J)}),W=new V_(Uo(v.path),k,{includeMetadataChanges:!0,Z_:!0});return O_(c,W)}(yield ph(n),n.asyncQueue,e,t,s)})),s.promise}function WE(n,e,t={}){const s=new Or;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(c,h,v,b,P){const k=new Ng({next:J=>{h.enqueueAndForget(()=>F_(c,W)),J.fromCache&&"server"===b.source?P.reject(new Be(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):P.resolve(J)},error:J=>P.reject(J)}),W=new V_(v,k,{includeMetadataChanges:!0,Z_:!0});return O_(c,W)}(yield ph(n),n.asyncQueue,e,t,s)})),s.promise}function iy(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const sy=new Map;function Ug(n,e,t){if(!t)throw new Be(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KE(n,e,t,s){if(!0===e&&!0===s)throw new Be(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QE(n){if(!nt.isDocumentKey(n))throw new Be(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oy(n){if(nt.isDocumentKey(n))throw new Be(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(s=n).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof n?"a function":pt()}function yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gf(n);throw new Be(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Bg(n,e){if(e<=0)throw new Be(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ay{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Be(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Be(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=iy(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new Be(me.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Be(me.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Be(me.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ay({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Be(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Be(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ay(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new Ev;switch(s.type){case"firstParty":return new wm(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Be(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=sy.get(t);s&&(ze("ComponentProvider","Removing Datastore"),sy.delete(t),s.terminate())}(this),Promise.resolve()}}class Li{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Li(this.firestore,e,this._query)}}class fr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fr(this.firestore,e,this._key)}}class wa extends Li{constructor(e,t,s){super(e,t,Uo(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fr(this.firestore,null,new nt(e))}withConverter(e){return new wa(this.firestore,e,this._path)}}function cy(n,e,...t){if(n=(0,on.m9)(n),Ug("collection","path",e),n instanceof gh){const s=Jt.fromString(e,...t);return oy(s),new wa(n,null,s)}{if(!(n instanceof fr||n instanceof wa))throw new Be(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Jt.fromString(e,...t));return oy(s),new wa(n.firestore,null,s)}}function $l(n,e,...t){if(n=(0,on.m9)(n),1===arguments.length&&(e=Yh.newId()),Ug("doc","path",e),n instanceof gh){const s=Jt.fromString(e,...t);return QE(s),new fr(n,null,new nt(s))}{if(!(n instanceof fr||n instanceof wa))throw new Be(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Jt.fromString(e,...t));return QE(s),new fr(n.firestore,n instanceof wa?n.converter:null,new nt(s))}}function Qu(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),(n instanceof fr||n instanceof wa)&&(e instanceof fr||e instanceof wa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ly(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),n instanceof Li&&e instanceof Li&&n.firestore===e.firestore&&Fd(n._query,e._query)&&n.converter===e.converter}class qw{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new v_(this,"async_queue_retry"),this._u=()=>{const t=yg();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=yg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=yg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new Or;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,Se.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!so(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(s=>{throw this.ru=s,this.iu=!1,Ir("INTERNAL UNHANDLED ERROR: ",function(h){let v=h.message||"";return h.stack&&(v=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),v}(s)),s}).then(s=>(this.iu=!1,s))));return this.Xa=t,t}enqueueAfterDelay(e,t,s){this.au(),this.ou.indexOf(e)>-1&&(t=0);const a=N_.createAndSchedule(this,e,t,s,c=>this.lu(c));return this.nu.push(a),a}au(){this.ru&&pt()}verifyOperationInProgress(){}hu(){var e=this;return(0,Se.Z)(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Wf(n){return function(t,s){if("object"!=typeof t||null===t)return!1;const a=t;for(const c of["next","error","complete"])if(c in a&&"function"==typeof a[c])return!0;return!1}(n)}class Hl{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends gh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new qw,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XE(this),this._firestoreClient.terminate()}}function ii(n){return n._firestoreClient||XE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XE(n){var e,t,s;const a=n._freezeSettings(),c=(b=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new uf(n._databaseId,b,n._persistenceKey,(k=a).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,iy(k.experimentalLongPollingOptions),k.useFetchStreams));var b,k;n._firestoreClient=new Hw(n._authCredentials,n._appCheckCredentials,n._queue,c),null!==(t=a.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=a.localCache)&&void 0!==s&&s._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.localCache.kind,_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider})}function tI(n,e,t){const s=new Or;return n.asyncQueue.enqueue((0,Se.Z)(function*(){try{yield $f(n,t),yield Q_(n,e),s.resolve()}catch(a){const c=a;if(!HE(c))throw c;vi("Error enabling indexeddb cache. Falling back to memory cache: "+c),s.reject(c)}})).then(()=>s.promise)}function hy(n){if(n._initialized||n._terminated)throw new Be(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ou(kr.fromBase64String(e))}catch(t){throw new Be(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ou(kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class au{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Be(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wc{constructor(e){this._methodName=e}}class fy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const iI=/^__.*__$/;class sI{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new pf(e,this.data,t,this.fieldTransforms)}}class Ta{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class qf{constructor(e,t,s,a,c,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===c&&this.Eu(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new qf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Au({path:s,Vu:!1});return a.mu(e),a}fu(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Au({path:s,Vu:!1});return a.Eu(),a}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Kf(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(oI(this.du)&&iI.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class uu{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Pf(e)}Su(e,t,s,a=!1){return new qf({du:e,methodName:t,wu:s,path:Kn.emptyPath(),Vu:!1,yu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qi(n){const e=n._freezeSettings(),t=Pf(n._databaseId);return new uu(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $s(n,e,t,s,a,c={}){const h=n.Su(c.merge||c.mergeFields?2:0,e,t,a);jg("Data must be an object, but it was:",h,s);const v=uI(s,h);let b,P;if(c.merge)b=new as(h.fieldMask),P=h.fieldTransforms;else if(c.mergeFields){const k=[];for(const W of c.mergeFields){const J=_h(e,W,t);if(!h.contains(J))throw new Be(me.INVALID_ARGUMENT,`Field '${J}' is specified in your field mask but missing from your input data.`);vy(k,J)||k.push(J)}b=new as(k),P=h.fieldTransforms.filter(W=>b.covers(W.field))}else b=null,P=h.fieldTransforms;return new sI(new br(v),b,P)}class mh extends Wc{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mh}}function py(n,e,t){return new qf({du:3,wu:e.settings.wu,methodName:n._methodName,Vu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gy extends Wc{_toFieldTransform(e){return new ho(e.path,new df)}isEqual(e){return e instanceof gy}}class my extends Wc{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=py(this,e,!0),s=this.bu.map(c=>qc(c,t)),a=new Ud(s);return new ho(e.path,a)}isEqual(e){return e instanceof my&&(0,on.vZ)(this.bu,e.bu)}}class _y extends Wc{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=py(this,e,!0),s=this.bu.map(c=>qc(c,t)),a=new Il(s);return new ho(e.path,a)}isEqual(e){return e instanceof _y&&(0,on.vZ)(this.bu,e.bu)}}class yy extends Wc{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Bd(e.serializer,Vd(e.serializer,this.Du));return new ho(e.path,t)}isEqual(e){return e instanceof yy&&this.Du===e.Du}}function Zf(n,e,t,s){const a=n.Su(1,e,t);jg("Data must be an object, but it was:",a,s);const c=[],h=br.empty();ha(s,(b,P)=>{const k=Hg(e,b,t);P=(0,on.m9)(P);const W=a.fu(k);if(P instanceof mh)c.push(k);else{const J=qc(P,W);null!=J&&(c.push(k),h.set(k,J))}});const v=new as(c);return new Ta(h,v,a.fieldTransforms)}function zl(n,e,t,s,a,c){const h=n.Su(1,e,t),v=[_h(e,s,t)],b=[a];if(c.length%2!=0)throw new Be(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let J=0;J<c.length;J+=2)v.push(_h(e,c[J])),b.push(c[J+1]);const P=[],k=br.empty();for(let J=v.length-1;J>=0;--J)if(!vy(P,v[J])){const ae=v[J];let xe=b[J];xe=(0,on.m9)(xe);const Qe=h.fu(ae);if(xe instanceof mh)P.push(ae);else{const Ze=qc(xe,Qe);null!=Ze&&(P.push(ae),k.set(ae,Ze))}}const W=new as(P);return new Ta(k,W,h.fieldTransforms)}function aI(n,e,t,s=!1){return qc(t,n.Su(s?4:3,e))}function qc(n,e){if(cI(n=(0,on.m9)(n)))return jg("Unsupported field value:",e,n),uI(n,e);if(n instanceof Wc)return function(s,a){if(!oI(a.du))throw a.pu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.pu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(s,a){const c=[];let h=0;for(const v of s){let b=qc(v,a.gu(h));null==b&&(b={nullValue:"NULL_VALUE"}),c.push(b),h++}return{arrayValue:{values:c}}}(n,e)}return function(s,a){if(null===(s=(0,on.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Vd(a.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const c=Zn.fromDate(s);return{timestampValue:Pc(a.serializer,c)}}if(s instanceof Zn){const c=new Zn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Pc(a.serializer,c)}}if(s instanceof fy)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ou)return{bytesValue:qm(a.serializer,s._byteString)};if(s instanceof fr){const c=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw a.pu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Zm(s.firestore._databaseId||a.databaseId,s._key.path)}}throw a.pu(`Unsupported field value: ${Gf(s)}`)}(n,e)}function uI(n,e){const t={};return Qa(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(n,(s,a)=>{const c=qc(a,e.Ru(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function cI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Zn||n instanceof fy||n instanceof ou||n instanceof fr||n instanceof Wc)}function jg(n,e,t){if(!cI(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const s=Gf(t);throw e.pu("an object"===s?n+" a custom object":n+" "+s)}var a}function _h(n,e,t){if((e=(0,on.m9)(e))instanceof au)return e._internalPath;if("string"==typeof e)return Hg(n,e);throw Kf("Field path arguments must be of type string or ",n,!1,void 0,t)}const $g=new RegExp("[~\\*/\\[\\]]");function Hg(n,e,t){if(e.search($g)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new au(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kf(n,e,t,s,a){const c=s&&!s.isEmpty(),h=void 0!==a;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let b="";return(c||h)&&(b+=" (found",c&&(b+=` in field ${s}`),h&&(b+=` in document ${a}`),b+=")"),new Be(me.INVALID_ARGUMENT,v+n+b)}function vy(n,e){return n.some(t=>t.isEqual(e))}class yh{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eT extends yh{data(){return super.data()}}function zg(n,e){return"string"==typeof e?Hg(n,e):e instanceof au?e._internalPath:e._delegate._internalPath}function Gg(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vh{}class Eh extends vh{}function Yu(n,e,...t){let s=[];e instanceof vh&&s.push(e),s=s.concat(t),function(c){const h=c.filter(b=>b instanceof Gl).length,v=c.filter(b=>b instanceof Ih).length;if(h>1||h>0&&v>0)throw new Be(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)n=a._apply(n);return n}class Ih extends Eh{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Ih(e,t,s)}_apply(e){const t=this._parse(e);return pI(e._query,t),new Li(e.firestore,e.converter,yl(e._query,t))}_parse(e){const t=qi(e.firestore);return function(c,h,v,b,P,k,W){let J;if(P.isKeyField()){if("array-contains"===k||"array-contains-any"===k)throw new Be(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${k}' queries on documentId().`);if("in"===k||"not-in"===k){fI(W,k);const ae=[];for(const xe of W)ae.push(hI(b,c,xe));J={arrayValue:{values:ae}}}else J=hI(b,c,W)}else"in"!==k&&"not-in"!==k&&"array-contains-any"!==k||fI(W,k),J=aI(v,"where",W,"in"===k||"not-in"===k);return un.create(P,k,J)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Gl extends vh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gl(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,c){let h=a;const v=c.getFlattenedFilters();for(const b of v)pI(h,b),h=yl(h,b)}(e._query,t),new Li(e.firestore,e.converter,yl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Wg extends Eh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Wg(e,t)}_apply(e){const t=function(a,c,h){if(null!==a.startAt)throw new Be(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Be(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fu(c,h)}(e._query,this._field,this._direction);return new Li(e.firestore,e.converter,function(a,c){const h=a.explicitOrderBy.concat([c]);return new Ds(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class qg extends Eh{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new qg(e,t,s)}_apply(e){return new Li(e.firestore,e.converter,vl(e._query,this._limit,this._limitType))}}class Zg extends Eh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Zg(e,t,s)}_apply(e){const t=dI(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,(c=t,new Ds((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)));var a,c}}class Kg extends Eh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Kg(e,t,s)}_apply(e){const t=dI(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,(c=t,new Ds((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)));var a,c}}function dI(n,e,t,s){if(t[0]=(0,on.m9)(t[0]),t[0]instanceof yh)return function(c,h,v,b,P){if(!b)throw new Be(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const k=[];for(const W of ga(c))if(W.field.isKeyField())k.push(Ya(h,b.key));else{const J=b.data.field(W.field);if(Ad(J))throw new Be(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+W.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===J){const ae=W.field.canonicalString();throw new Be(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ae}' (used as the orderBy) does not exist.`)}k.push(J)}return new co(k,P)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=qi(n.firestore);return function(h,v,b,P,k,W){const J=h.explicitOrderBy;if(k.length>J.length)throw new Be(me.INVALID_ARGUMENT,`Too many arguments provided to ${P}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ae=[];for(let xe=0;xe<k.length;xe++){const Qe=k[xe];if(J[xe].field.isKeyField()){if("string"!=typeof Qe)throw new Be(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${P}(), but got a ${typeof Qe}`);if(!kd(h)&&-1!==Qe.indexOf("/"))throw new Be(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${P}() must be a plain document ID, but '${Qe}' contains a slash.`);const Ze=h.path.child(Jt.fromString(Qe));if(!nt.isDocumentKey(Ze))throw new Be(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${P}() must result in a valid document path, but '${Ze}' is not because it contains an odd number of segments.`);const wt=new nt(Ze);ae.push(Ya(v,wt))}else{const Ze=aI(b,P,Qe);ae.push(Ze)}}return new co(ae,W)}(n._query,n.firestore._databaseId,a,e,t,s)}}function hI(n,e,t){if("string"==typeof(t=(0,on.m9)(t))){if(""===t)throw new Be(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kd(e)&&-1!==t.indexOf("/"))throw new Be(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Jt.fromString(t));if(!nt.isDocumentKey(s))throw new Be(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ya(n,new nt(s))}if(t instanceof fr)return Ya(n,t._key);throw new Be(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gf(t)}.`)}function fI(n,e){if(!Array.isArray(n)||0===n.length)throw new Be(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pI(n,e){const t=function(a,c){for(const h of a)for(const v of h.getFlattenedFilters())if(c.indexOf(v.op)>=0)return v.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Be(me.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Ey{convertValue(e,t="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ha(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertGeoPoint(e){return new fy(Cr(e.latitude),Cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Cd(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Sr(e));default:return null}}convertTimestamp(e){const t=fa(e);return new Zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Jt.fromString(e);vt(Qv(s));const a=new Oo(s.get(1),s.get(3)),c=new nt(s.popFirst(5));return a.isEqual(t)||Ir(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Qg(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class lT extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cu extends yh{constructor(e,t,s,a,c,h){super(e,t,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(zg("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class wh extends cu{data(e={}){return super.data(e)}}class Ju{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Zc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new wh(this._firestore,this._userDataWriter,s.key,s,new Zc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(v=>({type:"added",doc:new wh(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Zc(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:h++}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(v=>c||3!==v.type).map(v=>{const b=new wh(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Zc(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);let P=-1,k=-1;return 0!==v.type&&(P=h.indexOf(v.doc.key),h=h.delete(v.doc.key)),1!==v.type&&(h=h.add(v.doc),k=h.indexOf(v.doc.key)),{type:_I(v.type),doc:b,oldIndex:P,newIndex:k}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _I(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function Iy(n,e){return n instanceof cu&&e instanceof cu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ju&&e instanceof Ju&&n._firestore===e._firestore&&ly(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Kc extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}function Ty(n,e,t){n=yn(n,fr);const s=yn(n.firestore,pr),a=Qg(n.converter,e,t);return Ah(s,[$s(qi(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,wr.none())])}function Dy(n,e,t,...s){n=yn(n,fr);const a=yn(n.firestore,pr),c=qi(a);let h;return h="string"==typeof(e=(0,on.m9)(e))||e instanceof au?zl(c,"updateDoc",n._key,e,t,s):Zf(c,"updateDoc",n._key,e),Ah(a,[h.toMutation(n._key,wr.exists(!0))])}function yI(n,...e){var t,s,a;n=(0,on.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||Wf(e[h])||(c=e[h],h++);const v={includeMetadataChanges:c.includeMetadataChanges};if(Wf(e[h])){const W=e[h];e[h]=null===(t=W.next)||void 0===t?void 0:t.bind(W),e[h+1]=null===(s=W.error)||void 0===s?void 0:s.bind(W),e[h+2]=null===(a=W.complete)||void 0===a?void 0:a.bind(W)}let b,P,k;if(n instanceof fr)P=yn(n.firestore,pr),k=Uo(n._key.path),b={next:W=>{e[h]&&e[h](Qc(P,n,W))},error:e[h+1],complete:e[h+2]};else{const W=yn(n,Li);P=yn(W.firestore,pr),k=W._query;const J=new Kc(P);b={next:ae=>{e[h]&&e[h](new Ju(P,J,W,ae))},error:e[h+1],complete:e[h+2]},Gg(n._query)}return function(J,ae,xe,Qe){const Ze=new Ng(Qe),wt=new V_(ae,Ze,xe);return J.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return O_(yield ph(J),wt)})),()=>{Ze.La(),J.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return F_(yield ph(J),wt)}))}}(ii(P),k,v,b)}function Ah(n,e){return function(s,a){const c=new Or;return s.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function uh(n,e,t){return Bc.apply(this,arguments)}(yield Fg(s),a,c)})),c.promise}(ii(n),e)}function Qc(n,e,t){const s=t.docs.get(e._key),a=new Kc(n);return new cu(n,a,e._key,s,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}const IT={maxAttempts:5};class Ch{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qi(e)}set(e,t,s){this._verifyNotCommitted();const a=Yc(e,this._firestore),c=Qg(a.converter,t,s),h=$s(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(h.toMutation(a._key,wr.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=Yc(e,this._firestore);let h;return h="string"==typeof(t=(0,on.m9)(t))||t instanceof au?zl(this._dataReader,"WriteBatch.update",c._key,t,s,a):Zf(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yc(e,this._firestore);return this._mutations=this._mutations.concat(new jd(t._key,wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yc(n,e){if((n=(0,on.m9)(n)).firestore!==e)throw new Be(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wT extends class{constructor(t,s){this._firestore=t,this._transaction=s,this._dataReader=qi(t)}get(t){const s=Yc(t,this._firestore),a=new lT(this._firestore);return this._transaction.lookup([s._key]).then(c=>{if(!c||1!==c.length)return pt();const h=c[0];if(h.isFoundDocument())return new yh(this._firestore,a,h.key,h,s.converter);if(h.isNoDocument())return new yh(this._firestore,a,s._key,null,s.converter);throw pt()})}set(t,s,a){const c=Yc(t,this._firestore),h=Qg(c.converter,s,a),v=$s(this._dataReader,"Transaction.set",c._key,h,null!==c.converter,a);return this._transaction.set(c._key,v),this}update(t,s,a,...c){const h=Yc(t,this._firestore);let v;return v="string"==typeof(s=(0,on.m9)(s))||s instanceof au?zl(this._dataReader,"Transaction.update",h._key,s,a,c):Zf(this._dataReader,"Transaction.update",h._key,s),this._transaction.update(h._key,v),this}delete(t){const s=Yc(t,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yc(e,this._firestore),s=new Kc(this._firestore);return super.get(e).then(a=>new cu(this._firestore,s,t._key,a._document,new Zc(!1,!1),t.converter))}}function SI(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function by(){if(typeof Uint8Array>"u")throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function Qf(){if(!function Pp(){return typeof atob<"u"}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){la=On.SDK_VERSION,(0,On._registerComponent)(new du.wA("firestore",(s,{instanceIdentifier:a,options:c})=>{const h=s.getProvider("app").getImmediate(),v=new pr(new Kh(s.getProvider("auth-internal")),new Iv(s.getProvider("app-check-internal")),function(P,k){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new Be(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(P.options.projectId,k)}(h,a),h);return c=Object.assign({useFetchStreams:t},c),v._setSettings(c),v},"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(vp,"4.4.1",e),(0,On.registerVersion)(vp,"4.4.1","esm2017")}();class Yf{constructor(e){this._delegate=e}static fromBase64String(e){return Qf(),new Yf(ou.fromBase64String(e))}static fromUint8Array(e){return by(),new Yf(ou.fromUint8Array(e))}toBase64(){return Qf(),this._delegate.toBase64()}toUint8Array(){return by(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ry(n){return function bI(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(n,["next","error","complete"])}class Jf{enableIndexedDbPersistence(e,t){return function Zw(n,e){hy(n=yn(n,pr));const t=ii(n);if(t._uninitializedComponentsProvider)throw new Be(me.FAILED_PRECONDITION,"SDK cache is already specified.");vi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=n._freezeSettings(),a=new hh;return tI(t,a,new BE(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function eI(n){hy(n=yn(n,pr));const e=ii(n);if(e._uninitializedComponentsProvider)throw new Be(me.FAILED_PRECONDITION,"SDK cache is already specified.");vi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),s=new hh;return tI(e,s,new jE(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wi(n){if(n._initialized&&!n._terminated)throw new Be(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{yield(t=(0,Se.Z)(function*(a){if(!Ts.D())return Promise.resolve();const c=a+"main";yield Ts.delete(c)}),function s(a){return t.apply(this,arguments)})(cg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class RI{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function uy(n,e,t,s={}){var a;const c=(n=yn(n,gh))._getSettings(),h=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==h&&vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},c),{host:h,ssl:!1})),s.mockUserToken){let v,b;if("string"==typeof s.mockUserToken)v=s.mockUserToken,b=ei.MOCK_USER;else{v=(0,on.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const P=s.mockUserToken.sub||s.mockUserToken.user_id;if(!P)throw new Be(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new ei(P)}n._authCredentials=new Zh(new da(v,b))}}(this._delegate,e,t,s)}enableNetwork(){return function Kw(n){return function Lg(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield zf(n),t=yield kg(n);return e.setNetworkEnabled(!0),function(a){const c=et(a);return c.v_.delete(0),rh(c)}(t)}))}(ii(n=yn(n,pr)))}(this._delegate)}disableNetwork(){return function Qw(n){return function Vg(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield zf(n),t=yield kg(n);return e.setNetworkEnabled(!1),(s=(0,Se.Z)(function*(c){const h=et(c);h.v_.add(0),yield Lc(h),h.x_.set("Offline")}),function a(c){return s.apply(this,arguments)})(t);var s}))}(ii(n=yn(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,KE("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nI(n){return function(t){const s=new Or;return t.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function FE(n,e){return Cg.apply(this,arguments)}(yield Fg(t),s)})),s.promise}(ii(n=yn(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function mT(n,e){return function Gw(n,e){const t=new Ng(e);return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return a=yield ph(n),c=t,et(a).K_.add(c),void c.next();var a,c})),()=>{t.La(),n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return a=yield ph(n),c=t,void et(a).K_.delete(c);var a,c}))}}(ii(n=yn(n,pr)),Wf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zl(this,cy(this._delegate,e))}catch(t){throw Cs(t,"collection()","Firestore.collection()")}}doc(e){try{return new fo(this,$l(this._delegate,e))}catch(t){throw Cs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function YE(n,e){if(n=yn(n,gh),Ug("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Be(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Li(n,null,(s=e,new Ds(Jt.emptyPath(),s)));var s}(this._delegate,e))}catch(t){throw Cs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function TT(n,e,t){n=yn(n,pr);const s=Object.assign(Object.assign({},IT),t);return function(c){if(c.maxAttempts<1)throw new Be(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,h,v){const b=new Or;return c.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){const P=yield function zE(n){return fh(n).then(e=>e.datastore)}(c);new $w(c.asyncQueue,P,v,h,b).ja()})),b.promise}(ii(n),a=>e(new wT(n,a)),s)}(this._delegate,t=>e(new PI(this,t)))}batch(){return ii(this._delegate),new PT(new Ch(this._delegate,e=>Ah(this._delegate,e)))}loadBundle(e){return function Jw(n,e){const t=ii(n=yn(n,pr)),s=new Hl;return function ny(n,e,t,s){const a=function(h,v){let b;return b="string"==typeof h?Vv().encode(h):h,k=function(k,W){if(k instanceof Uint8Array)return xg(k,W);if(k instanceof ArrayBuffer)return xg(new Uint8Array(k),W);if(k instanceof ReadableStream)return k.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(b),new $E(k,v);var k}(t,Pf(e));n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){!function K_(n,e,t){const s=et(n);var a;(a=(0,Se.Z)(function*(h,v,b){try{const P=yield v.getMetadata();if(yield function(xe,Qe){const Ze=et(xe),wt=lr(Qe.createTime);return Ze.persistence.runTransaction("hasNewerBundle","readonly",Mt=>Ze.$r.getBundleMetadata(Mt,Qe.id)).then(Mt=>!!Mt&&Mt.createTime.compareTo(wt)>=0)}(h.localStore,P))return yield v.close(),b._completeWith({taskState:"Success",documentsLoaded:(xe=P).totalDocuments,bytesLoaded:xe.totalBytes,totalDocuments:xe.totalDocuments,totalBytes:xe.totalBytes}),Promise.resolve(new Set);b._updateProgress(Nw(P));const k=new xE(P,h.localStore,v.serializer);let W=yield v.Oa();for(;W;){const ae=yield k.na(W);ae&&b._updateProgress(ae),W=yield v.Oa()}const J=yield k.complete();return yield zc(h,J.sa,void 0),yield function(xe,Qe){const Ze=et(xe);return Ze.persistence.runTransaction("Save bundle","readwrite",wt=>Ze.$r.saveBundleMetadata(wt,Qe))}(h.localStore,P),b._completeWith(J.progress),Promise.resolve(J.ia)}catch(P){return vi("SyncEngine",`Loading bundle failed with ${P}`),b._failWith(P),Promise.resolve(new Set)}var xe}),function c(h,v,b){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Fg(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function rI(n,e){return function qE(n,e){return n.asyncQueue.enqueue((0,Se.Z)(function*(){return function(s,a){const c=et(s);return c.persistence.runTransaction("Get named query","readonly",h=>c.$r.getNamedQuery(h,a))}(yield Ku(n),e)}))}(ii(n=yn(n,pr)),e).then(t=>t?new Li(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class nm extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yf(new ou(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fo.forKey(t,this.firestore,null)}}class PI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nm(e)}get(e){const t=Kl(e);return this._delegate.get(t).then(s=>new Xf(this._firestore,new cu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Kl(e);return s?(SI("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const c=Kl(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,s,...a),this}delete(e){const t=Kl(e);return this._delegate.delete(t),this}}class PT{constructor(e){this._delegate=e}set(e,t,s){const a=Kl(e);return s?(SI("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const c=Kl(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,s,...a),this}delete(e){const t=Kl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ql{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new wh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bh(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=ql.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let c=a.get(t);return c||(c=new ql(e,new nm(e),t),a.set(t,c)),c}}ql.INSTANCES=new WeakMap;class fo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nm(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fo(t,new fr(t._delegate,s,new nt(e)))}static forKey(e,t,s){return new fo(t,new fr(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Zl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zl(this.firestore,cy(this._delegate,e))}catch(t){throw Cs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,on.m9)(e))instanceof fr&&Qu(this._delegate,e)}set(e,t){t=SI("DocumentReference.set",t);try{return t?Ty(this._delegate,e,t):Ty(this._delegate,e)}catch(s){throw Cs(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Dy(this._delegate,e):Dy(this._delegate,e,t,...s)}catch(a){throw Cs(a,"updateDoc()","DocumentReference.update()")}}delete(){return function mA(n){return Ah(yn(n.firestore,pr),[new jd(n._key,wr.none())])}(this._delegate)}onSnapshot(...e){const t=MI(e),s=Sh(e,a=>new Xf(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return yI(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function gT(n){n=yn(n,fr);const e=yn(n.firestore,pr),t=ii(e),s=new Kc(e);return function GE(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(s=(0,Se.Z)(function*(c,h,v){try{const b=yield function(k,W){const J=et(k);return J.persistence.runTransaction("read document","readonly",ae=>J.localDocuments.getDocument(ae,W))}(c,h);b.isFoundDocument()?v.resolve(b):b.isNoDocument()?v.resolve(null):v.reject(new Be(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const P=Fl(b,`Failed to get document '${h} from cache`);v.reject(P)}}),function a(c,h,v){return s.apply(this,arguments)})(yield Ku(n),e,t);var s})),t.promise}(t,n._key).then(a=>new cu(e,s,n._key,a,new Zc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Th(n){n=yn(n,fr);const e=yn(n.firestore,pr);return ty(ii(e),n._key,{source:"server"}).then(t=>Qc(e,n,t))}(this._delegate):function Wl(n){n=yn(n,fr);const e=yn(n.firestore,pr);return ty(ii(e),n._key).then(t=>Qc(e,n,t))}(this._delegate),t.then(s=>new Xf(this.firestore,new cu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new fo(this.firestore,this._delegate.withConverter(e?ql.getInstance(this.firestore,e):null))}}function Cs(n,e,t){return n.message=n.message.replace(e,t),n}function MI(n){for(const e of n)if("object"==typeof e&&!Ry(e))return e;return{}}function Sh(n,e){var t,s;let a;return a=Ry(n[0])?n[0]:Ry(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Xf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Iy(this._delegate,e._delegate)}}class bh extends Xf{data(e){const t=this._delegate.data(e);return this._delegate._converter||function _c(n,e){n||pt()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nm(e)}where(e,t,s){try{return new Ss(this.firestore,Yu(this._delegate,function lI(n,e,t){const s=e,a=zg("where",n);return Ih._create(a,s,t)}(e,t,s)))}catch(a){throw Cs(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,Yu(this._delegate,function rT(n,e="asc"){const t=e,s=zg("orderBy",n);return Wg._create(s,t)}(e,t)))}catch(s){throw Cs(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,Yu(this._delegate,function iT(n){return Bg("limit",n),qg._create("limit",n,"F")}(e)))}catch(t){throw Cs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,Yu(this._delegate,function sT(n){return Bg("limitToLast",n),qg._create("limitToLast",n,"L")}(e)))}catch(t){throw Cs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,Yu(this._delegate,function oT(...n){return Zg._create("startAt",n,!0)}(...e)))}catch(t){throw Cs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,Yu(this._delegate,function aT(...n){return Zg._create("startAfter",n,!1)}(...e)))}catch(t){throw Cs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,Yu(this._delegate,function uT(...n){return Kg._create("endBefore",n,!1)}(...e)))}catch(t){throw Cs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,Yu(this._delegate,function cT(...n){return Kg._create("endAt",n,!0)}(...e)))}catch(t){throw Cs(t,"endAt()","Query.endAt()")}}isEqual(e){return ly(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function wy(n){n=yn(n,Li);const e=yn(n.firestore,pr),t=ii(e),s=new Kc(e);return function zw(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(s=(0,Se.Z)(function*(c,h,v){try{const b=yield Sf(c,h,!0),P=new OE(h,b.hs),k=P.ha(b.documents),W=P.applyChanges(k,!1);v.resolve(W.snapshot)}catch(b){const P=Fl(b,`Failed to execute query '${h} against cache`);v.reject(P)}}),function a(c,h,v){return s.apply(this,arguments)})(yield Ku(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Ju(e,s,n,a))}(this._delegate):"server"===e?.source?function gA(n){n=yn(n,Li);const e=yn(n.firestore,pr),t=ii(e),s=new Kc(e);return WE(t,n._query,{source:"server"}).then(a=>new Ju(e,s,n,a))}(this._delegate):function pA(n){n=yn(n,Li);const e=yn(n.firestore,pr),t=ii(e),s=new Kc(e);return Gg(n._query),WE(t,n._query).then(a=>new Ju(e,s,n,a))}(this._delegate),t.then(s=>new Py(this.firestore,new Ju(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=MI(e),s=Sh(e,a=>new Py(this.firestore,new Ju(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return yI(this._delegate,t,s)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?ql.getInstance(this.firestore,e):null))}}class xI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Py{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xI(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new bh(this._firestore,s))})}isEqual(e){return Iy(this._delegate,e._delegate)}}class Zl extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fo(this.firestore,e):null}doc(e){try{return new fo(this.firestore,void 0===e?$l(this._delegate):$l(this._delegate,e))}catch(t){throw Cs(t,"doc()","CollectionReference.doc()")}}add(e){return function Dh(n,e){const t=yn(n.firestore,pr),s=$l(n),a=Qg(n.converter,e);return Ah(t,[$s(qi(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,wr.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new fo(this.firestore,t))}isEqual(e){return Qu(this._delegate,e._delegate)}withConverter(e){return new Zl(this.firestore,this._delegate.withConverter(e?ql.getInstance(this.firestore,e):null))}}function Kl(n){return yn(n,fr)}class ep{constructor(...e){this._delegate=new au(...e)}static documentId(){return new ep(Kn.keyField().canonicalString())}isEqual(e){return(e=(0,on.m9)(e))instanceof au&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ql{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wI(){return new gy("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ql(e)}static delete(){const e=function Xg(){return new mh("deleteField")}();return e._methodName="FieldValue.delete",new Ql(e)}static arrayUnion(...e){const t=function TI(...n){return new my("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ql(t)}static arrayRemove(...e){const t=function DI(...n){return new _y("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ql(t)}static increment(e){const t=function DT(n){return new yy("increment",n)}(e);return t._methodName="FieldValue.increment",new Ql(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const NI={Firestore:RI,GeoPoint:fy,Timestamp:Zn,Blob:Yf,Transaction:PI,WriteBatch:PT,DocumentReference:fo,DocumentSnapshot:Xf,Query:Ss,QueryDocumentSnapshot:bh,QuerySnapshot:Py,CollectionReference:Zl,FieldPath:ep,FieldValue:Ql,setLogLevel:function RT(n){!function Gi(n){is.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function kI(n,e){return function xT(n,e=Ln){return new Xe.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(n,e)}function xy(n,e){return kI(n,e).pipe((0,Dn.U)(t=>({payload:t,type:"query"})))}!function MT(n){(function OI(n,e){n.INTERNAL.registerComponent(new du.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},NI)))})(n,(e,t)=>new RI(e,t,new Jf)),n.registerVersion("@firebase/firestore-compat","0.3.24")}(Lr.Z);class Ny{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:c}=ky(s,t);return new VI(a,c,this.afs)}snapshotChanges(){return function My(n,e){return kI(n,e).pipe((0,Gs.O)(void 0),go(),(0,Dn.U)(t=>{const[s,a]=t;return a.exists?s?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zt)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dn.U)(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return(0,Gt.D)(this.ref.get(e)).pipe(zt)}}function rm(n,e){return xy(n,e).pipe((0,Gs.O)(void 0),go(),(0,Dn.U)(t=>{const[s,a]=t,c=a.payload.docChanges(),h=c.map(v=>({type:v.type,payload:v}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((v,b)=>{const P=c.find(W=>W.doc.ref.isEqual(v.ref)),k=s?.payload.docs.find(W=>W.ref.isEqual(v.ref));P&&JSON.stringify(P.doc.metadata)===JSON.stringify(v.metadata)||!P&&k&&JSON.stringify(k.metadata)===JSON.stringify(v.metadata)||h.push({type:"modified",payload:{oldIndex:b,newIndex:b,type:"modified",doc:v}})}),h}))}function FI(n,e,t){return rm(n,t).pipe((0,mo.R)((s,a)=>function NT(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function OT(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Oy(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Oy(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Oy(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(c=>c.payload),e),[]),(0,qo.x)(),(0,Dn.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Oy(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function LI(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class VI{ref;query;afs;constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=rm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Dn.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Gs.O)(void 0),go(),(0,tt.h)(([s,a])=>a.length>0||!s),(0,Dn.U)(([,s])=>s),zt)}auditTrail(e){return this.stateChanges(e).pipe((0,mo.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=LI(e);return FI(this.query,t,this.afs.schedulers.outsideAngular).pipe(zt)}valueChanges(e={}){return xy(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dn.U)(t=>t.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),zt)}get(e){return(0,Gt.D)(this.query.get(e)).pipe(zt)}add(e){return this.ref.add(e)}doc(e){return new Ny(this.ref.doc(e),this.afs)}}class kT{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?rm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dn.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,tt.h)(t=>t.length>0),zt):rm(this.query,this.afs.schedulers.outsideAngular).pipe(zt)}auditTrail(e){return this.stateChanges(e).pipe((0,mo.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=LI(e);return FI(this.query,t,this.afs.schedulers.outsideAngular).pipe(zt)}valueChanges(e={}){return xy(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dn.U)(s=>s.payload.docs.map(a=>e.idField?{[e.idField]:a.id,...a.data()}:a.data())),zt)}get(e){return(0,Gt.D)(this.query.get(e)).pipe(zt)}}const UI=new D.OlP("angularfire2.enableFirestorePersistence"),BI=new D.OlP("angularfire2.firestore.persistenceSettings"),FT=new D.OlP("angularfire2.firestore.settings"),LT=new D.OlP("angularfire2.firestore.use-emulator");function ky(n,e=(t=>t)){return{query:e(n),ref:n}}let VT=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,s,a,c,h,v,b,P,k,W,J,ae,xe,Qe,Ze,wt,Mt){this.schedulers=b;const ct=Di(t,v,s),Ft=k;W&&Go(ct,v,J,xe,Qe,Ze,ae,wt),[this.firestore,this.persistenceEnabled$]=$(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const hn=v.runOutsideAngular(()=>ct.firestore());if(c&&hn.settings(c),Ft&&hn.useEmulator(...Ft),a&&!(0,gr.PM)(h)){const zn=()=>{try{return(0,Gt.D)(hn.enablePersistence(P||void 0).then(()=>!0,()=>!1))}catch(Wr){return typeof console<"u"&&console.warn(Wr),(0,Ot.of)(!1)}};return[hn,v.runOutsideAngular(zn)]}return[hn,(0,Ot.of)(!1)]},[c,Ft,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=ky(a,s),v=this.schedulers.ngZone.run(()=>c);return new VI(v,h,this)}collectionGroup(t,s){const a=s||(h=>h),c=this.firestore.collectionGroup(t);return new kT(a(c),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new Ny(a,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||n)(D.LFG(Ur),D.LFG(Br,8),D.LFG(UI,8),D.LFG(FT,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(Vn),D.LFG(BI,8),D.LFG(LT,8),D.LFG(hs,8),D.LFG(tn,8),D.LFG(Wn,8),D.LFG(qn,8),D.LFG(Yn,8),D.LFG(Ui,8),D.LFG(po,8),D.LFG(Dt,8))};static \u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();const UT=[[["","header",""]],"*",[["","footer",""]]],BT=["[header]","*","[footer]"];let Fy=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-portal-layout"]],ngContentSelectors:BT,decls:7,vars:0,consts:[[1,"portal-layout"],[1,"portal-layout__head"],[1,"portal-layout__body"],[1,"portal-layout__footer"]],template:function(s,a){1&s&&(D.F$t(UT),D.TgZ(0,"div",0)(1,"div",1),D.Hsn(2),D.qZA(),D.TgZ(3,"main",2),D.Hsn(4,1),D.qZA(),D.TgZ(5,"footer",3),D.Hsn(6,2),D.qZA()())}})}return n})(),Ly=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-header"]],decls:2,vars:0,template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1,"header works!"),D.qZA())}})}return n})(),jI=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-footer"]],decls:2,vars:0,template:function(s,a){1&s&&(D.TgZ(0,"p"),D._uU(1,"footer works!"),D.qZA())}})}return n})(),Vy=(()=>{class n{constructor(t){this.title="open-lib"}static#e=this.\u0275fac=function(s){return new(s||n)(D.Y36(VT))};static#t=this.\u0275cmp=D.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[["header",""],["footer",""]],template:function(s,a){1&s&&(D.TgZ(0,"app-portal-layout"),D.ynx(1,0),D._UZ(2,"app-header"),D.BQk(),D.ynx(3),D._UZ(4,"router-outlet"),D.BQk(),D.ynx(5,1),D._UZ(6,"app-footer"),D.BQk(),D.qZA())},dependencies:[ee.lC,Fy,Ly,jI]})}return n})();var Uy=V(5619),im=V(4829),By=V(2737),$I=V(2420),HI=V(4564);class $T extends Error{constructor(e,t){super(function qI(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Wy(n,e){const t=!e?.manualCleanup;t&&!e?.injector&&(0,D.gHi)(Wy);const s=t?e?.injector?.get(D.ktI)??(0,D.f3M)(D.ktI):null;let a;a=(0,D.tdS)(e?.requireSync?{kind:0}:{kind:1,value:e?.initialValue});const c=n.subscribe({next:h=>a.set({kind:1,value:h}),error:h=>a.set({kind:2,error:h})});return s?.onDestroy(c.unsubscribe.bind(c)),(0,D.Flj)(()=>{const h=a();switch(h.kind){case 1:return h.value;case 2:throw h.error;case 0:throw new $T(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}globalThis;const Ph={};function JI(n,e){return Object.defineProperty(e,"type",{value:n,writable:!1})}const Mh="@ngrx/store/init";let Xl=(()=>{class n extends Uy.X{constructor(){super({type:Mh})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac})}return n})();const Zy=[Xl],$o=new D.OlP("@ngrx/store Internal Root Guard"),e0=new D.OlP("@ngrx/store Internal Initial State"),tp=new D.OlP("@ngrx/store Initial State"),t0=new D.OlP("@ngrx/store Reducer Factory"),tD=new D.OlP("@ngrx/store Internal Reducer Factory Provider"),n0=new D.OlP("@ngrx/store Initial Reducers"),r0=new D.OlP("@ngrx/store Internal Initial Reducers"),xh=new D.OlP("@ngrx/store Store Features"),s0=new D.OlP("@ngrx/store Internal Store Reducers"),Ky=new D.OlP("@ngrx/store Internal Feature Reducers"),o0=new D.OlP("@ngrx/store Internal Feature Configs"),Nh=new D.OlP("@ngrx/store Internal Store Features"),Qy=new D.OlP("@ngrx/store Internal Feature Reducers Token"),Yy=new D.OlP("@ngrx/store Feature Reducers"),Jy=new D.OlP("@ngrx/store User Provided Meta Reducers"),ed=new D.OlP("@ngrx/store Meta Reducers"),a0=new D.OlP("@ngrx/store Internal Resolved Meta Reducers"),u0=new D.OlP("@ngrx/store User Runtime Checks Config"),Xy=new D.OlP("@ngrx/store Internal User Runtime Checks Config"),np=new D.OlP("@ngrx/store Internal Runtime Checks"),rp=new D.OlP("@ngrx/store Check if Action types are unique");function ev(n,e={}){const t=Object.keys(n),s={};for(let c=0;c<t.length;c++){const h=t[c];"function"==typeof n[h]&&(s[h]=n[h])}const a=Object.keys(s);return function(h,v){h=void 0===h?e:h;let b=!1;const P={};for(let k=0;k<a.length;k++){const W=a[k],ae=h[W],xe=(0,s[W])(ae,v);P[W]=xe,b=b||xe!==ae}return b?P:h}}function tv(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((a,c)=>c(a),t(e))}}function nv(n,e){return Array.isArray(e)&&e.length>0&&(n=tv.apply(null,[...e,n])),(t,s)=>{const a=n(t);return(c,h)=>a(c=void 0===c?s:c,h)}}new D.OlP("@ngrx/store Root Store Provider"),new D.OlP("@ngrx/store Feature State Provider");class sp extends Xe.y{}class c0 extends Xl{}let Oh=(()=>{class n extends Uy.X{get currentReducers(){return this.reducers}constructor(t,s,a,c){super(c(a,s)),this.dispatcher=t,this.initialState=s,this.reducers=a,this.reducerFactory=c}addFeature(t){this.addFeatures([t])}addFeatures(t){const s=t.reduce((a,{reducers:c,reducerFactory:h,metaReducers:v,initialState:b,key:P})=>{const k="function"==typeof c?function rv(n){const e=Array.isArray(n)&&n.length>0?tv(...n):t=>t;return(t,s)=>(t=e(t),(a,c)=>t(a=void 0===a?s:a,c))}(v)(c,b):nv(h,v)(c,b);return a[P]=k,a},{});this.addReducers(s)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(s=>s.key))}addReducer(t,s){this.addReducers({[t]:s})}addReducers(t){this.reducers={...this.reducers,...t},this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(s=>{this.reducers=function nD(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,s)=>Object.assign(t,{[s]:n[s]}),{})}(this.reducers,s)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(s){return new(s||n)(D.LFG(c0),D.LFG(tp),D.LFG(n0),D.LFG(t0))};static#t=this.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac})}return n})();const rD=[Oh,{provide:sp,useExisting:Oh},{provide:c0,useExisting:Xl}];let lm=(()=>{class n extends Fe.x{ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(){let t;return function(a){return(t||(t=D.n5z(n)))(a||n)}}();static#t=this.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac})}return n})();const iv=[lm];class dm extends Xe.y{}let sv=(()=>{class n extends Uy.X{static#e=this.INIT=Mh;constructor(t,s,a,c){super(c);const v=t.pipe((0,rr.Q)(kt)).pipe(function Yl(...n){const e=(0,HI.jO)(n);return(0,Ai.e)((t,s)=>{const a=n.length,c=new Array(a);let h=n.map(()=>!1),v=!1;for(let b=0;b<a;b++)(0,im.Xf)(n[b]).subscribe((0,an.x)(s,P=>{c[b]=P,!v&&!h[b]&&(h[b]=!0,(v=h.every(By.y))&&(h=null))},$I.Z));t.subscribe((0,an.x)(s,b=>{if(v){const P=[b,...c];s.next(e?e(...P):P)}}))})}(s)),P=v.pipe((0,mo.R)(ov,{state:c}));this.stateSubscription=P.subscribe(({state:k,action:W})=>{this.next(k),a.next(W)}),this.state=Wy(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static#t=this.\u0275fac=function(s){return new(s||n)(D.LFG(Xl),D.LFG(sp),D.LFG(lm),D.LFG(tp))};static#n=this.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac})}return n})();function ov(n={state:void 0},[e,t]){const{state:s}=n;return{state:t(s,e),action:e}}const av=[sv,{provide:dm,useExisting:sv}];let kh=(()=>{class n extends Xe.y{constructor(t,s,a){super(),this.actionsObserver=s,this.reducerManager=a,this.source=t,this.state=t.state}select(t,...s){return sD.call(null,t,...s)(this)}selectSignal(t,s){return(0,D.Flj)(()=>t(this.state()),{equal:s?.equal||((a,c)=>a===c)})}lift(t){const s=new n(this,this.actionsObserver,this.reducerManager);return s.operator=t,s}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,s){this.reducerManager.addReducer(t,s)}removeReducer(t){this.reducerManager.removeReducer(t)}static#e=this.\u0275fac=function(s){return new(s||n)(D.LFG(dm),D.LFG(Xl),D.LFG(Oh))};static#t=this.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac})}return n})();const iD=[kh];function sD(n,e,...t){return function(a){let c;if("string"==typeof n){const h=[e,...t].filter(Boolean);c=a.pipe(function zI(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,Dn.U)(t=>{let s=t;for(let a=0;a<e;a++){const c=s?.[n[a]];if(!(typeof c<"u"))return;s=c}return s})}(n,...h))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);c=a.pipe((0,Dn.U)(h=>n(h,e)))}return c.pipe((0,qo.x)())}}const uv="https://ngrx.io/guide/store/configuration/runtime-checks";function cv(n){return void 0===n}function hm(n){return null===n}function lv(n){return Array.isArray(n)}function f0(n){return"object"==typeof n&&null!==n}function hv(n){return"function"==typeof n}function dD(n){return n instanceof D.OlP?(0,D.f3M)(n):n}function hD(n,e){return e.map((t,s)=>{if(n[s]instanceof D.OlP){const a=(0,D.f3M)(n[s]);return{key:t.key,reducerFactory:a.reducerFactory?a.reducerFactory:ev,metaReducers:a.metaReducers?a.metaReducers:[],initialState:a.initialState}}return t})}function fD(n){return n.map(e=>e instanceof D.OlP?(0,D.f3M)(e):e)}function up(n){return"function"==typeof n?n():n}function y0(n,e){return n.concat(e)}function pD(){if((0,D.f3M)(kh,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function cp(n){Object.freeze(n);const e=hv(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function aD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const s=n[t];(f0(s)||hv(s))&&!Object.isFrozen(s)&&cp(s)}}),n}function mm(n,e=[]){return(cv(n)||hm(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((s,a)=>{if(s)return s;const c=n[a];return function g0(n){return hv(n)&&n.hasOwnProperty("\u0275cmp")}(c)?s:!(cv(c)||hm(c)||function h0(n){return"number"==typeof n}(c)||function d0(n){return"boolean"==typeof n}(c)||function oD(n){return"string"==typeof n}(c)||lv(c))&&(function dv(n){if(!function p0(n){return f0(n)&&!lv(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(c)?mm(c,[...e,a]):{path:[...e,a],value:c})},!1)}function v0(n,e){if(!1===n)return;const t=n.path.join("."),s=new Error(`Detected unserializable ${e} at "${t}". ${uv}#strict${e}serializability`);throw s.value=n.value,s.unserializablePath=t,s}function Fh(n){return(0,D.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...n}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function gD({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function HA(n,e){return function(t,s){e.action(s)&&v0(mm(s),"action");const a=n(t,s);return e.state()&&v0(mm(a),"state"),a}}(t,{action:s=>n&&!lp(s),state:()=>e}):t}function I0({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function gm(n,e){return function(t,s){const a=e.action(s)?cp(s):s,c=n(t,a);return e.state()?cp(c):c}}(t,{action:s=>n&&!lp(s),state:()=>e}):t}function lp(n){return n.type.startsWith("@ngrx")}function zA({strictActionWithinNgZone:n}){return e=>n?function E0(n,e){return function(t,s){if(e.action(s)&&!D.R0b.isInAngularZone())throw new Error(`Action '${s.type}' running outside NgZone. ${uv}#strictactionwithinngzone`);return n(t,s)}}(e,{action:t=>n&&!lp(t)}):e}function mD(n){return[{provide:Xy,useValue:n},{provide:u0,useFactory:yD,deps:[Xy]},{provide:np,deps:[u0],useFactory:Fh},{provide:ed,multi:!0,deps:[np],useFactory:I0},{provide:ed,multi:!0,deps:[np],useFactory:gD},{provide:ed,multi:!0,deps:[np],useFactory:zA}]}function _D(){return[{provide:rp,multi:!0,deps:[np],useFactory:vD}]}function yD(n){return n}function vD(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(Ph).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${uv}#strictactiontypeuniqueness`)}function pv(n={},e={}){return[{provide:$o,useFactory:pD},{provide:e0,useValue:e.initialState},{provide:tp,useFactory:up,deps:[e0]},{provide:r0,useValue:n},{provide:s0,useExisting:n instanceof D.OlP?n:r0},{provide:n0,deps:[r0,[new D.tBr(s0)]],useFactory:dD},{provide:Jy,useValue:e.metaReducers?e.metaReducers:[]},{provide:a0,deps:[ed,Jy],useFactory:y0},{provide:tD,useValue:e.reducerFactory?e.reducerFactory:ev},{provide:t0,deps:[tD,a0],useFactory:nv},Zy,rD,iv,av,iD,mD(e.runtimeChecks),_D()]}function D0(n,e,t={}){return[{provide:o0,multi:!0,useValue:n instanceof Object?{}:t},{provide:xh,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:t instanceof D.OlP||!t.reducerFactory?ev:t.reducerFactory,metaReducers:t instanceof D.OlP||!t.metaReducers?[]:t.metaReducers,initialState:t instanceof D.OlP||!t.initialState?void 0:t.initialState}},{provide:Nh,deps:[o0,xh],useFactory:hD},{provide:Ky,multi:!0,useValue:n instanceof Object?n.reducer:e},{provide:Qy,multi:!0,useExisting:e instanceof D.OlP?e:Ky},{provide:Yy,multi:!0,deps:[Ky,[new D.tBr(Qy)]],useFactory:fD},_D()]}let dp=(()=>{class n{constructor(t,s,a,c,h,v){}static#e=this.\u0275fac=function(s){return new(s||n)(D.LFG(Xl),D.LFG(sp),D.LFG(lm),D.LFG(kh),D.LFG($o,8),D.LFG(rp,8))};static#t=this.\u0275mod=D.oAB({type:n});static#n=this.\u0275inj=D.cJS({})}return n})(),gv=(()=>{class n{constructor(t,s,a,c,h){this.features=t,this.featureReducers=s,this.reducerManager=a;const v=t.map((b,P)=>{const W=s.shift()[P];return{...b,reducers:W,initialState:up(b.initialState)}});a.addFeatures(v)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}static#e=this.\u0275fac=function(s){return new(s||n)(D.LFG(Nh),D.LFG(Yy),D.LFG(Oh),D.LFG(dp),D.LFG(rp,8))};static#t=this.\u0275mod=D.oAB({type:n});static#n=this.\u0275inj=D.cJS({})}return n})(),A0=(()=>{class n{static forRoot(t,s){return{ngModule:dp,providers:[...pv(t,s)]}}static forFeature(t,s,a={}){return{ngModule:gv,providers:[...D0(t,s,a)]}}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=D.oAB({type:n});static#n=this.\u0275inj=D.cJS({})}return n})();var AD=V(6232),CD=V(8504);class lu{constructor(e,t,s){this.kind=e,this.value=t,this.error=s,this.hasValue="N"===e}observe(e){return SD(this,e)}do(e,t,s){const{kind:a,value:c,error:h}=this;return"N"===a?e?.(c):"E"===a?t?.(h):s?.()}accept(e,t,s){var a;return(0,ke.m)(null===(a=e)||void 0===a?void 0:a.next)?this.observe(e):this.do(e,t,s)}toObservable(){const{kind:e,value:t,error:s}=this,a="N"===e?(0,Ot.of)(t):"E"===e?(0,CD._)(()=>s):"C"===e?AD.E:0;if(!a)throw new TypeError(`Unexpected notification kind ${e}`);return a}static createNext(e){return new lu("N",e)}static createError(e){return new lu("E",void 0,e)}static createComplete(){return lu.completeNotification}}function SD(n,e){var t,s,a;const{kind:c,value:h,error:v}=n;if("string"!=typeof c)throw new TypeError('Invalid notification, missing "kind"');"N"===c?null===(t=e.next)||void 0===t||t.call(e,h):"E"===c?null===(s=e.error)||void 0===s||s.call(e,v):null===(a=e.complete)||void 0===a||a.call(e)}lu.completeNotification=new lu("C");var ZA=V(6306);function bD(n,e,t,s){return(0,Ai.e)((a,c)=>{let h;e&&"function"!=typeof e?({duration:t,element:h,connector:s}=e):h=e;const v=new Map,b=xe=>{v.forEach(xe),xe(c)},P=xe=>b(Qe=>Qe.error(xe));let k=0,W=!1;const J=new an.Q(c,xe=>{try{const Qe=n(xe);let Ze=v.get(Qe);if(!Ze){v.set(Qe,Ze=s?s():new Fe.x);const wt=function ae(xe,Qe){const Ze=new Xe.y(wt=>{k++;const Mt=Qe.subscribe(wt);return()=>{Mt.unsubscribe(),0==--k&&W&&J.unsubscribe()}});return Ze.key=xe,Ze}(Qe,Ze);if(c.next(wt),t){const Mt=(0,an.x)(Ze,()=>{Ze.complete(),Mt?.unsubscribe()},void 0,void 0,()=>v.delete(Qe));J.add((0,im.Xf)(t(wt)).subscribe(Mt))}}Ze.next(h?h(xe):xe)}catch(Qe){P(Qe)}},()=>b(xe=>xe.complete()),P,()=>v.clear(),()=>(W=!0,0===k));a.subscribe(J)})}var RD=V(1631);function PD(n,e){return e?t=>t.pipe(PD((s,a)=>(0,im.Xf)(n(s,a)).pipe((0,Dn.U)((c,h)=>e(s,c,a,h))))):(0,Ai.e)((t,s)=>{let a=0,c=null,h=!1;t.subscribe((0,an.x)(s,v=>{c||(c=(0,an.x)(s,void 0,()=>{c=null,h&&s.complete()}),(0,im.Xf)(n(v,a++)).subscribe(c))},()=>{h=!0,!c&&s.complete()}))})}var QA=V(8180);const hp="__@ngrx/effects_create__";function R0(n){return Object.getPrototypeOf(n)}function P0(n){return"function"==typeof n}function mv(n){return n.filter(P0)}function MD(n,e,t){const s=R0(n),c=s&&"Object"!==s.constructor.name?s.constructor.name:null,h=function fp(n){return function b0(n){return Object.getOwnPropertyNames(n).filter(s=>!(!n[s]||!n[s].hasOwnProperty(hp))&&n[s][hp].hasOwnProperty("dispatch")).map(s=>({propertyName:s,...n[s][hp]}))}(n)}(n).map(({propertyName:v,dispatch:b,useEffectsErrorHandler:P})=>{const k="function"==typeof n[v]?n[v]():n[v],W=P?t(k,e):k;return!1===b?W.pipe(function C0(){return(0,Ai.e)((n,e)=>{n.subscribe((0,an.x)(e,$I.Z))})}()):W.pipe(function qA(){return(0,Ai.e)((n,e)=>{n.subscribe((0,an.x)(e,t=>{e.next(lu.createNext(t))},()=>{e.next(lu.createComplete()),e.complete()},t=>{e.next(lu.createError(t)),e.complete()}))})}()).pipe((0,Dn.U)(ae=>({effect:n[v],notification:ae,propertyName:v,sourceName:c,sourceInstance:n})))});return(0,Rt.T)(...h)}function x0(n,e,t=10){return n.pipe((0,ZA.K)(s=>(e&&e.handleError(s),t<=1?n:x0(n,e,t-1))))}const Lh=new D.OlP("@ngrx/effects Internal Root Guard"),td=new D.OlP("@ngrx/effects User Provided Effects"),_v=new D.OlP("@ngrx/effects Internal Root Effects"),N0=new D.OlP("@ngrx/effects Internal Root Effects Instances"),O0=new D.OlP("@ngrx/effects Internal Feature Effects"),k0=new D.OlP("@ngrx/effects Internal Feature Effects Instance Groups"),ND=new D.OlP("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>x0}),F0="@ngrx/effects/init";!function qy(n,e){if(Ph[n]=(Ph[n]||0)+1,"function"==typeof e)return JI(n,(...s)=>({...e(...s),type:n}));switch(e?e._as:"empty"){case"empty":return JI(n,()=>({type:n}));case"props":return JI(n,s=>({...s,type:n}));default:throw new Error("Unexpected config.")}}(F0);function L0(n){return pp(n,"ngrxOnInitEffects")}function pp(n,e){return n&&e in n&&"function"==typeof n[e]}let vv=(()=>{class n extends Fe.x{constructor(t,s){super(),this.errorHandler=t,this.effectsErrorHandler=s}addEffects(t){this.next(t)}toActions(){return this.pipe(bD(t=>function XA(n){return!!n.constructor&&"Object"!==n.constructor.name&&"Function"!==n.constructor.name}(t)?R0(t):t),(0,RD.z)(t=>t.pipe(bD(HD))),(0,RD.z)(t=>{const s=t.pipe(PD(c=>function V0(n,e){return t=>{const s=MD(t,n,e);return function jD(n){return pp(n,"ngrxOnRunEffects")}(t)?t.ngrxOnRunEffects(s):s}}(this.errorHandler,this.effectsErrorHandler)(c)),(0,Dn.U)(c=>(function OD(n,e){if("N"===n.notification.kind){const t=n.notification.value;!function kD(n){return"function"!=typeof n&&n&&n.type&&"string"==typeof n.type}(t)&&e.handleError(new Error(`Effect ${function FD({propertyName:n,sourceInstance:e,sourceName:t}){const s="function"==typeof e[n];return t?`"${t}.${String(n)}${s?"()":""}"`:`"${String(n)}()"`}(n)} dispatched an invalid action: ${function LD(n){try{return JSON.stringify(n)}catch{return n}}(t)}`))}}(c,this.errorHandler),c.notification)),(0,tt.h)(c=>"N"===c.kind&&null!=c.value),function KA(){return(0,Ai.e)((n,e)=>{n.subscribe((0,an.x)(e,t=>SD(t,e)))})}()),a=t.pipe((0,QA.q)(1),(0,tt.h)(L0),(0,Dn.U)(c=>c.ngrxOnInitEffects()));return(0,Rt.T)(s,a)}))}static#e=this.\u0275fac=function(s){return new(s||n)(D.LFG(D.qLn),D.LFG(ND))};static#t=this.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HD(n){return function UD(n){return pp(n,"ngrxOnIdentifyEffects")}(n)?n.ngrxOnIdentifyEffects():""}let _m=(()=>{class n{get isStarted(){return!!this.effectsSubscription}constructor(t,s){this.effectSources=t,this.store=s,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static#e=this.\u0275fac=function(s){return new(s||n)(D.LFG(vv),D.LFG(kh))};static#t=this.\u0275prov=D.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zD=(()=>{class n{constructor(t,s,a,c,h,v,b){this.sources=t,s.start();for(const P of c)t.addEffects(P);a.dispatch({type:F0})}addEffects(t){this.sources.addEffects(t)}static#e=this.\u0275fac=function(s){return new(s||n)(D.LFG(vv),D.LFG(_m),D.LFG(kh),D.LFG(N0),D.LFG(dp,8),D.LFG(gv,8),D.LFG(Lh,8))};static#t=this.\u0275mod=D.oAB({type:n});static#n=this.\u0275inj=D.cJS({})}return n})(),zs=(()=>{class n{constructor(t,s,a,c){const h=s.flat();for(const v of h)t.addEffects(v)}static#e=this.\u0275fac=function(s){return new(s||n)(D.LFG(zD),D.LFG(k0),D.LFG(dp,8),D.LFG(gv,8))};static#t=this.\u0275mod=D.oAB({type:n});static#n=this.\u0275inj=D.cJS({})}return n})(),U0=(()=>{class n{static forFeature(...t){const s=t.flat(),a=mv(s);return{ngModule:zs,providers:[a,{provide:O0,multi:!0,useValue:s},{provide:td,multi:!0,useValue:[]},{provide:k0,multi:!0,useFactory:B0,deps:[O0,td]}]}}static forRoot(...t){const s=t.flat(),a=mv(s);return{ngModule:zD,providers:[a,{provide:_v,useValue:[s]},{provide:Lh,useFactory:tC},{provide:td,multi:!0,useValue:[]},{provide:N0,useFactory:B0,deps:[_v,td]}]}}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=D.oAB({type:n});static#n=this.\u0275inj=D.cJS({})}return n})();function B0(n,e){const t=[];for(const s of n)t.push(...s);for(const s of e)t.push(...s);return t.map(s=>function M0(n){return n instanceof D.OlP||P0(n)}(s)?(0,D.f3M)(s):s)}function tC(){const n=(0,D.f3M)(_m,{optional:!0,skipSelf:!0}),e=(0,D.f3M)(_v,{self:!0});if((1!==e.length||0!==e[0].length)&&n)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}const GD_firebase={apiKey:"AIzaSyDRuj9I1xrkcQy7PTWVtgq30VodzD0Ht-U",authDomain:"angular-demo-firebase-461e8.firebaseapp.com",projectId:"angular-demo-firebase-461e8",storageBucket:"angular-demo-firebase-461e8.appspot.com",messagingSenderId:"823612893482",appId:"1:823612893482:web:57ccd891a4342a377dd653",measurementId:"G-G7N7CGKH30"};let WD=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=D.oAB({type:n,bootstrap:[Vy]});static#n=this.\u0275inj=D.cJS({providers:[{provide:Oe,useClass:K}],imports:[w.b2,Fr,A0.forRoot({},{}),U0.forRoot([]),j.initializeApp(GD_firebase)]})}return n})();w.q6().bootstrapModule(WD).catch(n=>console.error(n))},5619:(Et,Ce,V)=>{V.d(Ce,{X:()=>ee});var w=V(8645);class ee extends w.x{constructor(oe){super(),this._value=oe}get value(){return this.getValue()}_subscribe(oe){const fe=super._subscribe(oe);return!fe.closed&&oe.next(this._value),fe}getValue(){const{hasError:oe,thrownError:fe,_value:se}=this;if(oe)throw fe;return this._throwIfClosed(),se}next(oe){super.next(this._value=oe)}}},5592:(Et,Ce,V)=>{V.d(Ce,{y:()=>je});var w=V(305),ee=V(7394),D=V(4850),oe=V(8407),fe=V(2653),se=V(4674),Ie=V(1441);let je=(()=>{class ie{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const He=new ie;return He.source=this,He.operator=Oe,He}subscribe(Oe,He,$e){const rt=function Y(ie){return ie&&ie instanceof w.Lv||function K(ie){return ie&&(0,se.m)(ie.next)&&(0,se.m)(ie.error)&&(0,se.m)(ie.complete)}(ie)&&(0,ee.Nn)(ie)}(Oe)?Oe:new w.Hp(Oe,He,$e);return(0,Ie.x)(()=>{const{operator:lt,source:qt}=this;rt.add(lt?lt.call(rt,qt):qt?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(He){Oe.error(He)}}forEach(Oe,He){return new(He=De(He))(($e,rt)=>{const lt=new w.Hp({next:qt=>{try{Oe(qt)}catch(fn){rt(fn),lt.unsubscribe()}},error:rt,complete:$e});this.subscribe(lt)})}_subscribe(Oe){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(Oe)}[D.L](){return this}pipe(...Oe){return(0,oe.U)(Oe)(this)}toPromise(Oe){return new(Oe=De(Oe))((He,$e)=>{let rt;this.subscribe(lt=>rt=lt,lt=>$e(lt),()=>He(rt))})}}return ie.create=qe=>new ie(qe),ie})();function De(ie){var qe;return null!==(qe=ie??fe.config.Promise)&&void 0!==qe?qe:Promise}},8645:(Et,Ce,V)=>{V.d(Ce,{x:()=>Ie});var w=V(5592),ee=V(7394);const oe=(0,V(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=V(9039),se=V(1441);let Ie=(()=>{class De extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const ie=new je(this,this);return ie.operator=Y,ie}_throwIfClosed(){if(this.closed)throw new oe}next(Y){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(Y)}})}error(Y){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:ie}=this;for(;ie.length;)ie.shift().error(Y)}})}complete(){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:ie,isStopped:qe,observers:Oe}=this;return ie||qe?ee.Lc:(this.currentObservers=null,Oe.push(Y),new ee.w0(()=>{this.currentObservers=null,(0,fe.P)(Oe,Y)}))}_checkFinalizedStatuses(Y){const{hasError:ie,thrownError:qe,isStopped:Oe}=this;ie?Y.error(qe):Oe&&Y.complete()}asObservable(){const Y=new w.y;return Y.source=this,Y}}return De.create=(K,Y)=>new je(K,Y),De})();class je extends Ie{constructor(K,Y){super(),this.destination=K,this.source=Y}next(K){var Y,ie;null===(ie=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===ie||ie.call(Y,K)}error(K){var Y,ie;null===(ie=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===ie||ie.call(Y,K)}complete(){var K,Y;null===(Y=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===Y||Y.call(K)}_subscribe(K){var Y,ie;return null!==(ie=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(K))&&void 0!==ie?ie:ee.Lc}}},305:(Et,Ce,V)=>{V.d(Ce,{Hp:()=>$e,Lv:()=>ie});var w=V(4674),ee=V(7394),D=V(2653),oe=V(3894),fe=V(2420);const se=De("C",void 0,void 0);function De(ge,Ne,pe){return{kind:ge,value:Ne,error:pe}}var K=V(7599),Y=V(1441);class ie extends ee.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,ee.Nn)(Ne)&&Ne.add(this)):this.destination=fn}static create(Ne,pe,Ke){return new $e(Ne,pe,Ke)}next(Ne){this.isStopped?qt(function je(ge){return De("N",ge,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?qt(function Ie(ge){return De("E",void 0,ge)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?qt(se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Oe(ge,Ne){return qe.call(ge,Ne)}class He{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:pe}=this;if(pe.next)try{pe.next(Ne)}catch(Ke){rt(Ke)}}error(Ne){const{partialObserver:pe}=this;if(pe.error)try{pe.error(Ne)}catch(Ke){rt(Ke)}else rt(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(pe){rt(pe)}}}class $e extends ie{constructor(Ne,pe,Ke){let Je;if(super(),(0,w.m)(Ne)||!Ne)Je={next:Ne??void 0,error:pe??void 0,complete:Ke??void 0};else{let it;this&&D.config.useDeprecatedNextContext?(it=Object.create(Ne),it.unsubscribe=()=>this.unsubscribe(),Je={next:Ne.next&&Oe(Ne.next,it),error:Ne.error&&Oe(Ne.error,it),complete:Ne.complete&&Oe(Ne.complete,it)}):Je=Ne}this.destination=new He(Je)}}function rt(ge){D.config.useDeprecatedSynchronousErrorHandling?(0,Y.O)(ge):(0,oe.h)(ge)}function qt(ge,Ne){const{onStoppedNotification:pe}=D.config;pe&&K.z.setTimeout(()=>pe(ge,Ne))}const fn={closed:!0,next:fe.Z,error:function lt(ge){throw ge},complete:fe.Z}},7394:(Et,Ce,V)=>{V.d(Ce,{Lc:()=>se,w0:()=>fe,Nn:()=>Ie});var w=V(4674);const D=(0,V(2306).d)(De=>function(Y){De(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((ie,qe)=>`${qe+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var oe=V(9039);class fe{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const Oe of Y)Oe.remove(this);else Y.remove(this);const{initialTeardown:ie}=this;if((0,w.m)(ie))try{ie()}catch(Oe){K=Oe instanceof D?Oe.errors:[Oe]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Oe of qe)try{je(Oe)}catch(He){K=K??[],He instanceof D?K=[...K,...He.errors]:K.push(He)}}if(K)throw new D(K)}}add(K){var Y;if(K&&K!==this)if(this.closed)je(K);else{if(K instanceof fe){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(Y=this._finalizers)&&void 0!==Y?Y:[]).push(K)}}_hasParent(K){const{_parentage:Y}=this;return Y===K||Array.isArray(Y)&&Y.includes(K)}_addParent(K){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(K),Y):Y?[Y,K]:K}_removeParent(K){const{_parentage:Y}=this;Y===K?this._parentage=null:Array.isArray(Y)&&(0,oe.P)(Y,K)}remove(K){const{_finalizers:Y}=this;Y&&(0,oe.P)(Y,K),K instanceof fe&&K._removeParent(this)}}fe.EMPTY=(()=>{const De=new fe;return De.closed=!0,De})();const se=fe.EMPTY;function Ie(De){return De instanceof fe||De&&"closed"in De&&(0,w.m)(De.remove)&&(0,w.m)(De.add)&&(0,w.m)(De.unsubscribe)}function je(De){(0,w.m)(De)?De():De.unsubscribe()}},2653:(Et,Ce,V)=>{V.d(Ce,{config:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(Et,Ce,V)=>{V.d(Ce,{z:()=>fe});var w=V(7537),D=V(4564),oe=V(2459);function fe(...se){return function ee(){return(0,w.J)(1)}()((0,oe.D)(se,(0,D.yG)(se)))}},6232:(Et,Ce,V)=>{V.d(Ce,{E:()=>ee});const ee=new(V(5592).y)(fe=>fe.complete())},2459:(Et,Ce,V)=>{V.d(Ce,{D:()=>Ne});var w=V(4829),ee=V(3093),D=V(5137),se=V(5592),je=V(4971),De=V(4674),K=V(7103);function ie(pe,Ke){if(!pe)throw new Error("Iterable cannot be null");return new se.y(Je=>{(0,K.f)(Je,Ke,()=>{const it=pe[Symbol.asyncIterator]();(0,K.f)(Je,Ke,()=>{it.next().then(Ee=>{Ee.done?Je.complete():Je.next(Ee.value)})},0,!0)})})}var qe=V(8382),Oe=V(4026),He=V(4266),$e=V(3664),rt=V(5726),lt=V(9853),qt=V(541);function Ne(pe,Ke){return Ke?function ge(pe,Ke){if(null!=pe){if((0,qe.c)(pe))return function oe(pe,Ke){return(0,w.Xf)(pe).pipe((0,D.R)(Ke),(0,ee.Q)(Ke))}(pe,Ke);if((0,He.z)(pe))return function Ie(pe,Ke){return new se.y(Je=>{let it=0;return Ke.schedule(function(){it===pe.length?Je.complete():(Je.next(pe[it++]),Je.closed||this.schedule())})})}(pe,Ke);if((0,Oe.t)(pe))return function fe(pe,Ke){return(0,w.Xf)(pe).pipe((0,D.R)(Ke),(0,ee.Q)(Ke))}(pe,Ke);if((0,rt.D)(pe))return ie(pe,Ke);if((0,$e.T)(pe))return function Y(pe,Ke){return new se.y(Je=>{let it;return(0,K.f)(Je,Ke,()=>{it=pe[je.h](),(0,K.f)(Je,Ke,()=>{let Ee,Nt;try{({value:Ee,done:Nt}=it.next())}catch(sn){return void Je.error(sn)}Nt?Je.complete():Je.next(Ee)},0,!0)}),()=>(0,De.m)(it?.return)&&it.return()})}(pe,Ke);if((0,qt.L)(pe))return function fn(pe,Ke){return ie((0,qt.Q)(pe),Ke)}(pe,Ke)}throw(0,lt.z)(pe)}(pe,Ke):(0,w.Xf)(pe)}},4829:(Et,Ce,V)=>{V.d(Ce,{Xf:()=>qe});var w=V(7582),ee=V(4266),D=V(4026),oe=V(5592),fe=V(8382),se=V(5726),Ie=V(9853),je=V(3664),De=V(541),K=V(4674),Y=V(3894),ie=V(4850);function qe(ge){if(ge instanceof oe.y)return ge;if(null!=ge){if((0,fe.c)(ge))return function Oe(ge){return new oe.y(Ne=>{const pe=ge[ie.L]();if((0,K.m)(pe.subscribe))return pe.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,ee.z)(ge))return function He(ge){return new oe.y(Ne=>{for(let pe=0;pe<ge.length&&!Ne.closed;pe++)Ne.next(ge[pe]);Ne.complete()})}(ge);if((0,D.t)(ge))return function $e(ge){return new oe.y(Ne=>{ge.then(pe=>{Ne.closed||(Ne.next(pe),Ne.complete())},pe=>Ne.error(pe)).then(null,Y.h)})}(ge);if((0,se.D)(ge))return lt(ge);if((0,je.T)(ge))return function rt(ge){return new oe.y(Ne=>{for(const pe of ge)if(Ne.next(pe),Ne.closed)return;Ne.complete()})}(ge);if((0,De.L)(ge))return function qt(ge){return lt((0,De.Q)(ge))}(ge)}throw(0,Ie.z)(ge)}function lt(ge){return new oe.y(Ne=>{(function fn(ge,Ne){var pe,Ke,Je,it;return(0,w.mG)(this,void 0,void 0,function*(){try{for(pe=(0,w.KL)(ge);!(Ke=yield pe.next()).done;)if(Ne.next(Ke.value),Ne.closed)return}catch(Ee){Je={error:Ee}}finally{try{Ke&&!Ke.done&&(it=pe.return)&&(yield it.call(pe))}finally{if(Je)throw Je.error}}Ne.complete()})})(ge,Ne).catch(pe=>Ne.error(pe))})}},3019:(Et,Ce,V)=>{V.d(Ce,{T:()=>se});var w=V(7537),ee=V(4829),D=V(6232),oe=V(4564),fe=V(2459);function se(...Ie){const je=(0,oe.yG)(Ie),De=(0,oe._6)(Ie,1/0),K=Ie;return K.length?1===K.length?(0,ee.Xf)(K[0]):(0,w.J)(De)((0,fe.D)(K,je)):D.E}},2096:(Et,Ce,V)=>{V.d(Ce,{of:()=>D});var w=V(4564),ee=V(2459);function D(...oe){const fe=(0,w.yG)(oe);return(0,ee.D)(oe,fe)}},8504:(Et,Ce,V)=>{V.d(Ce,{_:()=>D});var w=V(5592),ee=V(4674);function D(oe,fe){const se=(0,ee.m)(oe)?oe:()=>oe,Ie=je=>je.error(se());return new w.y(fe?je=>fe.schedule(Ie,0,je):Ie)}},8251:(Et,Ce,V)=>{V.d(Ce,{Q:()=>D,x:()=>ee});var w=V(305);function ee(oe,fe,se,Ie,je){return new D(oe,fe,se,Ie,je)}class D extends w.Lv{constructor(fe,se,Ie,je,De,K){super(fe),this.onFinalize=De,this.shouldUnsubscribe=K,this._next=se?function(Y){try{se(Y)}catch(ie){fe.error(ie)}}:super._next,this._error=je?function(Y){try{je(Y)}catch(ie){fe.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(Y){fe.error(Y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:se}=this;super.unsubscribe(),!se&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},6306:(Et,Ce,V)=>{V.d(Ce,{K:()=>oe});var w=V(4829),ee=V(8251),D=V(9360);function oe(fe){return(0,D.e)((se,Ie)=>{let K,je=null,De=!1;je=se.subscribe((0,ee.x)(Ie,void 0,void 0,Y=>{K=(0,w.Xf)(fe(Y,oe(fe)(se))),je?(je.unsubscribe(),je=null,K.subscribe(Ie)):De=!0})),De&&(je.unsubscribe(),je=null,K.subscribe(Ie))})}},3572:(Et,Ce,V)=>{V.d(Ce,{d:()=>D});var w=V(9360),ee=V(8251);function D(oe){return(0,w.e)((fe,se)=>{let Ie=!1;fe.subscribe((0,ee.x)(se,je=>{Ie=!0,se.next(je)},()=>{Ie||se.next(oe),se.complete()}))})}},3997:(Et,Ce,V)=>{V.d(Ce,{x:()=>oe});var w=V(2737),ee=V(9360),D=V(8251);function oe(se,Ie=w.y){return se=se??fe,(0,ee.e)((je,De)=>{let K,Y=!0;je.subscribe((0,D.x)(De,ie=>{const qe=Ie(ie);(Y||!se(K,qe))&&(Y=!1,K=qe,De.next(ie))}))})}function fe(se,Ie){return se===Ie}},2181:(Et,Ce,V)=>{V.d(Ce,{h:()=>D});var w=V(9360),ee=V(8251);function D(oe,fe){return(0,w.e)((se,Ie)=>{let je=0;se.subscribe((0,ee.x)(Ie,De=>oe.call(fe,De,je++)&&Ie.next(De)))})}},1374:(Et,Ce,V)=>{V.d(Ce,{P:()=>Ie});var w=V(6973),ee=V(2181),D=V(8180),oe=V(3572),fe=V(3026),se=V(2737);function Ie(je,De){const K=arguments.length>=2;return Y=>Y.pipe(je?(0,ee.h)((ie,qe)=>je(ie,qe,Y)):se.y,(0,D.q)(1),K?(0,oe.d)(De):(0,fe.T)(()=>new w.K))}},7398:(Et,Ce,V)=>{V.d(Ce,{U:()=>D});var w=V(9360),ee=V(8251);function D(oe,fe){return(0,w.e)((se,Ie)=>{let je=0;se.subscribe((0,ee.x)(Ie,De=>{Ie.next(oe.call(fe,De,je++))}))})}},7537:(Et,Ce,V)=>{V.d(Ce,{J:()=>D});var w=V(1631),ee=V(2737);function D(oe=1/0){return(0,w.z)(ee.y,oe)}},1631:(Et,Ce,V)=>{V.d(Ce,{z:()=>je});var w=V(7398),ee=V(4829),D=V(9360),oe=V(7103),fe=V(8251),Ie=V(4674);function je(De,K,Y=1/0){return(0,Ie.m)(K)?je((ie,qe)=>(0,w.U)((Oe,He)=>K(ie,Oe,qe,He))((0,ee.Xf)(De(ie,qe))),Y):("number"==typeof K&&(Y=K),(0,D.e)((ie,qe)=>function se(De,K,Y,ie,qe,Oe,He,$e){const rt=[];let lt=0,qt=0,fn=!1;const ge=()=>{fn&&!rt.length&&!lt&&K.complete()},Ne=Ke=>lt<ie?pe(Ke):rt.push(Ke),pe=Ke=>{Oe&&K.next(Ke),lt++;let Je=!1;(0,ee.Xf)(Y(Ke,qt++)).subscribe((0,fe.x)(K,it=>{qe?.(it),Oe?Ne(it):K.next(it)},()=>{Je=!0},void 0,()=>{if(Je)try{for(lt--;rt.length&&lt<ie;){const it=rt.shift();He?(0,oe.f)(K,He,()=>pe(it)):pe(it)}ge()}catch(it){K.error(it)}}))};return De.subscribe((0,fe.x)(K,Ne,()=>{fn=!0,ge()})),()=>{$e?.()}}(ie,qe,De,Y)))}},3093:(Et,Ce,V)=>{V.d(Ce,{Q:()=>oe});var w=V(7103),ee=V(9360),D=V(8251);function oe(fe,se=0){return(0,ee.e)((Ie,je)=>{Ie.subscribe((0,D.x)(je,De=>(0,w.f)(je,fe,()=>je.next(De),se),()=>(0,w.f)(je,fe,()=>je.complete(),se),De=>(0,w.f)(je,fe,()=>je.error(De),se)))})}},6699:(Et,Ce,V)=>{V.d(Ce,{R:()=>oe});var w=V(9360),ee=V(8251);function oe(fe,se){return(0,w.e)(function D(fe,se,Ie,je,De){return(K,Y)=>{let ie=Ie,qe=se,Oe=0;K.subscribe((0,ee.x)(Y,He=>{const $e=Oe++;qe=ie?fe(qe,He,$e):(ie=!0,He),je&&Y.next(qe)},De&&(()=>{ie&&Y.next(qe),Y.complete()})))}}(fe,se,arguments.length>=2,!0))}},3020:(Et,Ce,V)=>{V.d(Ce,{B:()=>fe});var w=V(4829),ee=V(8645),D=V(305),oe=V(9360);function fe(Ie={}){const{connector:je=(()=>new ee.x),resetOnError:De=!0,resetOnComplete:K=!0,resetOnRefCountZero:Y=!0}=Ie;return ie=>{let qe,Oe,He,$e=0,rt=!1,lt=!1;const qt=()=>{Oe?.unsubscribe(),Oe=void 0},fn=()=>{qt(),qe=He=void 0,rt=lt=!1},ge=()=>{const Ne=qe;fn(),Ne?.unsubscribe()};return(0,oe.e)((Ne,pe)=>{$e++,!lt&&!rt&&qt();const Ke=He=He??je();pe.add(()=>{$e--,0===$e&&!lt&&!rt&&(Oe=se(ge,Y))}),Ke.subscribe(pe),!qe&&$e>0&&(qe=new D.Hp({next:Je=>Ke.next(Je),error:Je=>{lt=!0,qt(),Oe=se(fn,De,Je),Ke.error(Je)},complete:()=>{rt=!0,qt(),Oe=se(fn,K),Ke.complete()}}),(0,w.Xf)(Ne).subscribe(qe))})(ie)}}function se(Ie,je,...De){if(!0===je)return void Ie();if(!1===je)return;const K=new D.Hp({next:()=>{K.unsubscribe(),Ie()}});return(0,w.Xf)(je(...De)).subscribe(K)}},7921:(Et,Ce,V)=>{V.d(Ce,{O:()=>oe});var w=V(5211),ee=V(4564),D=V(9360);function oe(...fe){const se=(0,ee.yG)(fe);return(0,D.e)((Ie,je)=>{(se?(0,w.z)(fe,Ie,se):(0,w.z)(fe,Ie)).subscribe(je)})}},5137:(Et,Ce,V)=>{V.d(Ce,{R:()=>ee});var w=V(9360);function ee(D,oe=0){return(0,w.e)((fe,se)=>{se.add(D.schedule(()=>fe.subscribe(se),oe))})}},4664:(Et,Ce,V)=>{V.d(Ce,{w:()=>oe});var w=V(4829),ee=V(9360),D=V(8251);function oe(fe,se){return(0,ee.e)((Ie,je)=>{let De=null,K=0,Y=!1;const ie=()=>Y&&!De&&je.complete();Ie.subscribe((0,D.x)(je,qe=>{De?.unsubscribe();let Oe=0;const He=K++;(0,w.Xf)(fe(qe,He)).subscribe(De=(0,D.x)(je,$e=>je.next(se?se(qe,$e,He,Oe++):$e),()=>{De=null,ie()}))},()=>{Y=!0,ie()}))})}},8180:(Et,Ce,V)=>{V.d(Ce,{q:()=>oe});var w=V(6232),ee=V(9360),D=V(8251);function oe(fe){return fe<=0?()=>w.E:(0,ee.e)((se,Ie)=>{let je=0;se.subscribe((0,D.x)(Ie,De=>{++je<=fe&&(Ie.next(De),fe<=je&&Ie.complete())}))})}},9397:(Et,Ce,V)=>{V.d(Ce,{b:()=>fe});var w=V(4674),ee=V(9360),D=V(8251),oe=V(2737);function fe(se,Ie,je){const De=(0,w.m)(se)||Ie||je?{next:se,error:Ie,complete:je}:se;return De?(0,ee.e)((K,Y)=>{var ie;null===(ie=De.subscribe)||void 0===ie||ie.call(De);let qe=!0;K.subscribe((0,D.x)(Y,Oe=>{var He;null===(He=De.next)||void 0===He||He.call(De,Oe),Y.next(Oe)},()=>{var Oe;qe=!1,null===(Oe=De.complete)||void 0===Oe||Oe.call(De),Y.complete()},Oe=>{var He;qe=!1,null===(He=De.error)||void 0===He||He.call(De,Oe),Y.error(Oe)},()=>{var Oe,He;qe&&(null===(Oe=De.unsubscribe)||void 0===Oe||Oe.call(De)),null===(He=De.finalize)||void 0===He||He.call(De)}))}):oe.y}},3026:(Et,Ce,V)=>{V.d(Ce,{T:()=>oe});var w=V(6973),ee=V(9360),D=V(8251);function oe(se=fe){return(0,ee.e)((Ie,je)=>{let De=!1;Ie.subscribe((0,D.x)(je,K=>{De=!0,je.next(K)},()=>De?je.complete():je.error(se())))})}function fe(){return new w.K}},7599:(Et,Ce,V)=>{V.d(Ce,{z:()=>w});const w={setTimeout(ee,D,...oe){const{delegate:fe}=w;return fe?.setTimeout?fe.setTimeout(ee,D,...oe):setTimeout(ee,D,...oe)},clearTimeout(ee){const{delegate:D}=w;return(D?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},4971:(Et,Ce,V)=>{V.d(Ce,{h:()=>ee});const ee=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Et,Ce,V)=>{V.d(Ce,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Et,Ce,V)=>{V.d(Ce,{K:()=>ee});const ee=(0,V(2306).d)(D=>function(){D(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Et,Ce,V)=>{V.d(Ce,{_6:()=>se,jO:()=>oe,yG:()=>fe});var w=V(4674);function D(Ie){return Ie[Ie.length-1]}function oe(Ie){return(0,w.m)(D(Ie))?Ie.pop():void 0}function fe(Ie){return function ee(Ie){return Ie&&(0,w.m)(Ie.schedule)}(D(Ie))?Ie.pop():void 0}function se(Ie,je){return"number"==typeof D(Ie)?Ie.pop():je}},9039:(Et,Ce,V)=>{function w(ee,D){if(ee){const oe=ee.indexOf(D);0<=oe&&ee.splice(oe,1)}}V.d(Ce,{P:()=>w})},2306:(Et,Ce,V)=>{function w(ee){const oe=ee(fe=>{Error.call(fe),fe.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}V.d(Ce,{d:()=>w})},1441:(Et,Ce,V)=>{V.d(Ce,{O:()=>oe,x:()=>D});var w=V(2653);let ee=null;function D(fe){if(w.config.useDeprecatedSynchronousErrorHandling){const se=!ee;if(se&&(ee={errorThrown:!1,error:null}),fe(),se){const{errorThrown:Ie,error:je}=ee;if(ee=null,Ie)throw je}}else fe()}function oe(fe){w.config.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=fe)}},7103:(Et,Ce,V)=>{function w(ee,D,oe,fe=0,se=!1){const Ie=D.schedule(function(){oe(),se?ee.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(ee.add(Ie),!se)return Ie}V.d(Ce,{f:()=>w})},2737:(Et,Ce,V)=>{function w(ee){return ee}V.d(Ce,{y:()=>w})},4266:(Et,Ce,V)=>{V.d(Ce,{z:()=>w});const w=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},5726:(Et,Ce,V)=>{V.d(Ce,{D:()=>ee});var w=V(4674);function ee(D){return Symbol.asyncIterator&&(0,w.m)(D?.[Symbol.asyncIterator])}},4674:(Et,Ce,V)=>{function w(ee){return"function"==typeof ee}V.d(Ce,{m:()=>w})},8382:(Et,Ce,V)=>{V.d(Ce,{c:()=>D});var w=V(4850),ee=V(4674);function D(oe){return(0,ee.m)(oe[w.L])}},3664:(Et,Ce,V)=>{V.d(Ce,{T:()=>D});var w=V(4971),ee=V(4674);function D(oe){return(0,ee.m)(oe?.[w.h])}},4026:(Et,Ce,V)=>{V.d(Ce,{t:()=>ee});var w=V(4674);function ee(D){return(0,w.m)(D?.then)}},541:(Et,Ce,V)=>{V.d(Ce,{L:()=>oe,Q:()=>D});var w=V(7582),ee=V(4674);function D(fe){return(0,w.FC)(this,arguments,function*(){const Ie=fe.getReader();try{for(;;){const{value:je,done:De}=yield(0,w.qq)(Ie.read());if(De)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(je)}}finally{Ie.releaseLock()}})}function oe(fe){return(0,ee.m)(fe?.getReader)}},9360:(Et,Ce,V)=>{V.d(Ce,{A:()=>ee,e:()=>D});var w=V(4674);function ee(oe){return(0,w.m)(oe?.lift)}function D(oe){return fe=>{if(ee(fe))return fe.lift(function(se){try{return oe(se,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(Et,Ce,V)=>{function w(){}V.d(Ce,{Z:()=>w})},8407:(Et,Ce,V)=>{V.d(Ce,{U:()=>D,z:()=>ee});var w=V(2737);function ee(...oe){return D(oe)}function D(oe){return 0===oe.length?w.y:1===oe.length?oe[0]:function(se){return oe.reduce((Ie,je)=>je(Ie),se)}}},3894:(Et,Ce,V)=>{V.d(Ce,{h:()=>D});var w=V(2653),ee=V(7599);function D(oe){ee.z.setTimeout(()=>{const{onUnhandledError:fe}=w.config;if(!fe)throw oe;fe(oe)})}},9853:(Et,Ce,V)=>{function w(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ce,{z:()=>w})},6814:(Et,Ce,V)=>{V.d(Ce,{Do:()=>$e,EM:()=>$r,HT:()=>oe,JF:()=>es,K0:()=>se,Mx:()=>Ui,PM:()=>xs,S$:()=>qe,V_:()=>je,Ye:()=>rt,b0:()=>He,bD:()=>Bi,ez:()=>Un,q:()=>D,w_:()=>fe});var w=V(5879);let ee=null;function D(){return ee}function oe(T){ee||(ee=T)}class fe{}const se=new w.OlP("DocumentToken");let Ie=(()=>{class T{historyGo(R){throw new Error("Not implemented")}static#e=this.\u0275fac=function(O){return new(O||T)};static#t=this.\u0275prov=w.Yz7({token:T,factory:function(){return(0,w.f3M)(De)},providedIn:"platform"})}return T})();const je=new w.OlP("Location Initialized");let De=(()=>{class T extends Ie{constructor(){super(),this._doc=(0,w.f3M)(se),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return D().getBaseHref(this._doc)}onPopState(R){const O=D().getGlobalEventTarget(this._doc,"window");return O.addEventListener("popstate",R,!1),()=>O.removeEventListener("popstate",R)}onHashChange(R){const O=D().getGlobalEventTarget(this._doc,"window");return O.addEventListener("hashchange",R,!1),()=>O.removeEventListener("hashchange",R)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(R){this._location.pathname=R}pushState(R,O,Z){this._history.pushState(R,O,Z)}replaceState(R,O,Z){this._history.replaceState(R,O,Z)}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}static#e=this.\u0275fac=function(O){return new(O||T)};static#t=this.\u0275prov=w.Yz7({token:T,factory:function(){return new T},providedIn:"platform"})}return T})();function K(T,F){if(0==T.length)return F;if(0==F.length)return T;let R=0;return T.endsWith("/")&&R++,F.startsWith("/")&&R++,2==R?T+F.substring(1):1==R?T+F:T+"/"+F}function Y(T){const F=T.match(/#|\?|$/),R=F&&F.index||T.length;return T.slice(0,R-("/"===T[R-1]?1:0))+T.slice(R)}function ie(T){return T&&"?"!==T[0]?"?"+T:T}let qe=(()=>{class T{historyGo(R){throw new Error("Not implemented")}static#e=this.\u0275fac=function(O){return new(O||T)};static#t=this.\u0275prov=w.Yz7({token:T,factory:function(){return(0,w.f3M)(He)},providedIn:"root"})}return T})();const Oe=new w.OlP("appBaseHref");let He=(()=>{class T extends qe{constructor(R,O){super(),this._platformLocation=R,this._removeListenerFns=[],this._baseHref=O??this._platformLocation.getBaseHrefFromDOM()??(0,w.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return K(this._baseHref,R)}path(R=!1){const O=this._platformLocation.pathname+ie(this._platformLocation.search),Z=this._platformLocation.hash;return Z&&R?`${O}${Z}`:O}pushState(R,O,Z,de){const Re=this.prepareExternalUrl(Z+ie(de));this._platformLocation.pushState(R,O,Re)}replaceState(R,O,Z,de){const Re=this.prepareExternalUrl(Z+ie(de));this._platformLocation.replaceState(R,O,Re)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}static#e=this.\u0275fac=function(O){return new(O||T)(w.LFG(Ie),w.LFG(Oe,8))};static#t=this.\u0275prov=w.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})(),$e=(()=>{class T extends qe{constructor(R,O){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=O&&(this._baseHref=O)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let O=this._platformLocation.hash;return null==O&&(O="#"),O.length>0?O.substring(1):O}prepareExternalUrl(R){const O=K(this._baseHref,R);return O.length>0?"#"+O:O}pushState(R,O,Z,de){let Re=this.prepareExternalUrl(Z+ie(de));0==Re.length&&(Re=this._platformLocation.pathname),this._platformLocation.pushState(R,O,Re)}replaceState(R,O,Z,de){let Re=this.prepareExternalUrl(Z+ie(de));0==Re.length&&(Re=this._platformLocation.pathname),this._platformLocation.replaceState(R,O,Re)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}static#e=this.\u0275fac=function(O){return new(O||T)(w.LFG(Ie),w.LFG(Oe,8))};static#t=this.\u0275prov=w.Yz7({token:T,factory:T.\u0275fac})}return T})(),rt=(()=>{class T{constructor(R){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=R;const O=this._locationStrategy.getBaseHref();this._basePath=function ge(T){if(new RegExp("^(https?:)?//").test(T)){const[,R]=T.split(/\/\/[^\/]+/);return R}return T}(Y(fn(O))),this._locationStrategy.onPopState(Z=>{this._subject.emit({url:this.path(!0),pop:!0,state:Z.state,type:Z.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(R=!1){return this.normalize(this._locationStrategy.path(R))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(R,O=""){return this.path()==this.normalize(R+ie(O))}normalize(R){return T.stripTrailingSlash(function qt(T,F){if(!T||!F.startsWith(T))return F;const R=F.substring(T.length);return""===R||["/",";","?","#"].includes(R[0])?R:F}(this._basePath,fn(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._locationStrategy.prepareExternalUrl(R)}go(R,O="",Z=null){this._locationStrategy.pushState(Z,"",R,O),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ie(O)),Z)}replaceState(R,O="",Z=null){this._locationStrategy.replaceState(Z,"",R,O),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ie(O)),Z)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(R=0){this._locationStrategy.historyGo?.(R)}onUrlChange(R){return this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(O=>{this._notifyUrlChangeListeners(O.url,O.state)})),()=>{const O=this._urlChangeListeners.indexOf(R);this._urlChangeListeners.splice(O,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(R="",O){this._urlChangeListeners.forEach(Z=>Z(R,O))}subscribe(R,O,Z){return this._subject.subscribe({next:R,error:O,complete:Z})}static#e=this.normalizeQueryParams=ie;static#t=this.joinWithSlash=K;static#n=this.stripTrailingSlash=Y;static#r=this.\u0275fac=function(O){return new(O||T)(w.LFG(qe))};static#i=this.\u0275prov=w.Yz7({token:T,factory:function(){return function lt(){return new rt((0,w.LFG)(qe))}()},providedIn:"root"})}return T})();function fn(T){return T.replace(/\/index.html$/,"")}function Ui(T,F){F=encodeURIComponent(F);for(const R of T.split(";")){const O=R.indexOf("="),[Z,de]=-1==O?[R,""]:[R.slice(0,O),R.slice(O+1)];if(Z.trim()===F)return decodeURIComponent(de)}return null}let Un=(()=>{class T{static#e=this.\u0275fac=function(O){return new(O||T)};static#t=this.\u0275mod=w.oAB({type:T});static#n=this.\u0275inj=w.cJS({})}return T})();const Bi="browser",mi="server";function xs(T){return T===mi}let $r=(()=>{class T{static#e=this.\u0275prov=(0,w.Yz7)({token:T,providedIn:"root",factory:()=>new Xi((0,w.LFG)(se),window)})}return T})();class Xi{constructor(F,R){this.document=F,this.window=R,this.offset=()=>[0,0]}setOffset(F){this.offset=Array.isArray(F)?()=>F:F}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(F){this.supportsScrolling()&&this.window.scrollTo(F[0],F[1])}scrollToAnchor(F){if(!this.supportsScrolling())return;const R=function tc(T,F){const R=T.getElementById(F)||T.getElementsByName(F)[0];if(R)return R;if("function"==typeof T.createTreeWalker&&T.body&&"function"==typeof T.body.attachShadow){const O=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let Z=O.currentNode;for(;Z;){const de=Z.shadowRoot;if(de){const Re=de.getElementById(F)||de.querySelector(`[name="${F}"]`);if(Re)return Re}Z=O.nextNode()}}return null}(this.document,F);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration(F){this.supportsScrolling()&&(this.window.history.scrollRestoration=F)}scrollToElement(F){const R=F.getBoundingClientRect(),O=R.left+this.window.pageXOffset,Z=R.top+this.window.pageYOffset,de=this.offset();this.window.scrollTo(O-de[0],Z-de[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class es{}},5879:(Et,Ce,V)=>{V.d(Ce,{$8M:()=>vt,$WT:()=>Eo,$Z:()=>l_,AFp:()=>Wp,AaK:()=>ie,BQk:()=>Vg,CRH:()=>h0,DdM:()=>QI,EJc:()=>R0,F$t:()=>oy,F4k:()=>qE,FYo:()=>Df,FiY:()=>vd,Flj:()=>bo,GfV:()=>Xd,HDt:()=>M0,Hsn:()=>Gf,JOm:()=>Nu,LFG:()=>Fe,Lbi:()=>qp,Lck:()=>jT,MMx:()=>jy,NdJ:()=>ry,Ojb:()=>rw,OlP:()=>Pn,Oqu:()=>Gg,P3R:()=>jm,PXZ:()=>Ft,Q6J:()=>Hf,QGY:()=>ny,Qsj:()=>cw,R0b:()=>bs,RDi:()=>js,Rgc:()=>xh,SBq:()=>Tf,Sil:()=>xD,Suo:()=>d0,TTD:()=>Fa,TgZ:()=>zf,Tol:()=>qf,VuI:()=>uS,X6Q:()=>OC,XFs:()=>yt,Xpm:()=>_o,Xq5:()=>xE,Xts:()=>Rc,Y36:()=>Ml,YKP:()=>zI,Yjl:()=>pu,Yz7:()=>Lt,Z0I:()=>En,ZZ4:()=>JD,_Bn:()=>HI,_UZ:()=>kg,_c5:()=>QC,_uU:()=>vy,aQg:()=>XD,c2e:()=>b0,cJS:()=>nr,cg1:()=>wy,dDg:()=>b,dqk:()=>en,eFA:()=>$0,eJc:()=>pm,eoX:()=>P,f3M:()=>Xe,g9A:()=>Kv,gHi:()=>Ii,h0i:()=>Yl,hGG:()=>YC,hij:()=>vh,iGM:()=>lv,ifc:()=>ke,ip1:()=>hp,jDz:()=>sm,kL8:()=>Ty,ktI:()=>eh,lG2:()=>Sa,lqb:()=>_a,lri:()=>h,n5z:()=>Ir,oAB:()=>vo,q4F:()=>Cl,qFp:()=>lS,qLn:()=>Pl,qZA:()=>Ku,rWj:()=>v,rg0:()=>Tu,sBO:()=>kC,s_b:()=>ip,soG:()=>fp,tBr:()=>Ts,tb:()=>Qe,tdS:()=>Iu,tp0:()=>so,uIk:()=>Lf,vHH:()=>ge,vpe:()=>$o,wAp:()=>Dh,xp6:()=>c_,ynx:()=>Lg,z2F:()=>ym,zSh:()=>mf,zs3:()=>Oi});var w=V(8645),ee=V(7394),D=V(5619),oe=V(5592),fe=V(3019),se=V(2096),Ie=V(3020),je=V(4664),De=V(3997);function K(r){for(let i in r)if(r[i]===K)return i;throw Error("Could not find renamed property on target object.")}function ie(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ie).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function qe(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const Oe=K({__forward_ref__:K});function He(r){return r.__forward_ref__=He,r.toString=function(){return ie(this())},r}function $e(r){return rt(r)?r():r}function rt(r){return"function"==typeof r&&r.hasOwnProperty(Oe)&&r.__forward_ref__===He}function lt(r){return r&&!!r.\u0275providers}const fn="https://g.co/ng/security#xss";class ge extends Error{constructor(i,o){super(function Ne(r,i){return`NG0${Math.abs(r)}${i?": "+i:""}`}(i,o)),this.code=i}}function pe(r){return"string"==typeof r?r:null==r?"":String(r)}function Nt(r,i){throw new ge(-201,!1)}function dt(r,i){null==r&&function We(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function Lt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function nr(r){return{providers:r.providers||[],imports:r.imports||[]}}function Gn(r){return rr(r,Zr)||rr(r,Dt)}function En(r){return null!==Gn(r)}function rr(r,i){return r.hasOwnProperty(i)?r[i]:null}function ls(r){return r&&(r.hasOwnProperty(Ti)||r.hasOwnProperty(Tr))?r[Ti]:null}const Zr=K({\u0275prov:K}),Ti=K({\u0275inj:K}),Dt=K({ngInjectableDef:K}),Tr=K({ngInjectorDef:K});var yt=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(yt||{});let Bt;function Vt(){return Bt}function Vn(r){const i=Bt;return Bt=r,i}function kn(r,i,o){const u=Gn(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&yt.Optional?null:void 0!==i?i:void Nt(ie(r))}const en=globalThis,Ur={},Br="__NG_DI_FLAG__",Di="ngTempTokenPath",X=/\n/gm,$="__source";let B;function ne(r){const i=B;return B=r,i}function Ve(r,i=yt.Default){if(void 0===B)throw new ge(-203,!1);return null===B?kn(r,void 0,i):B.get(r,i&yt.Optional?null:void 0,i)}function Fe(r,i=yt.Default){return(Vt()||Ve)($e(r),i)}function Xe(r,i=yt.Default){return Fe(r,Gt(i))}function Gt(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function Rt(r){const i=[];for(let o=0;o<r.length;o++){const u=$e(r[o]);if(Array.isArray(u)){if(0===u.length)throw new ge(900,!1);let l,f=yt.Default;for(let m=0;m<u.length;m++){const I=u[m],S=Dn(I);"number"==typeof S?-1===S?l=I.token:f|=S:l=I}i.push(Fe(l,f))}else i.push(Fe(u))}return i}function pn(r,i){return r[Br]=i,r.prototype[Br]=i,r}function Dn(r){return r[Br]}function ve(r){return{toString:r}.toString()}var le=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(le||{}),ke=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(ke||{});const ut={},tt=[],Zt=K({\u0275cmp:K}),tn=K({\u0275dir:K}),Wn=K({\u0275pipe:K}),qn=K({\u0275mod:K}),Yn=K({\u0275fac:K}),Ui=K({__NG_ELEMENT_ID__:K}),po=K({__NG_ENV_ID__:K});function Go(r,i,o){let u=r.length;for(;;){const l=r.indexOf(i,o);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const f=i.length;if(l+f===u||r.charCodeAt(l+f)<=32)return l}o=l+1}}function hs(r,i,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const f=o[u++],m=o[u++],I=o[u++];r.setAttribute(i,m,I,f)}else{const f=l,m=o[++u];Gs(f)?r.setProperty(i,f,m):r.setAttribute(i,f,m),u++}}return u}function Wo(r){return 3===r||4===r||6===r}function Gs(r){return 64===r.charCodeAt(0)}function Ai(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const l=i[u];"number"==typeof l?o=l:0===o||an(r,o,l,null,-1===o||2===o?i[++u]:null)}}return r}function an(r,i,o,u,l){let f=0,m=r.length;if(-1===i)m=-1;else for(;f<r.length;){const I=r[f++];if("number"==typeof I){if(I===i){m=-1;break}if(I>i){m=f-1;break}}}for(;f<r.length;){const I=r[f];if("number"==typeof I)break;if(I===o){if(null===u)return void(null!==l&&(r[f+1]=l));if(u===r[f+1])return void(r[f+2]=l)}f++,null!==u&&f++,null!==l&&f++}-1!==m&&(r.splice(m,0,i),f=m+1),r.splice(f++,0,o),null!==u&&r.splice(f++,0,u),null!==l&&r.splice(f++,0,l)}const go="ng-template";function mo(r,i,o){let u=0,l=!0;for(;u<r.length;){let f=r[u++];if("string"==typeof f&&l){const m=r[u++];if(o&&"class"===f&&-1!==Go(m.toLowerCase(),i,0))return!0}else{if(1===f){for(;u<r.length&&"string"==typeof(f=r[u++]);)if(f.toLowerCase()===i)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function qo(r){return 4===r.type&&r.value!==go}function Se(r,i,o){return i===(4!==r.type||o?r.value:go)}function du(r,i,o){let u=4;const l=r.attrs||[],f=function st(r){for(let i=0;i<r.length;i++)if(Wo(r[i]))return i;return r.length}(l);let m=!1;for(let I=0;I<i.length;I++){const S=i[I];if("number"!=typeof S){if(!m)if(4&u){if(u=2|1&u,""!==S&&!Se(r,S,o)||""===S&&1===i.length){if(Jn(u))return!1;m=!0}}else{const x=8&u?S:i[++I];if(8&u&&null!==r.attrs){if(!mo(r.attrs,x,o)){if(Jn(u))return!1;m=!0}continue}const q=on(8&u?"class":S,l,qo(r),o);if(-1===q){if(Jn(u))return!1;m=!0;continue}if(""!==x){let te;te=q>f?"":l[q+1].toLowerCase();const ue=8&u?te:null;if(ue&&-1!==Go(ue,x,0)||2&u&&x!==te){if(Jn(u))return!1;m=!0}}}}else{if(!m&&!Jn(u)&&!Jn(S))return!1;if(m&&Jn(S))continue;m=!1,u=S|1&u}}return Jn(u)||m}function Jn(r){return 0==(1&r)}function on(r,i,o,u){if(null===i)return-1;let l=0;if(u||!o){let f=!1;for(;l<i.length;){const m=i[l];if(m===r)return l;if(3===m||6===m)f=!0;else{if(1===m||2===m){let I=i[++l];for(;"string"==typeof I;)I=i[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=f?1:2}return-1}return function fs(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function hu(r,i,o=!1){for(let u=0;u<i.length;u++)if(du(r,i[u],o))return!0;return!1}function Ut(r,i){e:for(let o=0;o<i.length;o++){const u=i[o];if(r.length===u.length){for(let l=0;l<r.length;l++)if(r[l]!==u[l])continue e;return!0}}return!1}function Ps(r,i){return r?":not("+i.trim()+")":i}function Qr(r){let i=r[0],o=1,u=2,l="",f=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const I=r[++o];l+="["+m+(I.length>0?'="'+I+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Jn(m)&&(i+=Ps(f,l),l=""),u=m,f=f||!Jn(u);o++}return""!==l&&(i+=Ps(f,l)),i}function _o(r){return ve(()=>{const i=Io(r),o={...i,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===le.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||ke.Emulated,styles:r.styles||tt,_:null,schemas:r.schemas||null,tView:null,id:""};Ci(o);const u=r.dependencies;return o.directiveDefs=ps(u,!1),o.pipeDefs=ps(u,!0),o.id=function ec(r){let i=0;const o=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(const l of o)i=Math.imul(31,i)+l.charCodeAt(0)<<0;return i+=2147483648,"c"+i}(o),o})}function fu(r){return nn(r)||Dr(r)}function Mr(r){return null!==r}function vo(r){return ve(()=>({type:r.type,bootstrap:r.bootstrap||tt,declarations:r.declarations||tt,imports:r.imports||tt,exports:r.exports||tt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Ji(r,i){if(null==r)return ut;const o={};for(const u in r)if(r.hasOwnProperty(u)){let l=r[u],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),o[l]=u,i&&(i[l]=f)}return o}function Sa(r){return ve(()=>{const i=Io(r);return Ci(i),i})}function pu(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function nn(r){return r[Zt]||null}function Dr(r){return r[tn]||null}function _n(r){return r[Wn]||null}function Eo(r){const i=nn(r)||Dr(r)||_n(r);return null!==i&&i.standalone}function _r(r,i){const o=r[qn]||null;if(!o&&!0===i)throw new Error(`Type ${ie(r)} does not have '\u0275mod' property.`);return o}function Io(r){const i={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:r.inputs||ut,exportAs:r.exportAs||null,standalone:!0===r.standalone,signals:!0===r.signals,selectors:r.selectors||tt,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ji(r.inputs,i),outputs:Ji(r.outputs)}}function Ci(r){r.features?.forEach(i=>i(r))}function ps(r,i){if(!r)return null;const o=i?_n:fu;return()=>("function"==typeof r?r():r).map(u=>o(u)).filter(Mr)}const In=0,ot=1,At=2,Tn=3,jr=4,gs=5,yr=6,Si=7,Un=8,Bi=9,mi=10,Pt=11,Yr=12,Ms=13,xs=14,ln=15,wo=16,qs=17,$r=18,Xi=19,tc=20,ai=21,es=22,ba=23,_i=24,jt=25,To=1,ms=2,ui=7,bi=9,ir=11;function Jr(r){return Array.isArray(r)&&"object"==typeof r[To]}function ci(r){return Array.isArray(r)&&!0===r[To]}function Zo(r){return 0!=(4&r.flags)}function li(r){return r.componentOffset>-1}function Ks(r){return 1==(1&r.flags)}function Kt(r){return!!r.template}function hr(r){return 0!=(512&r[At])}function ji(r,i){return r.hasOwnProperty(Yn)?r[Yn]:null}const ys=Symbol("SIGNAL");function Qs(r,i,o={}){return i[ys]=r,Object.assign(i,o)}function Ns(r,i){return(null===r||"object"!=typeof r)&&Object.is(r,i)}let xa=en.WeakRef??class id{constructor(i){this.ref=i}deref(){return this.ref}},Yo=0,di=null,$i=!1;function ar(r){const i=di;return di=r,i}class xr{constructor(){this.id=Yo++,this.ref=function Ri(r){return new xa(r)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[i,o]of this.producers){const u=o.producerNode.deref();if(null!=u&&o.atTrackingVersion===this.trackingVersion){if(u.producerPollStatus(o.seenValueVersion))return!0}else this.producers.delete(i),u?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const i=$i;$i=!0;try{for(const[o,u]of this.consumers){const l=u.consumerNode.deref();null!=l&&l.trackingVersion===u.atTrackingVersion?l.onConsumerDependencyMayHaveChanged():(this.consumers.delete(o),l?.producers.delete(this.id))}}finally{$i=i}}producerAccessed(){if($i)throw new Error("");if(null===di)return;let i=di.producers.get(this.id);void 0===i?(i={consumerNode:di.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:di.trackingVersion},di.producers.set(this.id,i),this.consumers.set(di.id,i)):(i.seenValueVersion=this.valueVersion,i.atTrackingVersion=di.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==di?.consumerAllowSignalWrites}producerPollStatus(i){return this.valueVersion!==i||(this.onProducerUpdateValueVersion(),this.valueVersion!==i)}}function bo(r,i){const o=new Na(r,i?.equal??Ns);return Qs(o,o.signal.bind(o))}const Ys=Symbol("UNSET"),Pi=Symbol("COMPUTING"),Jo=Symbol("ERRORED");class Na extends xr{constructor(i,o){super(),this.computation=i,this.equal=o,this.value=Ys,this.error=null,this.stale=!0,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){this.stale||(this.stale=!0,this.producerMayHaveChanged())}onProducerUpdateValueVersion(){if(this.stale){if(this.value!==Ys&&this.value!==Pi&&!this.consumerPollProducersForChange())return void(this.stale=!1);this.recomputeValue()}}recomputeValue(){if(this.value===Pi)throw new Error("Detected cycle in computations.");const i=this.value;this.value=Pi,this.trackingVersion++;const o=ar(this);let u;try{u=this.computation()}catch(l){u=Jo,this.error=l}finally{ar(o)}this.stale=!1,i!==Ys&&i!==Jo&&u!==Jo&&this.equal(i,u)?this.value=i:(this.value=u,this.valueVersion++)}signal(){if(this.onProducerUpdateValueVersion(),this.producerAccessed(),this.value===Jo)throw this.error;return this.value}}let Xo=function sc(){throw new Error};function Os(){Xo()}class ta extends xr{constructor(i,o){super(),this.value=i,this.equal=o,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){}onProducerUpdateValueVersion(){}set(i){this.producerUpdatesAllowed||Os(),this.equal(this.value,i)||(this.value=i,this.valueVersion++,this.producerMayHaveChanged())}update(i){this.producerUpdatesAllowed||Os(),this.set(i(this.value))}mutate(i){this.producerUpdatesAllowed||Os(),i(this.value),this.valueVersion++,this.producerMayHaveChanged()}asReadonly(){return void 0===this.readonlySignal&&(this.readonlySignal=Qs(this,()=>this.signal())),this.readonlySignal}signal(){return this.producerAccessed(),this.value}}function Iu(r,i){const o=new ta(r,i?.equal??Ns);return Qs(o,o.signal.bind(o),{set:o.set.bind(o),update:o.update.bind(o),mutate:o.mutate.bind(o),asReadonly:o.asReadonly.bind(o)})}function Tu(r){const i=ar(null);try{return r()}finally{ar(i)}}const tl=()=>{};class Oa extends xr{constructor(i,o,u){super(),this.watch=i,this.schedule=o,this.dirty=!1,this.cleanupFn=tl,this.registerOnCleanup=l=>{this.cleanupFn=l},this.consumerAllowSignalWrites=u}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const i=ar(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=tl,this.watch(this.registerOnCleanup)}finally{ar(i)}}cleanup(){this.cleanupFn()}}class ka{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Fa(){return La}function La(r){return r.type.prototype.ngOnChanges&&(r.setInput=Js),nl}function nl(){const r=F(this),i=r?.current;if(i){const o=r.previous;if(o===ut)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function Js(r,i,o,u){const l=this.declaredInputs[o],f=F(r)||function R(r,i){return r[T]=i}(r,{previous:ut,current:null}),m=f.current||(f.current={}),I=f.previous,S=I[l];m[l]=new ka(S&&S.currentValue,i,I===ut),r[u]=i}Fa.ngInherit=!0;const T="__ngSimpleChanges__";function F(r){return r[T]||null}const de=function(r,i,o){};function bt(r){for(;Array.isArray(r);)r=r[In];return r}function dn(r,i){return bt(i[r])}function St(r,i){return bt(i[r.index])}function $t(r,i){return r.data[i]}function er(r,i){const o=i[r];return Jr(o)?o:o[In]}function vr(r,i){return null==i?null:r[i]}function zi(r){r[qs]=0}function na(r){1024&r[At]||(r[At]|=1024,oc(r,1))}function sd(r){1024&r[At]&&(r[At]&=-1025,oc(r,-1))}function oc(r,i){let o=r[Tn];if(null===o)return;o[gs]+=i;let u=o;for(o=o[Tn];null!==o&&(1===i&&1===u[gs]||-1===i&&0===u[gs]);)o[gs]+=i,u=o,o=o[Tn]}function Du(r,i){if(256==(256&r[At]))throw new ge(911,!1);null===r[ai]&&(r[ai]=[]),r[ai].push(i)}const Ht={lFrame:oa(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function eo(){return Ht.bindingsEnabled}function sr(){return null!==Ht.skipHydrationRootTNode}function Le(){return Ht.lFrame.lView}function mn(){return Ht.lFrame.tView}function Hr(){let r=uc();for(;null!==r&&64===r.type;)r=r.parent;return r}function uc(){return Ht.lFrame.currentTNode}function zr(r,i){const o=Ht.lFrame;o.currentTNode=r,o.isParent=i}function Ua(){return Ht.lFrame.isParent}function Ba(){Ht.lFrame.isParent=!1}function bn(){return Ht.lFrame.bindingIndex++}function dd(r,i){const o=Ht.lFrame;o.bindingIndex=o.bindingRootIndex=r,Cu(i)}function Cu(r){Ht.lFrame.currentDirectiveIndex=r}function dc(){return Ht.lFrame.currentQueryIndex}function ja(r){Ht.lFrame.currentQueryIndex=r}function Fs(r){const i=r[ot];return 2===i.type?i.declTNode:1===i.type?r[yr]:null}function $a(r,i,o){if(o&yt.SkipSelf){let l=i,f=r;for(;!(l=l.parent,null!==l||o&yt.Host||(l=Fs(f),null===l||(f=f[xs],10&l.type))););if(null===l)return!1;i=l,r=f}const u=Ht.lFrame=sa();return u.currentTNode=i,u.lView=r,!0}function hc(r){const i=sa(),o=r[ot];Ht.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function sa(){const r=Ht.lFrame,i=null===r?null:r.child;return null===i?oa(r):i}function oa(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Ha(){const r=Ht.lFrame;return Ht.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Su=Ha;function za(){const r=Ha();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Nr(){return Ht.lFrame.selectedIndex}function ua(r){Ht.lFrame.selectedIndex=r}function ur(){const r=Ht.lFrame;return $t(r.tView,r.selectedIndex)}let _=!0;function C(){return _}function N(r){_=r}function z(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const f=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:I,ngAfterViewInit:S,ngAfterViewChecked:x,ngOnDestroy:U}=f;m&&(r.contentHooks??=[]).push(-o,m),I&&((r.contentHooks??=[]).push(o,I),(r.contentCheckHooks??=[]).push(o,I)),S&&(r.viewHooks??=[]).push(-o,S),x&&((r.viewHooks??=[]).push(o,x),(r.viewCheckHooks??=[]).push(o,x)),null!=U&&(r.destroyHooks??=[]).push(o,U)}}function re(r,i,o){Tt(r,i,3,o)}function Ue(r,i,o,u){(3&r[At])===o&&Tt(r,i,o,u)}function _t(r,i){let o=r[At];(3&o)===i&&(o&=8191,o+=1,r[At]=o)}function Tt(r,i,o,u){const f=u??-1,m=i.length-1;let I=0;for(let S=void 0!==u?65535&r[qs]:0;S<m;S++)if("number"==typeof i[S+1]){if(I=i[S],null!=u&&I>=u)break}else i[S]<0&&(r[qs]+=65536),(I<f||-1==f)&&(tr(r,o,i,S),r[qs]=(4294901760&r[qs])+S+2),S++}function wn(r,i){de(4,r,i);const o=ar(null);try{i.call(r)}finally{ar(o),de(5,r,i)}}function tr(r,i,o,u){const l=o[u]<0,f=o[u+1],I=r[l?-o[u]:o[u]];l?r[At]>>13<r[qs]>>16&&(3&r[At])===i&&(r[At]+=8192,wn(I,f)):wn(I,f)}const no=-1;class Ls{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function pc(r){return r!==no}function bu(r){return 32767&r}function Ro(r,i){let o=function Wa(r){return r>>16}(r),u=i;for(;o>0;)u=u[xs],o--;return u}let gc=!0;function Vs(r){const i=gc;return gc=r,i}const Ar=255,ro=5;let mc=0;const rs={};function sl(r,i){const o=zh(r,i);if(-1!==o)return o;const u=i[ot];u.firstCreatePass&&(r.injectorIndex=i.length,Po(u.data,r),Po(i,null),Po(u.blueprint,null));const l=md(r,i),f=r.injectorIndex;if(pc(l)){const m=bu(l),I=Ro(l,i),S=I[ot].data;for(let x=0;x<8;x++)i[f+x]=I[m+x]|S[m+x]}return i[f+8]=l,f}function Po(r,i){r.push(0,0,0,0,0,0,0,0,i)}function zh(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function md(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,l=i;for(;null!==l;){if(u=pt(l),null===u)return no;if(o++,l=l[xs],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return no}function ol(r,i,o){!function gd(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Ui)&&(u=o[Ui]),null==u&&(u=o[Ui]=mc++);const l=u&Ar;i.data[r+(l>>ro)]|=1<<l}(r,i,o)}function yp(r,i,o){if(o&yt.Optional||void 0!==r)return r;Nt()}function al(r,i,o,u){if(o&yt.Optional&&void 0===u&&(u=null),!(o&(yt.Self|yt.Host))){const l=r[Bi],f=Vn(void 0);try{return l?l.get(i,u,o&yt.Optional):kn(i,u,o&yt.Optional)}finally{Vn(f)}}return yp(u,0,o)}function Im(r,i,o,u=yt.Default,l){if(null!==r){if(2048&i[At]&&!(u&yt.Self)){const m=function qh(r,i,o,u,l){let f=r,m=i;for(;null!==f&&null!==m&&2048&m[At]&&!(512&m[At]);){const I=Ru(f,m,o,u|yt.Self,rs);if(I!==rs)return I;let S=f.parent;if(!S){const x=m[tc];if(x){const U=x.get(o,rs,u);if(U!==rs)return U}S=pt(m),m=m[xs]}f=S}return l}(r,i,o,u,rs);if(m!==rs)return m}const f=Ru(r,i,o,u,rs);if(f!==rs)return f}return al(i,o,u,l)}function Ru(r,i,o,u,l){const f=function vp(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Ui)?r[Ui]:void 0;return"number"==typeof i?i>=0?i&Ar:ze:i}(o);if("function"==typeof f){if(!$a(i,r,u))return u&yt.Host?yp(l,0,u):al(i,o,u,l);try{let m;if(m=f(u),null!=m||u&yt.Optional)return m;Nt()}finally{Su()}}else if("number"==typeof f){let m=null,I=zh(r,i),S=no,x=u&yt.Host?i[ln][yr]:null;for((-1===I||u&yt.SkipSelf)&&(S=-1===I?md(r,i):i[I+8],S!==no&&la(u,!1)?(m=i[ot],I=bu(S),i=Ro(S,i)):I=-1);-1!==I;){const U=i[ot];if(ei(f,I,U.data)){const q=Wh(I,i,o,m,u,x);if(q!==rs)return q}S=i[I+8],S!==no&&la(u,i[ot].data[I+8]===x)&&ei(f,I,i)?(m=U,I=bu(S),i=Ro(S,i)):I=-1}}return l}function Wh(r,i,o,u,l,f){const m=i[ot],I=m.data[r+8],U=_d(I,m,o,null==u?li(I)&&gc:u!=m&&0!=(3&I.type),l&yt.Host&&f===I);return null!==U?Mi(i,m,U,I):rs}function _d(r,i,o,u,l){const f=r.providerIndexes,m=i.data,I=1048575&f,S=r.directiveStart,U=f>>20,te=l?I+U:r.directiveEnd;for(let ue=u?I:I+U;ue<te;ue++){const be=m[ue];if(ue<S&&o===be||ue>=S&&be.type===o)return ue}if(l){const ue=m[S];if(ue&&Kt(ue)&&ue.type===o)return S}return null}function Mi(r,i,o,u){let l=r[o];const f=i.data;if(function Es(r){return r instanceof Ls}(l)){const m=l;m.resolving&&function Je(r,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new ge(-200,`Circular dependency in DI detected for ${r}${o}`)}(function Ke(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():pe(r)}(f[o]));const I=Vs(m.canSeeViewProviders);m.resolving=!0;const x=m.injectImpl?Vn(m.injectImpl):null;$a(r,u,yt.Default);try{l=r[o]=m.factory(void 0,f,r,u),i.firstCreatePass&&o>=u.directiveStart&&function G(r,i,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:f}=i.type.prototype;if(u){const m=La(i);(o.preOrderHooks??=[]).push(r,m),(o.preOrderCheckHooks??=[]).push(r,m)}l&&(o.preOrderHooks??=[]).push(0-r,l),f&&((o.preOrderHooks??=[]).push(r,f),(o.preOrderCheckHooks??=[]).push(r,f))}(o,f[o],i)}finally{null!==x&&Vn(x),Vs(I),m.resolving=!1,Su()}}return l}function ei(r,i,o){return!!(o[i+(r>>ro)]&1<<r)}function la(r,i){return!(r&yt.Self||r&yt.Host&&i)}class Gi{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Im(this._tNode,this._lView,i,Gt(u),o)}}function ze(){return new Gi(Hr(),Le())}function Ir(r){return ve(()=>{const i=r.prototype.constructor,o=i[Yn]||vi(i),u=Object.prototype;let l=Object.getPrototypeOf(r.prototype).constructor;for(;l&&l!==u;){const f=l[Yn]||vi(l);if(f&&f!==o)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function vi(r){return rt(r)?()=>{const i=vi($e(r));return i&&i()}:ji(r)}function pt(r){const i=r[ot],o=i.type;return 2===o?i.declTNode:1===o?r[yr]:null}function vt(r){return function Gh(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const f=o[l];if(Wo(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(f===i)return o[l+1];l+=2}}}return null}(Hr(),r)}const et="__parameters__";function da(r,i,o){return ve(()=>{const u=function Or(r){return function(...o){if(r){const u=r(...o);for(const l in u)this[l]=u[l]}}}(i);function l(...f){if(this instanceof l)return u.apply(this,f),this;const m=new l(...f);return I.annotation=m,I;function I(S,x,U){const q=S.hasOwnProperty(et)?S[et]:Object.defineProperty(S,et,{value:[]})[et];for(;q.length<=U;)q.push(null);return(q[U]=q[U]||[]).push(m),S}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}function Jt(r,i){r.forEach(o=>Array.isArray(o)?Jt(o,i):i(o))}function Ip(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function Kn(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function nt(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}function ti(r,i,o){let u=io(r,i);return u>=0?r[1|u]=o:(u=~u,function Mu(r,i,o,u){let l=r.length;if(l==i)r.push(o,u);else if(1===l)r.push(u,r[0]),r[0]=o;else{for(l--,r.push(r[l-1],r[l]);l>i;)r[l]=r[l-2],l--;r[i]=o,r[i+1]=u}}(r,u,i,o)),u}function Jh(r,i){const o=io(r,i);if(o>=0)return r[1|o]}function io(r,i){return function Xh(r,i,o){let u=0,l=r.length>>o;for(;l!==u;){const f=u+(l-u>>1),m=r[f<<o];if(i===m)return f<<o;m>i?l=f:u=f+1}return~(l<<o)}(r,i,1)}const Ts=pn(da("Inject",r=>({token:r})),-1),vd=pn(da("Optional"),8),so=pn(da("SkipSelf"),4);function Gr(r){return 128==(128&r.flags)}var Nu=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(Nu||{});const wc=/^>|^->|<!--|-->|--!>|<!-$/g,as=/(<|>)/,pl="\u200b$1\u200b";const kr=new Map;let Pm=0;const ko="__ngContext__";function ri(r,i){Jr(i)?(r[ko]=i[Xi],function Cr(r){kr.set(r[Xi],r)}(i)):r[ko]=i}let ml;function bd(r,i){return ml(r,i)}function uo(r){const i=r[Tn];return ci(i)?i[Tn]:i}function Np(r){return Rd(r[Yr])}function Lo(r){return Rd(r[jr])}function Rd(r){for(;null!==r&&!ci(r);)r=r[jr];return r}function br(r,i,o,u,l){if(null!=u){let f,m=!1;ci(u)?f=u:Jr(u)&&(m=!0,u=u[In]);const I=bt(u);0===r&&null!==o?null==l?p(i,o,I):d(i,o,I,l||null,!0):1===r&&null!==o?d(i,o,I,l||null,!0):2===r?function Ds(r,i,o){const u=Q(r,i);u&&function M(r,i,o,u){r.removeChild(i,o,u)}(r,u,i,o)}(i,I,m):3===r&&i.destroyNode(I),null!=f&&function Ni(r,i,o,u,l){const f=o[ui];f!==bt(o)&&br(i,r,u,f,l);for(let I=ir;I<o.length;I++){const S=o[I];Vu(S[ot],S,r,i,u,f)}}(i,r,f,o,l)}}function co(r,i){return r.createComment(function Pp(r){return r.replace(wc,i=>i.replace(as,pl))}(i))}function fi(r,i,o){return r.createElement(i,o)}function Ja(r,i){const o=r[bi],u=o.indexOf(i);sd(i),o.splice(u,1)}function Ac(r,i){if(r.length<=ir)return;const o=ir+i,u=r[o];if(u){const l=u[wo];null!==l&&l!==r&&Ja(l,u),i>0&&(r[o-1][jr]=u[jr]);const f=Kn(r,ir+i);!function Pd(r,i){Vu(r,i,i[Pt],2,null,null),i[In]=null,i[yr]=null}(u[ot],u);const m=f[$r];null!==m&&m.detachView(f[ot]),u[Tn]=null,u[jr]=null,u[At]&=-129}return u}function Lu(r,i){if(!(256&i[At])){const o=i[Pt];i[ba]?.destroy(),i[_i]?.destroy(),o.destroyNode&&Vu(r,i,o,3,null,null),function Vo(r){let i=r[Yr];if(!i)return Md(r[ot],r);for(;i;){let o=null;if(Jr(i))o=i[Yr];else{const u=i[ir];u&&(o=u)}if(!o){for(;i&&!i[jr]&&i!==r;)Jr(i)&&Md(i[ot],i),i=i[Tn];null===i&&(i=r),Jr(i)&&Md(i[ot],i),o=i&&i[jr]}i=o}}(i)}}function Md(r,i){if(!(256&i[At])){i[At]&=-129,i[At]|=256,function Op(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const l=i[o[u]];if(!(l instanceof Ls)){const f=o[u+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const I=l[f[m]],S=f[m+1];de(4,I,S);try{S.call(I)}finally{de(5,I,S)}}else{de(4,l,f);try{f.call(l)}finally{de(5,l,f)}}}}}(r,i),function cf(r,i){const o=r.cleanup,u=i[Si];if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const m=o[f+3];m>=0?u[m]():u[-m].unsubscribe(),f+=2}else o[f].call(u[o[f+1]]);null!==u&&(i[Si]=null);const l=i[ai];if(null!==l){i[ai]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(r,i),1===i[ot].type&&i[Pt].destroy();const o=i[wo];if(null!==o&&ci(i[Tn])){o!==i[Tn]&&Ja(o,i);const u=i[$r];null!==u&&u.detachView(r)}!function Ad(r){kr.delete(r[Xi])}(i)}}function xd(r,i,o){return function g(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[In];{const{componentOffset:l}=u;if(l>-1){const{encapsulation:f}=r.data[u.directiveStart+l];if(f===ke.None||f===ke.Emulated)return null}return St(u,o)}}(r,i.parent,o)}function d(r,i,o,u,l){r.insertBefore(i,o,u,l)}function p(r,i,o){r.appendChild(i,o)}function y(r,i,o,u,l){null!==u?d(r,i,o,u,l):p(r,i,o)}function Q(r,i){return r.parentNode(i)}function Me(r,i,o){return gt(r,i,o)}let ht,xm,bc,gt=function at(r,i,o){return 40&r.type?St(r,o):null};function Ei(r,i,o,u){const l=xd(r,u,i),f=i[Pt],I=Me(u.parent||i[yr],u,i);if(null!=l)if(Array.isArray(o))for(let S=0;S<o.length;S++)y(f,l,o[S],I,!1);else y(f,l,o,I,!1);void 0!==ht&&ht(f,u,i,o,l)}function lo(r,i){if(null!==i){const o=i.type;if(3&o)return St(i,r);if(4&o)return Cc(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return lo(r,u);{const l=r[i.index];return ci(l)?Cc(-1,l):bt(l)}}if(32&o)return bd(i,r)()||bt(r[i.index]);{const u=Nd(r,i);return null!==u?Array.isArray(u)?u[0]:lo(uo(r[ln]),u):lo(r,i.next)}}return null}function Nd(r,i){return null!==i?r[ln][yr].projection[i.projection]:null}function Cc(r,i){const o=ir+r+1;if(o<i.length){const u=i[o],l=u[ot].firstChild;if(null!==l)return lo(u,l)}return i[ui]}function Uo(r,i,o,u,l,f,m){for(;null!=o;){const I=u[o.index],S=o.type;if(m&&0===i&&(I&&ri(bt(I),u),o.flags|=2),32!=(32&o.flags))if(8&S)Uo(r,i,o.child,u,l,f,!1),br(i,r,l,I,f);else if(32&S){const x=bd(o,u);let U;for(;U=x();)br(i,r,l,U,f);br(i,r,l,I,f)}else 16&S?ga(r,i,u,o,l,f):br(i,r,l,I,f);o=m?o.projectionNext:o.next}}function Vu(r,i,o,u,l,f){Uo(o,u,r.firstChild,i,l,f,!1)}function ga(r,i,o,u,l,f){const m=o[ln],S=m[yr].projection[u.projection];if(Array.isArray(S))for(let x=0;x<S.length;x++)br(i,r,l,S[x],f);else{let x=S;const U=m[Tn];Gr(u)&&(x.flags|=128),Uo(r,i,x,U,l,f,!0)}}function vl(r,i,o){""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o)}function Fd(r,i,o){const{mergedAttrs:u,classes:l,styles:f}=o;null!==u&&hs(r,i,u),null!==l&&vl(r,i,l),null!==f&&function yl(r,i,o){r.setAttribute(i,"style",o)}(r,i,f)}function js(r){xm=r}function Ld(r){return function Fp(){if(void 0===bc&&(bc=null,en.trustedTypes))try{bc=en.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return bc}()?.createScriptURL(r)||r}class Pv{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${fn})`}}function Bu(r){return r instanceof Pv?r.changingThisBreaksApplicationSecurity:r}function Vd(r,i){const o=function Lp(r){return r instanceof Pv&&r.getTypeName()||null}(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${fn})`)}return o===i}const Nv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Hd=function(r){return r[r.NONE=0]="NONE",r[r.HTML=1]="HTML",r[r.STYLE=2]="STYLE",r[r.SCRIPT=3]="SCRIPT",r[r.URL=4]="URL",r[r.RESOURCE_URL=5]="RESOURCE_URL",r}(Hd||{});function Um(r){const i=ju();return i?i.sanitize(Hd.URL,r)||"":Vd(r,"URL")?Bu(r):function Vp(r){return(r=String(r)).match(Nv)?r:"unsafe:"+r}(pe(r))}function Bm(r){const i=ju();if(i)return Ld(i.sanitize(Hd.RESOURCE_URL,r)||"");if(Vd(r,"ResourceURL"))return Ld(Bu(r));throw new ge(904,!1)}function jm(r,i,o){return function Uv(r,i){return"src"===i&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===i&&("base"===r||"link"===r)?Bm:Um}(i,o)(r)}function ju(){const r=Le();return r&&r[mi].sanitizer}class Pn{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Lt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Rc=new Pn("ENVIRONMENT_INITIALIZER"),$m=new Pn("INJECTOR",-1),Hm=new Pn("INJECTOR_DEF_TYPES");class $p{get(i,o=Ur){if(o===Ur){const u=new Error(`NullInjectorError: No provider for ${ie(i)}!`);throw u.name="NullInjectorError",u}return o}}function $v(...r){return{\u0275providers:zm(0,r),\u0275fromNgModule:!0}}function zm(r,...i){const o=[],u=new Set;let l;const f=m=>{o.push(m)};return Jt(i,m=>{const I=m;Hp(I,f,[],u)&&(l||=[],l.push(I))}),void 0!==l&&Hv(l,f),o}function Hv(r,i){for(let o=0;o<r.length;o++){const{ngModule:u,providers:l}=r[o];Gm(l,f=>{i(f,u)})}}function Hp(r,i,o,u){if(!(r=$e(r)))return!1;let l=null,f=ls(r);const m=!f&&nn(r);if(f||m){if(m&&!m.standalone)return!1;l=r}else{const S=r.ngModule;if(f=ls(S),!f)return!1;l=S}const I=u.has(l);if(m){if(I)return!1;if(u.add(l),m.dependencies){const S="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const x of S)Hp(x,i,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let x;u.add(l);try{Jt(f.imports,U=>{Hp(U,i,o,u)&&(x||=[],x.push(U))})}finally{}void 0!==x&&Hv(x,i)}if(!I){const x=ji(l)||(()=>new l);i({provide:l,useFactory:x,deps:tt},l),i({provide:Hm,useValue:l,multi:!0},l),i({provide:Rc,useValue:()=>Fe(l),multi:!0},l)}const S=f.providers;if(null!=S&&!I){const x=r;Gm(S,U=>{i(U,x)})}}}return l!==r&&void 0!==r.providers}function Gm(r,i){for(let o of r)lt(o)&&(o=o.\u0275providers),Array.isArray(o)?Gm(o,i):i(o)}const Wm=K({provide:String,useValue:K});function Pc(r){return null!==r&&"object"==typeof r&&Wm in r}function lr(r){return"function"==typeof r}const mf=new Pn("Set Injector scope."),_f={},yf={};let Bo;function vf(){return void 0===Bo&&(Bo=new $p),Bo}class _a{}class zd extends _a{get destroyed(){return this._destroyed}constructor(i,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gp(i,m=>this.processProvider(m)),this.records.set($m,Gd(void 0,this)),l.has("environment")&&this.records.set(_a,Gd(void 0,this));const f=this.records.get(mf);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Hm.multi,tt,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of i)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const o=ne(this),u=Vn(void 0);try{return i()}finally{ne(o),Vn(u)}}get(i,o=Ur,u=yt.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(po))return i[po](this);u=Gt(u);const f=ne(this),m=Vn(void 0);try{if(!(u&yt.SkipSelf)){let S=this.records.get(i);if(void 0===S){const x=function nw(r){return"function"==typeof r||"object"==typeof r&&r instanceof Pn}(i)&&Gn(i);S=x&&this.injectableDefInScope(x)?Gd(zp(i),_f):null,this.records.set(i,S)}if(null!=S)return this.hydrate(i,S)}return(u&yt.Self?vf():this.parent).get(i,o=u&yt.Optional&&o===Ur?null:o)}catch(I){if("NullInjectorError"===I.name){if((I[Di]=I[Di]||[]).unshift(ie(i)),f)throw I;return function Yi(r,i,o,u){const l=r[Di];throw i[$]&&l.unshift(i[$]),r.message=function Ca(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let l=ie(i);if(Array.isArray(i))l=i.map(ie).join(" -> ");else if("object"==typeof i){let f=[];for(let m in i)if(i.hasOwnProperty(m)){let I=i[m];f.push(m+":"+("string"==typeof I?JSON.stringify(I):ie(I)))}l=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${r.replace(X,"\n  ")}`}("\n"+r.message,l,o,u),r.ngTokenPath=l,r[Di]=null,r}(I,i,"R3InjectorError",this.source)}throw I}finally{Vn(m),ne(f)}}resolveInjectorInitializers(){const i=ne(this),o=Vn(void 0);try{const l=this.get(Rc.multi,tt,yt.Self);for(const f of l)f()}finally{ne(i),Vn(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(ie(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(i){let o=lr(i=$e(i))?i:$e(i&&i.provide);const u=function Wv(r){return Pc(r)?Gd(void 0,r.useValue):Gd(qv(r),_f)}(i);if(lr(i)||!0!==i.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Gd(void 0,_f,!0),l.factory=()=>Rt(l.multi),this.records.set(o,l)),o=i,l.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===_f&&(o.value=yf,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Km(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=$e(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(i){const o=this._onDestroyHooks.indexOf(i);-1!==o&&this._onDestroyHooks.splice(o,1)}}function zp(r){const i=Gn(r),o=null!==i?i.factory:ji(r);if(null!==o)return o;if(r instanceof Pn)throw new ge(204,!1);if(r instanceof Function)return function Gv(r){const i=r.length;if(i>0)throw nt(i,"?"),new ge(204,!1);const o=function qr(r){return r&&(r[Zr]||r[Dt])||null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new ge(204,!1)}function qv(r,i,o){let u;if(lr(r)){const l=$e(r);return ji(l)||zp(l)}if(Pc(r))u=()=>$e(r.useValue);else if(function zv(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Rt(r.deps||[]));else if(function qm(r){return!(!r||!r.useExisting)}(r))u=()=>Fe($e(r.useExisting));else{const l=$e(r&&(r.useClass||r.provide));if(!function Ef(r){return!!r.deps}(r))return ji(l)||zp(l);u=()=>new l(...Rt(r.deps))}return u}function Gd(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function Gp(r,i){for(const o of r)Array.isArray(o)?Gp(o,i):o&&lt(o)?Gp(o.\u0275providers,i):i(o)}const Wp=new Pn("AppId",{providedIn:"root",factory:()=>Zv}),Zv="ng",Kv=new Pn("Platform Initializer"),qp=new Pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rw=new Pn("CSP nonce",{providedIn:"root",factory:()=>function El(){if(void 0!==xm)return xm;if(typeof document<"u")return document;throw new ge(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Qm=(r,i,o)=>null;function Tl(r,i,o=!1){return Qm(r,i,o)}class eE{}class tE{}class Jm{resolveComponentFactory(i){throw function Ym(r){const i=Error(`No component factory found for ${ie(r)}.`);return i.ngComponent=r,i}(i)}}let Yd=(()=>{class r{static#e=this.NULL=new Jm}return r})();function nE(){return Hu(Hr(),Le())}function Hu(r,i){return new Tf(St(r,i))}let Tf=(()=>{class r{constructor(o){this.nativeElement=o}static#e=this.__NG_ELEMENT_ID__=nE}return r})();function Xm(r){return r instanceof Tf?r.nativeElement:r}class Df{}let cw=(()=>{class r{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function rE(){const r=Le(),o=er(Hr().index,r);return(Jr(o)?o:r)[Pt]}()}return r})(),Jd=(()=>{class r{static#e=this.\u0275prov=Lt({token:r,providedIn:"root",factory:()=>null})}return r})();class Xd{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Cl=new Xd("16.2.1"),rg={};function Ii(r){if(!Vt()&&!function H(){return B}())throw new ge(-203,!1)}function Rl(r,i=null,o=null,u){const l=n_(r,i,o,u);return l.resolveInjectorInitializers(),l}function n_(r,i=null,o=null,u,l=new Set){const f=[o||tt,$v(r)];return u=u||("object"==typeof r?void 0:ie(r)),new zd(f,i||vf(),u||null,l)}let Oi=(()=>{class r{static#e=this.THROW_IF_NOT_FOUND=Ur;static#t=this.NULL=new $p;static create(o,u){if(Array.isArray(o))return Rl({name:""},u,o,"");{const l=o.name??"";return Rl({name:l},o.parent,o.providers,l)}}static#n=this.\u0275prov=Lt({token:r,providedIn:"any",factory:()=>Fe($m)});static#r=this.__NG_ELEMENT_ID__=-1}return r})(),eh=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=sE;static#t=this.__NG_ENV_ID__=o=>o}return r})();class dw extends eh{constructor(i){super(),this._lView=i}onDestroy(i){return Du(this._lView,i),()=>function Vh(r,i){if(null===r[ai])return;const o=r[ai].indexOf(i);-1!==o&&r[ai].splice(o,1)}(this._lView,i)}}function sE(){return new dw(Le())}function nu(r){return r instanceof Function?r():r}let Gu=(()=>{class r{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new ge(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const o of this.callbacks)o.invoke()}finally{this.runningCallbacks=!1;for(const o of this.deferredCallbacks)this.callbacks.add(o);this.deferredCallbacks.clear()}}register(o){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(o)}unregister(o){this.callbacks.delete(o),this.deferredCallbacks.delete(o)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}static#e=this.\u0275prov=Lt({token:r,providedIn:"root",factory:()=>new r})}return r})();function Wu(r){for(;r;){r[At]|=64;const i=uo(r);if(hr(r)&&!i)return r;r=i}return null}function s_(r){return r.ngOriginalError}class Pl{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&s_(i);for(;o&&s_(o);)o=s_(o);return o||null}}const ag=new Pn("",{providedIn:"root",factory:()=>!1});class ug extends xr{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(i){this._lView=i}onConsumerDependencyMayHaveChanged(){Wu(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(i,o,u){const l=ar(this);this.trackingVersion++;try{i(o,u)}finally{ar(l)}}destroy(){this.trackingVersion++}}let Oc=null;function Af(){return Oc??=new ug,Oc}function cg(r,i){return r[i]??Af()}function lg(r,i){const o=Af();o.hasReadASignal&&(r[i]=Oc,o.lView=r,Oc=new ug)}const rn={};function c_(r){pE(mn(),Le(),Nr()+r,!1)}function pE(r,i,o,u){if(!u)if(3==(3&i[At])){const f=r.preOrderCheckHooks;null!==f&&re(i,f,o)}else{const f=r.preOrderHooks;null!==f&&Ue(i,f,0,o)}ua(o)}function Ml(r,i=yt.Default){const o=Le();return null===o?Fe(r,i):Im(Hr(),o,$e(r),i)}function l_(){throw new Error("invalid")}function dg(r,i,o,u,l,f,m,I,S,x,U){const q=i.blueprint.slice();return q[In]=l,q[At]=140|u,(null!==x||r&&2048&r[At])&&(q[At]|=2048),zi(q),q[Tn]=q[xs]=r,q[Un]=o,q[mi]=m||r&&r[mi],q[Pt]=I||r&&r[Pt],q[Bi]=S||r&&r[Bi]||null,q[yr]=f,q[Xi]=function fa(){return Pm++}(),q[es]=U,q[tc]=x,q[ln]=2==i.type?r[ln]:q,q}function xl(r,i,o,u,l){let f=r.data[i];if(null===f)f=function h_(r,i,o,u,l){const f=uc(),m=Ua(),S=r.data[i]=function vE(r,i,o,u,l,f){let m=i?i.injectorIndex:-1,I=0;return sr()&&(I|=128),{type:o,index:u,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,o,i,u,l);return null===r.firstChild&&(r.firstChild=S),null!==f&&(m?null==f.child&&null!==S.parent&&(f.child=S):null===f.next&&(f.next=S,S.prev=f)),S}(r,i,o,u,l),function Er(){return Ht.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=o,f.value=u,f.attrs=l;const m=function ia(){const r=Ht.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return zr(f,!0),f}function nh(r,i,o,u){if(0===o)return-1;const l=i.length;for(let f=0;f<o;f++)i.push(u),r.blueprint.push(u),r.data.push(null);return l}function gE(r,i,o,u,l){const f=cg(i,ba),m=Nr(),I=2&u;try{if(ua(-1),I&&i.length>jt&&pE(r,i,jt,!1),de(I?2:0,l),I)f.runInContext(o,u,l);else{const x=ar(null);try{o(u,l)}finally{ar(x)}}}finally{I&&null===i[ba]&&lg(i,ba),ua(m),de(I?3:1,l)}}function kc(r,i,o){if(Zo(i)){const u=ar(null);try{const f=i.directiveEnd;for(let m=i.directiveStart;m<f;m++){const I=r.data[m];I.contentQueries&&I.contentQueries(1,o[m],m)}}finally{ar(u)}}}function Fc(r,i,o){eo()&&(function ww(r,i,o,u){const l=o.directiveStart,f=o.directiveEnd;li(o)&&function Dw(r,i,o){const u=St(i,r),l=Sf(o);let m=16;o.signals?m=4096:o.onPush&&(m=64);const I=ih(r,dg(r,l,null,m,u,i,null,r[mi].rendererFactory.createRenderer(u,o),null,null,null));r[i.index]=I}(i,o,r.data[l+o.componentOffset]),r.firstCreatePass||sl(o,i),ri(u,i);const m=o.initialInputs;for(let I=l;I<f;I++){const S=r.data[I],x=Mi(i,r,I,o);ri(x,i),null!==m&&Aw(0,I-l,x,S,0,m),Kt(S)&&(er(o.index,i)[Un]=Mi(i,r,I,o))}}(r,i,o,St(o,i)),64==(64&o.flags)&&EE(r,i,o))}function Cf(r,i,o=St){const u=i.localNames;if(null!==u){let l=i.index+1;for(let f=0;f<u.length;f+=2){const m=u[f+1],I=-1===m?o(i,r):r[m];r[l++]=I}}}function Sf(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=hg(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):i}function hg(r,i,o,u,l,f,m,I,S,x,U){const q=jt+u,te=q+l,ue=function mE(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:rn);return o}(q,te),be="function"==typeof x?x():x;return ue[ot]={type:r,blueprint:ue,template:o,queries:null,viewQuery:I,declTNode:i,data:ue.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:S,consts:be,incompleteFirstPass:!1,ssrId:U}}let fg=r=>null;function pg(r,i,o,u){for(let l in r)if(r.hasOwnProperty(l)){o=null===o?{}:o;const f=r[l];null===u?bf(o,i,l,f):u.hasOwnProperty(l)&&bf(o,i,u[l],f)}return o}function bf(r,i,o,u){r.hasOwnProperty(o)?r[o].push(i,u):r[o]=[i,u]}function m_(r,i,o,u){if(eo()){const l=null===u?null:{"":-1},f=function Tw(r,i){const o=r.directiveRegistry;let u=null,l=null;if(o)for(let f=0;f<o.length;f++){const m=o[f];if(hu(i,m.selectors,!1))if(u||(u=[]),Kt(m))if(null!==m.findHostDirectiveDefs){const I=[];l=l||new Map,m.findHostDirectiveDefs(m,I,l),u.unshift(...I,m),_g(r,i,I.length)}else u.unshift(m),_g(r,i,0);else l=l||new Map,m.findHostDirectiveDefs?.(m,u,l),u.push(m)}return null===u?null:[u,l]}(r,o);let m,I;null===f?m=I=null:[m,I]=f,null!==m&&__(r,i,o,m,l,I),l&&function yg(r,i,o){if(i){const u=r.localNames=[];for(let l=0;l<i.length;l+=2){const f=o[i[l+1]];if(null==f)throw new ge(-301,!1);u.push(i[l],f)}}}(o,u,l)}o.mergedAttrs=Ai(o.mergedAttrs,o.attrs)}function __(r,i,o,u,l,f){for(let x=0;x<u.length;x++)ol(sl(o,i),r,u[x].type);!function v_(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}(o,r.data.length,u.length);for(let x=0;x<u.length;x++){const U=u[x];U.providersResolver&&U.providersResolver(U)}let m=!1,I=!1,S=nh(r,i,u.length,null);for(let x=0;x<u.length;x++){const U=u[x];o.mergedAttrs=Ai(o.mergedAttrs,U.hostAttrs),IE(r,o,i,S,U),Pf(S,U,l),null!==U.contentQueries&&(o.flags|=4),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(o.flags|=64);const q=U.type.prototype;!m&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((r.preOrderHooks??=[]).push(o.index),m=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(o.index),I=!0),S++}!function Rf(r,i,o){const l=i.directiveEnd,f=r.data,m=i.attrs,I=[];let S=null,x=null;for(let U=i.directiveStart;U<l;U++){const q=f[U],te=o?o.get(q):null,be=te?te.outputs:null;S=pg(q.inputs,U,S,te?te.inputs:null),x=pg(q.outputs,U,x,be);const Ye=null===S||null===m||qo(i)?null:Cw(S,U,m);I.push(Ye)}null!==S&&(S.hasOwnProperty("class")&&(i.flags|=8),S.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=I,i.inputs=S,i.outputs=x}(r,o,f)}function EE(r,i,o){const u=o.directiveStart,l=o.directiveEnd,f=o.index,m=function Hh(){return Ht.lFrame.currentDirectiveIndex}();try{ua(f);for(let I=u;I<l;I++){const S=r.data[I],x=i[I];Cu(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&us(S,x)}}finally{ua(-1),Cu(m)}}function us(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function _g(r,i,o){i.componentOffset=o,(r.components??=[]).push(i.index)}function Pf(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;Kt(i)&&(o[""]=r)}}function IE(r,i,o,u,l){r.data[u]=l;const f=l.factory||(l.factory=ji(l.type)),m=new Ls(f,Kt(l),Ml);r.blueprint[u]=m,o[u]=m,function mg(r,i,o,u,l){const f=l.hostBindings;if(f){let m=r.hostBindingOpCodes;null===m&&(m=r.hostBindingOpCodes=[]);const I=~i.index;(function y_(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(m)!=I&&m.push(I),m.push(o,u,f)}}(r,i,u,nh(r,o,l.hostVars,rn),l)}function ru(r,i,o,u,l,f){const m=St(r,i);!function E_(r,i,o,u,l,f,m){if(null==f)r.removeAttribute(i,l,o);else{const I=null==m?pe(f):m(f,u||"",l);r.setAttribute(i,l,I,o)}}(i[Pt],m,f,r.value,o,u,l)}function Aw(r,i,o,u,l,f){const m=f[i];if(null!==m)for(let I=0;I<m.length;)vg(u,o,m[I++],m[I++],m[I++])}function vg(r,i,o,u,l){const f=ar(null);try{const m=r.inputTransforms;null!==m&&m.hasOwnProperty(u)&&(l=m[u].call(i,l)),null!==r.setInput?r.setInput(i,l,o,u):i[u]=l}finally{ar(f)}}function Cw(r,i,o){let u=null,l=0;for(;l<o.length;){const f=o[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(r.hasOwnProperty(f)){null===u&&(u=[]);const m=r[f];for(let I=0;I<m.length;I+=2)if(m[I]===i){u.push(f,m[I+1],o[l+1]);break}}l+=2}else l+=2;else l+=4}return u}function rh(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const f=o[u+1];if(-1!==f){const m=r.data[f];ja(o[u]),m.contentQueries(2,i[f],f)}}}function ih(r,i){return r[Yr]?r[Ms][jr]=i:r[Yr]=i,r[Ms]=i,i}function Lc(r,i,o){ja(0);const u=ar(null);try{i(r,o)}finally{ar(u)}}function Mf(r){return r[Si]||(r[Si]=[])}function sh(r){return r.cleanup||(r.cleanup=[])}function I_(r,i){const o=r[Bi],u=o?o.get(Pl,null):null;u&&u.handleError(i)}function xf(r,i,o,u,l){for(let f=0;f<o.length;){const m=o[f++],I=o[f++];vg(r.data[m],i[m],u,I,l)}}function Vc(r,i){const o=er(i,r),u=o[ot];!function DE(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])}(u,o);const l=o[In];null!==l&&null===o[es]&&(o[es]=Tl(l,o[Bi])),w_(u,o,o[Un])}function w_(r,i,o){hc(i);try{const u=r.viewQuery;null!==u&&Lc(1,u,o);const l=r.template;null!==l&&gE(r,i,l,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&rh(r,i),r.staticViewQueries&&Lc(2,r.viewQuery,o);const f=r.components;null!==f&&function T_(r,i){for(let o=0;o<i.length;o++)Vc(r,i[o])}(i,f)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[At]&=-5,za()}}let AE=(()=>{class r{constructor(){this.all=new Set,this.queue=new Map}create(o,u,l){const f=typeof Zone>"u"?null:Zone.current,m=new Oa(o,x=>{this.all.has(x)&&this.queue.set(x,f)},l);let I;this.all.add(m),m.notify();const S=()=>{m.cleanup(),I?.(),this.all.delete(m),this.queue.delete(m)};return I=u?.onDestroy(S),{destroy:S}}flush(){if(0!==this.queue.size)for(const[o,u]of this.queue)this.queue.delete(o),u?u.run(()=>o.run()):o.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Lt({token:r,providedIn:"root",factory:()=>new r})}return r})();function Ig(r,i,o){let u=o?r.styles:null,l=o?r.classes:null,f=0;if(null!==i)for(let m=0;m<i.length;m++){const I=i[m];"number"==typeof I?f=I:1==f?l=qe(l,I):2==f&&(u=qe(u,I+": "+i[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=l:r.classesWithoutHost=l}function Nl(r,i,o,u,l=!1){for(;null!==o;){const f=i[o.index];if(null!==f&&u.push(bt(f)),ci(f)){for(let I=ir;I<f.length;I++){const S=f[I],x=S[ot].firstChild;null!==x&&Nl(S[ot],S,x,u)}f[ui]!==f[In]&&u.push(f[ui])}const m=o.type;if(8&m)Nl(r,i,o.child,u);else if(32&m){const I=bd(o,i);let S;for(;S=I();)u.push(S)}else if(16&m){const I=Nd(i,o);if(Array.isArray(I))u.push(...I);else{const S=uo(i[ln]);Nl(S[ot],S,I,u,!0)}}o=l?o.projectionNext:o.next}return u}function Ol(r,i,o,u=!0){const l=i[mi],f=l.rendererFactory,m=l.afterRenderEventManager;f.begin?.(),m?.begin();try{kl(r,i,r.template,o)}catch(S){throw u&&I_(i,S),S}finally{f.end?.(),l.effectManager?.flush(),m?.end()}}function kl(r,i,o,u){const l=i[At];if(256!=(256&l)){i[mi].effectManager?.flush(),hc(i);try{zi(i),function cd(r){return Ht.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&gE(r,i,o,2,u);const m=3==(3&l);if(m){const x=r.preOrderCheckHooks;null!==x&&re(i,x,null)}else{const x=r.preOrderHooks;null!==x&&Ue(i,x,0,null),_t(i,0)}if(function Sw(r){for(let i=Np(r);null!==i;i=Lo(i)){if(!i[ms])continue;const o=i[bi];for(let u=0;u<o.length;u++){na(o[u])}}}(i),wg(i,2),null!==r.contentQueries&&rh(r,i),m){const x=r.contentCheckHooks;null!==x&&re(i,x)}else{const x=r.contentHooks;null!==x&&Ue(i,x,1),_t(i,1)}!function d_(r,i){const o=r.hostBindingOpCodes;if(null===o)return;const u=cg(i,_i);try{for(let l=0;l<o.length;l++){const f=o[l];if(f<0)ua(~f);else{const m=f,I=o[++l],S=o[++l];dd(I,m),u.runInContext(S,2,i[m])}}}finally{null===i[_i]&&lg(i,_i),ua(-1)}}(r,i);const I=r.components;null!==I&&C_(i,I,0);const S=r.viewQuery;if(null!==S&&Lc(2,S,u),m){const x=r.viewCheckHooks;null!==x&&re(i,x)}else{const x=r.viewHooks;null!==x&&Ue(i,x,2),_t(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[At]&=-73,sd(i)}finally{za()}}}function wg(r,i){for(let o=Np(r);null!==o;o=Lo(o))for(let u=ir;u<o.length;u++)A_(o[u],i)}function bw(r,i,o){A_(er(i,r),o)}function A_(r,i){if(!function gn(r){return 128==(128&r[At])}(r))return;const o=r[ot];if(80&r[At]&&0===i||1024&r[At]||2===i)kl(o,r,o.template,r[Un]);else if(r[gs]>0){wg(r,1);const l=r[ot].components;null!==l&&C_(r,l,1)}}function C_(r,i,o){for(let u=0;u<i.length;u++)bw(r,i[u],o)}class Nf{get rootNodes(){const i=this._lView,o=i[ot];return Nl(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Un]}set context(i){this._lView[Un]=i}get destroyed(){return 256==(256&this._lView[At])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Tn];if(ci(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(Ac(i,u),Kn(o,u))}this._attachedToViewContainer=!1}Lu(this._lView[ot],this._lView)}onDestroy(i){Du(this._lView,i)}markForCheck(){Wu(this._cdRefInjectingView||this._lView)}detach(){this._lView[At]&=-129}reattach(){this._lView[At]|=128}detectChanges(){Ol(this._lView[ot],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Mm(r,i){Vu(r,i,i[Pt],2,null,null)}(this._lView[ot],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=i}}class S_ extends Nf{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Ol(i[ot],i,i[Un],!1)}checkNoChanges(){}get context(){return null}}class bE extends Yd{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=nn(i);return new Of(o,this.ngModule)}}function Tg(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}class b_{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){u=Gt(u);const l=this.injector.get(i,rg,u);return l!==rg||o===rg?l:this.parentInjector.get(i,o,u)}}class Of extends tE{get inputs(){const i=this.componentDef,o=i.inputTransforms,u=Tg(i.inputs);if(null!==o)for(const l of u)o.hasOwnProperty(l.propName)&&(l.transform=o[l.propName]);return u}get outputs(){return Tg(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Xu(r){return r.map(Qr).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,u,l){let f=(l=l||this.ngModule)instanceof _a?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new b_(i,f):i,I=m.get(Df,null);if(null===I)throw new ge(407,!1);const q={rendererFactory:I,sanitizer:m.get(Jd,null),effectManager:m.get(AE,null),afterRenderEventManager:m.get(Gu,null)},te=I.createRenderer(null,this.componentDef),ue=this.componentDef.selectors[0][0]||"div",be=u?function _E(r,i,o,u){const f=u.get(ag,!1)||o===ke.ShadowDom,m=r.selectRootElement(i,f);return function vw(r){fg(r)}(m),m}(te,u,this.componentDef.encapsulation,m):fi(te,ue,function Rw(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(ue)),xt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ge=null;null!==be&&(Ge=Tl(be,m,!0));const Xt=hg(0,null,null,1,0,null,null,null,null,null,null),vn=dg(null,Xt,null,xt,null,null,q,te,m,null,Ge);let dr,Ho;hc(vn);try{const nd=this.componentDef;let vm,tA=null;nd.findHostDirectiveDefs?(vm=[],tA=new Map,nd.findHostDirectiveDefs(nd,vm,tA),vm.push(nd)):vm=[nd];const dS=function RE(r,i){const o=r[ot],u=jt;return r[u]=i,xl(o,u,2,"#host",null)}(vn,be),hS=function P_(r,i,o,u,l,f,m){const I=l[ot];!function M_(r,i,o,u){for(const l of r)i.mergedAttrs=Ai(i.mergedAttrs,l.hostAttrs);null!==i.mergedAttrs&&(Ig(i,i.mergedAttrs,!0),null!==o&&Fd(u,o,i))}(u,r,i,m);let S=null;null!==i&&(S=Tl(i,l[Bi]));const x=f.rendererFactory.createRenderer(i,o);let U=16;o.signals?U=4096:o.onPush&&(U=64);const q=dg(l,Sf(o),null,U,l[r.index],r,f,x,null,null,S);return I.firstCreatePass&&_g(I,r,u.length-1),ih(l,q),l[r.index]=q}(dS,be,nd,vm,vn,q,te);Ho=$t(Xt,jt),be&&function oh(r,i,o,u){if(u)hs(r,o,["ng-version",Cl.full]);else{const{attrs:l,classes:f}=function mr(r){const i=[],o=[];let u=1,l=2;for(;u<r.length;){let f=r[u];if("string"==typeof f)2===l?""!==f&&i.push(f,r[++u]):8===l&&o.push(f);else{if(!Jn(l))break;l=f}u++}return{attrs:i,classes:o}}(i.selectors[0]);l&&hs(r,o,l),f&&f.length>0&&vl(r,o,f.join(" "))}}(te,nd,be,u),void 0!==o&&function Uc(r,i,o){const u=r.projection=[];for(let l=0;l<i.length;l++){const f=o[l];u.push(null!=f?Array.from(f):null)}}(Ho,this.ngContentSelectors,o),dr=function x_(r,i,o,u,l,f){const m=Hr(),I=l[ot],S=St(m,l);__(I,l,m,o,null,u);for(let U=0;U<o.length;U++)ri(Mi(l,I,m.directiveStart+U,m),l);EE(I,l,m),S&&ri(S,l);const x=Mi(l,I,m.directiveStart+m.componentOffset,m);if(r[Un]=l[Un]=x,null!==f)for(const U of f)U(x,i);return kc(I,m,r),x}(hS,nd,vm,tA,vn,[N_]),w_(Xt,vn,null)}finally{za()}return new R_(this.componentType,dr,Hu(Ho,vn),vn,Ho)}}class R_ extends eE{constructor(i,o,u,l,f){super(),this.location=u,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new S_(l),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[i])){if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),o))return;const f=this._rootLView;xf(f[ot],f,l,i,o),this.previousInputValues.set(i,o),Wu(er(this._tNode.index,f))}}get injector(){return new Gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function N_(){const r=Hr();z(Le()[ot],r)}function xE(r){const i=r.inputConfig,o={};for(const u in i)if(i.hasOwnProperty(u)){const l=i[u];Array.isArray(l)&&l[2]&&(o[u]=l[2])}r.inputTransforms=o}function kf(r){return!!B_(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function B_(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Fi(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function Lf(r,i,o,u){const l=Le();return Fi(l,bn(),i)&&(mn(),ru(ur(),l,r,i,o,u)),Lf}function Hf(r,i,o){const u=Le();return Fi(u,bn(),i)&&function As(r,i,o,u,l,f,m,I){const S=St(i,o);let U,x=i.inputs;!I&&null!=x&&(U=x[u])?(xf(r,o,U,u,l),li(i)&&function p_(r,i){const o=er(i,r);16&o[At]||(o[At]|=64)}(o,i.index)):3&i.type&&(u=function gg(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),l=null!=m?m(l,i.value||"",u):l,f.setProperty(S,u,l))}(mn(),ur(),u,r,i,u[Pt],o,!1),Hf}function fh(r,i,o,u,l){const m=l?"class":"style";xf(r,o,i.inputs[m],m,u)}function zf(r,i,o,u){const l=Le(),f=mn(),m=jt+r,I=l[Pt],S=f.firstCreatePass?function X_(r,i,o,u,l,f){const m=i.consts,S=xl(i,r,2,u,vr(m,l));return m_(i,o,S,vr(m,f)),null!==S.attrs&&Ig(S,S.attrs,!1),null!==S.mergedAttrs&&Ig(S,S.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,S),S}(m,f,l,i,o,u):f.data[m],x=Fg(f,l,S,I,i,r);l[m]=x;const U=Ks(S);return zr(S,!0),Fd(I,x,S),32!=(32&S.flags)&&C()&&Ei(f,l,x,S),0===function Uh(){return Ht.lFrame.elementDepthCount}()&&ri(x,l),function Bh(){Ht.lFrame.elementDepthCount++}(),U&&(Fc(f,l,S),kc(f,S,l)),null!==u&&Cf(l,S),zf}function Ku(){let r=Hr();Ua()?Ba():(r=r.parent,zr(r,!1));const i=r;(function rl(r){return Ht.skipHydrationRootTNode===r})(i)&&function ad(){Ht.skipHydrationRootTNode=null}(),function jh(){Ht.lFrame.elementDepthCount--}();const o=mn();return o.firstCreatePass&&(z(o,r),Zo(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function Fn(r){return 0!=(8&r.flags)}(i)&&fh(o,i,Le(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Em(r){return 0!=(16&r.flags)}(i)&&fh(o,i,Le(),i.stylesWithoutHost,!1),Ku}function kg(r,i,o,u){return zf(r,i,o,u),Ku(),kg}let Fg=(r,i,o,u,l,f)=>(N(!0),fi(u,l,function A(){return Ht.lFrame.currentNamespace}()));function Lg(r,i,o){const u=Le(),l=mn(),f=r+jt,m=l.firstCreatePass?function ey(r,i,o,u,l){const f=i.consts,m=vr(f,u),I=xl(i,r,8,"ng-container",m);return null!==m&&Ig(I,m,!0),m_(i,o,I,vr(f,l)),null!==i.queries&&i.queries.elementStart(i,I),I}(f,l,u,i,o):l.data[f];zr(m,!0);const I=ty(l,u,m,r);return u[f]=I,C()&&Ei(l,u,I,m),ri(I,u),Ks(m)&&(Fc(l,u,m),kc(l,m,u)),null!=o&&Cf(u,m),Lg}function Vg(){let r=Hr();const i=mn();return Ua()?Ba():(r=r.parent,zr(r,!1)),i.firstCreatePass&&(z(i,r),Zo(r)&&i.queries.elementEnd(r)),Vg}let ty=(r,i,o,u)=>(N(!0),co(i[Pt],""));function ny(r){return!!r&&"function"==typeof r.then}function qE(r){return!!r&&"function"==typeof r.subscribe}function ry(r,i,o,u){const l=Le(),f=mn(),m=Hr();return function iy(r,i,o,u,l,f,m){const I=Ks(u),x=r.firstCreatePass&&sh(r),U=i[Un],q=Mf(i);let te=!0;if(3&u.type||m){const Ye=St(u,i),ft=m?m(Ye):Ye,xt=q.length,Ge=m?vn=>m(bt(vn[u.index])):u.index;let Xt=null;if(!m&&I&&(Xt=function Ww(r,i,o,u){const l=r.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const m=l[f];if(m===o&&l[f+1]===u){const I=i[Si],S=l[f+2];return I.length>S?I[S]:null}"string"==typeof m&&(f+=2)}return null}(r,i,l,u.index)),null!==Xt)(Xt.__ngLastListenerFn__||Xt).__ngNextListenerFn__=f,Xt.__ngLastListenerFn__=f,te=!1;else{f=Ug(u,i,U,f,!1);const vn=o.listen(ft,l,f);q.push(f,vn),x&&x.push(l,Ge,xt,xt+1)}}else f=Ug(u,i,U,f,!1);const ue=u.outputs;let be;if(te&&null!==ue&&(be=ue[l])){const Ye=be.length;if(Ye)for(let ft=0;ft<Ye;ft+=2){const dr=i[be[ft]][be[ft+1]].subscribe(f),Ho=q.length;q.push(f,dr),x&&x.push(l,u.index,Ho,-(Ho+1))}}}(f,l,l[Pt],m,r,i,u),ry}function sy(r,i,o,u){try{return de(6,i,o),!1!==o(u)}catch(l){return I_(r,l),!1}finally{de(7,i,o)}}function Ug(r,i,o,u,l){return function f(m){if(m===Function)return u;Wu(r.componentOffset>-1?er(r.index,i):i);let S=sy(i,o,u,m),x=f.__ngNextListenerFn__;for(;x;)S=sy(i,o,x,m)&&S,x=x.__ngNextListenerFn__;return l&&!1===S&&m.preventDefault(),S}}function QE(r,i){let o=null;const u=function oi(r){const i=r.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(r);for(let l=0;l<i.length;l++){const f=i[l];if("*"!==f){if(null===u?hu(r,f,!0):Ut(u,f))return l}else o=l}return o}function oy(r){const i=Le()[ln][yr];if(!i.projection){const u=i.projection=nt(r?r.length:1,null),l=u.slice();let f=i.child;for(;null!==f;){const m=r?QE(f,r):0;null!==m&&(l[m]?l[m].projectionNext=f:u[m]=f,l[m]=f),f=f.next}}}function Gf(r,i=0,o){const u=Le(),l=mn(),f=xl(l,jt+r,16,null,o||null);null===f.projection&&(f.projection=i),Ba(),(!u[es]||sr())&&32!=(32&f.flags)&&function kd(r,i,o){ga(i[Pt],0,i,o,xd(r,o,i),Me(o.parent||i[yr],o,i))}(l,u,f)}function $l(r,i){return r<<17|i<<2}function Qu(r){return r>>17&32767}function Wf(r){return 2|r}function Hl(r){return(131068&r)>>2}function dy(r,i){return-131069&r|i<<2}function JE(r){return 1|r}function eI(r,i,o,u,l){const f=r[o+1],m=null===i;let I=u?Qu(f):Hl(f),S=!1;for(;0!==I&&(!1===S||m);){const U=r[I+1];tI(r[I],i)&&(S=!0,r[I+1]=u?JE(U):Wf(U)),I=u?Qu(U):Hl(U)}S&&(r[o+1]=u?Wf(f):JE(f))}function tI(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&io(r,i)>=0}const wi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nI(r){return r.substring(wi.key,wi.keyEnd)}function Yw(r,i){const o=wi.textEnd;return o===i?-1:(i=wi.keyEnd=function Xw(r,i,o){for(;i<o&&r.charCodeAt(i)>32;)i++;return i}(r,wi.key=i,o),su(r,i,o))}function su(r,i,o){for(;i<o&&r.charCodeAt(i)<=32;)i++;return i}function qf(r){!function $s(r,i,o,u){const l=mn(),f=function to(r){const i=Ht.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}(2);l.firstUpdatePass&&function py(r,i,o,u){const l=r.data;if(null===l[o+1]){const f=l[Nr()],m=mh(r,o);Kf(f,u)&&null===i&&!m&&(i=!1),i=function gy(r,i,o,u){const l=function lc(r){const i=Ht.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let f=u?i.residualClasses:i.residualStyles;if(null===l)0===(u?i.classBindings:i.styleBindings)&&(o=zl(o=Zf(null,r,i,o,u),i.attrs,u),f=null);else{const m=i.directiveStylingLast;if(-1===m||r[m]!==l)if(o=Zf(l,r,i,o,u),null===f){let S=function my(r,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==Hl(u))return r[Qu(u)]}(r,i,u);void 0!==S&&Array.isArray(S)&&(S=Zf(null,r,i,S[1],u),S=zl(S,i.attrs,u),function _y(r,i,o,u){r[Qu(o?i.classBindings:i.styleBindings)]=u}(r,i,u,S))}else f=function yy(r,i,o){let u;const l=i.directiveEnd;for(let f=1+i.directiveStylingLast;f<l;f++)u=zl(u,r[f].hostAttrs,o);return zl(u,i.attrs,o)}(r,i,u)}return void 0!==f&&(u?i.residualClasses=f:i.residualStyles=f),o}(l,f,i,u),function XE(r,i,o,u,l,f){let m=f?i.classBindings:i.styleBindings,I=Qu(m),S=Hl(m);r[u]=o;let U,x=!1;if(Array.isArray(o)?(U=o[1],(null===U||io(o,U)>0)&&(x=!0)):U=o,l)if(0!==S){const te=Qu(r[I+1]);r[u+1]=$l(te,I),0!==te&&(r[te+1]=dy(r[te+1],u)),r[I+1]=function qw(r,i){return 131071&r|i<<17}(r[I+1],u)}else r[u+1]=$l(I,0),0!==I&&(r[I+1]=dy(r[I+1],u)),I=u;else r[u+1]=$l(S,0),0===I?I=u:r[S+1]=dy(r[S+1],u),S=u;x&&(r[u+1]=Wf(r[u+1])),eI(r,U,u,!0),eI(r,U,u,!1),function Zw(r,i,o,u,l){const f=l?r.residualClasses:r.residualStyles;null!=f&&"string"==typeof i&&io(f,i)>=0&&(o[u+1]=JE(o[u+1]))}(i,U,r,u,f),m=$l(I,S),f?i.classBindings=m:i.styleBindings=m}(l,f,i,o,m,u)}}(l,null,f,u);const m=Le();if(o!==rn&&Fi(m,f,o)){const I=l.data[Nr()];if(Kf(I,u)&&!mh(l,f)){let S=u?I.classesWithoutHost:I.stylesWithoutHost;null!==S&&(o=qe(S,o||"")),fh(l,I,m,o,u)}else!function cI(r,i,o,u,l,f,m,I){l===rn&&(l=tt);let S=0,x=0,U=0<l.length?l[0]:null,q=0<f.length?f[0]:null;for(;null!==U||null!==q;){const te=S<l.length?l[S+1]:void 0,ue=x<f.length?f[x+1]:void 0;let Ye,be=null;U===q?(S+=2,x+=2,te!==ue&&(be=q,Ye=ue)):null===q||null!==U&&U<q?(S+=2,be=U):(x+=2,be=q,Ye=ue),null!==be&&jg(r,i,o,u,be,Ye,m,I),U=S<l.length?l[S]:null,q=x<f.length?f[x]:null}}(l,I,m,m[Pt],m[f+1],m[f+1]=function aI(r,i,o){if(null==o||""===o)return tt;const u=[],l=Bu(o);if(Array.isArray(l))for(let f=0;f<l.length;f++)r(u,l[f],!0);else if("object"==typeof l)for(const f in l)l.hasOwnProperty(f)&&r(u,f,l[f]);else"string"==typeof l&&i(u,l);return u}(r,i,o),u,f)}}(uI,uu,r,!0)}function uu(r,i){for(let o=function Qw(r){return function hy(r){wi.key=0,wi.keyEnd=0,wi.value=0,wi.valueEnd=0,wi.textEnd=r.length}(r),Yw(r,su(r,0,wi.textEnd))}(i);o>=0;o=Yw(i,o))ti(r,nI(i),!0)}function mh(r,i){return i>=r.expandoStartIndex}function Zf(r,i,o,u,l){let f=null;const m=o.directiveEnd;let I=o.directiveStylingLast;for(-1===I?I=o.directiveStart:I++;I<m&&(f=i[I],u=zl(u,f.hostAttrs,l),f!==r);)I++;return null!==r&&(o.directiveStylingLast=I),u}function zl(r,i,o){const u=o?1:2;let l=-1;if(null!==i)for(let f=0;f<i.length;f++){const m=i[f];"number"==typeof m?l=m:l===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),ti(r,m,!!o||i[++f]))}return void 0===r?null:r}function uI(r,i,o){const u=String(i);""!==u&&!u.includes(" ")&&ti(r,u,o)}function jg(r,i,o,u,l,f,m,I){if(!(3&i.type))return;const S=r.data,x=S[I+1],U=function pr(r){return 1==(1&r)}(x)?_h(S,i,o,l,Hl(x),m):void 0;$g(U)||($g(f)||function ly(r){return 2==(2&r)}(x)&&(f=_h(S,null,o,l,I,m)),function kp(r,i,o,u,l){if(i)l?r.addClass(o,u):r.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:Nu.DashCase;null==l?r.removeStyle(o,u,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Nu.Important),r.setStyle(o,u,l,f))}}(u,m,dn(Nr(),o),l,f))}function _h(r,i,o,u,l,f){const m=null===i;let I;for(;l>0;){const S=r[l],x=Array.isArray(S),U=x?S[1]:S,q=null===U;let te=o[l+1];te===rn&&(te=q?tt:void 0);let ue=q?Jh(te,u):U===u?te:void 0;if(x&&!$g(ue)&&(ue=Jh(S,u)),$g(ue)&&(I=ue,m))return I;const be=r[l+1];l=m?Qu(be):Hl(be)}if(null!==i){let S=f?i.residualClasses:i.residualStyles;null!=S&&(I=Jh(S,u))}return I}function $g(r){return void 0!==r}function Kf(r,i){return 0!=(r.flags&(i?8:16))}function vy(r,i=""){const o=Le(),u=mn(),l=r+jt,f=u.firstCreatePass?xl(u,l,1,i,null):u.data[l],m=yh(u,o,f,i,r);o[l]=m,C()&&Ei(u,o,m,f),zr(f,!1)}let yh=(r,i,o,u,l)=>(N(!0),function _l(r,i){return r.createText(i)}(i[Pt],u));function Gg(r){return vh("",r,""),Gg}function vh(r,i,o){const u=Le(),l=function Bc(r,i,o,u){return Fi(r,bn(),o)?i+pe(o)+u:rn}(u,r,i,o);return l!==rn&&function Ia(r,i,o){const u=dn(i,r);!function or(r,i,o){r.setValue(i,o)}(r[Pt],u,o)}(u,Nr(),l),vh}const Wl=void 0;var gT=["en",[["a","p"],["AM","PM"],Wl],[["AM","PM"],Wl,Wl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wl,"{1} 'at' {0}",Wl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Kc(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Th={};function wy(r){const i=function yI(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=Dy(i);if(o)return o;const u=i.split("-")[0];if(o=Dy(u),o)return o;if("en"===u)return gT;throw new ge(701,!1)}function Ty(r){return wy(r)[Dh.PluralCase]}function Dy(r){return r in Th||(Th[r]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[r]),Th[r]}var Dh=function(r){return r[r.LocaleId=0]="LocaleId",r[r.DayPeriodsFormat=1]="DayPeriodsFormat",r[r.DayPeriodsStandalone=2]="DayPeriodsStandalone",r[r.DaysFormat=3]="DaysFormat",r[r.DaysStandalone=4]="DaysStandalone",r[r.MonthsFormat=5]="MonthsFormat",r[r.MonthsStandalone=6]="MonthsStandalone",r[r.Eras=7]="Eras",r[r.FirstDayOfWeek=8]="FirstDayOfWeek",r[r.WeekendRange=9]="WeekendRange",r[r.DateFormat=10]="DateFormat",r[r.TimeFormat=11]="TimeFormat",r[r.DateTimeFormat=12]="DateTimeFormat",r[r.NumberSymbols=13]="NumberSymbols",r[r.NumberFormats=14]="NumberFormats",r[r.CurrencyCode=15]="CurrencyCode",r[r.CurrencySymbol=16]="CurrencySymbol",r[r.CurrencyName=17]="CurrencyName",r[r.Currencies=18]="Currencies",r[r.Directionality=19]="Directionality",r[r.PluralCase=20]="PluralCase",r[r.ExtraData=21]="ExtraData",r}(Dh||{});const Qc="en-US";let vI=Qc;function Fy(r,i,o,u,l){if(r=$e(r),Array.isArray(r))for(let f=0;f<r.length;f++)Fy(r[f],i,o,u,l);else{const f=mn(),m=Le(),I=Hr();let S=lr(r)?r:$e(r.provide);const x=qv(r),U=1048575&I.providerIndexes,q=I.directiveStart,te=I.providerIndexes>>20;if(lr(r)||!r.multi){const ue=new Ls(x,l,Ml),be=Vy(S,i,l?U:U+te,q);-1===be?(ol(sl(I,m),f,S),Ly(f,r,i.length),i.push(S),I.directiveStart++,I.directiveEnd++,l&&(I.providerIndexes+=1048576),o.push(ue),m.push(ue)):(o[be]=ue,m[be]=ue)}else{const ue=Vy(S,i,U+te,q),be=Vy(S,i,U,U+te),ft=be>=0&&o[be];if(l&&!ft||!l&&!(ue>=0&&o[ue])){ol(sl(I,m),f,S);const xt=function $I(r,i,o,u,l){const f=new Ls(r,o,Ml);return f.multi=[],f.index=i,f.componentProviders=0,jI(f,l,u&&!o),f}(l?im:Uy,o.length,l,u,x);!l&&ft&&(o[be].providerFactory=xt),Ly(f,r,i.length,0),i.push(S),I.directiveStart++,I.directiveEnd++,l&&(I.providerIndexes+=1048576),o.push(xt),m.push(xt)}else Ly(f,r,ue>-1?ue:be,jI(o[l?be:ue],x,!l&&u));!l&&u&&ft&&o[be].componentProviders++}}}function Ly(r,i,o,u){const l=lr(i),f=function Zm(r){return!!r.useClass}(i);if(l||f){const S=(f?$e(i.useClass):i).prototype.ngOnDestroy;if(S){const x=r.destroyHooks||(r.destroyHooks=[]);if(!l&&i.multi){const U=x.indexOf(o);-1===U?x.push(o,[u,S]):x[U+1].push(u,S)}else x.push(o,S)}}}function jI(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function Vy(r,i,o,u){for(let l=o;l<u;l++)if(i[l]===r)return l;return-1}function Uy(r,i,o,u){return By(this.multi,[])}function im(r,i,o,u){const l=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,I=Mi(o,o[ot],this.providerFactory.index,u);f=I.slice(0,m),By(l,f);for(let S=m;S<I.length;S++)f.push(I[S])}else f=[],By(l,f);return f}function By(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function HI(r,i=[]){return o=>{o.providersResolver=(u,l)=>function BT(r,i,o){const u=mn();if(u.firstCreatePass){const l=Kt(r);Fy(o,u.data,u.blueprint,l,!0),Fy(i,u.data,u.blueprint,l,!1)}}(u,l?l(r):r,i)}}class Yl{}class zI{}function jT(r,i){return new GI(r,i??null,[])}class GI extends Yl{constructor(i,o,u){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bE(this);const l=_r(i);this._bootstrapComponents=nu(l.bootstrap),this._r3Injector=n_(i,o,[{provide:Yl,useValue:this},{provide:Yd,useValue:this.componentFactoryResolver},...u],ie(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class WI extends zI{constructor(i){super(),this.moduleType=i}create(i){return new GI(this.moduleType,i,[])}}class qI extends Yl{constructor(i){super(),this.componentFactoryResolver=new bE(this),this.instance=null;const o=new zd([...i.providers,{provide:Yl,useValue:this},{provide:Yd,useValue:this.componentFactoryResolver}],i.parent||vf(),i.debugName,new Set(["environment"]));this.injector=o,i.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function jy(r,i,o=null){return new qI({providers:r,parent:i,debugName:o,runEnvironmentInitializers:!0}).injector}let SA=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o)){const u=zm(0,o.type),l=u.length>0?jy([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o,l)}return this.cachedInjectors.get(o)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Lt({token:r,providedIn:"environment",factory:()=>new r(Fe(_a))})}return r})();function sm(r){r.getStandaloneInjector=i=>i.get(SA).getOrCreateStandaloneInjector(r)}function QI(r,i,o){const u=function $n(){const r=Ht.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}()+r,l=Le();return l[u]===rn?function iu(r,i,o){return r[i]=o}(l,u,o?i.call(o):i()):function Ff(r,i){return r[i]}(l,u)}function Zy(r){return i=>{setTimeout(r,void 0,i)}}const $o=class Xl extends w.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let l=i,f=o||(()=>null),m=u;if(i&&"object"==typeof i){const S=i;l=S.next?.bind(S),f=S.error?.bind(S),m=S.complete?.bind(S)}this.__isAsync&&(f=Zy(f),l&&(l=Zy(l)),m&&(m=Zy(m)));const I=super.subscribe({next:l,error:f,complete:m});return i instanceof ee.w0&&i.add(I),I}};function e0(){return this._results[Symbol.iterator]()}class tp{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new $o)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=tp.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=e0)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const l=function xi(r){return r.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Ct(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let l=r[u],f=i[u];if(o&&(l=o(l),f=o(f)),f!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function n0(r,i,o,u=!0){const l=i[ot];if(function un(r,i,o,u){const l=ir+u,f=o.length;u>0&&(o[l-1][jr]=i),u<f-ir?(i[jr]=o[l],Ip(o,ir+u,i)):(o.push(i),i[jr]=null),i[Tn]=o;const m=i[wo];null!==m&&o!==m&&function Bn(r,i){const o=r[bi];i[ln]!==i[Tn][Tn][ln]&&(r[ms]=!0),null===o?r[bi]=[i]:o.push(i)}(m,i);const I=i[$r];null!==I&&I.insertView(r),i[At]|=128}(l,i,r,o),u){const f=Cc(o,r),m=i[Pt],I=Q(m,r[ui]);null!==I&&function Fu(r,i,o,u,l,f){u[In]=l,u[yr]=i,Vu(r,u,o,1,l,f)}(l,r[yr],m,i,I,f)}}let xh=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=o0}return r})();const s0=xh,Ky=class extends s0{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,o){return this.createEmbeddedViewImpl(i,o)}createEmbeddedViewImpl(i,o,u){const l=function t0(r,i,o,u){const l=i.tView,I=dg(r,l,o,4096&r[At]?4096:16,null,i,null,null,null,u?.injector??null,u?.hydrationInfo??null);I[wo]=r[i.index];const x=r[$r];return null!==x&&(I[$r]=x.createEmbeddedView(l)),w_(l,I,o),I}(this._declarationLView,this._declarationTContainer,i,{injector:o,hydrationInfo:u});return new Nf(l)}};function o0(){return Nh(Hr(),Le())}function Nh(r,i){return 4&r.type?new Ky(i,r,Hu(r,i)):null}let ip=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=ev}return r})();function ev(){return sp(Hr(),Le())}const nD=ip,tv=class extends nD{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Hu(this._hostTNode,this._hostLView)}get injector(){return new Gi(this._hostTNode,this._hostLView)}get parentInjector(){const i=md(this._hostTNode,this._hostLView);if(pc(i)){const o=Ro(i,this._hostLView),u=bu(i);return new Gi(o[ot].data[u+8],o)}return new Gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=nv(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-ir}createEmbeddedView(i,o,u){let l,f;"number"==typeof u?l=u:null!=u&&(l=u.index,f=u.injector);const I=i.createEmbeddedViewImpl(o||{},f,null);return this.insertImpl(I,l,false),I}createComponent(i,o,u,l,f){const m=i&&!function Zn(r){return"function"==typeof r}(i);let I;if(m)I=o;else{const Ye=o||{};I=Ye.index,u=Ye.injector,l=Ye.projectableNodes,f=Ye.environmentInjector||Ye.ngModuleRef}const S=m?i:new Of(nn(i)),x=u||this.parentInjector;if(!f&&null==S.ngModule){const ft=(m?x:this.parentInjector).get(_a,null);ft&&(f=ft)}nn(S.componentType??{});const ue=S.create(x,l,null,f);return this.insertImpl(ue.hostView,I,false),ue}insert(i,o){return this.insertImpl(i,o,!1)}insertImpl(i,o,u){const l=i._lView;if(function Xr(r){return ci(r[Tn])}(l)){const S=this.indexOf(i);if(-1!==S)this.detach(S);else{const x=l[Tn],U=new tv(x,x[yr],x[Tn]);U.detach(U.indexOf(i))}}const m=this._adjustIndex(o),I=this._lContainer;return n0(I,l,m,!u),i.attachToViewContainerRef(),Ip(rv(I),m,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=nv(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=Ac(this._lContainer,o);u&&(Kn(rv(this._lContainer),o),Lu(u[ot],u))}detach(i){const o=this._adjustIndex(i,-1),u=Ac(this._lContainer,o);return u&&null!=Kn(rv(this._lContainer),o)?new Nf(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function nv(r){return r[8]}function rv(r){return r[8]||(r[8]=[])}function sp(r,i){let o;const u=i[r.index];return ci(u)?o=u:(o=function wE(r,i,o,u){return[r,!0,!1,i,null,0,u,o,null,null,null]}(u,i,null,r),i[r.index]=o,ih(i,o)),l0(o,i,r,u),new tv(o,r,i)}let l0=function Oh(r,i,o,u){if(r[ui])return;let l;l=8&o.type?bt(u):function c0(r,i){const o=r[Pt],u=o.createComment(""),l=St(i,r);return d(o,Q(o,l),u,function ce(r,i){return r.nextSibling(i)}(o,l),!1),u}(i,o),r[ui]=l};class iv{constructor(i){this.queryList=i,this.matches=null}clone(){return new iv(this.queryList)}setDirty(){this.queryList.setDirty()}}class dm{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,l=[];for(let f=0;f<u;f++){const m=o.getByIndex(f);l.push(this.queries[m.indexInDeclarationView].clone())}return new dm(l)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==g0(i,o).matches&&this.queries[o].setDirty()}}class sv{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class ov{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(i,l);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new ov(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class av{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new av(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const f=u[l];this.matchTNodeWithReadOption(i,o,kh(o,f)),this.matchTNodeWithReadOption(i,o,_d(o,i,f,!1,!1))}else u===xh?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,_d(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===Tf||l===ip||l===xh&&4&o.type)this.addMatch(o.index,-2);else{const f=_d(o,i,l,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function kh(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function sD(r,i,o,u){return-1===o?function iD(r,i){return 11&r.type?Hu(r,i):4&r.type?Nh(r,i):null}(i,r):-2===o?function uv(r,i,o){return o===Tf?Hu(i,r):o===xh?Nh(i,r):o===ip?sp(i,r):void 0}(r,i,u):Mi(r,r[ot],o,i)}function cv(r,i,o,u){const l=i[$r].queries[u];if(null===l.matches){const f=r.data,m=o.matches,I=[];for(let S=0;S<m.length;S+=2){const x=m[S];I.push(x<0?null:sD(i,f[x],m[S+1],o.metadata.read))}l.matches=I}return l.matches}function hm(r,i,o,u){const l=r.queries.getByIndex(o),f=l.matches;if(null!==f){const m=cv(r,i,l,o);for(let I=0;I<f.length;I+=2){const S=f[I];if(S>0)u.push(m[I/2]);else{const x=f[I+1],U=i[-S];for(let q=ir;q<U.length;q++){const te=U[q];te[wo]===te[Tn]&&hm(te[ot],te,x,u)}if(null!==U[bi]){const q=U[bi];for(let te=0;te<q.length;te++){const ue=q[te];hm(ue[ot],ue,x,u)}}}}}return u}function lv(r){const i=Le(),o=mn(),u=dc();ja(u+1);const l=g0(o,u);if(r.dirty&&function Hi(r){return 4==(4&r[At])}(i)===(2==(2&l.metadata.flags))){if(null===l.matches)r.reset([]);else{const f=l.crossesNgTemplate?hm(o,i,u,[]):cv(o,i,l,u);r.reset(f,Xm),r.notifyOnChanges()}return!0}return!1}function d0(r,i,o,u){const l=mn();if(l.firstCreatePass){const f=Hr();(function dv(r,i,o){null===r.queries&&(r.queries=new ov),r.queries.track(new av(i,o))})(l,new sv(i,o,u),f.index),function hv(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(l,r),2==(2&o)&&(l.staticContentQueries=!0)}!function p0(r,i,o){const u=new tp(4==(4&o));(function yE(r,i,o,u){const l=Mf(i);l.push(o),r.firstCreatePass&&sh(r).push(u,l.length-1)})(r,i,u,u.destroy),null===i[$r]&&(i[$r]=new dm),i[$r].queries.push(new iv(u))}(l,Le(),o)}function h0(){return function f0(r,i){return r[$r].queries[i].queryList}(Le(),dc())}function g0(r,i){return r.queries.getByIndex(i)}function pm(r){return!!_r(r)}const hp=new Pn("Application Initializer");let S0=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,u)=>{this.resolve=o,this.reject=u}),this.appInits=Xe(hp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const o=[];for(const l of this.appInits){const f=l();if(ny(f))o.push(f);else if(qE(f)){const m=new Promise((I,S)=>{f.subscribe({complete:I,error:S})});o.push(m)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Lt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),b0=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Lt({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();const fp=new Pn("LocaleId",{providedIn:"root",factory:()=>Xe(fp,yt.Optional|yt.SkipSelf)||function JA(){return typeof $localize<"u"&&$localize.locale||Qc}()}),R0=new Pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let M0=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new D.X(!1)}add(){this.hasPendingTasks.next(!0);const o=this.taskId++;return this.pendingTasks.add(o),o}remove(o){this.pendingTasks.delete(o),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Lt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();class MD{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let xD=(()=>{class r{compileModuleSync(o){return new WI(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),f=nu(_r(o).declarations).reduce((m,I)=>{const S=nn(I);return S&&m.push(new Of(S)),m},[]);return new MD(u,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Lt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function U0(...r){}class bs{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $o(!1),this.onMicrotaskEmpty=new $o(!1),this.onStable=new $o(!1),this.onError=new $o(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function B0(){const r="function"==typeof en.requestAnimationFrame;let i=en[r?"requestAnimationFrame":"setTimeout"],o=en[r?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&i&&o){const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function WD(r){const i=()=>{!function GD(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(en,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,n(r),r.isCheckStableRunning=!0,j0(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),n(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,f,m,I)=>{try{return e(r),o.invokeTask(l,f,m,I)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||r.shouldCoalesceRunChangeDetection)&&i(),t(r)}},onInvoke:(o,u,l,f,m,I,S)=>{try{return e(r),o.invoke(l,f,m,I,S)}finally{r.shouldCoalesceRunChangeDetection&&i(),t(r)}},onHasTask:(o,u,l,f)=>{o.hasTask(l,f),u===l&&("microTask"==f.change?(r._hasPendingMicrotasks=f.microTask,n(r),j0(r)):"macroTask"==f.change&&(r.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,l,f)=>(o.handleError(l,f),r.runOutsideAngular(()=>r.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bs.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(bs.isInAngularZone())throw new ge(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,l){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+l,i,nC,U0,U0);try{return f.runTask(m,o,u)}finally{f.cancelTask(m)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const nC={};function j0(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function n(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function e(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function t(r){r._nesting--,j0(r)}class s{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $o,this.onMicrotaskEmpty=new $o,this.onStable=new $o,this.onError=new $o}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,l){return i.apply(o,u)}}const a=new Pn("",{providedIn:"root",factory:c});function c(){const r=Xe(bs);let i=!0;const o=new oe.y(l=>{i=r.isStable&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks,r.runOutsideAngular(()=>{l.next(i),l.complete()})}),u=new oe.y(l=>{let f;r.runOutsideAngular(()=>{f=r.onStable.subscribe(()=>{bs.assertNotInAngularZone(),queueMicrotask(()=>{!i&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks&&(i=!0,l.next(!0))})})});const m=r.onUnstable.subscribe(()=>{bs.assertInAngularZone(),i&&(i=!1,r.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),m.unsubscribe()}});return(0,fe.T)(o,u.pipe((0,Ie.B)()))}const h=new Pn(""),v=new Pn("");let W,b=(()=>{class r{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,W||(function k(r){W=r}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}static#e=this.\u0275fac=function(u){return new(u||r)(Fe(bs),Fe(P),Fe(v))};static#t=this.\u0275prov=Lt({token:r,factory:r.\u0275fac})}return r})(),P=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return W?.findTestabilityInTree(this,o,u)??null}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Lt({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),J=null;const ae=new Pn("AllowMultipleToken"),xe=new Pn("PlatformDestroyListeners"),Qe=new Pn("appBootstrapListener");class Ft{constructor(i,o){this.name=i,this.token=o}}function $0(r,i,o=[]){const u=`Platform: ${i}`,l=new Pn(u);return(f=[])=>{let m=qD();if(!m||m.injector.get(ae,!1)){const I=[...o,...f,{provide:l,useValue:!0}];r?r(I):function hn(r){if(J&&!J.get(ae,!1))throw new ge(400,!1);(function Mt(){!function ea(r){Xo=r}(()=>{throw new ge(600,!1)})})(),J=r;const i=r.get(iC);(function Wr(r){r.get(Kv,null)?.forEach(o=>o())})(r)}(function rC(r=[],i){return Oi.create({name:i,providers:[{provide:mf,useValue:"platform"},{provide:xe,useValue:new Set([()=>J=null])},...r]})}(I,u))}return function H0(r){const i=qD();if(!i)throw new ge(401,!1);return i}()}}function qD(){return J?.get(iC)??null}let iC=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function PC(r="zone.js",i){return"noop"===r?new s:"zone.js"===r?new bs(i):r}(u?.ngZone,function sC(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}({eventCoalescing:u?.ngZoneEventCoalescing,runCoalescing:u?.ngZoneRunCoalescing}));return l.run(()=>{const f=function $T(r,i,o){return new GI(r,i,o)}(o.moduleType,this.injector,function lC(r){return[{provide:bs,useFactory:r},{provide:Rc,multi:!0,useFactory:()=>{const i=Xe(xC,{optional:!0});return()=>i.initialize()}},{provide:cC,useFactory:MC},{provide:a,useFactory:c}]}(()=>l)),m=f.injector.get(Pl,null);return l.runOutsideAngular(()=>{const I=l.onError.subscribe({next:S=>{m.handleError(S)}});f.onDestroy(()=>{z0(this._modules,f),I.unsubscribe()})}),function oC(r,i,o){try{const u=o();return ny(u)?u.catch(l=>{throw i.runOutsideAngular(()=>r.handleError(l)),l}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(m,l,()=>{const I=f.injector.get(S0);return I.runInitializers(),I.donePromise.then(()=>(function _T(r){dt(r,"Expected localeId to be defined"),"string"==typeof r&&(vI=r.toLowerCase().replace(/_/g,"-"))}(f.injector.get(fp,Qc)||Qc),this._moduleDoBootstrap(f),f))})})}bootstrapModule(o,u=[]){const l=aC({},u);return function Ze(r,i,o){const u=new WI(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(o){const u=o.injector.get(ym);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new ge(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(xe,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(u){return new(u||r)(Fe(Oi))};static#t=this.\u0275prov=Lt({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();function aC(r,i){return Array.isArray(i)?i.reduce(aC,r):{...r,...i}}let ym=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Xe(cC),this.zoneIsStable=Xe(a),this.componentTypes=[],this.components=[],this.isStable=Xe(M0).hasPendingTasks.pipe((0,je.w)(o=>o?(0,se.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Ie.B)()),this._injector=Xe(_a)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof tE;if(!this._injector.get(S0).done)throw!l&&Eo(o),new ge(405,!1);let m;m=l?o:this._injector.get(Yd).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const I=function ct(r){return r.isBoundToModule}(m)?void 0:this._injector.get(Yl),x=m.create(Oi.NULL,[],u||m.selector,I),U=x.location.nativeElement,q=x.injector.get(h,null);return q?.registerApplication(U),x.onDestroy(()=>{this.detachView(x.hostView),z0(this.components,x),q?.unregisterApplication(U)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;z0(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(Qe,[]);u.push(...this._bootstrapListeners),u.forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>z0(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new ge(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Lt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function z0(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}const cC=new Pn("",{providedIn:"root",factory:()=>Xe(Pl).handleError.bind(void 0)});function MC(){const r=Xe(bs),i=Xe(Pl);return o=>r.runOutsideAngular(()=>i.handleError(o))}let xC=(()=>{class r{constructor(){this.zone=Xe(bs),this.applicationRef=Xe(ym)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Lt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function OC(){return!1}let kC=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=FC}return r})();function FC(r){return function LC(r,i,o){if(li(r)&&!o){const u=er(r.index,i);return new Nf(u,u)}return 47&r.type?new Nf(i[ln],i):null}(Hr(),Le(),16==(16&r))}class pC{constructor(){}supports(i){return kf(i)}create(i){return new HC(i)}}const $C=(r,i)=>i;class HC{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||$C}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,l=0,f=null;for(;o||u;){const m=!u||o&&o.currentIndex<mC(u,l,f)?o:u,I=mC(m,l,f),S=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{f||(f=[]);const x=I-l,U=S-l;if(x!=U){for(let te=0;te<x;te++){const ue=te<f.length?f[te]:f[te]=0,be=ue+te;U<=be&&be<x&&(f[te]=ue+1)}f[m.previousIndex]=U-x}}I!==S&&i(m,I,S)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!kf(i))throw new ge(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let l,f,m,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let I=0;I<this.length;I++)f=i[I],m=this._trackByFn(I,f),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,f,m,I)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,m,I),u=!0),o=o._next}else l=0,function OE(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[Symbol.iterator]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,I=>{m=this._trackByFn(l,I),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,I,m,l)),Object.is(o.item,I)||this._addIdentityChange(o,I)):(o=this._mismatch(o,I,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,l){let f;return null===i?f=this._itTail:(f=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,f,l)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,f,l)):i=this._addAfter(new zC(o,u),f,l),i}_verifyReinsertion(i,o,u,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?i=this._reinsertAfter(f,i._prev,l):i.currentIndex!=l&&(i.currentIndex=l,this._addToMoves(i,l)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const l=i._prevRemoved,f=i._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const l=null===o?this._itHead:o._next;return i._next=l,i._prev=o,null===l?this._itTail=i:l._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new gC),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gC),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class zC{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class GC{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class gC{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new GC,this.map.set(o,u)),u.add(i)}get(i,o){const l=this.map.get(i);return l?l.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mC(r,i,o){const u=r.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+i+l}class _C{constructor(){}supports(i){return i instanceof Map||B_(i)}create(){return new WC}}class WC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||B_(i)))throw new ge(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const l=this._records.get(i);this._maybeAddToChanges(l,o);const f=l._prev,m=l._next;return f&&(f._next=m),m&&(m._prev=f),l._next=null,l._prev=null,l}const u=new qC(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class qC{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yC(){return new JD([new pC])}let JD=(()=>{class r{static#e=this.\u0275prov=Lt({token:r,providedIn:"root",factory:yC});constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||yC()),deps:[[r,new so,new vd]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new ge(901,!1)}}return r})();function vC(){return new XD([new _C])}let XD=(()=>{class r{static#e=this.\u0275prov=Lt({token:r,providedIn:"root",factory:vC});constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||vC()),deps:[[r,new so,new vd]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new ge(901,!1)}}return r})();const QC=$0(null,"core",[]);let YC=(()=>{class r{constructor(o){}static#e=this.\u0275fac=function(u){return new(u||r)(Fe(ym))};static#t=this.\u0275mod=vo({type:r});static#n=this.\u0275inj=nr({})}return r})();function uS(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}function lS(r){const i=nn(r);if(!i)return null;const o=new Of(i);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},6593:(Et,Ce,V)=>{V.d(Ce,{Dx:()=>Ti,b2:()=>En,q6:()=>Lt});var w=V(5879),ee=V(6814);class D extends ee.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oe extends D{static makeCurrent(){(0,ee.HT)(new oe)}onAndCancel($,B,H){return $.addEventListener(B,H),()=>{$.removeEventListener(B,H)}}dispatchEvent($,B){$.dispatchEvent(B)}remove($){$.parentNode&&$.parentNode.removeChild($)}createElement($,B){return(B=B||this.getDefaultDocument()).createElement($)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode($){return $.nodeType===Node.ELEMENT_NODE}isShadowRoot($){return $ instanceof DocumentFragment}getGlobalEventTarget($,B){return"window"===B?window:"document"===B?$:"body"===B?$.body:null}getBaseHref($){const B=function se(){return fe=fe||document.querySelector("base"),fe?fe.getAttribute("href"):null}();return null==B?null:function je(j){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",j);const $=Ie.pathname;return"/"===$.charAt(0)?$:`/${$}`}(B)}resetBaseElement(){fe=null}getUserAgent(){return window.navigator.userAgent}getCookie($){return(0,ee.Mx)(document.cookie,$)}}let Ie,fe=null,K=(()=>{class j{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(H){return new(H||j)};static#t=this.\u0275prov=w.Yz7({token:j,factory:j.\u0275fac})}return j})();const Y=new w.OlP("EventManagerPlugins");let ie=(()=>{class j{constructor(B,H){this._zone=H,this._eventNameToPlugin=new Map,B.forEach(ne=>{ne.manager=this}),this._plugins=B.slice().reverse()}addEventListener(B,H,ne){return this._findPluginFor(H).addEventListener(B,H,ne)}getZone(){return this._zone}_findPluginFor(B){let H=this._eventNameToPlugin.get(B);if(H)return H;if(H=this._plugins.find(Ve=>Ve.supports(B)),!H)throw new w.vHH(5101,!1);return this._eventNameToPlugin.set(B,H),H}static#e=this.\u0275fac=function(H){return new(H||j)(w.LFG(Y),w.LFG(w.R0b))};static#t=this.\u0275prov=w.Yz7({token:j,factory:j.\u0275fac})}return j})();class qe{constructor($){this._doc=$}}const Oe="ng-app-id";let He=(()=>{class j{constructor(B,H,ne,Ve={}){this.doc=B,this.appId=H,this.nonce=ne,this.platformId=Ve,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,ee.PM)(Ve),this.resetHostNodes()}addStyles(B){for(const H of B)1===this.changeUsageCount(H,1)&&this.onStyleAdded(H)}removeStyles(B){for(const H of B)this.changeUsageCount(H,-1)<=0&&this.onStyleRemoved(H)}ngOnDestroy(){const B=this.styleNodesInDOM;B&&(B.forEach(H=>H.remove()),B.clear());for(const H of this.getAllStyles())this.onStyleRemoved(H);this.resetHostNodes()}addHost(B){this.hostNodes.add(B);for(const H of this.getAllStyles())this.addStyleToHost(B,H)}removeHost(B){this.hostNodes.delete(B)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(B){for(const H of this.hostNodes)this.addStyleToHost(H,B)}onStyleRemoved(B){const H=this.styleRef;H.get(B)?.elements?.forEach(ne=>ne.remove()),H.delete(B)}collectServerRenderedStyles(){const B=this.doc.head?.querySelectorAll(`style[${Oe}="${this.appId}"]`);if(B?.length){const H=new Map;return B.forEach(ne=>{null!=ne.textContent&&H.set(ne.textContent,ne)}),H}return null}changeUsageCount(B,H){const ne=this.styleRef;if(ne.has(B)){const Ve=ne.get(B);return Ve.usage+=H,Ve.usage}return ne.set(B,{usage:H,elements:[]}),H}getStyleElement(B,H){const ne=this.styleNodesInDOM,Ve=ne?.get(H);if(Ve?.parentNode===B)return ne.delete(H),Ve.removeAttribute(Oe),Ve;{const Fe=this.doc.createElement("style");return this.nonce&&Fe.setAttribute("nonce",this.nonce),Fe.textContent=H,this.platformIsServer&&Fe.setAttribute(Oe,this.appId),Fe}}addStyleToHost(B,H){const ne=this.getStyleElement(B,H);B.appendChild(ne);const Ve=this.styleRef,Fe=Ve.get(H)?.elements;Fe?Fe.push(ne):Ve.set(H,{elements:[ne],usage:1})}resetHostNodes(){const B=this.hostNodes;B.clear(),B.add(this.doc.head)}static#e=this.\u0275fac=function(H){return new(H||j)(w.LFG(ee.K0),w.LFG(w.AFp),w.LFG(w.Ojb,8),w.LFG(w.Lbi))};static#t=this.\u0275prov=w.Yz7({token:j,factory:j.\u0275fac})}return j})();const $e={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rt=/%COMP%/g,Ne=new w.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Je(j,$){return $.map(B=>B.replace(rt,j))}let it=(()=>{class j{constructor(B,H,ne,Ve,Fe,Ot,Xe,Gt=null){this.eventManager=B,this.sharedStylesHost=H,this.appId=ne,this.removeStylesOnCompDestroy=Ve,this.doc=Fe,this.platformId=Ot,this.ngZone=Xe,this.nonce=Gt,this.rendererByCompId=new Map,this.platformIsServer=(0,ee.PM)(Ot),this.defaultRenderer=new Ee(B,Fe,Xe,this.platformIsServer)}createRenderer(B,H){if(!B||!H)return this.defaultRenderer;this.platformIsServer&&H.encapsulation===w.ifc.ShadowDom&&(H={...H,encapsulation:w.ifc.Emulated});const ne=this.getOrCreateRenderer(B,H);return ne instanceof On?ne.applyToHost(B):ne instanceof gr&&ne.applyStyles(),ne}getOrCreateRenderer(B,H){const ne=this.rendererByCompId;let Ve=ne.get(H.id);if(!Ve){const Fe=this.doc,Ot=this.ngZone,Xe=this.eventManager,Gt=this.sharedStylesHost,Rt=this.removeStylesOnCompDestroy,pn=this.platformIsServer;switch(H.encapsulation){case w.ifc.Emulated:Ve=new On(Xe,Gt,H,this.appId,Rt,Fe,Ot,pn);break;case w.ifc.ShadowDom:return new Fr(Xe,Gt,B,H,Fe,Ot,this.nonce,pn);default:Ve=new gr(Xe,Gt,H,Rt,Fe,Ot,pn)}ne.set(H.id,Ve)}return Ve}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(H){return new(H||j)(w.LFG(ie),w.LFG(He),w.LFG(w.AFp),w.LFG(Ne),w.LFG(ee.K0),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(w.Ojb))};static#t=this.\u0275prov=w.Yz7({token:j,factory:j.\u0275fac})}return j})();class Ee{constructor($,B,H,ne){this.eventManager=$,this.doc=B,this.ngZone=H,this.platformIsServer=ne,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement($,B){return B?this.doc.createElementNS($e[B]||B,$):this.doc.createElement($)}createComment($){return this.doc.createComment($)}createText($){return this.doc.createTextNode($)}appendChild($,B){(si($)?$.content:$).appendChild(B)}insertBefore($,B,H){$&&(si($)?$.content:$).insertBefore(B,H)}removeChild($,B){$&&$.removeChild(B)}selectRootElement($,B){let H="string"==typeof $?this.doc.querySelector($):$;if(!H)throw new w.vHH(-5104,!1);return B||(H.textContent=""),H}parentNode($){return $.parentNode}nextSibling($){return $.nextSibling}setAttribute($,B,H,ne){if(ne){B=ne+":"+B;const Ve=$e[ne];Ve?$.setAttributeNS(Ve,B,H):$.setAttribute(B,H)}else $.setAttribute(B,H)}removeAttribute($,B,H){if(H){const ne=$e[H];ne?$.removeAttributeNS(ne,B):$.removeAttribute(`${H}:${B}`)}else $.removeAttribute(B)}addClass($,B){$.classList.add(B)}removeClass($,B){$.classList.remove(B)}setStyle($,B,H,ne){ne&(w.JOm.DashCase|w.JOm.Important)?$.style.setProperty(B,H,ne&w.JOm.Important?"important":""):$.style[B]=H}removeStyle($,B,H){H&w.JOm.DashCase?$.style.removeProperty(B):$.style[B]=""}setProperty($,B,H){$[B]=H}setValue($,B){$.nodeValue=B}listen($,B,H){if("string"==typeof $&&!($=(0,ee.q)().getGlobalEventTarget(this.doc,$)))throw new Error(`Unsupported event target ${$} for event ${B}`);return this.eventManager.addEventListener($,B,this.decoratePreventDefault(H))}decoratePreventDefault($){return B=>{if("__ngUnwrap__"===B)return $;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>$(B)):$(B))&&B.preventDefault()}}}function si(j){return"TEMPLATE"===j.tagName&&void 0!==j.content}class Fr extends Ee{constructor($,B,H,ne,Ve,Fe,Ot,Xe){super($,Ve,Fe,Xe),this.sharedStylesHost=B,this.hostEl=H,this.shadowRoot=H.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Gt=Je(ne.id,ne.styles);for(const Rt of Gt){const pn=document.createElement("style");Ot&&pn.setAttribute("nonce",Ot),pn.textContent=Rt,this.shadowRoot.appendChild(pn)}}nodeOrShadowRoot($){return $===this.hostEl?this.shadowRoot:$}appendChild($,B){return super.appendChild(this.nodeOrShadowRoot($),B)}insertBefore($,B,H){return super.insertBefore(this.nodeOrShadowRoot($),B,H)}removeChild($,B){return super.removeChild(this.nodeOrShadowRoot($),B)}parentNode($){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot($)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gr extends Ee{constructor($,B,H,ne,Ve,Fe,Ot,Xe){super($,Ve,Fe,Ot),this.sharedStylesHost=B,this.removeStylesOnCompDestroy=ne,this.styles=Xe?Je(Xe,H.styles):H.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class On extends gr{constructor($,B,H,ne,Ve,Fe,Ot,Xe){const Gt=ne+"-"+H.id;super($,B,H,Ve,Fe,Ot,Xe,Gt),this.contentAttr=function pe(j){return"_ngcontent-%COMP%".replace(rt,j)}(Gt),this.hostAttr=function Ke(j){return"_nghost-%COMP%".replace(rt,j)}(Gt)}applyToHost($){this.applyStyles(),this.setAttribute($,this.hostAttr,"")}createElement($,B){const H=super.createElement($,B);return super.setAttribute(H,this.contentAttr,""),H}}let Zi=(()=>{class j extends qe{constructor(B){super(B)}supports(B){return!0}addEventListener(B,H,ne){return B.addEventListener(H,ne,!1),()=>this.removeEventListener(B,H,ne)}removeEventListener(B,H,ne){return B.removeEventListener(H,ne)}static#e=this.\u0275fac=function(H){return new(H||j)(w.LFG(ee.K0))};static#t=this.\u0275prov=w.Yz7({token:j,factory:j.\u0275fac})}return j})();const gi=["alt","control","meta","shift"],_e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ye={alt:j=>j.altKey,control:j=>j.ctrlKey,meta:j=>j.metaKey,shift:j=>j.shiftKey};let we=(()=>{class j extends qe{constructor(B){super(B)}supports(B){return null!=j.parseEventName(B)}addEventListener(B,H,ne){const Ve=j.parseEventName(H),Fe=j.eventCallback(Ve.fullKey,ne,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,ee.q)().onAndCancel(B,Ve.domEventName,Fe))}static parseEventName(B){const H=B.toLowerCase().split("."),ne=H.shift();if(0===H.length||"keydown"!==ne&&"keyup"!==ne)return null;const Ve=j._normalizeKey(H.pop());let Fe="",Ot=H.indexOf("code");if(Ot>-1&&(H.splice(Ot,1),Fe="code."),gi.forEach(Gt=>{const Rt=H.indexOf(Gt);Rt>-1&&(H.splice(Rt,1),Fe+=Gt+".")}),Fe+=Ve,0!=H.length||0===Ve.length)return null;const Xe={};return Xe.domEventName=ne,Xe.fullKey=Fe,Xe}static matchEventFullKeyCode(B,H){let ne=_e[B.key]||B.key,Ve="";return H.indexOf("code.")>-1&&(ne=B.code,Ve="code."),!(null==ne||!ne)&&(ne=ne.toLowerCase()," "===ne?ne="space":"."===ne&&(ne="dot"),gi.forEach(Fe=>{Fe!==ne&&(0,ye[Fe])(B)&&(Ve+=Fe+".")}),Ve+=ne,Ve===H)}static eventCallback(B,H,ne){return Ve=>{j.matchEventFullKeyCode(Ve,B)&&ne.runGuarded(()=>H(Ve))}}static _normalizeKey(B){return"esc"===B?"escape":B}static#e=this.\u0275fac=function(H){return new(H||j)(w.LFG(ee.K0))};static#t=this.\u0275prov=w.Yz7({token:j,factory:j.\u0275fac})}return j})();const Lt=(0,w.eFA)(w._c5,"browser",[{provide:w.Lbi,useValue:ee.bD},{provide:w.g9A,useValue:function We(){oe.makeCurrent()},multi:!0},{provide:ee.K0,useFactory:function It(){return(0,w.RDi)(document),document},deps:[]}]),Ln=new w.OlP(""),nr=[{provide:w.rWj,useClass:class De{addToWindow($){w.dqk.getAngularTestability=(H,ne=!0)=>{const Ve=$.findTestabilityInTree(H,ne);if(null==Ve)throw new w.vHH(5103,!1);return Ve},w.dqk.getAllAngularTestabilities=()=>$.getAllTestabilities(),w.dqk.getAllAngularRootElements=()=>$.getAllRootElements(),w.dqk.frameworkStabilizers||(w.dqk.frameworkStabilizers=[]),w.dqk.frameworkStabilizers.push(H=>{const ne=w.dqk.getAllAngularTestabilities();let Ve=ne.length,Fe=!1;const Ot=function(Xe){Fe=Fe||Xe,Ve--,0==Ve&&H(Fe)};ne.forEach(Xe=>{Xe.whenStable(Ot)})})}findTestabilityInTree($,B,H){return null==B?null:$.getTestability(B)??(H?(0,ee.q)().isShadowRoot(B)?this.findTestabilityInTree($,B.host,!0):this.findTestabilityInTree($,B.parentElement,!0):null)}},deps:[]},{provide:w.lri,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]},{provide:w.dDg,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]}],Gn=[{provide:w.zSh,useValue:"root"},{provide:w.qLn,useFactory:function Mn(){return new w.qLn},deps:[]},{provide:Y,useClass:Zi,multi:!0,deps:[ee.K0,w.R0b,w.Lbi]},{provide:Y,useClass:we,multi:!0,deps:[ee.K0]},it,He,ie,{provide:w.FYo,useExisting:it},{provide:ee.JF,useClass:K,deps:[]},[]];let En=(()=>{class j{constructor(B){}static withServerTransition(B){return{ngModule:j,providers:[{provide:w.AFp,useValue:B.appId}]}}static#e=this.\u0275fac=function(H){return new(H||j)(w.LFG(Ln,12))};static#t=this.\u0275mod=w.oAB({type:j});static#n=this.\u0275inj=w.cJS({providers:[...Gn,...nr],imports:[ee.ez,w.hGG]})}return j})(),Ti=(()=>{class j{constructor(B){this._doc=B}getTitle(){return this._doc.title}setTitle(B){this._doc.title=B||""}static#e=this.\u0275fac=function(H){return new(H||j)(w.LFG(ee.K0))};static#t=this.\u0275prov=w.Yz7({token:j,factory:function(H){let ne=null;return ne=H?new H:function Zr(){return new Ti((0,w.LFG)(ee.K0))}(),ne},providedIn:"root"})}return j})();typeof window<"u"&&window},6387:(Et,Ce,V)=>{V.d(Ce,{F0:()=>sr,rH:()=>Au,Bz:()=>hc,lC:()=>wo});var w=V(5879),ee=V(5592),D=V(4674),fe=V(2459),se=V(2096),Ie=V(5619);const{isArray:je}=Array,{getPrototypeOf:De,prototype:K,keys:Y}=Object;var Oe=V(2737),He=V(7398);const{isArray:$e}=Array;var qt=V(4564),ge=V(8251),Ne=V(7103);function pe(...E){const A=(0,qt.yG)(E),_=(0,qt.jO)(E),{args:C,keys:N}=function ie(E){if(1===E.length){const A=E[0];if(je(A))return{args:A,keys:null};if(function qe(E){return E&&"object"==typeof E&&De(E)===K}(A)){const _=Y(A);return{args:_.map(C=>A[C]),keys:_}}}return{args:E,keys:null}}(E);if(0===C.length)return(0,fe.D)([],A);const G=new ee.y(function Ke(E,A,_=Oe.y){return C=>{Je(A,()=>{const{length:N}=E,G=new Array(N);let z=N,re=N;for(let Ue=0;Ue<N;Ue++)Je(A,()=>{const _t=(0,fe.D)(E[Ue],A);let Tt=!1;_t.subscribe((0,ge.x)(C,wn=>{G[Ue]=wn,Tt||(Tt=!0,re--),re||C.next(_(G.slice()))},()=>{--z||C.complete()}))},C)},C)}}(C,A,N?z=>function fn(E,A){return E.reduce((_,C,N)=>(_[C]=A[N],_),{})}(N,z):Oe.y));return _?G.pipe(function lt(E){return(0,He.U)(A=>function rt(E,A){return $e(A)?E(...A):E(A)}(E,A))}(_)):G}function Je(E,A,_){E?(0,Ne.f)(_,E,A):A()}var it=V(6973),Ee=V(5211),Nt=V(4829);function sn(E){return new ee.y(A=>{(0,Nt.Xf)(E()).subscribe(A)})}var si=V(8407),Fr=V(8504),gr=V(6232),On=V(7394),Zi=V(9360);function gi(){return(0,Zi.e)((E,A)=>{let _=null;E._refCount++;const C=(0,ge.x)(A,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(_=null);const N=E._connection,G=_;_=null,N&&(!G||N===G)&&N.unsubscribe(),A.unsubscribe()});E.subscribe(C),C.closed||(_=E.connect())})}class _e extends ee.y{constructor(A,_){super(),this.source=A,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,Zi.A)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,A?.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new On.w0;const _=this.getSubject();A.add(this.source.subscribe((0,ge.x)(_,void 0,()=>{this._teardown(),_.complete()},C=>{this._teardown(),_.error(C)},()=>this._teardown()))),A.closed&&(this._connection=null,A=On.w0.EMPTY)}return A}refCount(){return gi()(this)}}var ye=V(8645),we=V(6814),Te=V(4664),Ae=V(8180),Pe=V(7921),dt=V(2181),We=V(1631),Mn=V(1374);function It(E,A){return(0,D.m)(A)?(0,We.z)(E,A,1):(0,We.z)(E,1)}var kt=V(9397),Lt=V(6306),Ln=V(6699),nr=V(3572);function Gn(E){return E<=0?()=>gr.E:(0,Zi.e)((A,_)=>{let C=[];A.subscribe((0,ge.x)(_,N=>{C.push(N),E<C.length&&C.shift()},()=>{for(const N of C)_.next(N);_.complete()},void 0,()=>{C=null}))})}var En=V(3026);function ls(E){return(0,Zi.e)((A,_)=>{try{A.subscribe(_)}finally{_.add(E)}})}var Zr=V(7537),Ti=V(6593);const Dt="primary",Tr=Symbol("RouteTitle");class yt{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const _=this.params[A];return Array.isArray(_)?_[0]:_}return null}getAll(A){if(this.has(A)){const _=this.params[A];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Bt(E){return new yt(E)}function Vt(E,A,_){const C=_.path.split("/");if(C.length>E.length||"full"===_.pathMatch&&(A.hasChildren()||C.length<E.length))return null;const N={};for(let G=0;G<C.length;G++){const z=C[G],re=E[G];if(z.startsWith(":"))N[z.substring(1)]=re;else if(z!==re.path)return null}return{consumed:E.slice(0,C.length),posParams:N}}function kn(E,A){const _=E?Object.keys(E):void 0,C=A?Object.keys(A):void 0;if(!_||!C||_.length!=C.length)return!1;let N;for(let G=0;G<_.length;G++)if(N=_[G],!Rr(E[N],A[N]))return!1;return!0}function Rr(E,A){if(Array.isArray(E)&&Array.isArray(A)){if(E.length!==A.length)return!1;const _=[...E].sort(),C=[...A].sort();return _.every((N,G)=>C[G]===N)}return E===A}function en(E){return E.length>0?E[E.length-1]:null}function jn(E){return function oe(E){return!!E&&(E instanceof ee.y||(0,D.m)(E.lift)&&(0,D.m)(E.subscribe))}(E)?E:(0,w.QGY)(E)?(0,fe.D)(Promise.resolve(E)):(0,se.of)(E)}const zo={exact:function Kr(E,A,_){if(!Br(E.segments,A.segments)||!Ki(E.segments,A.segments,_)||E.numberOfChildren!==A.numberOfChildren)return!1;for(const C in A.children)if(!E.children[C]||!Kr(E.children[C],A.children[C],_))return!1;return!0},subset:ds},zt={exact:function Qt(E,A){return kn(E,A)},subset:function Lr(E,A){return Object.keys(A).length<=Object.keys(E).length&&Object.keys(A).every(_=>Rr(E[_],A[_]))},ignored:()=>!0};function Vi(E,A,_){return zo[_.paths](E.root,A.root,_.matrixParams)&&zt[_.queryParams](E.queryParams,A.queryParams)&&!("exact"===_.fragment&&E.fragment!==A.fragment)}function ds(E,A,_){return Rs(E,A,A.segments,_)}function Rs(E,A,_,C){if(E.segments.length>_.length){const N=E.segments.slice(0,_.length);return!(!Br(N,_)||A.hasChildren()||!Ki(N,_,C))}if(E.segments.length===_.length){if(!Br(E.segments,_)||!Ki(E.segments,_,C))return!1;for(const N in A.children)if(!E.children[N]||!ds(E.children[N],A.children[N],C))return!1;return!0}{const N=_.slice(0,E.segments.length),G=_.slice(E.segments.length);return!!(Br(E.segments,N)&&Ki(E.segments,N,C)&&E.children[Dt])&&Rs(E.children[Dt],A,G,C)}}function Ki(E,A,_){return A.every((C,N)=>zt[_](E[N].parameters,C.parameters))}class Pr{constructor(A=new Yt([],{}),_={},C=null){this.root=A,this.queryParams=_,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bt(this.queryParams)),this._queryParamMap}toString(){return j.serialize(this)}}class Yt{constructor(A,_){this.segments=A,this.children=_,this.parent=null,Object.values(_).forEach(C=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $(this)}}class Vr{constructor(A,_){this.path=A,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Bt(this.parameters)),this._parameterMap}toString(){return Gt(this)}}function Br(E,A){return E.length===A.length&&E.every((_,C)=>_.path===A[C].path)}let Qi=(()=>{class E{static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:function(){return new X},providedIn:"root"})}return E})();class X{parse(A){const _=new Zt(A);return new Pr(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(A){const _=`/${B(A.root,!0)}`,C=function pn(E){const A=Object.keys(E).map(_=>{const C=E[_];return Array.isArray(C)?C.map(N=>`${ne(_)}=${ne(N)}`).join("&"):`${ne(_)}=${ne(C)}`}).filter(_=>!!_);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${_}${C}${"string"==typeof A.fragment?`#${function Ve(E){return encodeURI(E)}(A.fragment)}`:""}`}}const j=new X;function $(E){return E.segments.map(A=>Gt(A)).join("/")}function B(E,A){if(!E.hasChildren())return $(E);if(A){const _=E.children[Dt]?B(E.children[Dt],!1):"",C=[];return Object.entries(E.children).forEach(([N,G])=>{N!==Dt&&C.push(`${N}:${B(G,!1)}`)}),C.length>0?`${_}(${C.join("//")})`:_}{const _=function Di(E,A){let _=[];return Object.entries(E.children).forEach(([C,N])=>{C===Dt&&(_=_.concat(A(N,C)))}),Object.entries(E.children).forEach(([C,N])=>{C!==Dt&&(_=_.concat(A(N,C)))}),_}(E,(C,N)=>N===Dt?[B(E.children[Dt],!1)]:[`${N}:${B(C,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[Dt]?`${$(E)}/${_[0]}`:`${$(E)}/(${_.join("//")})`}}function H(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ne(E){return H(E).replace(/%3B/gi,";")}function Fe(E){return H(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ot(E){return decodeURIComponent(E)}function Xe(E){return Ot(E.replace(/\+/g,"%20"))}function Gt(E){return`${Fe(E.path)}${function Rt(E){return Object.keys(E).map(A=>`;${Fe(A)}=${Fe(E[A])}`).join("")}(E.parameters)}`}const Dn=/^[^\/()?;#]+/;function Yi(E){const A=E.match(Dn);return A?A[0]:""}const Ca=/^[^\/()?;=#]+/,le=/^[^=?&#]+/,ut=/^[^&#]+/;class Zt{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(A.length>0||Object.keys(_).length>0)&&(C[Dt]=new Yt(A,_)),C}parseSegment(){const A=Yi(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new w.vHH(4009,!1);return this.capture(A),new Vr(Ot(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const _=function ve(E){const A=E.match(Ca);return A?A[0]:""}(this.remaining);if(!_)return;this.capture(_);let C="";if(this.consumeOptional("=")){const N=Yi(this.remaining);N&&(C=N,this.capture(C))}A[Ot(_)]=Ot(C)}parseQueryParam(A){const _=function ke(E){const A=E.match(le);return A?A[0]:""}(this.remaining);if(!_)return;this.capture(_);let C="";if(this.consumeOptional("=")){const z=function tt(E){const A=E.match(ut);return A?A[0]:""}(this.remaining);z&&(C=z,this.capture(C))}const N=Xe(_),G=Xe(C);if(A.hasOwnProperty(N)){let z=A[N];Array.isArray(z)||(z=[z],A[N]=z),z.push(G)}else A[N]=G}parseParens(A){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=Yi(this.remaining),N=this.remaining[C.length];if("/"!==N&&")"!==N&&";"!==N)throw new w.vHH(4010,!1);let G;C.indexOf(":")>-1?(G=C.slice(0,C.indexOf(":")),this.capture(G),this.capture(":")):A&&(G=Dt);const z=this.parseChildren();_[G]=1===Object.keys(z).length?z[Dt]:new Yt([],z),this.consumeOptional("//")}return _}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new w.vHH(4011,!1)}}function tn(E){return E.segments.length>0?new Yt([],{[Dt]:E}):E}function Wn(E){const A={};for(const C of Object.keys(E.children)){const G=Wn(E.children[C]);if(C===Dt&&0===G.segments.length&&G.hasChildren())for(const[z,re]of Object.entries(G.children))A[z]=re;else(G.segments.length>0||G.hasChildren())&&(A[C]=G)}return function qn(E){if(1===E.numberOfChildren&&E.children[Dt]){const A=E.children[Dt];return new Yt(E.segments.concat(A.segments),A.children)}return E}(new Yt(E.segments,A))}function Yn(E){return E instanceof Pr}function po(E){let A;const N=tn(function _(G){const z={};for(const Ue of G.children){const _t=_(Ue);z[Ue.outlet]=_t}const re=new Yt(G.url,z);return G===E&&(A=re),re}(E.root));return A??N}function Go(E,A,_,C){let N=E;for(;N.parent;)N=N.parent;if(0===A.length)return Gs(N,N,N,_,C);const G=function go(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new an(!0,0,E);let A=0,_=!1;const C=E.reduce((N,G,z)=>{if("object"==typeof G&&null!=G){if(G.outlets){const re={};return Object.entries(G.outlets).forEach(([Ue,_t])=>{re[Ue]="string"==typeof _t?_t.split("/"):_t}),[...N,{outlets:re}]}if(G.segmentPath)return[...N,G.segmentPath]}return"string"!=typeof G?[...N,G]:0===z?(G.split("/").forEach((re,Ue)=>{0==Ue&&"."===re||(0==Ue&&""===re?_=!0:".."===re?A++:""!=re&&N.push(re))}),N):[...N,G]},[]);return new an(_,A,C)}(A);if(G.toRoot())return Gs(N,N,new Yt([],{}),_,C);const z=function qo(E,A,_){if(E.isAbsolute)return new mo(A,!0,0);if(!_)return new mo(A,!1,NaN);if(null===_.parent)return new mo(_,!0,0);const C=hs(E.commands[0])?0:1;return function Se(E,A,_){let C=E,N=A,G=_;for(;G>N;){if(G-=N,C=C.parent,!C)throw new w.vHH(4005,!1);N=C.segments.length}return new mo(C,!1,N-G)}(_,_.segments.length-1+C,E.numberOfDoubleDots)}(G,N,E),re=z.processChildren?on(z.segmentGroup,z.index,G.commands):Jn(z.segmentGroup,z.index,G.commands);return Gs(N,z.segmentGroup,re,_,C)}function hs(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function Wo(E){return"object"==typeof E&&null!=E&&E.outlets}function Gs(E,A,_,C,N){let z,G={};C&&Object.entries(C).forEach(([Ue,_t])=>{G[Ue]=Array.isArray(_t)?_t.map(Tt=>`${Tt}`):`${_t}`}),z=E===A?_:Ai(E,A,_);const re=tn(Wn(z));return new Pr(re,G,N)}function Ai(E,A,_){const C={};return Object.entries(E.children).forEach(([N,G])=>{C[N]=G===A?_:Ai(G,A,_)}),new Yt(E.segments,C)}class an{constructor(A,_,C){if(this.isAbsolute=A,this.numberOfDoubleDots=_,this.commands=C,A&&C.length>0&&hs(C[0]))throw new w.vHH(4003,!1);const N=C.find(Wo);if(N&&N!==en(C))throw new w.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mo{constructor(A,_,C){this.segmentGroup=A,this.processChildren=_,this.index=C}}function Jn(E,A,_){if(E||(E=new Yt([],{})),0===E.segments.length&&E.hasChildren())return on(E,A,_);const C=function hu(E,A,_){let C=0,N=A;const G={match:!1,pathIndex:0,commandIndex:0};for(;N<E.segments.length;){if(C>=_.length)return G;const z=E.segments[N],re=_[C];if(Wo(re))break;const Ue=`${re}`,_t=C<_.length-1?_[C+1]:null;if(N>0&&void 0===Ue)break;if(Ue&&_t&&"object"==typeof _t&&void 0===_t.outlets){if(!Ut(Ue,_t,z))return G;C+=2}else{if(!Ut(Ue,{},z))return G;C++}N++}return{match:!0,pathIndex:N,commandIndex:C}}(E,A,_),N=_.slice(C.commandIndex);if(C.match&&C.pathIndex<E.segments.length){const G=new Yt(E.segments.slice(0,C.pathIndex),{});return G.children[Dt]=new Yt(E.segments.slice(C.pathIndex),E.children),on(G,0,N)}return C.match&&0===N.length?new Yt(E.segments,{}):C.match&&!E.hasChildren()?oi(E,A,_):C.match?on(E,0,N):oi(E,A,_)}function on(E,A,_){if(0===_.length)return new Yt(E.segments,{});{const C=function du(E){return Wo(E[0])?E[0].outlets:{[Dt]:E}}(_),N={};if(Object.keys(C).some(G=>G!==Dt)&&E.children[Dt]&&1===E.numberOfChildren&&0===E.children[Dt].segments.length){const G=on(E.children[Dt],A,_);return new Yt(E.segments,G.children)}return Object.entries(C).forEach(([G,z])=>{"string"==typeof z&&(z=[z]),null!==z&&(N[G]=Jn(E.children[G],A,z))}),Object.entries(E.children).forEach(([G,z])=>{void 0===C[G]&&(N[G]=z)}),new Yt(E.segments,N)}}function oi(E,A,_){const C=E.segments.slice(0,A);let N=0;for(;N<_.length;){const G=_[N];if(Wo(G)){const Ue=st(G.outlets);return new Yt(C,Ue)}if(0===N&&hs(_[0])){C.push(new Vr(E.segments[A].path,fs(_[0]))),N++;continue}const z=Wo(G)?G.outlets[Dt]:`${G}`,re=N<_.length-1?_[N+1]:null;z&&re&&hs(re)?(C.push(new Vr(z,fs(re))),N+=2):(C.push(new Vr(z,{})),N++)}return new Yt(C,{})}function st(E){const A={};return Object.entries(E).forEach(([_,C])=>{"string"==typeof C&&(C=[C]),null!==C&&(A[_]=oi(new Yt([],{}),0,C))}),A}function fs(E){const A={};return Object.entries(E).forEach(([_,C])=>A[_]=`${C}`),A}function Ut(E,A,_){return E==_.path&&kn(A,_.parameters)}const Ps="imperative";class Qr{constructor(A,_){this.id=A,this.url=_}}class Xu extends Qr{constructor(A,_,C="imperative",N=null){super(A,_),this.type=0,this.navigationTrigger=C,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mr extends Qr{constructor(A,_,C){super(A,_),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _o extends Qr{constructor(A,_,C,N){super(A,_),this.reason=C,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yo extends Qr{constructor(A,_,C,N){super(A,_),this.reason=C,this.code=N,this.type=16}}class fu extends Qr{constructor(A,_,C,N){super(A,_),this.error=C,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mr extends Qr{constructor(A,_,C,N){super(A,_),this.urlAfterRedirects=C,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vo extends Qr{constructor(A,_,C,N){super(A,_),this.urlAfterRedirects=C,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn extends Qr{constructor(A,_,C,N,G){super(A,_),this.urlAfterRedirects=C,this.state=N,this.shouldActivate=G,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ji extends Qr{constructor(A,_,C,N){super(A,_),this.urlAfterRedirects=C,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sa extends Qr{constructor(A,_,C,N){super(A,_),this.urlAfterRedirects=C,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pu{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nn{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Dr{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _n{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eo{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _r{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Io{constructor(A,_,C){this.routerEvent=A,this.position=_,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ps{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ws,this.attachRef=null}}let Ws=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(_,C){const N=this.getOrCreateContext(_);N.outlet=C,this.contexts.set(_,N)}onChildOutletDestroyed(_){const C=this.getContext(_);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let C=this.getContext(_);return C||(C=new ps,this.contexts.set(_,C)),C}getContext(_){return this.contexts.get(_)||null}static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();class ec{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const _=this.pathFromRoot(A);return _.length>1?_[_.length-2]:null}children(A){const _=In(A,this._root);return _?_.children.map(C=>C.value):[]}firstChild(A){const _=In(A,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(A){const _=ot(A,this._root);return _.length<2?[]:_[_.length-2].children.map(N=>N.value).filter(N=>N!==A)}pathFromRoot(A){return ot(A,this._root).map(_=>_.value)}}function In(E,A){if(E===A.value)return A;for(const _ of A.children){const C=In(E,_);if(C)return C}return null}function ot(E,A){if(E===A.value)return[A];for(const _ of A.children){const C=ot(E,_);if(C.length)return C.unshift(A),C}return[]}class At{constructor(A,_){this.value=A,this.children=_}toString(){return`TreeNode(${this.value})`}}function Tn(E){const A={};return E&&E.children.forEach(_=>A[_.value.outlet]=_),A}class jr extends ec{constructor(A,_){super(A),this.snapshot=_,Yr(this,A)}toString(){return this.snapshot.toString()}}function gs(E,A){const _=function yr(E,A){const z=new mi([],{},{},"",{},Dt,A,null,{});return new Pt("",new At(z,[]))}(0,A),C=new Ie.X([new Vr("",{})]),N=new Ie.X({}),G=new Ie.X({}),z=new Ie.X({}),re=new Ie.X(""),Ue=new Si(C,N,z,re,G,Dt,A,_.root);return Ue.snapshot=_.root,new jr(new At(Ue,[]),_)}class Si{constructor(A,_,C,N,G,z,re,Ue){this.urlSubject=A,this.paramsSubject=_,this.queryParamsSubject=C,this.fragmentSubject=N,this.dataSubject=G,this.outlet=z,this.component=re,this._futureSnapshot=Ue,this.title=this.dataSubject?.pipe((0,He.U)(_t=>_t[Tr]))??(0,se.of)(void 0),this.url=A,this.params=_,this.queryParams=C,this.fragment=N,this.data=G}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,He.U)(A=>Bt(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,He.U)(A=>Bt(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Un(E,A="emptyOnly"){const _=E.pathFromRoot;let C=0;if("always"!==A)for(C=_.length-1;C>=1;){const N=_[C],G=_[C-1];if(N.routeConfig&&""===N.routeConfig.path)C--;else{if(G.component)break;C--}}return function Bi(E){return E.reduce((A,_)=>({params:{...A.params,..._.params},data:{...A.data,..._.data},resolve:{..._.data,...A.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(C))}class mi{get title(){return this.data?.[Tr]}constructor(A,_,C,N,G,z,re,Ue,_t){this.url=A,this.params=_,this.queryParams=C,this.fragment=N,this.data=G,this.outlet=z,this.component=re,this.routeConfig=Ue,this._resolve=_t}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pt extends ec{constructor(A,_){super(_),this.url=A,Yr(this,_)}toString(){return Ms(this._root)}}function Yr(E,A){A.value._routerState=E,A.children.forEach(_=>Yr(E,_))}function Ms(E){const A=E.children.length>0?` { ${E.children.map(Ms).join(", ")} } `:"";return`${E.value}${A}`}function xs(E){if(E.snapshot){const A=E.snapshot,_=E._futureSnapshot;E.snapshot=_,kn(A.queryParams,_.queryParams)||E.queryParamsSubject.next(_.queryParams),A.fragment!==_.fragment&&E.fragmentSubject.next(_.fragment),kn(A.params,_.params)||E.paramsSubject.next(_.params),function Vn(E,A){if(E.length!==A.length)return!1;for(let _=0;_<E.length;++_)if(!kn(E[_],A[_]))return!1;return!0}(A.url,_.url)||E.urlSubject.next(_.url),kn(A.data,_.data)||E.dataSubject.next(_.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function ln(E,A){const _=kn(E.params,A.params)&&function Ur(E,A){return Br(E,A)&&E.every((_,C)=>kn(_.parameters,A[C].parameters))}(E.url,A.url);return _&&!(!E.parent!=!A.parent)&&(!E.parent||ln(E.parent,A.parent))}let wo=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.parentContexts=(0,w.f3M)(Ws),this.location=(0,w.f3M)(w.s_b),this.changeDetector=(0,w.f3M)(w.sBO),this.environmentInjector=(0,w.f3M)(w.lqb),this.inputBinder=(0,w.f3M)($r,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(_){if(_.name){const{firstChange:C,previousValue:N}=_.name;if(C)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(_){return this.parentContexts.getContext(_)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const _=this.parentContexts.getContext(this.name);_?.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,!1);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,C){this.activated=_,this._activatedRoute=C,this.location.insert(_.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,C){if(this.isActivated)throw new w.vHH(4013,!1);this._activatedRoute=_;const N=this.location,z=_.snapshot.component,re=this.parentContexts.getOrCreateContext(this.name).children,Ue=new qs(_,re,N.injector);this.activated=N.createComponent(z,{index:N.length,injector:Ue,environmentInjector:C??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275dir=w.lG2({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[w.TTD]})}return E})();class qs{constructor(A,_,C){this.route=A,this.childContexts=_,this.parent=C}get(A,_){return A===Si?this.route:A===Ws?this.childContexts:this.parent.get(A,_)}}const $r=new w.OlP("");let Xi=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(_){this.unsubscribeFromRouteData(_),this.subscribeToRouteData(_)}unsubscribeFromRouteData(_){this.outletDataSubscriptions.get(_)?.unsubscribe(),this.outletDataSubscriptions.delete(_)}subscribeToRouteData(_){const{activatedRoute:C}=_,N=pe([C.queryParams,C.params,C.data]).pipe((0,Te.w)(([G,z,re],Ue)=>(re={...G,...z,...re},0===Ue?(0,se.of)(re):Promise.resolve(re)))).subscribe(G=>{if(!_.isActivated||!_.activatedComponentRef||_.activatedRoute!==C||null===C.component)return void this.unsubscribeFromRouteData(_);const z=(0,w.qFp)(C.component);if(z)for(const{templateName:re}of z.inputs)_.activatedComponentRef.setInput(re,G[re]);else this.unsubscribeFromRouteData(_)});this.outletDataSubscriptions.set(_,N)}static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac})}return E})();function ai(E,A,_){if(_&&E.shouldReuseRoute(A.value,_.value.snapshot)){const C=_.value;C._futureSnapshot=A.value;const N=function es(E,A,_){return A.children.map(C=>{for(const N of _.children)if(E.shouldReuseRoute(C.value,N.value.snapshot))return ai(E,C,N);return ai(E,C)})}(E,A,_);return new At(C,N)}{if(E.shouldAttach(A.value)){const G=E.retrieve(A.value);if(null!==G){const z=G.route;return z.value._futureSnapshot=A.value,z.children=A.children.map(re=>ai(E,re)),z}}const C=function ba(E){return new Si(new Ie.X(E.url),new Ie.X(E.params),new Ie.X(E.queryParams),new Ie.X(E.fragment),new Ie.X(E.data),E.outlet,E.component,E)}(A.value),N=A.children.map(G=>ai(E,G));return new At(C,N)}}const _i="ngNavigationCancelingError";function jt(E,A){const{redirectTo:_,navigationBehaviorOptions:C}=Yn(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,N=gu(!1,0,A);return N.url=_,N.navigationBehaviorOptions=C,N}function gu(E,A,_){const C=new Error("NavigationCancelingError: "+(E||""));return C[_i]=!0,C.cancellationCode=A,_&&(C.url=_),C}function To(E){return ms(E)&&Yn(E.url)}function ms(E){return E&&E[_i]}let ui=(()=>{class E{static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275cmp=w.Xpm({type:E,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(C,N){1&C&&w._UZ(0,"router-outlet")},dependencies:[wo],encapsulation:2})}return E})();function Ks(E){const A=E.children&&E.children.map(Ks),_=A?{...E,children:A}:{...E};return!_.component&&!_.loadComponent&&(A||_.loadChildren)&&_.outlet&&_.outlet!==Dt&&(_.component=ui),_}function Kt(E){return E.outlet||Dt}function _s(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let A=E.parent;A;A=A.parent){const _=A.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class Xc{constructor(A,_,C,N,G){this.routeReuseStrategy=A,this.futureState=_,this.currState=C,this.forwardEvent=N,this.inputBindingEnabled=G}activate(A){const _=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,C,A),xs(this.futureState.root),this.activateChildRoutes(_,C,A)}deactivateChildRoutes(A,_,C){const N=Tn(_);A.children.forEach(G=>{const z=G.value.outlet;this.deactivateRoutes(G,N[z],C),delete N[z]}),Object.values(N).forEach(G=>{this.deactivateRouteAndItsChildren(G,C)})}deactivateRoutes(A,_,C){const N=A.value,G=_?_.value:null;if(N===G)if(N.component){const z=C.getContext(N.outlet);z&&this.deactivateChildRoutes(A,_,z.children)}else this.deactivateChildRoutes(A,_,C);else G&&this.deactivateRouteAndItsChildren(_,C)}deactivateRouteAndItsChildren(A,_){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,_):this.deactivateRouteAndOutlet(A,_)}detachAndStoreRouteSubtree(A,_){const C=_.getContext(A.value.outlet),N=C&&A.value.component?C.children:_,G=Tn(A);for(const z of Object.keys(G))this.deactivateRouteAndItsChildren(G[z],N);if(C&&C.outlet){const z=C.outlet.detach(),re=C.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:z,route:A,contexts:re})}}deactivateRouteAndOutlet(A,_){const C=_.getContext(A.value.outlet),N=C&&A.value.component?C.children:_,G=Tn(A);for(const z of Object.keys(G))this.deactivateRouteAndItsChildren(G[z],N);C&&(C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated()),C.attachRef=null,C.route=null)}activateChildRoutes(A,_,C){const N=Tn(_);A.children.forEach(G=>{this.activateRoutes(G,N[G.value.outlet],C),this.forwardEvent(new _r(G.value.snapshot))}),A.children.length&&this.forwardEvent(new _n(A.value.snapshot))}activateRoutes(A,_,C){const N=A.value,G=_?_.value:null;if(xs(N),N===G)if(N.component){const z=C.getOrCreateContext(N.outlet);this.activateChildRoutes(A,_,z.children)}else this.activateChildRoutes(A,_,C);else if(N.component){const z=C.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const re=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),z.children.onOutletReAttached(re.contexts),z.attachRef=re.componentRef,z.route=re.route.value,z.outlet&&z.outlet.attach(re.componentRef,re.route.value),xs(re.route.value),this.activateChildRoutes(A,null,z.children)}else{const re=_s(N.snapshot);z.attachRef=null,z.route=N,z.injector=re,z.outlet&&z.outlet.activateWith(N,z.injector),this.activateChildRoutes(A,null,z.children)}}else this.activateChildRoutes(A,null,C)}}class nc{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class Do{constructor(A,_){this.component=A,this.route=_}}function mu(E,A,_){const C=E._root;return An(C,A?A._root:null,_,[C.value])}function Ko(E,A){const _=Symbol(),C=A.get(E,_);return C===_?"function"!=typeof E||(0,w.Z0I)(E)?A.get(E):E:C}function An(E,A,_,C,N={canDeactivateChecks:[],canActivateChecks:[]}){const G=Tn(A);return E.children.forEach(z=>{(function Qo(E,A,_,C,N={canDeactivateChecks:[],canActivateChecks:[]}){const G=E.value,z=A?A.value:null,re=_?_.getContext(E.value.outlet):null;if(z&&G.routeConfig===z.routeConfig){const Ue=function _u(E,A,_){if("function"==typeof _)return _(E,A);switch(_){case"pathParamsChange":return!Br(E.url,A.url);case"pathParamsOrQueryParamsChange":return!Br(E.url,A.url)||!kn(E.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ln(E,A)||!kn(E.queryParams,A.queryParams);default:return!ln(E,A)}}(z,G,G.routeConfig.runGuardsAndResolvers);Ue?N.canActivateChecks.push(new nc(C)):(G.data=z.data,G._resolvedData=z._resolvedData),An(E,A,G.component?re?re.children:null:_,C,N),Ue&&re&&re.outlet&&re.outlet.isActivated&&N.canDeactivateChecks.push(new Do(re.outlet.component,z))}else z&&Ao(A,re,N),N.canActivateChecks.push(new nc(C)),An(E,null,G.component?re?re.children:null:_,C,N)})(z,G[z.value.outlet],_,C.concat([z.value]),N),delete G[z.value.outlet]}),Object.entries(G).forEach(([z,re])=>Ao(re,_.getContext(z),N)),N}function Ao(E,A,_){const C=Tn(E),N=E.value;Object.entries(C).forEach(([G,z])=>{Ao(z,N.component?A?A.children.getContext(G):null:A,_)}),_.canDeactivateChecks.push(new Do(N.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,N))}function Co(E){return"function"==typeof E}function ji(E){return E instanceof it.K||"EmptyError"===E?.name}const ys=Symbol("INITIAL_VALUE");function vs(){return(0,Te.w)(E=>pe(E.map(A=>A.pipe((0,Ae.q)(1),(0,Pe.O)(ys)))).pipe((0,He.U)(A=>{for(const _ of A)if(!0!==_){if(_===ys)return ys;if(!1===_||_ instanceof Pr)return _}return!0}),(0,dt.h)(A=>A!==ys),(0,Ae.q)(1)))}function ar(E){return(0,si.z)((0,kt.b)(A=>{if(Yn(A))throw jt(0,A)}),(0,He.U)(A=>!0===A))}class bo{constructor(A){this.segmentGroup=A||null}}class Ys{constructor(A){this.urlTree=A}}function Pi(E){return(0,Fr._)(new bo(E))}function Jo(E){return(0,Fr._)(new Ys(E))}class Xo{constructor(A,_){this.urlSerializer=A,this.urlTree=_}noMatchError(A){return new w.vHH(4002,!1)}lineralizeSegments(A,_){let C=[],N=_.root;for(;;){if(C=C.concat(N.segments),0===N.numberOfChildren)return(0,se.of)(C);if(N.numberOfChildren>1||!N.children[Dt])return(0,Fr._)(new w.vHH(4e3,!1));N=N.children[Dt]}}applyRedirectCommands(A,_,C){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),A,C)}applyRedirectCreateUrlTree(A,_,C,N){const G=this.createSegmentGroup(A,_.root,C,N);return new Pr(G,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(A,_){const C={};return Object.entries(A).forEach(([N,G])=>{if("string"==typeof G&&G.startsWith(":")){const re=G.substring(1);C[N]=_[re]}else C[N]=G}),C}createSegmentGroup(A,_,C,N){const G=this.createSegments(A,_.segments,C,N);let z={};return Object.entries(_.children).forEach(([re,Ue])=>{z[re]=this.createSegmentGroup(A,Ue,C,N)}),new Yt(G,z)}createSegments(A,_,C,N){return _.map(G=>G.path.startsWith(":")?this.findPosParam(A,G,N):this.findOrReturn(G,C))}findPosParam(A,_,C){const N=C[_.path.substring(1)];if(!N)throw new w.vHH(4001,!1);return N}findOrReturn(A,_){let C=0;for(const N of _){if(N.path===A.path)return _.splice(C),N;C++}return A}}const Os={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ea(E,A,_,C,N){const G=ks(E,A,_);return G.matched?(C=function Zs(E,A){return E.providers&&!E._injector&&(E._injector=(0,w.MMx)(E.providers,A,`Route: ${E.path}`)),E._injector??A}(A,C),function xr(E,A,_,C){const N=A.canMatch;if(!N||0===N.length)return(0,se.of)(!0);const G=N.map(z=>{const re=Ko(z,E);return jn(function So(E){return E&&Co(E.canMatch)}(re)?re.canMatch(A,_):E.runInContext(()=>re(A,_)))});return(0,se.of)(G).pipe(vs(),ar())}(C,A,_).pipe((0,He.U)(z=>!0===z?G:{...Os}))):(0,se.of)(G)}function ks(E,A,_){if(""===A.path)return"full"===A.pathMatch&&(E.hasChildren()||_.length>0)?{...Os}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const N=(A.matcher||Vt)(_,E,A);if(!N)return{...Os};const G={};Object.entries(N.posParams??{}).forEach(([re,Ue])=>{G[re]=Ue.path});const z=N.consumed.length>0?{...G,...N.consumed[N.consumed.length-1].parameters}:G;return{matched:!0,consumedSegments:N.consumed,remainingSegments:_.slice(N.consumed.length),parameters:z,positionalParamSegments:N.posParams??{}}}function ta(E,A,_,C){return _.length>0&&function Tu(E,A,_){return _.some(C=>Oa(E,A,C)&&Kt(C)!==Dt)}(E,_,C)?{segmentGroup:new Yt(A,wu(C,new Yt(_,E.children))),slicedSegments:[]}:0===_.length&&function tl(E,A,_){return _.some(C=>Oa(E,A,C))}(E,_,C)?{segmentGroup:new Yt(E.segments,Iu(E,0,_,C,E.children)),slicedSegments:_}:{segmentGroup:new Yt(E.segments,E.children),slicedSegments:_}}function Iu(E,A,_,C,N){const G={};for(const z of C)if(Oa(E,_,z)&&!N[Kt(z)]){const re=new Yt([],{});G[Kt(z)]=re}return{...N,...G}}function wu(E,A){const _={};_[Dt]=A;for(const C of E)if(""===C.path&&Kt(C)!==Dt){const N=new Yt([],{});_[Kt(C)]=N}return _}function Oa(E,A,_){return(!(E.hasChildren()||A.length>0)||"full"!==_.pathMatch)&&""===_.path}class nl{constructor(A,_,C,N,G,z,re){this.injector=A,this.configLoader=_,this.rootComponentType=C,this.config=N,this.urlTree=G,this.paramsInheritanceStrategy=z,this.urlSerializer=re,this.allowRedirects=!0,this.applyRedirects=new Xo(this.urlSerializer,this.urlTree)}noMatchError(A){return new w.vHH(4002,!1)}recognize(){const A=ta(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,A,Dt).pipe((0,Lt.K)(_=>{if(_ instanceof Ys)return this.allowRedirects=!1,this.urlTree=_.urlTree,this.match(_.urlTree);throw _ instanceof bo?this.noMatchError(_):_}),(0,He.U)(_=>{const C=new mi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,{}),N=new At(C,_),G=new Pt("",N),z=function Ui(E,A,_=null,C=null){return Go(po(E),A,_,C)}(C,[],this.urlTree.queryParams,this.urlTree.fragment);return z.queryParams=this.urlTree.queryParams,G.url=this.urlSerializer.serialize(z),this.inheritParamsAndData(G._root),{state:G,tree:z}}))}match(A){return this.processSegmentGroup(this.injector,this.config,A.root,Dt).pipe((0,Lt.K)(C=>{throw C instanceof bo?this.noMatchError(C):C}))}inheritParamsAndData(A){const _=A.value,C=Un(_,this.paramsInheritanceStrategy);_.params=Object.freeze(C.params),_.data=Object.freeze(C.data),A.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(A,_,C,N){return 0===C.segments.length&&C.hasChildren()?this.processChildren(A,_,C):this.processSegment(A,_,C,C.segments,N,!0)}processChildren(A,_,C){const N=[];for(const G of Object.keys(C.children))"primary"===G?N.unshift(G):N.push(G);return(0,fe.D)(N).pipe(It(G=>{const z=C.children[G],re=function hr(E,A){const _=E.filter(C=>Kt(C)===A);return _.push(...E.filter(C=>Kt(C)!==A)),_}(_,G);return this.processSegmentGroup(A,re,z,G)}),(0,Ln.R)((G,z)=>(G.push(...z),G)),(0,nr.d)(null),function rr(E,A){const _=arguments.length>=2;return C=>C.pipe(E?(0,dt.h)((N,G)=>E(N,G,C)):Oe.y,Gn(1),_?(0,nr.d)(A):(0,En.T)(()=>new it.K))}(),(0,We.z)(G=>{if(null===G)return Pi(C);const z=F(G);return function Js(E){E.sort((A,_)=>A.value.outlet===Dt?-1:_.value.outlet===Dt?1:A.value.outlet.localeCompare(_.value.outlet))}(z),(0,se.of)(z)}))}processSegment(A,_,C,N,G,z){return(0,fe.D)(_).pipe(It(re=>this.processSegmentAgainstRoute(re._injector??A,_,re,C,N,G,z).pipe((0,Lt.K)(Ue=>{if(Ue instanceof bo)return(0,se.of)(null);throw Ue}))),(0,Mn.P)(re=>!!re),(0,Lt.K)(re=>{if(ji(re))return function Fa(E,A,_){return 0===A.length&&!E.children[_]}(C,N,G)?(0,se.of)([]):Pi(C);throw re}))}processSegmentAgainstRoute(A,_,C,N,G,z,re){return function ka(E,A,_,C){return!!(Kt(E)===C||C!==Dt&&Oa(A,_,E))&&("**"===E.path||ks(A,E,_).matched)}(C,N,G,z)?void 0===C.redirectTo?this.matchSegmentAgainstRoute(A,N,C,G,z,re):re&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,N,_,C,G,z):Pi(N):Pi(N)}expandSegmentAgainstRouteUsingRedirect(A,_,C,N,G,z){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,C,N,z):this.expandRegularSegmentAgainstRouteUsingRedirect(A,_,C,N,G,z)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,_,C,N){const G=this.applyRedirects.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?Jo(G):this.applyRedirects.lineralizeSegments(C,G).pipe((0,We.z)(z=>{const re=new Yt(z,{});return this.processSegment(A,_,re,z,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,_,C,N,G,z){const{matched:re,consumedSegments:Ue,remainingSegments:_t,positionalParamSegments:Tt}=ks(_,N,G);if(!re)return Pi(_);const wn=this.applyRedirects.applyRedirectCommands(Ue,N.redirectTo,Tt);return N.redirectTo.startsWith("/")?Jo(wn):this.applyRedirects.lineralizeSegments(N,wn).pipe((0,We.z)(tr=>this.processSegment(A,C,_,tr.concat(_t),z,!1)))}matchSegmentAgainstRoute(A,_,C,N,G,z){let re;if("**"===C.path){const Ue=N.length>0?en(N).parameters:{},_t=new mi(N,Ue,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,O(C),Kt(C),C.component??C._loadedComponent??null,C,Z(C));re=(0,se.of)({snapshot:_t,consumedSegments:[],remainingSegments:[]}),_.children={}}else re=ea(_,C,N,A).pipe((0,He.U)(({matched:Ue,consumedSegments:_t,remainingSegments:Tt,parameters:wn})=>Ue?{snapshot:new mi(_t,wn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,O(C),Kt(C),C.component??C._loadedComponent??null,C,Z(C)),consumedSegments:_t,remainingSegments:Tt}:null));return re.pipe((0,Te.w)(Ue=>null===Ue?Pi(_):this.getChildConfig(A=C._injector??A,C,N).pipe((0,Te.w)(({routes:_t})=>{const Tt=C._loadedInjector??A,{snapshot:wn,consumedSegments:tr,remainingSegments:no}=Ue,{segmentGroup:Ls,slicedSegments:Es}=ta(_,tr,no,_t);if(0===Es.length&&Ls.hasChildren())return this.processChildren(Tt,_t,Ls).pipe((0,He.U)(hi=>null===hi?null:[new At(wn,hi)]));if(0===_t.length&&0===Es.length)return(0,se.of)([new At(wn,[])]);const fd=Kt(C)===G;return this.processSegment(Tt,_t,Ls,Es,fd?Dt:G,!0).pipe((0,He.U)(hi=>[new At(wn,hi)]))}))))}getChildConfig(A,_,C){return _.children?(0,se.of)({routes:_.children,injector:A}):_.loadChildren?void 0!==_._loadedRoutes?(0,se.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function $i(E,A,_,C){const N=A.canLoad;if(void 0===N||0===N.length)return(0,se.of)(!0);const G=N.map(z=>{const re=Ko(z,E);return jn(function rc(E){return E&&Co(E.canLoad)}(re)?re.canLoad(A,_):E.runInContext(()=>re(A,_)))});return(0,se.of)(G).pipe(vs(),ar())}(A,_,C).pipe((0,We.z)(N=>N?this.configLoader.loadChildren(A,_).pipe((0,kt.b)(G=>{_._loadedRoutes=G.routes,_._loadedInjector=G.injector})):function sc(E){return(0,Fr._)(gu(!1,3))}())):(0,se.of)({routes:[],injector:A})}}function T(E){const A=E.value.routeConfig;return A&&""===A.path}function F(E){const A=[],_=new Set;for(const C of E){if(!T(C)){A.push(C);continue}const N=A.find(G=>C.value.routeConfig===G.value.routeConfig);void 0!==N?(N.children.push(...C.children),_.add(N)):A.push(C)}for(const C of _){const N=F(C.children);A.push(new At(C.value,N))}return A.filter(C=>!_.has(C))}function O(E){return E.data||{}}function Z(E){return E.resolve||{}}function St(E){return"string"==typeof E.title||null===E.title}function Cn(E){return(0,Te.w)(A=>{const _=E(A);return _?(0,fe.D)(_).pipe((0,He.U)(()=>A)):(0,se.of)(A)})}const $t=new w.OlP("ROUTES");let Sn=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,w.f3M)(w.Sil)}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,se.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const C=jn(_.loadComponent()).pipe((0,He.U)(Hi),(0,kt.b)(G=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=G}),ls(()=>{this.componentLoaders.delete(_)})),N=new _e(C,()=>new ye.x).pipe(gi());return this.componentLoaders.set(_,N),N}loadChildren(_,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,se.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const G=this.loadModuleFactoryOrRoutes(C.loadChildren).pipe((0,He.U)(re=>{this.onLoadEndListener&&this.onLoadEndListener(C);let Ue,_t;return Array.isArray(re)?_t=re:(Ue=re.create(_).injector,_t=Ue.get($t,[],w.XFs.Self|w.XFs.Optional).flat()),{routes:_t.map(Ks),injector:Ue}}),ls(()=>{this.childrenLoaders.delete(C)})),z=new _e(G,()=>new ye.x).pipe(gi());return this.childrenLoaders.set(C,z),z}loadModuleFactoryOrRoutes(_){return jn(_()).pipe((0,He.U)(Hi),(0,We.z)(C=>C instanceof w.YKP||Array.isArray(C)?(0,se.of)(C):(0,fe.D)(this.compiler.compileModuleAsync(C))))}static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function Hi(E){return function er(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let gn=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ye.x,this.configLoader=(0,w.f3M)(Sn),this.environmentInjector=(0,w.f3M)(w.lqb),this.urlSerializer=(0,w.f3M)(Qi),this.rootContexts=(0,w.f3M)(Ws),this.inputBindingEnabled=null!==(0,w.f3M)($r,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,se.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new nn(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new pu(N))}complete(){this.transitions?.complete()}handleNavigationRequest(_){const C=++this.navigationId;this.transitions?.next({...this.transitions.value,..._,id:C})}setupNavigations(_){return this.transitions=new Ie.X({id:0,currentUrlTree:_.currentUrlTree,currentRawUrl:_.currentUrlTree,extractedUrl:_.urlHandlingStrategy.extract(_.currentUrlTree),urlAfterRedirects:_.urlHandlingStrategy.extract(_.currentUrlTree),rawUrl:_.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ps,restoredState:null,currentSnapshot:_.routerState.snapshot,targetSnapshot:null,currentRouterState:_.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,dt.h)(C=>0!==C.id),(0,He.U)(C=>({...C,extractedUrl:_.urlHandlingStrategy.extract(C.rawUrl)})),(0,Te.w)(C=>{let N=!1,G=!1;return(0,se.of)(C).pipe((0,kt.b)(z=>{this.currentNavigation={id:z.id,initialUrl:z.rawUrl,extractedUrl:z.extractedUrl,trigger:z.source,extras:z.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Te.w)(z=>{const re=_.browserUrlTree.toString(),Ue=!_.navigated||z.extractedUrl.toString()!==re||re!==_.currentUrlTree.toString();if(!Ue&&"reload"!==(z.extras.onSameUrlNavigation??_.onSameUrlNavigation)){const Tt="";return this.events.next(new yo(z.id,_.serializeUrl(C.rawUrl),Tt,0)),_.rawUrlTree=z.rawUrl,z.resolve(null),gr.E}if(_.urlHandlingStrategy.shouldProcessUrl(z.rawUrl))return Xr(z.source)&&(_.browserUrlTree=z.extractedUrl),(0,se.of)(z).pipe((0,Te.w)(Tt=>{const wn=this.transitions?.getValue();return this.events.next(new Xu(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),Tt.source,Tt.restoredState)),wn!==this.transitions?.getValue()?gr.E:Promise.resolve(Tt)}),function de(E,A,_,C,N,G){return(0,We.z)(z=>function La(E,A,_,C,N,G,z="emptyOnly"){return new nl(E,A,_,C,N,z,G).recognize()}(E,A,_,C,z.extractedUrl,N,G).pipe((0,He.U)(({state:re,tree:Ue})=>({...z,targetSnapshot:re,urlAfterRedirects:Ue}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,_.config,this.urlSerializer,_.paramsInheritanceStrategy),(0,kt.b)(Tt=>{if(C.targetSnapshot=Tt.targetSnapshot,C.urlAfterRedirects=Tt.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Tt.urlAfterRedirects},"eager"===_.urlUpdateStrategy){if(!Tt.extras.skipLocationChange){const tr=_.urlHandlingStrategy.merge(Tt.urlAfterRedirects,Tt.rawUrl);_.setBrowserUrl(tr,Tt)}_.browserUrlTree=Tt.urlAfterRedirects}const wn=new Mr(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),this.urlSerializer.serialize(Tt.urlAfterRedirects),Tt.targetSnapshot);this.events.next(wn)}));if(Ue&&_.urlHandlingStrategy.shouldProcessUrl(_.rawUrlTree)){const{id:Tt,extractedUrl:wn,source:tr,restoredState:no,extras:Ls}=z,Es=new Xu(Tt,this.urlSerializer.serialize(wn),tr,no);this.events.next(Es);const fd=gs(0,this.rootComponentType).snapshot;return C={...z,targetSnapshot:fd,urlAfterRedirects:wn,extras:{...Ls,skipLocationChange:!1,replaceUrl:!1}},(0,se.of)(C)}{const Tt="";return this.events.next(new yo(z.id,_.serializeUrl(C.extractedUrl),Tt,1)),_.rawUrlTree=z.rawUrl,z.resolve(null),gr.E}}),(0,kt.b)(z=>{const re=new vo(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects),z.targetSnapshot);this.events.next(re)}),(0,He.U)(z=>C={...z,guards:mu(z.targetSnapshot,z.currentSnapshot,this.rootContexts)}),function Qs(E,A){return(0,We.z)(_=>{const{targetSnapshot:C,currentSnapshot:N,guards:{canActivateChecks:G,canDeactivateChecks:z}}=_;return 0===z.length&&0===G.length?(0,se.of)({..._,guardsResult:!0}):function Ns(E,A,_,C){return(0,fe.D)(E).pipe((0,We.z)(N=>function di(E,A,_,C,N){const G=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,se.of)(!0);const z=G.map(re=>{const Ue=_s(A)??N,_t=Ko(re,Ue);return jn(function vu(E){return E&&Co(E.canDeactivate)}(_t)?_t.canDeactivate(E,A,_,C):Ue.runInContext(()=>_t(E,A,_,C))).pipe((0,Mn.P)())});return(0,se.of)(z).pipe(vs())}(N.component,N.route,_,A,C)),(0,Mn.P)(N=>!0!==N,!0))}(z,C,N,E).pipe((0,We.z)(re=>re&&function Pa(E){return"boolean"==typeof E}(re)?function id(E,A,_,C){return(0,fe.D)(A).pipe(It(N=>(0,Ee.z)(function Ri(E,A){return null!==E&&A&&A(new Dr(E)),(0,se.of)(!0)}(N.route.parent,C),function xa(E,A){return null!==E&&A&&A(new Eo(E)),(0,se.of)(!0)}(N.route,C),function Yo(E,A,_){const C=A[A.length-1],G=A.slice(0,A.length-1).reverse().map(z=>function rd(E){const A=E.routeConfig?E.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:E,guards:A}:null}(z)).filter(z=>null!==z).map(z=>sn(()=>{const re=z.guards.map(Ue=>{const _t=_s(z.node)??_,Tt=Ko(Ue,_t);return jn(function Ma(E){return E&&Co(E.canActivateChild)}(Tt)?Tt.canActivateChild(C,E):_t.runInContext(()=>Tt(C,E))).pipe((0,Mn.P)())});return(0,se.of)(re).pipe(vs())}));return(0,se.of)(G).pipe(vs())}(E,N.path,_),function ic(E,A,_){const C=A.routeConfig?A.routeConfig.canActivate:null;if(!C||0===C.length)return(0,se.of)(!0);const N=C.map(G=>sn(()=>{const z=_s(A)??_,re=Ko(G,z);return jn(function yu(E){return E&&Co(E.canActivate)}(re)?re.canActivate(A,E):z.runInContext(()=>re(A,E))).pipe((0,Mn.P)())}));return(0,se.of)(N).pipe(vs())}(E,N.route,_))),(0,Mn.P)(N=>!0!==N,!0))}(C,G,E,A):(0,se.of)(re)),(0,He.U)(re=>({..._,guardsResult:re})))})}(this.environmentInjector,z=>this.events.next(z)),(0,kt.b)(z=>{if(C.guardsResult=z.guardsResult,Yn(z.guardsResult))throw jt(0,z.guardsResult);const re=new Xn(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects),z.targetSnapshot,!!z.guardsResult);this.events.next(re)}),(0,dt.h)(z=>!!z.guardsResult||(_.restoreHistory(z),this.cancelNavigationTransition(z,"",3),!1)),Cn(z=>{if(z.guards.canActivateChecks.length)return(0,se.of)(z).pipe((0,kt.b)(re=>{const Ue=new Ji(re.id,this.urlSerializer.serialize(re.extractedUrl),this.urlSerializer.serialize(re.urlAfterRedirects),re.targetSnapshot);this.events.next(Ue)}),(0,Te.w)(re=>{let Ue=!1;return(0,se.of)(re).pipe(function Re(E,A){return(0,We.z)(_=>{const{targetSnapshot:C,guards:{canActivateChecks:N}}=_;if(!N.length)return(0,se.of)(_);let G=0;return(0,fe.D)(N).pipe(It(z=>function mt(E,A,_,C){const N=E.routeConfig,G=E._resolve;return void 0!==N?.title&&!St(N)&&(G[Tr]=N.title),function bt(E,A,_,C){const N=function xn(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===N.length)return(0,se.of)({});const G={};return(0,fe.D)(N).pipe((0,We.z)(z=>function dn(E,A,_,C){const N=_s(A)??C,G=Ko(E,N);return jn(G.resolve?G.resolve(A,_):N.runInContext(()=>G(A,_)))}(E[z],A,_,C).pipe((0,Mn.P)(),(0,kt.b)(re=>{G[z]=re}))),Gn(1),function qr(E){return(0,He.U)(()=>E)}(G),(0,Lt.K)(z=>ji(z)?gr.E:(0,Fr._)(z)))}(G,E,A,C).pipe((0,He.U)(z=>(E._resolvedData=z,E.data=Un(E,_).resolve,N&&St(N)&&(E.data[Tr]=N.title),null)))}(z.route,C,E,A)),(0,kt.b)(()=>G++),Gn(1),(0,We.z)(z=>G===N.length?(0,se.of)(_):gr.E))})}(_.paramsInheritanceStrategy,this.environmentInjector),(0,kt.b)({next:()=>Ue=!0,complete:()=>{Ue||(_.restoreHistory(re),this.cancelNavigationTransition(re,"",2))}}))}),(0,kt.b)(re=>{const Ue=new Sa(re.id,this.urlSerializer.serialize(re.extractedUrl),this.urlSerializer.serialize(re.urlAfterRedirects),re.targetSnapshot);this.events.next(Ue)}))}),Cn(z=>{const re=Ue=>{const _t=[];Ue.routeConfig?.loadComponent&&!Ue.routeConfig._loadedComponent&&_t.push(this.configLoader.loadComponent(Ue.routeConfig).pipe((0,kt.b)(Tt=>{Ue.component=Tt}),(0,He.U)(()=>{})));for(const Tt of Ue.children)_t.push(...re(Tt));return _t};return pe(re(z.targetSnapshot.root)).pipe((0,nr.d)(),(0,Ae.q)(1))}),Cn(()=>this.afterPreactivation()),(0,He.U)(z=>{const re=function tc(E,A,_){const C=ai(E,A._root,_?_._root:void 0);return new jr(C,A)}(_.routeReuseStrategy,z.targetSnapshot,z.currentRouterState);return C={...z,targetRouterState:re}}),(0,kt.b)(z=>{_.currentUrlTree=z.urlAfterRedirects,_.rawUrlTree=_.urlHandlingStrategy.merge(z.urlAfterRedirects,z.rawUrl),_.routerState=z.targetRouterState,"deferred"===_.urlUpdateStrategy&&(z.extras.skipLocationChange||_.setBrowserUrl(_.rawUrlTree,z),_.browserUrlTree=z.urlAfterRedirects)}),((E,A,_,C)=>(0,He.U)(N=>(new Xc(A,N.targetRouterState,N.currentRouterState,_,C).activate(E),N)))(this.rootContexts,_.routeReuseStrategy,z=>this.events.next(z),this.inputBindingEnabled),(0,Ae.q)(1),(0,kt.b)({next:z=>{N=!0,this.lastSuccessfulNavigation=this.currentNavigation,_.navigated=!0,this.events.next(new mr(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(_.currentUrlTree))),_.titleStrategy?.updateTitle(z.targetRouterState.snapshot),z.resolve(!0)},complete:()=>{N=!0}}),ls(()=>{N||G||this.cancelNavigationTransition(C,"",1),this.currentNavigation?.id===C.id&&(this.currentNavigation=null)}),(0,Lt.K)(z=>{if(G=!0,ms(z)){To(z)||(_.navigated=!0,_.restoreHistory(C,!0));const re=new _o(C.id,this.urlSerializer.serialize(C.extractedUrl),z.message,z.cancellationCode);if(this.events.next(re),To(z)){const Ue=_.urlHandlingStrategy.merge(z.url,_.rawUrlTree),_t={skipLocationChange:C.extras.skipLocationChange,replaceUrl:"eager"===_.urlUpdateStrategy||Xr(C.source)};_.scheduleNavigation(Ue,Ps,null,_t,{resolve:C.resolve,reject:C.reject,promise:C.promise})}else C.resolve(!1)}else{_.restoreHistory(C,!0);const re=new fu(C.id,this.urlSerializer.serialize(C.extractedUrl),z,C.targetSnapshot??void 0);this.events.next(re);try{C.resolve(_.errorHandler(z))}catch(Ue){C.reject(Ue)}}return gr.E}))}))}cancelNavigationTransition(_,C,N){const G=new _o(_.id,this.urlSerializer.serialize(_.extractedUrl),C,N);this.events.next(G),_.resolve(!1)}static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function Xr(E){return E!==Ps}let vr=(()=>{class E{buildTitle(_){let C,N=_.root;for(;void 0!==N;)C=this.getResolvedTitleForRoute(N)??C,N=N.children.find(G=>G.outlet===Dt);return C}getResolvedTitleForRoute(_){return _.data[Tr]}static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:function(){return(0,w.f3M)(zi)},providedIn:"root"})}return E})(),zi=(()=>{class E extends vr{constructor(_){super(),this.title=_}updateTitle(_){const C=this.buildTitle(_);void 0!==C&&this.title.setTitle(C)}static#e=this.\u0275fac=function(C){return new(C||E)(w.LFG(Ti.Dx))};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),na=(()=>{class E{static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:function(){return(0,w.f3M)(oc)},providedIn:"root"})}return E})();class sd{shouldDetach(A){return!1}store(A,_){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,_){return A.routeConfig===_.routeConfig}}let oc=(()=>{class E extends sd{static#e=this.\u0275fac=function(){let _;return function(N){return(_||(_=w.n5z(E)))(N||E)}}();static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const Du=new w.OlP("",{providedIn:"root",factory:()=>({})});let Vh=(()=>{class E{static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:function(){return(0,w.f3M)(Ht)},providedIn:"root"})}return E})(),Ht=(()=>{class E{shouldProcessUrl(_){return!0}extract(_){return _}merge(_,C){return _}static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();var Xs=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(Xs||{});function ra(E,A){E.events.pipe((0,dt.h)(_=>_ instanceof mr||_ instanceof _o||_ instanceof fu||_ instanceof yo),(0,He.U)(_=>_ instanceof mr||_ instanceof yo?Xs.COMPLETE:_ instanceof _o&&(0===_.code||1===_.code)?Xs.REDIRECTING:Xs.FAILED),(0,dt.h)(_=>_!==Xs.REDIRECTING),(0,Ae.q)(1)).subscribe(()=>{A()})}function Uh(E){throw E}function Bh(E,A,_){return A.parse("/")}const jh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let sr=(()=>{class E{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,w.f3M)(w.c2e),this.isNgZoneEnabled=!1,this.options=(0,w.f3M)(Du,{optional:!0})||{},this.pendingTasks=(0,w.f3M)(w.HDt),this.errorHandler=this.options.errorHandler||Uh,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Bh,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,w.f3M)(Vh),this.routeReuseStrategy=(0,w.f3M)(na),this.titleStrategy=(0,w.f3M)(vr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,w.f3M)($t,{optional:!0})?.flat()??[],this.navigationTransitions=(0,w.f3M)(gn),this.urlSerializer=(0,w.f3M)(Qi),this.location=(0,w.f3M)(we.Ye),this.componentInputBindingEnabled=!!(0,w.f3M)($r,{optional:!0}),this.isNgZoneEnabled=(0,w.f3M)(w.R0b)instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Pr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gs(0,null),this.navigationTransitions.setupNavigations(this).subscribe(_=>{this.lastSuccessfulId=_.id,this.currentPageId=this.browserPageId??0},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}resetRootComponentType(_){this.routerState.root.component=_,this.navigationTransitions.rootComponentType=_}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const _=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ps,_)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const C="popstate"===_.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{this.navigateToSyncWithBrowser(_.url,C,_.state)},0)}))}navigateToSyncWithBrowser(_,C,N){const G={replaceUrl:!0},z=N?.navigationId?N:null;if(N){const Ue={...N};delete Ue.navigationId,delete Ue.\u0275routerPageId,0!==Object.keys(Ue).length&&(G.state=Ue)}const re=this.parseUrl(_);this.scheduleNavigation(re,C,z,G)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(_){this.config=_.map(Ks),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,C={}){const{relativeTo:N,queryParams:G,fragment:z,queryParamsHandling:re,preserveFragment:Ue}=C,_t=Ue?this.currentUrlTree.fragment:z;let wn,Tt=null;switch(re){case"merge":Tt={...this.currentUrlTree.queryParams,...G};break;case"preserve":Tt=this.currentUrlTree.queryParams;break;default:Tt=G||null}null!==Tt&&(Tt=this.removeEmptyProps(Tt));try{wn=po(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof _[0]||!_[0].startsWith("/"))&&(_=[]),wn=this.currentUrlTree.root}return Go(wn,_,Tt,_t??null)}navigateByUrl(_,C={skipLocationChange:!1}){const N=Yn(_)?_:this.parseUrl(_),G=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(G,Ps,null,C)}navigate(_,C={skipLocationChange:!1}){return function rl(E){for(let A=0;A<E.length;A++)if(null==E[A])throw new w.vHH(4008,!1)}(_),this.navigateByUrl(this.createUrlTree(_,C),C)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let C;try{C=this.urlSerializer.parse(_)}catch(N){C=this.malformedUriErrorHandler(N,this.urlSerializer,_)}return C}isActive(_,C){let N;if(N=!0===C?{...jh}:!1===C?{...eo}:C,Yn(_))return Vi(this.currentUrlTree,_,N);const G=this.parseUrl(_);return Vi(this.currentUrlTree,G,N)}removeEmptyProps(_){return Object.keys(_).reduce((C,N)=>{const G=_[N];return null!=G&&(C[N]=G),C},{})}scheduleNavigation(_,C,N,G,z){if(this.disposed)return Promise.resolve(!1);let re,Ue,_t;z?(re=z.resolve,Ue=z.reject,_t=z.promise):_t=new Promise((wn,tr)=>{re=wn,Ue=tr});const Tt=this.pendingTasks.add();return ra(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Tt))}),this.navigationTransitions.handleNavigationRequest({source:C,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:_,extras:G,resolve:re,reject:Ue,promise:_t,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_t.catch(wn=>Promise.reject(wn))}setBrowserUrl(_,C){const N=this.urlSerializer.serialize(_);if(this.location.isCurrentPathEqualTo(N)||C.extras.replaceUrl){const z={...C.extras.state,...this.generateNgRouterState(C.id,this.browserPageId)};this.location.replaceState(N,"",z)}else{const G={...C.extras.state,...this.generateNgRouterState(C.id,(this.browserPageId??0)+1)};this.location.go(N,"",G)}}restoreHistory(_,C=!1){if("computed"===this.canceledNavigationResolution){const G=this.currentPageId-(this.browserPageId??this.currentPageId);0!==G?this.location.historyGo(G):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===G&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(_,C){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:C}:{navigationId:_}}static#e=this.\u0275fac=function(C){return new(C||E)};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),Au=(()=>{class E{constructor(_,C,N,G,z,re){this.router=_,this.route=C,this.tabIndexAttribute=N,this.renderer=G,this.el=z,this.locationStrategy=re,this.href=null,this.commands=null,this.onChanges=new ye.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ue=z.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Ue||"area"===Ue,this.isAnchorElement?this.subscription=_.events.subscribe(_t=>{_t instanceof mr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(_){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",_)}ngOnChanges(_){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(_,C,N,G,z){return!!(null===this.urlTree||this.isAnchorElement&&(0!==_||C||N||G||z||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const _=null===this.href?null:(0,w.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",_)}applyAttributeValue(_,C){const N=this.renderer,G=this.el.nativeElement;null!==C?N.setAttribute(G,_,C):N.removeAttribute(G,_)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(C){return new(C||E)(w.Y36(sr),w.Y36(Si),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(we.S$))};static#t=this.\u0275dir=w.lG2({type:E,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(C,N){1&C&&w.NdJ("click",function(z){return N.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&C&&w.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",w.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",w.VuI],replaceUrl:["replaceUrl","replaceUrl",w.VuI],routerLink:"routerLink"},standalone:!0,features:[w.Xq5,w.TTD]})}return E})();class ad{}let ac=(()=>{class E{constructor(_,C,N,G,z){this.router=_,this.injector=N,this.preloadingStrategy=G,this.loader=z}setUpPreloading(){this.subscription=this.router.events.pipe((0,dt.h)(_=>_ instanceof mr),It(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,C){const N=[];for(const G of C){G.providers&&!G._injector&&(G._injector=(0,w.MMx)(G.providers,_,`Route: ${G.path}`));const z=G._injector??_,re=G._loadedInjector??z;(G.loadChildren&&!G._loadedRoutes&&void 0===G.canLoad||G.loadComponent&&!G._loadedComponent)&&N.push(this.preloadConfig(z,G)),(G.children||G._loadedRoutes)&&N.push(this.processRoutes(re,G.children??G._loadedRoutes))}return(0,fe.D)(N).pipe((0,Zr.J)())}preloadConfig(_,C){return this.preloadingStrategy.preload(C,()=>{let N;N=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(_,C):(0,se.of)(null);const G=N.pipe((0,We.z)(z=>null===z?(0,se.of)(void 0):(C._loadedRoutes=z.routes,C._loadedInjector=z.injector,this.processRoutes(z.injector??_,z.routes))));if(C.loadComponent&&!C._loadedComponent){const z=this.loader.loadComponent(C);return(0,fe.D)([G,z]).pipe((0,Zr.J)())}return G})}static#e=this.\u0275fac=function(C){return new(C||E)(w.LFG(sr),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(ad),w.LFG(Sn))};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const Va=new w.OlP("");let Hr=(()=>{class E{constructor(_,C,N,G,z={}){this.urlSerializer=_,this.transitions=C,this.viewportScroller=N,this.zone=G,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},z.scrollPositionRestoration=z.scrollPositionRestoration||"disabled",z.anchorScrolling=z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof Xu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof mr?(this.lastId=_.id,this.scheduleScrollEvent(_,this.urlSerializer.parse(_.urlAfterRedirects).fragment)):_ instanceof yo&&0===_.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(_,this.urlSerializer.parse(_.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof Io&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,C){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Io(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(C){w.$Z()};static#t=this.\u0275prov=w.Yz7({token:E,factory:E.\u0275fac})}return E})();function zr(E,A){return{\u0275kind:E,\u0275providers:A}}function il(){const E=(0,w.f3M)(w.zs3);return A=>{const _=E.get(w.z2F);if(A!==_.components[0])return;const C=E.get(sr),N=E.get($n);1===E.get(yi)&&C.initialNavigation(),E.get(Er,null,w.XFs.Optional)?.setUpPreloading(),E.get(Va,null,w.XFs.Optional)?.init(),C.resetRootComponentType(_.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const $n=new w.OlP("",{factory:()=>new ye.x}),yi=new w.OlP("",{providedIn:"root",factory:()=>1}),Er=new w.OlP("");function ld(E){return zr(0,[{provide:Er,useExisting:ac},{provide:ad,useExisting:E}])}const ja=new w.OlP("ROUTER_FORROOT_GUARD"),Fs=[we.Ye,{provide:Qi,useClass:X},sr,Ws,{provide:Si,useFactory:function ia(E){return E.routerState.root},deps:[sr]},Sn,[]];function $a(){return new w.PXZ("Router",sr)}let hc=(()=>{class E{constructor(_){}static forRoot(_,C){return{ngModule:E,providers:[Fs,[],{provide:$t,multi:!0,useValue:_},{provide:ja,useFactory:Su,deps:[[sr,new w.FiY,new w.tp0]]},{provide:Du,useValue:C||{}},C?.useHash?{provide:we.S$,useClass:we.Do}:{provide:we.S$,useClass:we.b0},{provide:Va,useFactory:()=>{const E=(0,w.f3M)(we.EM),A=(0,w.f3M)(w.R0b),_=(0,w.f3M)(Du),C=(0,w.f3M)(gn),N=(0,w.f3M)(Qi);return _.scrollOffset&&E.setOffset(_.scrollOffset),new Hr(N,C,E,A,_)}},C?.preloadingStrategy?ld(C.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:$a},C?.initialNavigation?za(C):[],C?.bindToComponentInputs?zr(8,[Xi,{provide:$r,useExisting:Xi}]).\u0275providers:[],[{provide:aa,useFactory:il},{provide:w.tb,multi:!0,useExisting:aa}]]}}static forChild(_){return{ngModule:E,providers:[{provide:$t,multi:!0,useValue:_}]}}static#e=this.\u0275fac=function(C){return new(C||E)(w.LFG(ja,8))};static#t=this.\u0275mod=w.oAB({type:E});static#n=this.\u0275inj=w.cJS({})}return E})();function Su(E){return"guarded"}function za(E){return["disabled"===E.initialNavigation?zr(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const A=(0,w.f3M)(sr);return()=>{A.setUpLocationChangeListener()}}},{provide:yi,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?zr(2,[{provide:yi,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:A=>{const _=A.get(we.V_,Promise.resolve());return()=>_.then(()=>new Promise(C=>{const N=A.get(sr),G=A.get($n);ra(N,()=>{C(!0)}),A.get(gn).afterPreactivation=()=>(C(!0),G.closed?(0,se.of)(void 0):G),N.initialNavigation()}))}}]).\u0275providers:[]]}const aa=new w.OlP("")},3106:(Et,Ce,V)=>{V.d(Ce,{Z:()=>He});var w=V(9058),ee=V(4537),D=V(534),oe=V(7879);class fe{constructor(rt,lt){this._delegate=rt,this.firebase=lt,(0,D._addComponent)(rt,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=rt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this._delegate.automaticDataCollectionEnabled=rt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(rt=>{this._delegate.checkDestroyed(),rt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,D.deleteApp)(this._delegate)))}_getService(rt,lt=D._DEFAULT_ENTRY_NAME){var qt;this._delegate.checkDestroyed();const fn=this._delegate.container.getProvider(rt);return!fn.isInitialized()&&"EXPLICIT"===(null===(qt=fn.getComponent())||void 0===qt?void 0:qt.instantiationMode)&&fn.initialize(),fn.getImmediate({identifier:lt})}_removeServiceInstance(rt,lt=D._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(rt).clearInstance(lt)}_addComponent(rt){(0,D._addComponent)(this._delegate,rt)}_addOrOverwriteComponent(rt){(0,D._addOrOverwriteComponent)(this._delegate,rt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function De(){const $e=function je($e){const rt={},lt={__esModule:!0,initializeApp:function ge(Je,it={}){const Ee=D.initializeApp(Je,it);if((0,w.r3)(rt,Ee.name))return rt[Ee.name];const Nt=new $e(Ee,lt);return rt[Ee.name]=Nt,Nt},app:fn,registerVersion:D.registerVersion,setLogLevel:D.setLogLevel,onLog:D.onLog,apps:null,SDK_VERSION:D.SDK_VERSION,INTERNAL:{registerComponent:function pe(Je){const it=Je.name,Ee=it.replace("-compat","");if(D._registerComponent(Je)&&"PUBLIC"===Je.type){const Nt=(sn=fn())=>{if("function"!=typeof sn[Ee])throw Ie.create("invalid-app-argument",{appName:it});return sn[Ee]()};void 0!==Je.serviceProps&&(0,w.ZB)(Nt,Je.serviceProps),lt[Ee]=Nt,$e.prototype[Ee]=function(...sn){return this._getService.bind(this,it).apply(this,Je.multipleInstances?sn:[])}}return"PUBLIC"===Je.type?lt[Ee]:null},removeApp:function qt(Je){delete rt[Je]},useAsService:function Ke(Je,it){return"serverAuth"===it?null:it},modularAPIs:D}};function fn(Je){if(!(0,w.r3)(rt,Je=Je||D._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:Je});return rt[Je]}return lt.default=lt,Object.defineProperty(lt,"apps",{get:function Ne(){return Object.keys(rt).map(Je=>rt[Je])}}),fn.App=$e,lt}(fe);return $e.INTERNAL=Object.assign(Object.assign({},$e.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function rt(lt){(0,w.ZB)($e,lt)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),$e}(),Y=new oe.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const $e=self.firebase.SDK_VERSION;$e&&$e.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=K;!function Oe($e){(0,D.registerVersion)("@firebase/app-compat","0.2.26",$e)}()},534:(Et,Ce,V)=>{V.r(Ce),V.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Lr,_DEFAULT_ENTRY_NAME:()=>yt,_addComponent:()=>kn,_addOrOverwriteComponent:()=>Rr,_apps:()=>Vt,_clearComponents:()=>zt,_components:()=>Vn,_getProvider:()=>jn,_registerComponent:()=>en,_removeServiceInstance:()=>zo,deleteApp:()=>Pr,getApp:()=>Rs,getApps:()=>Ki,initializeApp:()=>ds,onLog:()=>Ur,registerVersion:()=>Vr,setLogLevel:()=>Br});var w=V(5861),ee=V(4537),D=V(7879),oe=V(9058);const fe=(ve,le)=>le.some(ke=>ve instanceof ke);let se,Ie;const K=new WeakMap,Y=new WeakMap,ie=new WeakMap,qe=new WeakMap,Oe=new WeakMap;let rt={get(ve,le,ke){if(ve instanceof IDBTransaction){if("done"===le)return Y.get(ve);if("objectStoreNames"===le)return ve.objectStoreNames||ie.get(ve);if("store"===le)return ke.objectStoreNames[1]?void 0:ke.objectStore(ke.objectStoreNames[0])}return ge(ve[le])},set:(ve,le,ke)=>(ve[le]=ke,!0),has:(ve,le)=>ve instanceof IDBTransaction&&("done"===le||"store"===le)||le in ve};function fn(ve){return"function"==typeof ve?function qt(ve){return ve!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ve)?function(...le){return ve.apply(Ne(this),le),ge(K.get(this))}:function(...le){return ge(ve.apply(Ne(this),le))}:function(le,...ke){const ut=ve.call(Ne(this),le,...ke);return ie.set(ut,le.sort?le.sort():[le]),ge(ut)}}(ve):(ve instanceof IDBTransaction&&function $e(ve){if(Y.has(ve))return;const le=new Promise((ke,ut)=>{const tt=()=>{ve.removeEventListener("complete",Zt),ve.removeEventListener("error",tn),ve.removeEventListener("abort",tn)},Zt=()=>{ke(),tt()},tn=()=>{ut(ve.error||new DOMException("AbortError","AbortError")),tt()};ve.addEventListener("complete",Zt),ve.addEventListener("error",tn),ve.addEventListener("abort",tn)});Y.set(ve,le)}(ve),fe(ve,function je(){return se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ve,rt):ve)}function ge(ve){if(ve instanceof IDBRequest)return function He(ve){const le=new Promise((ke,ut)=>{const tt=()=>{ve.removeEventListener("success",Zt),ve.removeEventListener("error",tn)},Zt=()=>{ke(ge(ve.result)),tt()},tn=()=>{ut(ve.error),tt()};ve.addEventListener("success",Zt),ve.addEventListener("error",tn)});return le.then(ke=>{ke instanceof IDBCursor&&K.set(ke,ve)}).catch(()=>{}),Oe.set(le,ve),le}(ve);if(qe.has(ve))return qe.get(ve);const le=fn(ve);return le!==ve&&(qe.set(ve,le),Oe.set(le,ve)),le}const Ne=ve=>Oe.get(ve),Je=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],Ee=new Map;function Nt(ve,le){if(!(ve instanceof IDBDatabase)||le in ve||"string"!=typeof le)return;if(Ee.get(le))return Ee.get(le);const ke=le.replace(/FromIndex$/,""),ut=le!==ke,tt=it.includes(ke);if(!(ke in(ut?IDBIndex:IDBObjectStore).prototype)||!tt&&!Je.includes(ke))return;const Zt=function(){var tn=(0,w.Z)(function*(Wn,...qn){const Yn=this.transaction(Wn,tt?"readwrite":"readonly");let Ui=Yn.store;return ut&&(Ui=Ui.index(qn.shift())),(yield Promise.all([Ui[ke](...qn),tt&&Yn.done]))[0]});return function(qn){return tn.apply(this,arguments)}}();return Ee.set(le,Zt),Zt}!function lt(ve){rt=ve(rt)}(ve=>({...ve,get:(le,ke,ut)=>Nt(le,ke)||ve.get(le,ke,ut),has:(le,ke)=>!!Nt(le,ke)||ve.has(le,ke)}));class sn{constructor(le){this.container=le}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function si(ve){const le=ve.getComponent();return"VERSION"===le?.type}(ke)){const ut=ke.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(ke=>ke).join(" ")}}const Fr="@firebase/app",On=new D.Yd("@firebase/app"),yt="[DEFAULT]",Bt={[Fr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Vt=new Map,Vn=new Map;function kn(ve,le){try{ve.container.addComponent(le)}catch(ke){On.debug(`Component ${le.name} failed to register with FirebaseApp ${ve.name}`,ke)}}function Rr(ve,le){ve.container.addOrOverwriteComponent(le)}function en(ve){const le=ve.name;if(Vn.has(le))return On.debug(`There were multiple attempts to register component ${le}.`),!1;Vn.set(le,ve);for(const ke of Vt.values())kn(ke,ve);return!0}function jn(ve,le){const ke=ve.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),ve.container.getProvider(le)}function zo(ve,le,ke=yt){jn(ve,le).clearInstance(ke)}function zt(){Vn.clear()}const Qt=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kr{constructor(le,ke,ut){this._isDeleted=!1,this._options=Object.assign({},le),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this.checkDestroyed(),this._automaticDataCollectionEnabled=le}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(le){this._isDeleted=le}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const Lr="10.7.2";function ds(ve,le={}){let ke=ve;"object"!=typeof le&&(le={name:le});const ut=Object.assign({name:yt,automaticDataCollectionEnabled:!1},le),tt=ut.name;if("string"!=typeof tt||!tt)throw Qt.create("bad-app-name",{appName:String(tt)});if(ke||(ke=(0,oe.aH)()),!ke)throw Qt.create("no-options");const Zt=Vt.get(tt);if(Zt){if((0,oe.vZ)(ke,Zt.options)&&(0,oe.vZ)(ut,Zt.config))return Zt;throw Qt.create("duplicate-app",{appName:tt})}const tn=new ee.H0(tt);for(const qn of Vn.values())tn.addComponent(qn);const Wn=new Kr(ke,ut,tn);return Vt.set(tt,Wn),Wn}function Rs(ve=yt){const le=Vt.get(ve);if(!le&&ve===yt&&(0,oe.aH)())return ds();if(!le)throw Qt.create("no-app",{appName:ve});return le}function Ki(){return Array.from(Vt.values())}function Pr(ve){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,w.Z)(function*(ve){const le=ve.name;Vt.has(le)&&(Vt.delete(le),yield Promise.all(ve.container.getProviders().map(ke=>ke.delete())),ve.isDeleted=!0)})).apply(this,arguments)}function Vr(ve,le,ke){var ut;let tt=null!==(ut=Bt[ve])&&void 0!==ut?ut:ve;ke&&(tt+=`-${ke}`);const Zt=tt.match(/\s|\//),tn=le.match(/\s|\//);if(Zt||tn){const Wn=[`Unable to register library "${tt}" with version "${le}":`];return Zt&&Wn.push(`library name "${tt}" contains illegal characters (whitespace or "/")`),Zt&&tn&&Wn.push("and"),tn&&Wn.push(`version name "${le}" contains illegal characters (whitespace or "/")`),void On.warn(Wn.join(" "))}en(new ee.wA(`${tt}-version`,()=>({library:tt,version:le}),"VERSION"))}function Ur(ve,le){if(null!==ve&&"function"!=typeof ve)throw Qt.create("invalid-log-argument");(0,D.Am)(ve,le)}function Br(ve){(0,D.Ub)(ve)}const Di="firebase-heartbeat-database",Qi=1,X="firebase-heartbeat-store";let j=null;function $(){return j||(j=function pe(ve,le,{blocked:ke,upgrade:ut,blocking:tt,terminated:Zt}={}){const tn=indexedDB.open(ve,le),Wn=ge(tn);return ut&&tn.addEventListener("upgradeneeded",qn=>{ut(ge(tn.result),qn.oldVersion,qn.newVersion,ge(tn.transaction),qn)}),ke&&tn.addEventListener("blocked",qn=>ke(qn.oldVersion,qn.newVersion,qn)),Wn.then(qn=>{Zt&&qn.addEventListener("close",()=>Zt()),tt&&qn.addEventListener("versionchange",Yn=>tt(Yn.oldVersion,Yn.newVersion,Yn))}).catch(()=>{}),Wn}(Di,Qi,{upgrade:(ve,le)=>{if(0===le)try{ve.createObjectStore(X)}catch(ke){console.warn(ke)}}}).catch(ve=>{throw Qt.create("idb-open",{originalErrorMessage:ve.message})})),j}function H(){return(H=(0,w.Z)(function*(ve){try{return yield(yield $()).transaction(X).objectStore(X).get(Fe(ve))}catch(le){if(le instanceof oe.ZR)On.warn(le.message);else{const ke=Qt.create("idb-get",{originalErrorMessage:le?.message});On.warn(ke.message)}}})).apply(this,arguments)}function ne(ve,le){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,w.Z)(function*(ve,le){try{const ut=(yield $()).transaction(X,"readwrite");yield ut.objectStore(X).put(le,Fe(ve)),yield ut.done}catch(ke){if(ke instanceof oe.ZR)On.warn(ke.message);else{const ut=Qt.create("idb-set",{originalErrorMessage:ke?.message});On.warn(ut.message)}}})).apply(this,arguments)}function Fe(ve){return`${ve.name}!${ve.options.appId}`}class Gt{constructor(le){this.container=le,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new Dn(ke),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var le=this;return(0,w.Z)(function*(){var ke,ut;const Zt=le.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),tn=Rt();if((null!=(null===(ke=le._heartbeatsCache)||void 0===ke?void 0:ke.heartbeats)||(le._heartbeatsCache=yield le._heartbeatsCachePromise,null!=(null===(ut=le._heartbeatsCache)||void 0===ut?void 0:ut.heartbeats)))&&le._heartbeatsCache.lastSentHeartbeatDate!==tn&&!le._heartbeatsCache.heartbeats.some(Wn=>Wn.date===tn))return le._heartbeatsCache.heartbeats.push({date:tn,agent:Zt}),le._heartbeatsCache.heartbeats=le._heartbeatsCache.heartbeats.filter(Wn=>{const qn=new Date(Wn.date).valueOf();return Date.now()-qn<=2592e6}),le._storage.overwrite(le._heartbeatsCache)})()}getHeartbeatsHeader(){var le=this;return(0,w.Z)(function*(){var ke;if(null===le._heartbeatsCache&&(yield le._heartbeatsCachePromise),null==(null===(ke=le._heartbeatsCache)||void 0===ke?void 0:ke.heartbeats)||0===le._heartbeatsCache.heartbeats.length)return"";const ut=Rt(),{heartbeatsToSend:tt,unsentEntries:Zt}=function pn(ve,le=1024){const ke=[];let ut=ve.slice();for(const tt of ve){const Zt=ke.find(tn=>tn.agent===tt.agent);if(Zt){if(Zt.dates.push(tt.date),Yi(ke)>le){Zt.dates.pop();break}}else if(ke.push({agent:tt.agent,dates:[tt.date]}),Yi(ke)>le){ke.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:ke,unsentEntries:ut}}(le._heartbeatsCache.heartbeats),tn=(0,oe.L)(JSON.stringify({version:2,heartbeats:tt}));return le._heartbeatsCache.lastSentHeartbeatDate=ut,Zt.length>0?(le._heartbeatsCache.heartbeats=Zt,yield le._storage.overwrite(le._heartbeatsCache)):(le._heartbeatsCache.heartbeats=[],le._storage.overwrite(le._heartbeatsCache)),tn})()}}function Rt(){return(new Date).toISOString().substring(0,10)}class Dn{constructor(le){this.app=le,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var le=this;return(0,w.Z)(function*(){if(yield le._canUseIndexedDBPromise){const ut=yield function B(ve){return H.apply(this,arguments)}(le.app);return ut?.heartbeats?ut:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(le){var ke=this;return(0,w.Z)(function*(){var ut;if(yield ke._canUseIndexedDBPromise){const Zt=yield ke.read();return ne(ke.app,{lastSentHeartbeatDate:null!==(ut=le.lastSentHeartbeatDate)&&void 0!==ut?ut:Zt.lastSentHeartbeatDate,heartbeats:le.heartbeats})}})()}add(le){var ke=this;return(0,w.Z)(function*(){var ut;if(yield ke._canUseIndexedDBPromise){const Zt=yield ke.read();return ne(ke.app,{lastSentHeartbeatDate:null!==(ut=le.lastSentHeartbeatDate)&&void 0!==ut?ut:Zt.lastSentHeartbeatDate,heartbeats:[...Zt.heartbeats,...le.heartbeats]})}})()}}function Yi(ve){return(0,oe.L)(JSON.stringify({version:2,heartbeats:ve})).length}!function Ca(ve){en(new ee.wA("platform-logger",le=>new sn(le),"PRIVATE")),en(new ee.wA("heartbeat",le=>new Gt(le),"PRIVATE")),Vr(Fr,"0.9.26",ve),Vr(Fr,"0.9.26","esm2017"),Vr("fire-js","")}("")},4537:(Et,Ce,V)=>{V.d(Ce,{H0:()=>je,wA:()=>D});var w=V(5861),ee=V(9058);class D{constructor(K,Y,ie){this.name=K,this.instanceFactory=Y,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const oe="[DEFAULT]";class fe{constructor(K,Y){this.name=K,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const Y=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Y)){const ie=new ee.BH;if(this.instancesDeferred.set(Y,ie),this.isInitialized(Y)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:Y});qe&&ie.resolve(qe)}catch{}}return this.instancesDeferred.get(Y).promise}getImmediate(K){var Y;const ie=this.normalizeInstanceIdentifier(K?.identifier),qe=null!==(Y=K?.optional)&&void 0!==Y&&Y;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Oe){if(qe)return null;throw Oe}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function Ie(De){return"EAGER"===De.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[Y,ie]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(Y);try{const Oe=this.getOrInitializeService({instanceIdentifier:qe});ie.resolve(Oe)}catch{}}}}clearInstance(K=oe){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,w.Z)(function*(){const Y=Array.from(K.instances.values());yield Promise.all([...Y.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...Y.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=oe){return this.instances.has(K)}getOptions(K=oe){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:Y={}}=K,ie=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:ie,options:Y});for(const[Oe,He]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Oe)&&He.resolve(qe);return qe}onInit(K,Y){var ie;const qe=this.normalizeInstanceIdentifier(Y),Oe=null!==(ie=this.onInitCallbacks.get(qe))&&void 0!==ie?ie:new Set;Oe.add(K),this.onInitCallbacks.set(qe,Oe);const He=this.instances.get(qe);return He&&K(He,qe),()=>{Oe.delete(K)}}invokeOnInitCallbacks(K,Y){const ie=this.onInitCallbacks.get(Y);if(ie)for(const qe of ie)try{qe(K,Y)}catch{}}getOrInitializeService({instanceIdentifier:K,options:Y={}}){let ie=this.instances.get(K);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(De=K,De===oe?void 0:De),options:Y}),this.instances.set(K,ie),this.instancesOptions.set(K,Y),this.invokeOnInitCallbacks(ie,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,ie)}catch{}var De;return ie||null}normalizeInstanceIdentifier(K=oe){return this.component?this.component.multipleInstances?K:oe:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class je{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const Y=this.getProvider(K.name);if(Y.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);Y.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const Y=new fe(K,this);return this.providers.set(K,Y),Y}getProviders(){return Array.from(this.providers.values())}}},7879:(Et,Ce,V)=>{V.d(Ce,{Am:()=>De,Ub:()=>je,Yd:()=>Ie,in:()=>ee});const w=[];var ee=function(K){return K[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",K}(ee||{});const D={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},oe=ee.INFO,fe={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},se=(K,Y,...ie)=>{if(Y<K.logLevel)return;const qe=(new Date).toISOString(),Oe=fe[Y];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Oe](`[${qe}]  ${K.name}:`,...ie)};class Ie{constructor(Y){this.name=Y,this._logLevel=oe,this._logHandler=se,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in ee))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?D[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...Y),this._logHandler(this,ee.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...Y),this._logHandler(this,ee.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...Y),this._logHandler(this,ee.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...Y),this._logHandler(this,ee.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...Y),this._logHandler(this,ee.ERROR,...Y)}}function je(K){w.forEach(Y=>{Y.setLogLevel(K)})}function De(K,Y){for(const ie of w){let qe=null;Y&&Y.level&&(qe=D[Y.level]),ie.userLogHandler=null===K?null:(Oe,He,...$e)=>{const rt=$e.map(lt=>{if(null==lt)return null;if("string"==typeof lt)return lt;if("number"==typeof lt||"boolean"==typeof lt)return lt.toString();if(lt instanceof Error)return lt.message;try{return JSON.stringify(lt)}catch{return null}}).filter(lt=>lt).join(" ");He>=(qe??Oe.logLevel)&&K({level:ee[He].toLowerCase(),message:rt,args:$e,type:Oe.name})}}}},6230:(Et,Ce,V)=>{V.r(Ce);var w=V(5861),ee=V(3106),D=V(9058),oe=V(534),fe=V(7879),se=V(7582),Ie=V(4537);const De={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const He=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},$e=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new D.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qt=new fe.Yd("@firebase/auth");function ge(g,...d){qt.logLevel<=fe.in.ERROR&&qt.error(`Auth (${oe.SDK_VERSION}): ${g}`,...d)}function Ne(g,...d){throw it(g,...d)}function pe(g,...d){return it(g,...d)}function Ke(g,d,p){const y=Object.assign(Object.assign({},$e()),{[d]:p});return new D.LL("auth","Firebase",y).create(d,{appName:g.name})}function Je(g,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&Ne(g,"argument-error"),Ke(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function it(g,...d){if("string"!=typeof g){const p=d[0],y=[...d.slice(1)];return y[0]&&(y[0].appName=g.name),g._errorFactory.create(p,...y)}return rt.create(g,...d)}function Ee(g,d,...p){if(!g)throw it(d,...p)}function Nt(g){const d="INTERNAL ASSERTION FAILED: "+g;throw ge(d),new Error(d)}function sn(g,d){g||Nt(d)}function si(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Fr(){return"http:"===gr()||"https:"===gr()}function gr(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class gi{constructor(d,p){this.shortDelay=d,this.longDelay=p,sn(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,D.uI)()||(0,D.b$)()}get(){return function On(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fr()||(0,D.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _e(g,d){sn(g.emulator,"Emulator should always be set here");const{url:p}=g.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class ye{static initialize(d,p,y){this.fetchImpl=d,p&&(this.headersImpl=p),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const we={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Te=new gi(3e4,6e4);function Ae(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Pe(g,d,p,y){return dt.apply(this,arguments)}function dt(){return(dt=(0,w.Z)(function*(g,d,p,y,M={}){return We(g,M,(0,w.Z)(function*(){let L={},Q={};y&&("GET"===d?Q=y:L={body:JSON.stringify(y)});const ce=(0,D.xO)(Object.assign({key:g.config.apiKey},Q)).slice(1),Me=yield g._getAdditionalHeaders();return Me["Content-Type"]="application/json",g.languageCode&&(Me["X-Firebase-Locale"]=g.languageCode),ye.fetch()(Lt(g,g.config.apiHost,p,ce),Object.assign({method:d,headers:Me,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function We(g,d,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,w.Z)(function*(g,d,p){g._canInitEmulator=!1;const y=Object.assign(Object.assign({},we),d);try{const M=new nr(g),L=yield Promise.race([p(),M.promise]);M.clearNetworkTimeout();const Q=yield L.json();if("needConfirmation"in Q)throw Gn(g,"account-exists-with-different-credential",Q);if(L.ok&&!("errorMessage"in Q))return Q;{const ce=L.ok?Q.errorMessage:Q.error.message,[Me,at]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw Gn(g,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Me)throw Gn(g,"email-already-in-use",Q);if("USER_DISABLED"===Me)throw Gn(g,"user-disabled",Q);const gt=y[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw Ke(g,gt,at);Ne(g,gt)}}catch(M){if(M instanceof D.ZR)throw M;Ne(g,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function It(g,d,p,y){return kt.apply(this,arguments)}function kt(){return(kt=(0,w.Z)(function*(g,d,p,y,M={}){const L=yield Pe(g,d,p,y,M);return"mfaPendingCredential"in L&&Ne(g,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Lt(g,d,p,y){const M=`${d}${p}?${y}`;return g.config.emulator?_e(g.config,M):`${g.config.apiScheme}://${M}`}function Ln(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,y)=>{this.timer=setTimeout(()=>y(pe(this.auth,"network-request-failed")),Te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(g,d,p){const y={appName:g.name};p.email&&(y.email=p.email),p.phoneNumber&&(y.phoneNumber=p.phoneNumber);const M=pe(g,d,y);return M.customData._tokenResponse=p,M}function En(g){return void 0!==g&&void 0!==g.getResponse}function rr(g){return void 0!==g&&void 0!==g.enterprise}class qr{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===d)return Ln(p.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function Zr(){return(Zr=(0,w.Z)(function*(g){return(yield Pe(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ti(g,d){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,w.Z)(function*(g,d){return Pe(g,"GET","/v2/recaptchaConfig",Ae(g,d))})).apply(this,arguments)}function yt(){return(yt=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Vt(){return(Vt=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function kn(){return(kn=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Rr(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function zo(){return(zo=(0,w.Z)(function*(g,d=!1){const p=(0,D.m9)(g),y=yield p.getIdToken(d),M=Vi(y);Ee(M&&M.exp&&M.auth_time&&M.iat,p.auth,"internal-error");const L="object"==typeof M.firebase?M.firebase:void 0,Q=L?.sign_in_provider;return{claims:M,token:y,authTime:Rr(zt(M.auth_time)),issuedAtTime:Rr(zt(M.iat)),expirationTime:Rr(zt(M.exp)),signInProvider:Q||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function zt(g){return 1e3*Number(g)}function Vi(g){const[d,p,y]=g.split(".");if(void 0===d||void 0===p||void 0===y)return ge("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,D.tV)(p);return M?JSON.parse(M):(ge("Failed to decode base64 JWT payload"),null)}catch(M){return ge("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Kr(g,d){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,w.Z)(function*(g,d,p=!1){if(p)return d;try{return yield d}catch(y){throw y instanceof D.ZR&&function ds({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(y)&&g.auth.currentUser===g&&(yield g.auth.signOut()),y}})).apply(this,arguments)}class Rs{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const M=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const y=this.getInterval(d);this.timerId=setTimeout((0,w.Z)(function*(){yield p.iteration()}),y)}iteration(){var d=this;return(0,w.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&d.schedule(!0))}d.schedule()})()}}class Ki{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rr(this.lastLoginAt),this.creationTime=Rr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pr(g){return Yt.apply(this,arguments)}function Yt(){return Yt=(0,w.Z)(function*(g){var d;const p=g.auth,y=yield g.getIdToken(),M=yield Kr(g,function Vn(g,d){return kn.apply(this,arguments)}(p,{idToken:y}));Ee(M?.users.length,p,"internal-error");const L=M.users[0];g._notifyReloadListener(L);const Q=null!==(d=L.providerUserInfo)&&void 0!==d&&d.length?function Di(g){return g.map(d=>{var{providerId:p}=d,y=(0,se._T)(d,["providerId"]);return{providerId:p,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}(L.providerUserInfo):[],ce=function Br(g,d){return[...g.filter(y=>!d.some(M=>M.providerId===y.providerId)),...d]}(g.providerData,Q),gt=!!g.isAnonymous&&!(g.email&&L.passwordHash||ce?.length),ht={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:ce,metadata:new Ki(L.createdAt,L.lastLoginAt),isAnonymous:gt};Object.assign(g,ht)}),Yt.apply(this,arguments)}function Ur(){return(Ur=(0,w.Z)(function*(g){const d=(0,D.m9)(g);yield Pr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function X(){return(X=(0,w.Z)(function*(g,d){const p=yield We(g,{},(0,w.Z)(function*(){const y=(0,D.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:M,apiKey:L}=g.config,Q=Lt(g,M,"/v1/token",`key=${L}`),ce=yield g._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",ye.fetch()(Q,{method:"POST",headers:ce,body:y})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}function $(){return($=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v2/accounts:revokeToken",Ae(g,d))})).apply(this,arguments)}class B{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ee(d.idToken,"internal-error"),Ee(typeof d.idToken<"u","internal-error"),Ee(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Qt(g){const d=Vi(g);return Ee(d,"internal-error"),Ee(typeof d.exp<"u","internal-error"),Ee(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var y=this;return(0,w.Z)(function*(){return Ee(!y.accessToken||y.refreshToken,d,"user-token-expired"),p||!y.accessToken||y.isExpired?y.refreshToken?(yield y.refresh(d,y.refreshToken),y.accessToken):null:y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var y=this;return(0,w.Z)(function*(){const{accessToken:M,refreshToken:L,expiresIn:Q}=yield function Qi(g,d){return X.apply(this,arguments)}(d,p);y.updateTokensAndExpiration(M,L,Number(Q))})()}updateTokensAndExpiration(d,p,y){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(d,p){const{refreshToken:y,accessToken:M,expirationTime:L}=p,Q=new B;return y&&(Ee("string"==typeof y,"internal-error",{appName:d}),Q.refreshToken=y),M&&(Ee("string"==typeof M,"internal-error",{appName:d}),Q.accessToken=M),L&&(Ee("number"==typeof L,"internal-error",{appName:d}),Q.expirationTime=L),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new B,this.toJSON())}_performRefresh(){return Nt("not implemented")}}function H(g,d){Ee("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class ne{constructor(d){var{uid:p,auth:y,stsTokenManager:M}=d,L=(0,se._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=y,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new Ki(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,w.Z)(function*(){const y=yield Kr(p,p.stsTokenManager.getToken(p.auth,d));return Ee(y,p.auth,"internal-error"),p.accessToken!==y&&(p.accessToken=y,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),y})()}getIdTokenResult(d){return function jn(g){return zo.apply(this,arguments)}(this,d)}reload(){return function Vr(g){return Ur.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ee(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const p=new ne(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(d){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var y=this;return(0,w.Z)(function*(){let M=!1;d.idToken&&d.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(d),M=!0),p&&(yield Pr(y)),yield y.auth._persistUserIfCurrent(y),M&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var d=this;return(0,w.Z)(function*(){const p=yield d.getIdToken();return yield Kr(d,function Tr(g,d){return yt.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var y,M,L,Q,ce,Me,at,gt;const ht=null!==(y=p.displayName)&&void 0!==y?y:void 0,Qn=null!==(M=p.email)&&void 0!==M?M:void 0,Ei=null!==(L=p.phoneNumber)&&void 0!==L?L:void 0,lo=null!==(Q=p.photoURL)&&void 0!==Q?Q:void 0,Nd=null!==(ce=p.tenantId)&&void 0!==ce?ce:void 0,Cc=null!==(Me=p._redirectEventId)&&void 0!==Me?Me:void 0,Ds=null!==(at=p.createdAt)&&void 0!==at?at:void 0,Od=null!==(gt=p.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:Uo,emailVerified:Vu,isAnonymous:kd,providerData:ga,stsTokenManager:Ni}=p;Ee(Uo&&Ni,d,"internal-error");const kp=B.fromJSON(this.name,Ni);Ee("string"==typeof Uo,d,"internal-error"),H(ht,d.name),H(Qn,d.name),Ee("boolean"==typeof Vu,d,"internal-error"),Ee("boolean"==typeof kd,d,"internal-error"),H(Ei,d.name),H(lo,d.name),H(Nd,d.name),H(Cc,d.name),H(Ds,d.name),H(Od,d.name);const yl=new ne({uid:Uo,auth:d,email:Qn,emailVerified:Vu,displayName:ht,isAnonymous:kd,photoURL:lo,phoneNumber:Ei,tenantId:Nd,stsTokenManager:kp,createdAt:Ds,lastLoginAt:Od});return ga&&Array.isArray(ga)&&(yl.providerData=ga.map(vl=>Object.assign({},vl))),Cc&&(yl._redirectEventId=Cc),yl}static _fromIdTokenResponse(d,p,y=!1){return(0,w.Z)(function*(){const M=new B;M.updateFromServerResponse(p);const L=new ne({uid:p.localId,auth:d,stsTokenManager:M,isAnonymous:y});return yield Pr(L),L})()}}const Ve=new Map;function Fe(g){sn(g instanceof Function,"Expected a class definition");let d=Ve.get(g);return d?(sn(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,Ve.set(g,d),d)}const Xe=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(p,y){var M=this;return(0,w.Z)(function*(){M.storage[p]=y})()}_get(p){var y=this;return(0,w.Z)(function*(){const M=y.storage[p];return void 0===M?null:M})()}_remove(p){var y=this;return(0,w.Z)(function*(){delete y.storage[p]})()}_addListener(p,y){}_removeListener(p,y){}}return g.type="NONE",g})();function Gt(g,d,p){return`firebase:${g}:${d}:${p}`}class Rt{constructor(d,p,y){this.persistence=d,this.auth=p,this.userKey=y;const{config:M,name:L}=this.auth;this.fullUserKey=Gt(this.userKey,M.apiKey,L),this.fullPersistenceKey=Gt("persistence",M.apiKey,L),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,w.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?ne._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,w.Z)(function*(){if(p.persistence===d)return;const y=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,y?p.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,y="authUser"){return(0,w.Z)(function*(){if(!p.length)return new Rt(Fe(Xe),d,y);const M=(yield Promise.all(p.map(function(){var at=(0,w.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return at.apply(this,arguments)}}()))).filter(at=>at);let L=M[0]||Fe(Xe);const Q=Gt(y,d.config.apiKey,d.name);let ce=null;for(const at of p)try{const gt=yield at._get(Q);if(gt){const ht=ne._fromJSON(d,gt);at!==L&&(ce=ht),L=at;break}}catch{}const Me=M.filter(at=>at._shouldAllowMigration);return L._shouldAllowMigration&&Me.length?(L=Me[0],ce&&(yield L._set(Q,ce.toJSON())),yield Promise.all(p.map(function(){var at=(0,w.Z)(function*(gt){if(gt!==L)try{yield gt._remove(Q)}catch{}});return function(gt){return at.apply(this,arguments)}}())),new Rt(L,d,y)):new Rt(L,d,y)})()}}function pn(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ve(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Dn(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(ke(d))return"Blackberry";if(ut(d))return"Webos";if(Yi(d))return"Safari";if((d.includes("chrome/")||Ca(d))&&!d.includes("edge/"))return"Chrome";if(le(d))return"Android";{const y=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function Dn(g=(0,D.z$)()){return/firefox\//i.test(g)}function Yi(g=(0,D.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Ca(g=(0,D.z$)()){return/crios\//i.test(g)}function ve(g=(0,D.z$)()){return/iemobile/i.test(g)}function le(g=(0,D.z$)()){return/android/i.test(g)}function ke(g=(0,D.z$)()){return/blackberry/i.test(g)}function ut(g=(0,D.z$)()){return/webos/i.test(g)}function tt(g=(0,D.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function qn(g=(0,D.z$)()){return tt(g)||le(g)||ut(g)||ke(g)||/windows phone/i.test(g)||ve(g)}function Ui(g,d=[]){let p;switch(g){case"Browser":p=pn((0,D.z$)());break;case"Worker":p=`${pn((0,D.z$)())}-${g}`;break;default:p=g}const y=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${y}`}class po{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const y=L=>new Promise((Q,ce)=>{try{Q(d(L))}catch(Me){ce(Me)}});y.onAbort=p,this.queue.push(y);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,w.Z)(function*(){if(p.auth.currentUser===d)return;const y=[];try{for(const M of p.queue)yield M(d),M.onAbort&&y.push(M.onAbort)}catch(M){y.reverse();for(const L of y)try{L()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function hs(){return(hs=(0,w.Z)(function*(g,d={}){return Pe(g,"GET","/v2/passwordPolicy",Ae(g,d))})).apply(this,arguments)}class Gs{constructor(d){var p,y,M,L;const Q=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=Q.minPasswordLength)&&void 0!==p?p:6,Q.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Q.maxPasswordLength),void 0!==Q.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Q.containsLowercaseCharacter),void 0!==Q.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Q.containsUppercaseCharacter),void 0!==Q.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Q.containsNumericCharacter),void 0!==Q.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Q.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(y=d.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(L=d.forceUpgradeOnSignin)&&void 0!==L&&L,this.schemaVersion=d.schemaVersion}validatePassword(d){var p,y,M,L,Q,ce;const Me={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,Me),this.validatePasswordCharacterOptions(d,Me),Me.isValid&&(Me.isValid=null===(p=Me.meetsMinPasswordLength)||void 0===p||p),Me.isValid&&(Me.isValid=null===(y=Me.meetsMaxPasswordLength)||void 0===y||y),Me.isValid&&(Me.isValid=null===(M=Me.containsLowercaseLetter)||void 0===M||M),Me.isValid&&(Me.isValid=null===(L=Me.containsUppercaseLetter)||void 0===L||L),Me.isValid&&(Me.isValid=null===(Q=Me.containsNumericCharacter)||void 0===Q||Q),Me.isValid&&(Me.isValid=null===(ce=Me.containsNonAlphanumericCharacter)||void 0===ce||ce),Me}validatePasswordLengthOptions(d,p){const y=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;y&&(p.meetsMinPasswordLength=d.length>=y),M&&(p.meetsMaxPasswordLength=d.length<=M)}validatePasswordCharacterOptions(d,p){let y;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let M=0;M<d.length;M++)y=d.charAt(M),this.updatePasswordCharacterOptionsStatuses(p,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(d,p,y,M,L){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=L))}}class Ai{constructor(d,p,y,M){this.app=d,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=y,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new go(this),this.idTokenSubscription=new go(this),this.beforeStateQueue=new po(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(d,p){var y=this;return p&&(this._popupRedirectResolver=Fe(p)),this._initializationPromise=this.queue((0,w.Z)(function*(){var M,L;if(!y._deleted&&(y.persistenceManager=yield Rt.create(y,d),!y._deleted)){if(null!==(M=y._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(p),y.lastNotifiedUid=(null===(L=y.currentUser)||void 0===L?void 0:L.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,w.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,w.Z)(function*(){var y;const M=yield p.assertedPersistence.getCurrentUser();let L=M,Q=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ce=null===(y=p.redirectUser)||void 0===y?void 0:y._redirectEventId,Me=L?._redirectEventId,at=yield p.tryRedirectSignIn(d);(!ce||ce===Me)&&at?.user&&(L=at.user,Q=!0)}if(!L)return p.directlySetCurrentUser(null);if(!L._redirectEventId){if(Q)try{yield p.beforeStateQueue.runMiddleware(L)}catch(ce){L=M,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ce))}return L?p.reloadAndSetCurrentUserOrClear(L):p.directlySetCurrentUser(null)}return Ee(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===L._redirectEventId?p.directlySetCurrentUser(L):p.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(d){var p=this;return(0,w.Z)(function*(){let y=null;try{y=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,w.Z)(function*(){try{yield Pr(d)}catch(y){if("auth/network-request-failed"!==y?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Zi(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,w.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,w.Z)(function*(){const y=d?(0,D.m9)(d):null;return y&&Ee(y.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(y&&y._clone(p))})()}_updateCurrentUser(d,p=!1){var y=this;return(0,w.Z)(function*(){if(!y._deleted)return d&&Ee(y.tenantId===d.tenantId,y,"tenant-id-mismatch"),p||(yield y.beforeStateQueue.runMiddleware(d)),y.queue((0,w.Z)(function*(){yield y.directlySetCurrentUser(d),y.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,w.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,w.Z)(function*(){yield p.assertedPersistence.setPersistence(Fe(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var p=this;return(0,w.Z)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const y=p._getPasswordPolicyInternal();return y.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,w.Z)(function*(){const p=yield function Go(g){return hs.apply(this,arguments)}(d),y=new Gs(p);null===d.tenantId?d._projectPasswordPolicy=y:d._tenantPasswordPolicies[d.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new D.LL("auth","Firebase",d())}onAuthStateChanged(d,p,y){return this.registerStateListener(this.authStateSubscription,d,p,y)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,y){return this.registerStateListener(this.idTokenSubscription,d,p,y)}authStateReady(){return new Promise((d,p)=>{if(this.currentUser)d();else{const y=this.onAuthStateChanged(()=>{y(),d()},p)}})}revokeAccessToken(d){var p=this;return(0,w.Z)(function*(){if(p.currentUser){const y=yield p.currentUser.getIdToken(),M={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:y};null!=p.tenantId&&(M.tenantId=p.tenantId),yield function j(g,d){return $.apply(this,arguments)}(p,M)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var y=this;return(0,w.Z)(function*(){const M=yield y.getOrInitRedirectPersistenceManager(p);return null===d?M.removeCurrentUser():M.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,w.Z)(function*(){if(!p.redirectPersistenceManager){const y=d&&Fe(d)||p._popupRedirectResolver;Ee(y,p,"argument-error"),p.redirectPersistenceManager=yield Rt.create(p,[Fe(y._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,w.Z)(function*(){var y,M;return p._isInitialized&&(yield p.queue((0,w.Z)(function*(){}))),(null===(y=p._currentUser)||void 0===y?void 0:y._redirectEventId)===d?p._currentUser:(null===(M=p.redirectUser)||void 0===M?void 0:M._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,w.Z)(function*(){if(d===p.currentUser)return p.queue((0,w.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,y,M){if(this._deleted)return()=>{};const L="function"==typeof p?p:p.next.bind(p);let Q=!1;const ce=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(ce,this,"internal-error"),ce.then(()=>{Q||L(this.currentUser)}),"function"==typeof p){const Me=d.addObserver(p,y,M);return()=>{Q=!0,Me()}}{const Me=d.addObserver(p);return()=>{Q=!0,Me()}}}directlySetCurrentUser(d){var p=this;return(0,w.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Ui(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,w.Z)(function*(){var p;const y={"X-Client-Version":d.clientVersion};d.app.options.appId&&(y["X-Firebase-gmpid"]=d.app.options.appId);const M=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();M&&(y["X-Firebase-Client"]=M);const L=yield d._getAppCheckToken();return L&&(y["X-Firebase-AppCheck"]=L),y})()}_getAppCheckToken(){var d=this;return(0,w.Z)(function*(){var p;const y=yield null===(p=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return y?.error&&function fn(g,...d){qt.logLevel<=fe.in.WARN&&qt.warn(`Auth (${oe.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function an(g){return(0,D.m9)(g)}class go{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,D.ne)(p=>this.observer=p)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qo(g){return new Promise((d,p)=>{const y=document.createElement("script");y.setAttribute("src",g),y.onload=d,y.onerror=M=>{const L=pe("internal-error");L.customData=M,p(L)},y.type="text/javascript",y.charset="UTF-8",function mo(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(y)})}function Se(g){return`__${g}${Math.floor(1e6*Math.random())}`}class hu{constructor(d){this.type="recaptcha-enterprise",this.auth=an(d)}verify(d="verify",p=!1){var y=this;return(0,w.Z)(function*(){function L(){return L=(0,w.Z)(function*(ce){if(!p){if(null==ce.tenantId&&null!=ce._agentRecaptchaConfig)return ce._agentRecaptchaConfig.siteKey;if(null!=ce.tenantId&&void 0!==ce._tenantRecaptchaConfigs[ce.tenantId])return ce._tenantRecaptchaConfigs[ce.tenantId].siteKey}return new Promise(function(){var Me=(0,w.Z)(function*(at,gt){Ti(ce,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ht=>{if(void 0!==ht.recaptchaKey){const Qn=new qr(ht);return null==ce.tenantId?ce._agentRecaptchaConfig=Qn:ce._tenantRecaptchaConfigs[ce.tenantId]=Qn,at(Qn.siteKey)}gt(new Error("recaptcha Enterprise site key undefined"))}).catch(ht=>{gt(ht)})});return function(at,gt){return Me.apply(this,arguments)}}())}),L.apply(this,arguments)}function Q(ce,Me,at){const gt=window.grecaptcha;rr(gt)?gt.enterprise.ready(()=>{gt.enterprise.execute(ce,{action:d}).then(ht=>{Me(ht)}).catch(()=>{Me("NO_RECAPTCHA")})}):at(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ce,Me)=>{(function M(ce){return L.apply(this,arguments)})(y.auth).then(at=>{if(!p&&rr(window.grecaptcha))Q(at,ce,Me);else{if(typeof window>"u")return void Me(new Error("RecaptchaVerifier is only supported in browser"));qo("https://www.google.com/recaptcha/enterprise.js?render="+at).then(()=>{Q(at,ce,Me)}).catch(gt=>{Me(gt)})}}).catch(at=>{Me(at)})})})()}}function oi(g,d,p){return st.apply(this,arguments)}function st(){return(st=(0,w.Z)(function*(g,d,p,y=!1){const M=new hu(g);let L;try{L=yield M.verify(p)}catch{L=yield M.verify(p,!0)}const Q=Object.assign({},d);return Object.assign(Q,y?{captchaResp:L}:{captchaResponse:L}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}function fs(g,d,p,y){return Ut.apply(this,arguments)}function Ut(){return Ut=(0,w.Z)(function*(g,d,p,y){var M;if(null!==(M=g._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const L=yield oi(g,d,p,"getOobCode"===p);return y(g,L)}return y(g,d).catch(function(){var L=(0,w.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ce=yield oi(g,d,p,"getOobCode"===p);return y(g,ce)}return Promise.reject(Q)});return function(Q){return L.apply(this,arguments)}}())}),Ut.apply(this,arguments)}function yo(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Mr(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class Xn{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Nt("not implemented")}_getIdTokenResponse(d){return Nt("not implemented")}_linkToIdToken(d,p){return Nt("not implemented")}_getReauthenticationResolver(d){return Nt("not implemented")}}function Ji(g,d){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:resetPassword",Ae(g,d))})).apply(this,arguments)}function nn(){return(nn=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Dr(g,d){return _n.apply(this,arguments)}function _n(){return(_n=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function _r(){return(_r=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",Ae(g,d))})).apply(this,arguments)}function Io(g,d){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,w.Z)(function*(g,d){return It(g,"POST","/v1/accounts:signInWithPassword",Ae(g,d))})).apply(this,arguments)}function ps(g,d){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:sendOobCode",Ae(g,d))})).apply(this,arguments)}function In(){return(In=(0,w.Z)(function*(g,d){return ps(g,d)})).apply(this,arguments)}function ot(g,d){return At.apply(this,arguments)}function At(){return(At=(0,w.Z)(function*(g,d){return ps(g,d)})).apply(this,arguments)}function Tn(g,d){return jr.apply(this,arguments)}function jr(){return(jr=(0,w.Z)(function*(g,d){return ps(g,d)})).apply(this,arguments)}function yr(){return(yr=(0,w.Z)(function*(g,d){return ps(g,d)})).apply(this,arguments)}function Un(){return(Un=(0,w.Z)(function*(g,d){return It(g,"POST","/v1/accounts:signInWithEmailLink",Ae(g,d))})).apply(this,arguments)}function mi(){return(mi=(0,w.Z)(function*(g,d){return It(g,"POST","/v1/accounts:signInWithEmailLink",Ae(g,d))})).apply(this,arguments)}class Pt extends Xn{constructor(d,p,y,M=null){super("password",y),this._email=d,this._password=p,this._tenantId=M}static _fromEmailAndPassword(d,p){return new Pt(d,p,"password")}static _fromEmailAndCode(d,p,y=null){return new Pt(d,p,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,w.Z)(function*(){switch(p.signInMethod){case"password":return fs(d,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Io);case"emailLink":return function Si(g,d){return Un.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:Ne(d,"internal-error")}})()}_linkToIdToken(d,p){var y=this;return(0,w.Z)(function*(){switch(y.signInMethod){case"password":return fs(d,{idToken:p,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dr);case"emailLink":return function Bi(g,d){return mi.apply(this,arguments)}(d,{idToken:p,email:y._email,oobCode:y._password});default:Ne(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Yr(g,d){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,w.Z)(function*(g,d){return It(g,"POST","/v1/accounts:signInWithIdp",Ae(g,d))})).apply(this,arguments)}class ln extends Xn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new ln(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):Ne("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:M}=p,L=(0,se._T)(p,["providerId","signInMethod"]);if(!y||!M)return null;const Q=new ln(y,M);return Q.idToken=L.idToken||void 0,Q.accessToken=L.accessToken||void 0,Q.secret=L.secret,Q.nonce=L.nonce,Q.pendingToken=L.pendingToken||null,Q}_getIdTokenResponse(d){return Yr(d,this.buildRequest())}_linkToIdToken(d,p){const y=this.buildRequest();return y.idToken=p,Yr(d,y)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Yr(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,D.xO)(p)}return d}}function qs(){return(qs=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:sendVerificationCode",Ae(g,d))})).apply(this,arguments)}function Xi(){return(Xi=(0,w.Z)(function*(g,d){return It(g,"POST","/v1/accounts:signInWithPhoneNumber",Ae(g,d))})).apply(this,arguments)}function ai(){return(ai=(0,w.Z)(function*(g,d){const p=yield It(g,"POST","/v1/accounts:signInWithPhoneNumber",Ae(g,d));if(p.temporaryProof)throw Gn(g,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const es={USER_NOT_FOUND:"user-not-found"};function _i(){return(_i=(0,w.Z)(function*(g,d){return It(g,"POST","/v1/accounts:signInWithPhoneNumber",Ae(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),es)})).apply(this,arguments)}class jt extends Xn{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new jt({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new jt({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function $r(g,d){return Xi.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function tc(g,d){return ai.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function ba(g,d){return _i.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:y,verificationCode:M}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:y,code:M}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:y,phoneNumber:M,temporaryProof:L}=d;return y||p||M||L?new jt({verificationId:p,verificationCode:y,phoneNumber:M,temporaryProof:L}):null}}class ms{constructor(d){var p,y,M,L,Q,ce;const Me=(0,D.zd)((0,D.pd)(d)),at=null!==(p=Me.apiKey)&&void 0!==p?p:null,gt=null!==(y=Me.oobCode)&&void 0!==y?y:null,ht=function gu(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Me.mode)&&void 0!==M?M:null);Ee(at&&gt&&ht,"argument-error"),this.apiKey=at,this.operation=ht,this.code=gt,this.continueUrl=null!==(L=Me.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(Q=Me.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(ce=Me.tenantId)&&void 0!==ce?ce:null}static parseLink(d){const p=function To(g){const d=(0,D.zd)((0,D.pd)(g)).link,p=d?(0,D.zd)((0,D.pd)(d)).deep_link_id:null,y=(0,D.zd)((0,D.pd)(g)).deep_link_id;return(y?(0,D.zd)((0,D.pd)(y)).link:null)||y||p||d||g}(d);try{return new ms(p)}catch{return null}}}let Zs=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(p,y){return Pt._fromEmailAndPassword(p,y)}static credentialWithLink(p,y){const M=ms.parseLink(y);return Ee(M,"argument-error"),Pt._fromEmailAndCode(p,M.code,M.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class bi{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class ts extends bi{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class ir extends ts{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return Ee("providerId"in p&&"signInMethod"in p,"argument-error"),ln._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ee(d.idToken||d.accessToken,"argument-error"),ln._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return ir.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return ir.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:y,oauthTokenSecret:M,pendingToken:L,nonce:Q,providerId:ce}=d;if(!y&&!M&&!p&&!L||!ce)return null;try{return new ir(ce)._credential({idToken:p,accessToken:y,nonce:Q,pendingToken:L})}catch{return null}}}let Jc=(()=>{class g extends ts{constructor(){super("facebook.com")}static credential(p){return ln._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return g.credential(p.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Jr=(()=>{class g extends ts{constructor(){super("google.com"),this.addScope("profile")}static credential(p,y){return ln._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:y})}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:y,oauthAccessToken:M}=p;if(!y&&!M)return null;try{return g.credential(y,M)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),ci=(()=>{class g extends ts{constructor(){super("github.com")}static credential(p){return ln._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return g.credential(p.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class li extends Xn{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return Yr(d,this.buildRequest())}_linkToIdToken(d,p){const y=this.buildRequest();return y.idToken=p,Yr(d,y)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Yr(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:y,signInMethod:M,pendingToken:L}=p;return y&&M&&L&&y===M?new li(y,L):null}static _create(d,p){return new li(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kt extends bi{constructor(d){Ee(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Kt.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Kt.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=li.fromJSON(d);return Ee(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:y}=d;if(!p||!y)return null;try{return li._create(y,p)}catch{return null}}}let hr=(()=>{class g extends ts{constructor(){super("twitter.com")}static credential(p,y){return ln._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:y})}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:y,oauthTokenSecret:M}=p;if(!y||!M)return null;try{return g.credential(y,M)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function _s(g,d){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,w.Z)(function*(g,d){return It(g,"POST","/v1/accounts:signUp",Ae(g,d))})).apply(this,arguments)}class ns{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,y,M=!1){return(0,w.Z)(function*(){const L=yield ne._fromIdTokenResponse(d,y,M),Q=Xc(y);return new ns({user:L,providerId:Q,_tokenResponse:y,operationType:p})})()}static _forOperation(d,p,y){return(0,w.Z)(function*(){yield d._updateTokensIfNecessary(y,!0);const M=Xc(y);return new ns({user:d,providerId:M,_tokenResponse:y,operationType:p})})()}}function Xc(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Do(){return(Do=(0,w.Z)(function*(g){var d;const p=an(g);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new ns({user:p.currentUser,providerId:null,operationType:"signIn"});const y=yield _s(p,{returnSecureToken:!0}),M=yield ns._fromIdTokenResponse(p,"signIn",y,!0);return yield p._updateCurrentUser(M.user),M})).apply(this,arguments)}class mu extends D.ZR{constructor(d,p,y,M){var L;super(p.code,p.message),this.operationType=y,this.user=M,Object.setPrototypeOf(this,mu.prototype),this.customData={appName:d.name,tenantId:null!==(L=d.tenantId)&&void 0!==L?L:void 0,_serverResponse:p.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(d,p,y,M){return new mu(d,p,y,M)}}function rd(g,d,p,y){return("reauthenticate"===d?p._getReauthenticationResolver(g):p._getIdTokenResponse(g)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?mu._fromErrorAndOperation(g,L,d,y):L})}function Ko(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function Qo(){return Qo=(0,w.Z)(function*(g,d){const p=(0,D.m9)(g);yield Co(!0,p,d);const{providerUserInfo:y}=yield function Bt(g,d){return Vt.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),M=Ko(y||[]);return p.providerData=p.providerData.filter(L=>M.has(L.providerId)),M.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Qo.apply(this,arguments)}function _u(g,d){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,w.Z)(function*(g,d,p=!1){const y=yield Kr(g,d._linkToIdToken(g.auth,yield g.getIdToken()),p);return ns._forOperation(g,"link",y)})).apply(this,arguments)}function Co(g,d,p){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,w.Z)(function*(g,d,p){yield Pr(d);const M=!1===g?"provider-already-linked":"no-such-provider";Ee(Ko(d.providerData).has(p)===g,d.auth,M)})).apply(this,arguments)}function rc(g,d){return yu.apply(this,arguments)}function yu(){return(yu=(0,w.Z)(function*(g,d,p=!1){const{auth:y}=g,M="reauthenticate";try{const L=yield Kr(g,rd(y,M,d,g),p);Ee(L.idToken,y,"internal-error");const Q=Vi(L.idToken);Ee(Q,y,"internal-error");const{sub:ce}=Q;return Ee(g.uid===ce,y,"user-mismatch"),ns._forOperation(g,M,L)}catch(L){throw"auth/user-not-found"===L?.code&&Ne(y,"user-mismatch"),L}})).apply(this,arguments)}function Ma(g,d){return vu.apply(this,arguments)}function vu(){return(vu=(0,w.Z)(function*(g,d,p=!1){const y="signIn",M=yield rd(g,y,d),L=yield ns._fromIdTokenResponse(g,y,M);return p||(yield g._updateCurrentUser(L.user)),L})).apply(this,arguments)}function So(g,d){return el.apply(this,arguments)}function el(){return(el=(0,w.Z)(function*(g,d){return Ma(an(g),d)})).apply(this,arguments)}function Eu(g,d){return ji.apply(this,arguments)}function ji(){return(ji=(0,w.Z)(function*(g,d){const p=(0,D.m9)(g);return yield Co(!1,p,d.providerId),_u(p,d)})).apply(this,arguments)}function ys(g,d){return vs.apply(this,arguments)}function vs(){return(vs=(0,w.Z)(function*(g,d){return rc((0,D.m9)(g),d)})).apply(this,arguments)}function Ns(){return(Ns=(0,w.Z)(function*(g,d){return It(g,"POST","/v1/accounts:signInWithCustomToken",Ae(g,d))})).apply(this,arguments)}function xa(){return xa=(0,w.Z)(function*(g,d){const p=an(g),y=yield function Qs(g,d){return Ns.apply(this,arguments)}(p,{token:d,returnSecureToken:!0}),M=yield ns._fromIdTokenResponse(p,"signIn",y);return yield p._updateCurrentUser(M.user),M}),xa.apply(this,arguments)}class Ri{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?ic._fromServerResponse(d,p):"totpInfo"in p?Yo._fromServerResponse(d,p):Ne(d,"internal-error")}}class ic extends Ri{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new ic(p)}}class Yo extends Ri{constructor(d){super("totp",d)}static _fromServerResponse(d,p){return new Yo(p)}}function di(g,d,p){var y;Ee((null===(y=p.url)||void 0===y?void 0:y.length)>0,g,"invalid-continue-uri"),Ee(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Ee(p.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(Ee(p.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function $i(g){return ar.apply(this,arguments)}function ar(){return(ar=(0,w.Z)(function*(g){const d=an(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function bo(){return(bo=(0,w.Z)(function*(g,d,p){const y=an(g),M={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};p&&di(y,M,p),yield fs(y,M,"getOobCode",ot)})).apply(this,arguments)}function Pi(){return Pi=(0,w.Z)(function*(g,d,p){yield Ji((0,D.m9)(g),{oobCode:d,newPassword:p}).catch(function(){var y=(0,w.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&$i(g),M});return function(M){return y.apply(this,arguments)}}())}),Pi.apply(this,arguments)}function Na(){return Na=(0,w.Z)(function*(g,d){yield function Eo(g,d){return _r.apply(this,arguments)}((0,D.m9)(g),{oobCode:d})}),Na.apply(this,arguments)}function sc(g,d){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,w.Z)(function*(g,d){const p=(0,D.m9)(g),y=yield Ji(p,{oobCode:d}),M=y.requestType;switch(Ee(M,p,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ee(y.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ee(y.mfaInfo,p,"internal-error");default:Ee(y.email,p,"internal-error")}let L=null;return y.mfaInfo&&(L=Ri._fromServerResponse(an(p),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:L},operation:M}})).apply(this,arguments)}function ea(){return(ea=(0,w.Z)(function*(g,d){const{data:p}=yield sc((0,D.m9)(g),d);return p.email})).apply(this,arguments)}function ta(){return(ta=(0,w.Z)(function*(g,d,p){const y=an(g),Q=yield fs(y,{returnSecureToken:!0,email:d,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_s).catch(Me=>{throw"auth/password-does-not-meet-requirements"===Me.code&&$i(g),Me}),ce=yield ns._fromIdTokenResponse(y,"signIn",Q);return yield y._updateCurrentUser(ce.user),ce})).apply(this,arguments)}function Tu(){return(Tu=(0,w.Z)(function*(g,d,p){const y=an(g),M={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function L(Q,ce){Ee(ce.handleCodeInApp,y,"argument-error"),ce&&di(y,Q,ce)})(M,p),yield fs(y,M,"getOobCode",Tn)})).apply(this,arguments)}function ka(){return(ka=(0,w.Z)(function*(g,d,p){const y=(0,D.m9)(g),M=Zs.credentialWithLink(d,p||si());return Ee(M._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),So(y,M)})).apply(this,arguments)}function La(){return(La=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:createAuthUri",Ae(g,d))})).apply(this,arguments)}function Js(){return Js=(0,w.Z)(function*(g,d){const y={identifier:d,continueUri:Fr()?si():"http://localhost"},{signinMethods:M}=yield function Fa(g,d){return La.apply(this,arguments)}((0,D.m9)(g),y);return M||[]}),Js.apply(this,arguments)}function F(){return F=(0,w.Z)(function*(g,d){const p=(0,D.m9)(g),M={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&di(p.auth,M,d);const{email:L}=yield function ec(g,d){return In.apply(this,arguments)}(p.auth,M);L!==g.email&&(yield g.reload())}),F.apply(this,arguments)}function O(){return O=(0,w.Z)(function*(g,d,p){const y=(0,D.m9)(g),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};p&&di(y.auth,L,p);const{email:Q}=yield function gs(g,d){return yr.apply(this,arguments)}(y.auth,L);Q!==g.email&&(yield g.reload())}),O.apply(this,arguments)}function de(){return(de=(0,w.Z)(function*(g,d){return Pe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function mt(){return mt=(0,w.Z)(function*(g,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const y=(0,D.m9)(g),L={idToken:yield y.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},Q=yield Kr(y,function Z(g,d){return de.apply(this,arguments)}(y.auth,L));y.displayName=Q.displayName||null,y.photoURL=Q.photoUrl||null;const ce=y.providerData.find(({providerId:Me})=>"password"===Me);ce&&(ce.displayName=y.displayName,ce.photoURL=y.photoURL),yield y._updateTokensIfNecessary(Q)}),mt.apply(this,arguments)}function dn(g,d,p){return St.apply(this,arguments)}function St(){return St=(0,w.Z)(function*(g,d,p){const{auth:y}=g,L={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(L.email=d),p&&(L.password=p);const Q=yield Kr(g,function pu(g,d){return nn.apply(this,arguments)}(y,L));yield g._updateTokensIfNecessary(Q,!0)}),St.apply(this,arguments)}class $t{constructor(d,p,y={}){this.isNewUser=d,this.providerId=p,this.profile=y}}class Sn extends $t{constructor(d,p,y,M){super(d,p,y),this.username=M}}class er extends $t{constructor(d,p){super(d,"facebook.com",p)}}class Hi extends Sn{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class gn extends $t{constructor(d,p){super(d,"google.com",p)}}class Xr extends Sn{constructor(d,p,y){super(d,"twitter.com",p,y)}}function vr(g){const{user:d,_tokenResponse:p}=g;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Cn(g){var d,p;if(!g)return null;const{providerId:y}=g,M=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},L=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!y&&g?.idToken){const Q=null===(p=null===(d=Vi(g.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(Q)return new $t(L,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!y)return null;switch(y){case"facebook.com":return new er(L,M);case"github.com":return new Hi(L,M);case"google.com":return new gn(L,M);case"twitter.com":return new Xr(L,M,g.screenName||null);case"custom":case"anonymous":return new $t(L,null);default:return new $t(L,y,M)}}(p)}class sr{constructor(d,p,y){this.type=d,this.credential=p,this.user=y}static _fromIdtoken(d,p){return new sr("enroll",d,p)}static _fromMfaPendingCredential(d){return new sr("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,y;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return sr._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(y=d.multiFactorSession)&&void 0!==y&&y.idToken)return sr._fromIdtoken(d.multiFactorSession.idToken)}return null}}class rl{constructor(d,p,y){this.session=d,this.hints=p,this.signInResolver=y}static _fromError(d,p){const y=an(d),M=p.customData._serverResponse,L=(M.mfaInfo||[]).map(ce=>Ri._fromServerResponse(y,ce));Ee(M.mfaPendingCredential,y,"internal-error");const Q=sr._fromMfaPendingCredential(M.mfaPendingCredential);return new rl(Q,L,function(){var ce=(0,w.Z)(function*(Me){const at=yield Me._process(y,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const gt=Object.assign(Object.assign({},M),{idToken:at.idToken,refreshToken:at.refreshToken});switch(p.operationType){case"signIn":const ht=yield ns._fromIdTokenResponse(y,p.operationType,gt);return yield y._updateCurrentUser(ht.user),ht;case"reauthenticate":return Ee(p.user,y,"internal-error"),ns._forOperation(p.user,p.operationType,gt);default:Ne(y,"internal-error")}});return function(Me){return ce.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,w.Z)(function*(){return p.signInResolver(d)})()}}class ac{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(y=>Ri._fromServerResponse(d.auth,y)))})}static _fromUser(d){return new ac(d)}getSession(){var d=this;return(0,w.Z)(function*(){return sr._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,p){var y=this;return(0,w.Z)(function*(){const M=d,L=yield y.getSession(),Q=yield Kr(y.user,M._process(y.user.auth,L,p));return yield y.user._updateTokensIfNecessary(Q),y.user.reload()})()}unenroll(d){var p=this;return(0,w.Z)(function*(){const y="string"==typeof d?d:d.uid,M=yield p.user.getIdToken();try{const L=yield Kr(p.user,function mn(g,d){return Pe(g,"POST","/v2/accounts/mfaEnrollment:withdraw",Ae(g,d))}(p.user.auth,{idToken:M,mfaEnrollmentId:y}));p.enrolledFactors=p.enrolledFactors.filter(({uid:Q})=>Q!==y),yield p.user._updateTokensIfNecessary(L),yield p.user.reload()}catch(L){throw L}})()}}const Va=new WeakMap,uc="__sak";class ia{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const cc=(()=>{class g extends ia{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,y)=>this.onStorageEvent(p,y),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function zr(){const g=(0,D.z$)();return Yi(g)||tt(g)}()&&function Yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=qn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const y of Object.keys(this.listeners)){const M=this.storage.getItem(y),L=this.localCache[y];M!==L&&p(y,L,M)}}onStorageEvent(p,y=!1){if(!p.key)return void this.forAllChangedKeys((ce,Me,at)=>{this.notifyListeners(ce,at)});const M=p.key;if(y?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(M);if(p.newValue!==ce)null!==p.newValue?this.storage.setItem(M,p.newValue):this.storage.removeItem(M);else if(this.localCache[M]===p.newValue&&!y)return}const L=()=>{const ce=this.storage.getItem(M);!y&&this.localCache[M]===ce||this.notifyListeners(M,ce)},Q=this.storage.getItem(M);!function Wn(){return(0,D.w1)()&&10===document.documentMode}()||Q===p.newValue||p.newValue===p.oldValue?L():setTimeout(L,10)}notifyListeners(p,y){this.localCache[p]=y;const M=this.listeners[p];if(M)for(const L of Array.from(M))L(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,y,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:y,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(y)}_removeListener(p,y){this.listeners[p]&&(this.listeners[p].delete(y),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,y){var M=()=>super._set,L=this;return(0,w.Z)(function*(){yield M().call(L,p,y),L.localCache[p]=JSON.stringify(y)})()}_get(p){var y=()=>super._get,M=this;return(0,w.Z)(function*(){const L=yield y().call(M,p);return M.localCache[p]=JSON.stringify(L),L})()}_remove(p){var y=()=>super._remove,M=this;return(0,w.Z)(function*(){yield y().call(M,p),delete M.localCache[p]})()}}return g.type="LOCAL",g})(),$n=(()=>{class g extends ia{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,y){}_removeListener(p,y){}}return g.type="SESSION",g})();let cd=(()=>{class g{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const y=this.receivers.find(L=>L.isListeningto(p));if(y)return y;const M=new g(p);return this.receivers.push(M),M}isListeningto(p){return this.eventTarget===p}handleEvent(p){var y=this;return(0,w.Z)(function*(){const M=p,{eventId:L,eventType:Q,data:ce}=M.data,Me=y.handlersMap[Q];if(!Me?.size)return;M.ports[0].postMessage({status:"ack",eventId:L,eventType:Q});const at=Array.from(Me).map(function(){var ht=(0,w.Z)(function*(Qn){return Qn(M.origin,ce)});return function(Qn){return ht.apply(this,arguments)}}()),gt=yield function yi(g){return Promise.all(g.map(function(){var d=(0,w.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(y){return{fulfilled:!1,reason:y}}});return function(p){return d.apply(this,arguments)}}()))}(at);M.ports[0].postMessage({status:"done",eventId:L,eventType:Q,response:gt})})()}_subscribe(p,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(y)}_unsubscribe(p,y){this.handlersMap[p]&&y&&this.handlersMap[p].delete(y),(!y||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function bn(g="",d=10){let p="";for(let y=0;y<d;y++)p+=Math.floor(10*Math.random());return g+p}class to{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,y=50){var M=this;return(0,w.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let Q,ce;return new Promise((Me,at)=>{const gt=bn("",20);L.port1.start();const ht=setTimeout(()=>{at(new Error("unsupported_event"))},y);ce={messageChannel:L,onMessage(Qn){const Ei=Qn;if(Ei.data.eventId===gt)switch(Ei.data.status){case"ack":clearTimeout(ht),Q=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Me(Ei.data.response);break;default:clearTimeout(ht),clearTimeout(Q),at(new Error("invalid_response"))}}},M.handlers.add(ce),L.port1.addEventListener("message",ce.onMessage),M.target.postMessage({eventType:d,eventId:gt,data:p},[L.port2])}).finally(()=>{ce&&M.removeMessageHandler(ce)})})()}}function Er(){return window}function dd(){return typeof Er().WorkerGlobalScope<"u"&&"function"==typeof Er().importScripts}function Cu(){return(Cu=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ja="firebaseLocalStorageDb",$a="firebaseLocalStorage",hc="fbase_key";class sa{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function oa(g,d){return g.transaction([$a],d?"readwrite":"readonly").objectStore($a)}function Su(){const g=indexedDB.open(ja,1);return new Promise((d,p)=>{g.addEventListener("error",()=>{p(g.error)}),g.addEventListener("upgradeneeded",()=>{const y=g.result;try{y.createObjectStore($a,{keyPath:hc})}catch(M){p(M)}}),g.addEventListener("success",(0,w.Z)(function*(){const y=g.result;y.objectStoreNames.contains($a)?d(y):(y.close(),yield function Ha(){const g=indexedDB.deleteDatabase(ja);return new sa(g).toPromise()}(),d(yield Su()))}))})}function za(g,d,p){return aa.apply(this,arguments)}function aa(){return(aa=(0,w.Z)(function*(g,d,p){const y=oa(g,!0).put({[hc]:d,value:p});return new sa(y).toPromise()})).apply(this,arguments)}function Nr(){return(Nr=(0,w.Z)(function*(g,d){const p=oa(g,!1).get(d),y=yield new sa(p).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function ua(g,d){const p=oa(g,!0).delete(d);return new sa(p).toPromise()}const Ga=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,w.Z)(function*(){return p.db||(p.db=yield Su()),p.db})()}_withRetries(p){var y=this;return(0,w.Z)(function*(){let M=0;for(;;)try{const L=yield y._openDb();return yield p(L)}catch(L){if(M++>3)throw L;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,w.Z)(function*(){return dd()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,w.Z)(function*(){p.receiver=cd._getInstance(function dc(){return dd()?self:null}()),p.receiver._subscribe("keyChanged",function(){var y=(0,w.Z)(function*(M,L){return{keyProcessed:(yield p._poll()).includes(L.key)}});return function(M,L){return y.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var y=(0,w.Z)(function*(M,L){return["keyChanged"]});return function(M,L){return y.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,w.Z)(function*(){var y,M;if(p.activeServiceWorker=yield function Hh(){return Cu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new to(p.activeServiceWorker);const L=yield p.sender._send("ping",{},800);L&&null!==(y=L[0])&&void 0!==y&&y.fulfilled&&null!==(M=L[0])&&void 0!==M&&M.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var y=this;return(0,w.Z)(function*(){if(y.sender&&y.activeServiceWorker&&function lc(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:p},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Su();return yield za(p,uc,"1"),yield ua(p,uc),!0}catch{}return!1})()}_withPendingWrite(p){var y=this;return(0,w.Z)(function*(){y.pendingWrites++;try{yield p()}finally{y.pendingWrites--}})()}_set(p,y){var M=this;return(0,w.Z)(function*(){return M._withPendingWrite((0,w.Z)(function*(){return yield M._withRetries(L=>za(L,p,y)),M.localCache[p]=y,M.notifyServiceWorker(p)}))})()}_get(p){var y=this;return(0,w.Z)(function*(){const M=yield y._withRetries(L=>function hd(g,d){return Nr.apply(this,arguments)}(L,p));return y.localCache[p]=M,M})()}_remove(p){var y=this;return(0,w.Z)(function*(){return y._withPendingWrite((0,w.Z)(function*(){return yield y._withRetries(M=>ua(M,p)),delete y.localCache[p],y.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,w.Z)(function*(){const y=yield p._withRetries(Q=>{const ce=oa(Q,!1).getAll();return new sa(ce).toPromise()});if(!y)return[];if(0!==p.pendingWrites)return[];const M=[],L=new Set;if(0!==y.length)for(const{fbase_key:Q,value:ce}of y)L.add(Q),JSON.stringify(p.localCache[Q])!==JSON.stringify(ce)&&(p.notifyListeners(Q,ce),M.push(Q));for(const Q of Object.keys(p.localCache))p.localCache[Q]&&!L.has(Q)&&(p.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(p,y){this.localCache[p]=y;const M=this.listeners[p];if(M)for(const L of Array.from(M))L(y)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(y)}_removeListener(p,y){this.listeners[p]&&(this.listeners[p].delete(y),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),G=1e12;class z{constructor(d){this.auth=d,this.counter=G,this._widgets=new Map}render(d,p){const y=this.counter;return this._widgets.set(y,new re(d,this.auth.name,p||{})),this.counter++,y}reset(d){var p;const y=d||G;null===(p=this._widgets.get(y))||void 0===p||p.delete(),this._widgets.delete(y)}getResponse(d){var p;return(null===(p=this._widgets.get(d||G))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,w.Z)(function*(){var y;return null===(y=p._widgets.get(d||G))||void 0===y||y.execute(),""})()}}class re{constructor(d,p,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof d?document.getElementById(d):d;Ee(M,"argument-error",{appName:p}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ue(g){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<g;y++)d.push(p.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _t=Se("rcb"),Tt=new gi(3e4,6e4);class tr{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Er().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return Ee(function no(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(p),d,"argument-error"),this.shouldResolveImmediately(p)&&En(Er().grecaptcha)?Promise.resolve(Er().grecaptcha):new Promise((y,M)=>{const L=Er().setTimeout(()=>{M(pe(d,"network-request-failed"))},Tt.get());Er()[_t]=()=>{Er().clearTimeout(L),delete Er()[_t];const ce=Er().grecaptcha;if(!ce||!En(ce))return void M(pe(d,"internal-error"));const Me=ce.render;ce.render=(at,gt)=>{const ht=Me(at,gt);return this.counter++,ht},this.hostLanguage=p,y(ce)},qo(`https://www.google.com/recaptcha/api.js??${(0,D.xO)({onload:_t,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(L),M(pe(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=Er().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ls{load(d){return(0,w.Z)(function*(){return new z(d)})()}clearedOneInstance(){}}const Es="recaptcha",fd={theme:"light",type:"image"};class hi{constructor(d,p,y=Object.assign({},fd)){this.parameters=y,this.type=Es,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(d),this.isInvisible="invisible"===this.parameters.size,Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;Ee(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ls:new tr,this.validateStartingState()}verify(){var d=this;return(0,w.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),y=d.getAssertedRecaptcha();return y.getResponse(p)||new Promise(L=>{const Q=ce=>{ce&&(d.tokenChangeListeners.delete(Q),L(ce))};d.tokenChangeListeners.add(Q),d.isInvisible&&y.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ee(!this.parameters.sitekey,this.auth,"argument-error"),Ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(y=>y(p)),"function"==typeof d)d(p);else if("string"==typeof d){const y=Er()[d];"function"==typeof y&&y(p)}}}assertNotDestroyed(){Ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,w.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const y=document.createElement("div");p.appendChild(y),p=y}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,w.Z)(function*(){Ee(Fr()&&!dd(),d.auth,"internal-error"),yield function _p(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function ls(g){return Zr.apply(this,arguments)}(d.auth);Ee(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return Ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fn{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=jt._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function pd(){return(pd=(0,w.Z)(function*(g,d,p){const y=an(g),M=yield Ro(y,d,(0,D.m9)(p));return new Fn(M,L=>So(y,L))})).apply(this,arguments)}function pc(){return(pc=(0,w.Z)(function*(g,d,p){const y=(0,D.m9)(g);yield Co(!1,y,"phone");const M=yield Ro(y.auth,d,(0,D.m9)(p));return new Fn(M,L=>Eu(y,L))})).apply(this,arguments)}function Wa(){return(Wa=(0,w.Z)(function*(g,d,p){const y=(0,D.m9)(g),M=yield Ro(y.auth,d,(0,D.m9)(p));return new Fn(M,L=>ys(y,L))})).apply(this,arguments)}function Ro(g,d,p){return gc.apply(this,arguments)}function gc(){return gc=(0,w.Z)(function*(g,d,p){var y;const M=yield p.verify();try{let L;if(Ee("string"==typeof M,g,"argument-error"),Ee(p.type===Es,g,"argument-error"),L="string"==typeof d?{phoneNumber:d}:d,"session"in L){const Q=L.session;if("phoneNumber"in L)return Ee("enroll"===Q.type,g,"internal-error"),(yield function $h(g,d){return Pe(g,"POST","/v2/accounts/mfaEnrollment:start",Ae(g,d))}(g,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Ee("signin"===Q.type,g,"internal-error");const ce=(null===(y=L.multiFactorHint)||void 0===y?void 0:y.uid)||L.multiFactorUid;return Ee(ce,g,"missing-multi-factor-info"),(yield function E(g,d){return Pe(g,"POST","/v2/accounts/mfaSignIn:start",Ae(g,d))}(g,{mfaPendingCredential:Q.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function wo(g,d){return qs.apply(this,arguments)}(g,{phoneNumber:L.phoneNumber,recaptchaToken:M});return Q}}finally{p._reset()}}),gc.apply(this,arguments)}function Is(){return(Is=(0,w.Z)(function*(g,d){yield _u((0,D.m9)(g),d)})).apply(this,arguments)}let Ar=(()=>{class g{constructor(p){this.providerId=g.PROVIDER_ID,this.auth=an(p)}verifyPhoneNumber(p,y){return Ro(this.auth,p,(0,D.m9)(y))}static credential(p,y){return jt._fromVerification(p,y)}static credentialFromResult(p){return g.credentialFromTaggedObject(p)}static credentialFromError(p){return g.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:y,temporaryProof:M}=p;return y&&M?jt._fromTokenResponse(y,M):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function ro(g,d){return d?Fe(d):(Ee(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class mc extends Xn{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Yr(d,this._buildIdpRequest())}_linkToIdToken(d,p){return Yr(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return Yr(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function rs(g){return Ma(g.auth,new mc(g),g.bypassAuthState)}function gd(g){const{auth:d,user:p}=g;return Ee(p,d,"internal-error"),rc(p,new mc(g),g.bypassAuthState)}function sl(g){return Po.apply(this,arguments)}function Po(){return(Po=(0,w.Z)(function*(g){const{auth:d,user:p}=g;return Ee(p,d,"internal-error"),_u(p,new mc(g),g.bypassAuthState)})).apply(this,arguments)}class zh{constructor(d,p,y,M,L=!1){this.auth=d,this.resolver=y,this.user=M,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,w.Z)(function*(y,M){d.pendingPromise={resolve:y,reject:M};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(L){d.reject(L)}});return function(y,M){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,w.Z)(function*(){const{urlResponse:y,sessionId:M,postBody:L,tenantId:Q,error:ce,type:Me}=d;if(ce)return void p.reject(ce);const at={auth:p.auth,requestUri:y,sessionId:M,tenantId:Q||void 0,postBody:L||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Me)(at))}catch(gt){p.reject(gt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return rs;case"linkViaPopup":case"linkViaRedirect":return sl;case"reauthViaPopup":case"reauthViaRedirect":return gd;default:Ne(this.auth,"internal-error")}}resolve(d){sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const md=new gi(2e3,1e4);function Gh(){return(Gh=(0,w.Z)(function*(g,d,p){const y=an(g);Je(g,d,bi);const M=ro(y,p);return new Wh(y,"signInViaPopup",d,M).executeNotNull()})).apply(this,arguments)}function al(){return(al=(0,w.Z)(function*(g,d,p){const y=(0,D.m9)(g);Je(y.auth,d,bi);const M=ro(y.auth,p);return new Wh(y.auth,"reauthViaPopup",d,M,y).executeNotNull()})).apply(this,arguments)}function Ru(){return(Ru=(0,w.Z)(function*(g,d,p){const y=(0,D.m9)(g);Je(y.auth,d,bi);const M=ro(y.auth,p);return new Wh(y.auth,"linkViaPopup",d,M,y).executeNotNull()})).apply(this,arguments)}let Wh=(()=>{class g extends zh{constructor(p,y,M,L,Q){super(p,y,L,Q),this.provider=M,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var p=this;return(0,w.Z)(function*(){const y=yield p.execute();return Ee(y,p.auth,"internal-error"),y})()}onExecution(){var p=this;return(0,w.Z)(function*(){sn(1===p.filter.length,"Popup operations only handle one event");const y=bn();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],y),p.authWindow.associatedEvent=y,p.resolver._originValidation(p.auth).catch(M=>{p.reject(M)}),p.resolver._isIframeWebStorageSupported(p.auth,M=>{M||p.reject(pe(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const p=()=>{var y,M;this.pollId=null!==(M=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,md.get())};p()}}return g.currentPopupAction=null,g})();const _d="pendingRedirect",Mi=new Map;class vp extends zh{constructor(d,p,y=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,y),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,w.Z)(function*(){let y=Mi.get(p.auth._key());if(!y){try{const L=(yield function ei(g,d){return la.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;y=()=>Promise.resolve(L)}catch(M){y=()=>Promise.reject(M)}Mi.set(p.auth._key(),y)}return p.bypassAuthState||Mi.set(p.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,y=this;return(0,w.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(y,d);if("unknown"!==d.type){if(d.eventId){const M=yield y.auth._redirectUserForId(d.eventId);if(M)return y.user=M,p().call(y,d);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function la(){return(la=(0,w.Z)(function*(g,d){const p=vi(d),y=Ir(g);if(!(yield y._isAvailable()))return!1;const M="true"===(yield y._get(p));return yield y._remove(p),M})).apply(this,arguments)}function is(g,d){return qa.apply(this,arguments)}function qa(){return(qa=(0,w.Z)(function*(g,d){return Ir(g)._set(vi(d),"true")})).apply(this,arguments)}function ze(g,d){Mi.set(g._key(),d)}function Ir(g){return Fe(g._redirectPersistence)}function vi(g){return Gt(_d,g.config.apiKey,g.name)}function qh(g,d,p){return function pt(g,d,p){return vt.apply(this,arguments)}(g,d,p)}function vt(){return(vt=(0,w.Z)(function*(g,d,p){const y=an(g);Je(g,d,bi),yield y._initializationPromise;const M=ro(y,p);return yield is(M,y),M._openRedirect(y,d,"signInViaRedirect")})).apply(this,arguments)}function _c(g,d,p){return function et(g,d,p){return me.apply(this,arguments)}(g,d,p)}function me(){return(me=(0,w.Z)(function*(g,d,p){const y=(0,D.m9)(g);Je(y.auth,d,bi),yield y.auth._initializationPromise;const M=ro(y.auth,p);yield is(M,y.auth);const L=yield wm(y);return M._openRedirect(y.auth,d,"reauthViaRedirect",L)})).apply(this,arguments)}function Be(g,d,p){return function Or(g,d,p){return da.apply(this,arguments)}(g,d,p)}function da(){return(da=(0,w.Z)(function*(g,d,p){const y=(0,D.m9)(g);Je(y.auth,d,bi),yield y.auth._initializationPromise;const M=ro(y.auth,p);yield Co(!1,y,d.providerId),yield is(M,y.auth);const L=yield wm(y);return M._openRedirect(y.auth,d,"linkViaRedirect",L)})).apply(this,arguments)}function Zh(){return(Zh=(0,w.Z)(function*(g,d){return yield an(g)._initializationPromise,Kh(g,d,!1)})).apply(this,arguments)}function Kh(g,d){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,w.Z)(function*(g,d,p=!1){const y=an(g),M=ro(y,d),Q=yield new vp(y,M,p).execute();return Q&&!p&&(delete Q.user._redirectEventId,yield y._persistUserIfCurrent(Q.user),yield y._setRedirectUser(null,d)),Q})).apply(this,arguments)}function wm(g){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,w.Z)(function*(g){const d=bn(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class wv{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(d,y)&&(p=!0,this.sendToConsumer(d,y),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Wt(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yh(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var y;if(d.error&&!Yh(d)){const M=(null===(y=d.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";p.onError(pe(this.auth,M))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const y=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&y}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pu(d))}saveEventToCache(d){this.cachedEventUids.add(Pu(d)),this.lastProcessedEventTime=Date.now()}}function Pu(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function Yh({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function cr(g){return yd.apply(this,arguments)}function yd(){return(yd=(0,w.Z)(function*(g,d={}){return Pe(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Zn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ct=/^https?/;function Jt(){return(Jt=(0,w.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield cr(g);for(const p of d)try{if(Ip(p))return}catch{}Ne(g,"unauthorized-domain")})).apply(this,arguments)}function Ip(g){const d=si(),{protocol:p,hostname:y}=new URL(d);if(g.startsWith("chrome-extension://")){const Q=new URL(g);return""===Q.hostname&&""===y?"chrome-extension:"===p&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&Q.hostname===y}if(!Ct.test(p))return!1;if(Zn.test(g))return y===g;const M=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(y)}const Kn=new gi(3e4,6e4);function nt(){const g=Er().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let p=0;p<g.CP.length;p++)g.CP[p]=null}let ul=null;const Tv=new gi(5e3,15e3),ti="__/auth/iframe",Jh="emulator/auth/iframe",io={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xh(g){const d=g.config;Ee(d.authDomain,g,"auth-domain-config-required");const p=d.emulator?_e(d,Jh):`https://${g.config.authDomain}/${ti}`,y={apiKey:d.apiKey,appName:g.name,v:oe.SDK_VERSION},M=Tm.get(g.config.apiHost);M&&(y.eid=M);const L=g._getFrameworks();return L.length&&(y.fw=L.join(",")),`${p}?${(0,D.xO)(y).slice(1)}`}function cl(){return cl=(0,w.Z)(function*(g){const d=yield function Mu(g){return ul=ul||function yc(g){return new Promise((d,p)=>{var y,M,L;function Q(){nt(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{nt(),p(pe(g,"network-request-failed"))},timeout:Kn.get()})}if(null!==(M=null===(y=Er().gapi)||void 0===y?void 0:y.iframes)&&void 0!==M&&M.Iframe)d(gapi.iframes.getContext());else{if(null===(L=Er().gapi)||void 0===L||!L.load){const ce=Se("iframefcb");return Er()[ce]=()=>{gapi.load?Q():p(pe(g,"network-request-failed"))},qo(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Me=>p(Me))}Q()}}).catch(d=>{throw ul=null,d})}(g),ul}(g),p=Er().gapi;return Ee(p,g,"internal-error"),d.open({where:document.body,url:Xh(g),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:io,dontclear:!0},y=>new Promise(function(){var M=(0,w.Z)(function*(L,Q){yield y.restyle({setHideOnLeave:!1});const ce=pe(g,"network-request-failed"),Me=Er().setTimeout(()=>{Q(ce)},Tv.get());function at(){Er().clearTimeout(Me),L(y)}y.ping(at).then(at,()=>{Q(ce)})});return function(L,Q){return M.apply(this,arguments)}}()))}),cl.apply(this,arguments)}const wp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ka{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ll="__/auth/handler",so="emulator/auth/handler",Dm=encodeURIComponent("fac");function Mo(g,d,p,y,M,L){return vc.apply(this,arguments)}function vc(){return(vc=(0,w.Z)(function*(g,d,p,y,M,L){Ee(g.config.authDomain,g,"auth-domain-config-required"),Ee(g.config.apiKey,g,"invalid-api-key");const Q={apiKey:g.config.apiKey,appName:g.name,authType:p,redirectUrl:y,v:oe.SDK_VERSION,eventId:M};if(d instanceof bi){d.setDefaultLanguage(g.languageCode),Q.providerId=d.providerId||"",(0,D.xb)(d.getCustomParameters())||(Q.customParameters=JSON.stringify(d.getCustomParameters()));for(const[gt,ht]of Object.entries(L||{}))Q[gt]=ht}if(d instanceof ts){const gt=d.getScopes().filter(ht=>""!==ht);gt.length>0&&(Q.scopes=gt.join(","))}g.tenantId&&(Q.tid=g.tenantId);const ce=Q;for(const gt of Object.keys(ce))void 0===ce[gt]&&delete ce[gt];const Me=yield g._getAppCheckToken(),at=Me?`#${Dm}=${encodeURIComponent(Me)}`:"";return`${function Ec({config:g}){return g.emulator?_e(g,so):`https://${g.authDomain}/${ll}`}(g)}?${(0,D.xO)(ce).slice(1)}${at}`})).apply(this,arguments)}const Ed="webStorageSupport",ss=class Am{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$n,this._completeRedirectFn=Kh,this._overrideRedirectResult=ze}_openPopup(d,p,y,M){var L=this;return(0,w.Z)(function*(){var Q;sn(null===(Q=L.eventManagers[d._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const ce=yield Mo(d,p,y,si(),M);return function Ts(g,d,p,y=500,M=600){const L=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-y)/2,0).toString();let ce="";const Me=Object.assign(Object.assign({},wp),{width:y.toString(),height:M.toString(),top:L,left:Q}),at=(0,D.z$)().toLowerCase();p&&(ce=Ca(at)?"_blank":p),Dn(at)&&(d=d||"http://localhost",Me.scrollbars="yes");const gt=Object.entries(Me).reduce((Qn,[Ei,lo])=>`${Qn}${Ei}=${lo},`,"");if(function tn(g=(0,D.z$)()){var d;return tt(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(at)&&"_self"!==ce)return function vd(g,d){const p=document.createElement("a");p.href=g,p.target=d;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(y)}(d||"",ce),new Ka(null);const ht=window.open(d||"",ce,gt);Ee(ht,g,"popup-blocked");try{ht.focus()}catch{}return new Ka(ht)}(d,ce,bn())})()}_openRedirect(d,p,y,M){var L=this;return(0,w.Z)(function*(){return yield L._originValidation(d),function ld(g){Er().location.href=g}(yield Mo(d,p,y,si(),M)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:M,promise:L}=this.eventManagers[p];return M?Promise.resolve(M):(sn(L,"If manager is not set, promise should be"),L)}const y=this.initAndGetManager(d);return this.eventManagers[p]={promise:y},y.catch(()=>{delete this.eventManagers[p]}),y}initAndGetManager(d){var p=this;return(0,w.Z)(function*(){const y=yield function ws(g){return cl.apply(this,arguments)}(d),M=new wv(d);return y.register("authEvent",L=>(Ee(L?.authEvent,d,"invalid-auth-event"),{status:M.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:M},p.iframes[d._key()]=y,M})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(Ed,{type:Ed},M=>{var L;const Q=null===(L=M?.[0])||void 0===L?void 0:L[Ed];void 0!==Q&&p(!!Q),Ne(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function xi(g){return Jt.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return qn()||Yi()||tt()}};class xo{constructor(d){this.factorId=d}_process(d,p,y){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,y);case"signin":return this._finalizeSignIn(d,p.credential);default:return Nt("unexpected MultiFactorSessionType")}}}class oo extends xo{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new oo(d)}_finalizeEnroll(d,p,y){return function od(g,d){return Pe(g,"POST","/v2/accounts/mfaEnrollment:finalize",Ae(g,d))}(d,{idToken:p,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function A(g,d){return Pe(g,"POST","/v2/accounts/mfaSignIn:finalize",Ae(g,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dp=(()=>{class g{constructor(){}static assertion(p){return oo._fromCredential(p)}}return g.FACTOR_ID="phone",g})();var nf="@firebase/auth";class Ap{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,w.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(y=>{d(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);p&&(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xu(){return window}(0,D.Pz)("authIdTokenMaxAge"),function Cp(g){(0,oe._registerComponent)(new Ie.wA("auth",(d,{options:p})=>{const y=d.getProvider("app").getImmediate(),M=d.getProvider("heartbeat"),L=d.getProvider("app-check-internal"),{apiKey:Q,authDomain:ce}=y.options;Ee(Q&&!Q.includes(":"),"invalid-api-key",{appName:y.name});const Me={apiKey:Q,authDomain:ce,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ui(g)},at=new Ai(y,M,L,Me);return function mr(g,d){const p=d?.persistence||[],y=(Array.isArray(p)?p:[p]).map(Fe);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(y,d?.popupRedirectResolver)}(at,p),at},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,y)=>{d.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new Ie.wA("auth-internal",d=>{const p=an(d.getProvider("auth").getImmediate());return new Ap(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(nf,"1.5.1",function wd(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,oe.registerVersion)(nf,"1.5.1","esm2017")}("Browser");function Rp(){return Rp=(0,w.Z)(function*(g,d,p){var y;const{BuildInfo:M}=xu();sn(d.sessionId,"AuthEvent did not contain a session ID");const L=yield function Rm(g){return Td.apply(this,arguments)}(d.sessionId),Q={};return tt()?Q.ibi=M.packageName:le()?Q.apn=M.packageName:Ne(g,"operation-not-supported-in-this-environment"),M.displayName&&(Q.appDisplayName=M.displayName),Q.sessionId=L,Mo(g,p,d.type,void 0,null!==(y=d.eventId)&&void 0!==y?y:void 0,Q)}),Rp.apply(this,arguments)}function hl(){return(hl=(0,w.Z)(function*(g){const{BuildInfo:d}=xu(),p={};tt()?p.iosBundleId=d.packageName:le()?p.androidPackageName=d.packageName:Ne(g,"operation-not-supported-in-this-environment"),yield cr(g,p)})).apply(this,arguments)}function sf(){return(sf=(0,w.Z)(function*(g,d,p){const{cordova:y}=xu();let M=()=>{};try{yield new Promise((L,Q)=>{let ce=null;function Me(){var ht;L();const Qn=null===(ht=y.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof Qn&&Qn(),"function"==typeof p?.close&&p.close()}function at(){ce||(ce=window.setTimeout(()=>{Q(pe(g,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===document?.visibilityState&&at()}d.addPassiveListener(Me),document.addEventListener("resume",at,!1),le()&&document.addEventListener("visibilitychange",gt,!1),M=()=>{d.removePassiveListener(Me),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",gt,!1),ce&&window.clearTimeout(ce)}})}finally{M()}})).apply(this,arguments)}function Td(){return(Td=(0,w.Z)(function*(g){const d=function Dd(g){if(sn(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),p=new Uint8Array(d);for(let y=0;y<g.length;y++)p[y]=g.charCodeAt(y);return p}(g),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ni extends wv{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,w.Z)(function*(){yield d.initPromise})()}}function Qa(g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,w.Z)(function*(g){const d=yield Rn()._get(Nu(g));return d&&(yield Rn()._remove(Nu(g))),d})).apply(this,arguments)}function Gr(){const g=[];for(let p=0;p<20;p++){const y=Math.floor(62*Math.random());g.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return g.join("")}function Rn(){return Fe(cc)}function Nu(g){return Gt("authEvent",g.config.apiKey,g.name)}function pl(g){if(!g?.includes("?"))return{};const[d,...p]=g.split("?");return(0,D.zd)(p.join("?"))}const Pm=class kr{constructor(){this._redirectPersistence=$n,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Kh,this._overrideRedirectResult=ze}_initialize(d){var p=this;return(0,w.Z)(function*(){const y=d._key();let M=p.eventManagers.get(y);return M||(M=new ni(d),p.eventManagers.set(y,M),p.attachCallbackListeners(d,M)),M})()}_openPopup(d){Ne(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,y,M){var L=this;return(0,w.Z)(function*(){!function Sv(g){var d,p,y,M,L,Q,ce,Me,at,gt;const ht=xu();Ee("function"==typeof(null===(d=ht?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ee(typeof(null===(p=ht?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ee("function"==typeof(null===(L=null===(M=null===(y=ht?.cordova)||void 0===y?void 0:y.plugins)||void 0===M?void 0:M.browsertab)||void 0===L?void 0:L.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee("function"==typeof(null===(Me=null===(ce=null===(Q=ht?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Me?void 0:Me.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee("function"==typeof(null===(gt=null===(at=ht?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===gt?void 0:gt.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Q=yield L._initialize(d);yield Q.initialized(),Q.resetRedirect(),function Gi(){Mi.clear()}(),yield L._originValidation(d);const ce=function af(g,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:Gr(),postBody:null,tenantId:g.tenantId,error:pe(g,"no-auth-event")}}(d,y,M);yield function ha(g,d){return Rn()._set(Nu(g),d)}(d,ce);const Me=yield function rf(g,d,p){return Rp.apply(this,arguments)}(d,ce,p),at=yield function Av(g){const{cordova:d}=xu();return new Promise(p=>{d.plugins.browsertab.isAvailable(y=>{let M=null;y?d.plugins.browsertab.openUrl(g):M=d.InAppBrowser.open(g,function Zt(g=(0,D.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),p(M)})})}(Me);return function Cv(g,d,p){return sf.apply(this,arguments)}(d,Q,at)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Dv(g){return hl.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:y,handleOpenURL:M,BuildInfo:L}=xu(),Q=setTimeout((0,w.Z)(function*(){yield Qa(d),p.onEvent(fa())}),500),ce=function(){var gt=(0,w.Z)(function*(ht){clearTimeout(Q);const Qn=yield Qa(d);let Ei=null;Qn&&ht?.url&&(Ei=function fl(g,d){var p,y;const M=function as(g){const d=pl(g),p=d.link?decodeURIComponent(d.link):void 0,y=pl(p).link,M=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return pl(M).link||M||y||p||g}(d);if(M.includes("/__/auth/callback")){const L=pl(M),Q=L.firebaseError?function wc(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(L.firebaseError)):null,ce=null===(y=null===(p=Q?.code)||void 0===p?void 0:p.split("auth/"))||void 0===y?void 0:y[1],Me=ce?pe(ce):null;return Me?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:M,postBody:null}}return null}(Qn,ht.url)),p.onEvent(Ei||fa())});return function(Qn){return gt.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,ce);const Me=M,at=`${L.packageName.toLowerCase()}://`;xu().handleOpenURL=function(){var gt=(0,w.Z)(function*(ht){if(ht.toLowerCase().startsWith(at)&&ce({url:ht}),"function"==typeof Me)try{Me(ht)}catch(Qn){console.error(Qn)}});return function(ht){return gt.apply(this,arguments)}}()}};function fa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pe("no-auth-event")}}function Sr(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function Oo(g=(0,D.z$)()){return!("file:"!==Sr()&&"ionic:"!==Sr()&&"capacitor:"!==Sr()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ou(){try{const g=self.localStorage,d=bn();if(g)return g.setItem(d,"1"),g.removeItem(d),!function ao(g=(0,D.z$)()){return function ri(){return(0,D.w1)()&&11===document?.documentMode}()||function Bs(g=(0,D.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,D.hl)()}catch{return Fo()&&(0,D.hl)()}return!1}function Fo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gl(){return(function uf(){return"http:"===Sr()||"https:"===Sr()}()||(0,D.ru)()||Oo())&&!function ko(){return(0,D.b$)()||(0,D.UG)()}()&&Ou()&&!Fo()}function ku(){return Oo()&&typeof document<"u"}function Tc(){return(Tc=(0,w.Z)(function*(){return!!ku()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const Wi={LOCAL:"local",NONE:"none",SESSION:"session"},pa=Ee,ml="persistence";function Dc(g){return uo.apply(this,arguments)}function uo(){return(uo=(0,w.Z)(function*(g){yield g._initializationPromise;const d=xp(),p=Gt(ml,g.config.apiKey,g.name);d&&d.setItem(p,g._getPersistence())})).apply(this,arguments)}function xp(){var g;try{return(null===(g=function Ya(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const Np=Ee;class Lo{constructor(){this.browserResolver=Fe(ss),this.cordovaResolver=Fe(Pm),this.underlyingResolver=null,this._redirectPersistence=$n,this._completeRedirectFn=Kh,this._overrideRedirectResult=ze}_initialize(d){var p=this;return(0,w.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,y,M){var L=this;return(0,w.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openPopup(d,p,y,M)})()}_openRedirect(d,p,y,M){var L=this;return(0,w.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openRedirect(d,p,y,M)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return ku()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Np(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,w.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Sd(){return Tc.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Rd(g){return g.unwrap()}function _l(g){return co(g)}function co(g){const{_tokenResponse:d}=g instanceof D.ZR?g.customData:g;if(!d)return null;if(!(g instanceof D.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Ar.credentialFromResult(g);const p=d.providerId;if(!p||p===De.PASSWORD)return null;let y;switch(p){case De.GOOGLE:y=Jr;break;case De.FACEBOOK:y=Jc;break;case De.GITHUB:y=ci;break;case De.TWITTER:y=hr;break;default:const{oauthIdToken:M,oauthAccessToken:L,oauthTokenSecret:Q,pendingToken:ce,nonce:Me}=d;return L||Q||M||ce?ce?p.startsWith("saml.")?li._create(p,ce):ln._fromParams({providerId:p,signInMethod:p,pendingToken:ce,idToken:M,accessToken:L}):new ir(p).credential({idToken:M,accessToken:L,rawNonce:Me}):null}return g instanceof D.ZR?y.credentialFromError(g):y.credentialFromResult(g)}function fi(g,d){return d.catch(p=>{throw p instanceof D.ZR&&function or(g,d){var p;const y=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new Mm(g,function Au(g,d){var p;const y=(0,D.m9)(g),M=d;return Ee(d.customData.operationType,y,"argument-error"),Ee(null===(p=M.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,y,"argument-error"),rl._fromError(y,M)}(g,d));else if(y){const M=co(d),L=d;M&&(L.credential=M,L.tenantId=y.tenantId||void 0,L.email=y.email||void 0,L.phoneNumber=y.phoneNumber||void 0)}}(g,p),p}).then(p=>{const M=p.user;return{operationType:p.operationType,credential:_l(p),additionalUserInfo:vr(p),user:Vo.getOrCreate(M)}})}function Pd(g,d){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,w.Z)(function*(g,d){const p=yield d;return{verificationId:p.verificationId,confirm:y=>fi(g,p.confirm(y))}})).apply(this,arguments)}class Mm{constructor(d,p){this.resolver=p,this.auth=function br(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return fi(Rd(this.auth),this.resolver.resolveSignIn(d))}}class Vo{constructor(d){this._delegate=d,this.multiFactor=function Hr(g){const d=(0,D.m9)(g);return Va.has(d)||Va.set(d,ac._fromUser(d)),Va.get(d)}(d)}static getOrCreate(d){return Vo.USER_MAP.has(d)||Vo.USER_MAP.set(d,new Vo(d)),Vo.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,w.Z)(function*(){return fi(p.auth,Eu(p._delegate,d))})()}linkWithPhoneNumber(d,p){var y=this;return(0,w.Z)(function*(){return Pd(y.auth,function ca(g,d,p){return pc.apply(this,arguments)}(y._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,w.Z)(function*(){return fi(p.auth,function Im(g,d,p){return Ru.apply(this,arguments)}(p._delegate,d,Lo))})()}linkWithRedirect(d){var p=this;return(0,w.Z)(function*(){return yield Dc(an(p.auth)),Be(p._delegate,d,Lo)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,w.Z)(function*(){return fi(p.auth,ys(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return Pd(this.auth,function bu(g,d,p){return Wa.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return fi(this.auth,function yp(g,d,p){return al.apply(this,arguments)}(this._delegate,d,Lo))}reauthenticateWithRedirect(d){var p=this;return(0,w.Z)(function*(){return yield Dc(an(p.auth)),_c(p._delegate,d,Lo)})()}sendEmailVerification(d){return function T(g,d){return F.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,w.Z)(function*(){return yield function An(g,d){return Qo.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function bt(g,d){return dn((0,D.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function xn(g,d){return dn((0,D.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Vs(g,d){return Is.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Re(g,d){return mt.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function R(g,d,p){return O.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vo.USER_MAP=new WeakMap;const un=Ee;let Bn=(()=>{class g{constructor(p,y){if(this.app=p,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=p.options;un(M,"invalid-api-key",{appName:p.name}),un(M,"invalid-api-key",{appName:p.name});const L=typeof window<"u"?Lo:void 0;this._delegate=y.initialize({options:{persistence:Ac(M,p.name),popupRedirectResolver:L}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,y){!function _o(g,d,p){const y=an(g);Ee(y._canInitEmulator,y,"emulator-config-failed"),Ee(/^https?:\/\//.test(d),y,"invalid-emulator-scheme");const M=!!p?.disableWarnings,L=yo(d),{host:Q,port:ce}=function fu(g){const d=yo(g),p=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!p)return{host:"",port:null};const y=p[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(y);if(M){const L=M[1];return{host:L,port:Mr(y.substr(L.length+1))}}{const[L,Q]=y.split(":");return{host:L,port:Mr(Q)}}}(d);y.config.emulator={url:`${L}//${Q}${null===ce?"":`:${ce}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:Q,port:ce,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function vo(){function g(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,p,y)}applyActionCode(p){return function Jo(g,d){return Na.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return sc(this._delegate,p)}confirmPasswordReset(p,y){return function Ys(g,d,p){return Pi.apply(this,arguments)}(this._delegate,p,y)}createUserWithEmailAndPassword(p,y){var M=this;return(0,w.Z)(function*(){return fi(M._delegate,function ks(g,d,p){return ta.apply(this,arguments)}(M._delegate,p,y))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function nl(g,d){return Js.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function tl(g,d){const p=ms.parseLink(d);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,w.Z)(function*(){un(gl(),p._delegate,"operation-not-supported-in-this-environment");const y=yield function Ev(g,d){return Zh.apply(this,arguments)}(p._delegate,Lo);return y?fi(p._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Cr(g,d){an(g)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,y,M){const{next:L,error:Q,complete:ce}=Ja(p,y,M);return this._delegate.onAuthStateChanged(L,Q,ce)}onIdTokenChanged(p,y,M){const{next:L,error:Q,complete:ce}=Ja(p,y,M);return this._delegate.onIdTokenChanged(L,Q,ce)}sendSignInLinkToEmail(p,y){return function wu(g,d,p){return Tu.apply(this,arguments)}(this._delegate,p,y)}sendPasswordResetEmail(p,y){return function xr(g,d,p){return bo.apply(this,arguments)}(this._delegate,p,y||void 0)}setPersistence(p){var y=this;return(0,w.Z)(function*(){let M;switch(function bd(g,d){pa(Object.values(Wi).includes(d),g,"invalid-persistence-type"),(0,D.b$)()?pa(d!==Wi.SESSION,g,"unsupported-persistence-type"):(0,D.UG)()?pa(d===Wi.NONE,g,"unsupported-persistence-type"):Fo()?pa(d===Wi.NONE||d===Wi.LOCAL&&(0,D.hl)(),g,"unsupported-persistence-type"):pa(d===Wi.NONE||Ou(),g,"unsupported-persistence-type")}(y._delegate,p),p){case Wi.SESSION:M=$n;break;case Wi.LOCAL:M=(yield Fe(Ga)._isAvailable())?Ga:cc;break;case Wi.NONE:M=Xe;break;default:return Ne("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return fi(this._delegate,function nc(g){return Do.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return fi(this._delegate,So(this._delegate,p))}signInWithCustomToken(p){return fi(this._delegate,function id(g,d){return xa.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,y){return fi(this._delegate,function Iu(g,d,p){return So((0,D.m9)(g),Zs.credential(d,p)).catch(function(){var y=(0,w.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&$i(g),M});return function(M){return y.apply(this,arguments)}}())}(this._delegate,p,y))}signInWithEmailLink(p,y){return fi(this._delegate,function Oa(g,d,p){return ka.apply(this,arguments)}(this._delegate,p,y))}signInWithPhoneNumber(p,y){return Pd(this._delegate,function Em(g,d,p){return pd.apply(this,arguments)}(this._delegate,p,y))}signInWithPopup(p){var y=this;return(0,w.Z)(function*(){return un(gl(),y._delegate,"operation-not-supported-in-this-environment"),fi(y._delegate,function ol(g,d,p){return Gh.apply(this,arguments)}(y._delegate,p,Lo))})()}signInWithRedirect(p){var y=this;return(0,w.Z)(function*(){return un(gl(),y._delegate,"operation-not-supported-in-this-environment"),yield Dc(y._delegate),qh(y._delegate,p,Lo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Os(g,d){return ea.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Wi,g})();function Ja(g,d,p){let y=g;"function"!=typeof g&&({next:y,error:d,complete:p}=g);const M=y;return{next:Q=>M(Q&&Vo.getOrCreate(Q)),error:d,complete:p}}function Ac(g,d){const p=function Mp(g,d){const p=xp();if(!p)return[];const y=Gt(ml,g,d);switch(p.getItem(y)){case Wi.NONE:return[Xe];case Wi.LOCAL:return[Ga,$n];case Wi.SESSION:return[$n];default:return[]}}(g,d);if(typeof self<"u"&&!p.includes(Ga)&&p.push(Ga),typeof window<"u")for(const y of[cc,$n])p.includes(y)||p.push(y);return p.includes(Xe)||p.push(Xe),p}class Lu{constructor(){this.providerId="phone",this._delegate=new Ar(Rd(ee.Z.auth()))}static credential(d,p){return Ar.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}Lu.PHONE_SIGN_IN_METHOD=Ar.PHONE_SIGN_IN_METHOD,Lu.PROVIDER_ID=Ar.PROVIDER_ID;const Md=Ee;class cf{constructor(d,p,y=ee.Z.app()){var M;Md(null===(M=y.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new hi(y.auth(),d,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xd(g){g.INTERNAL.registerComponent(new Ie.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),y=d.getProvider("auth");return new Bn(p,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zs,FacebookAuthProvider:Jc,GithubAuthProvider:ci,GoogleAuthProvider:Jr,OAuthProvider:ir,SAMLAuthProvider:Kt,PhoneAuthProvider:Lu,PhoneMultiFactorGenerator:Dp,RecaptchaVerifier:cf,TwitterAuthProvider:hr,Auth:Bn,AuthCredential:Xn,Error:D.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.5.1")}(ee.Z)},5861:(Et,Ce,V)=>{function w(D,oe,fe,se,Ie,je,De){try{var K=D[je](De),Y=K.value}catch(ie){return void fe(ie)}K.done?oe(Y):Promise.resolve(Y).then(se,Ie)}function ee(D){return function(){var oe=this,fe=arguments;return new Promise(function(se,Ie){var je=D.apply(oe,fe);function De(Y){w(je,se,Ie,De,K,"next",Y)}function K(Y){w(je,se,Ie,De,K,"throw",Y)}De(void 0)})}}V.d(Ce,{Z:()=>ee})},7582:(Et,Ce,V)=>{function oe(_e,ye){var we={};for(var Te in _e)Object.prototype.hasOwnProperty.call(_e,Te)&&ye.indexOf(Te)<0&&(we[Te]=_e[Te]);if(null!=_e&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(Te=Object.getOwnPropertySymbols(_e);Ae<Te.length;Ae++)ye.indexOf(Te[Ae])<0&&Object.prototype.propertyIsEnumerable.call(_e,Te[Ae])&&(we[Te[Ae]]=_e[Te[Ae]])}return we}function ie(_e,ye,we,Te){return new(we||(we=Promise))(function(Pe,dt){function We(kt){try{It(Te.next(kt))}catch(Lt){dt(Lt)}}function Mn(kt){try{It(Te.throw(kt))}catch(Lt){dt(Lt)}}function It(kt){kt.done?Pe(kt.value):function Ae(Pe){return Pe instanceof we?Pe:new we(function(dt){dt(Pe)})}(kt.value).then(We,Mn)}It((Te=Te.apply(_e,ye||[])).next())})}function ge(_e){return this instanceof ge?(this.v=_e,this):new ge(_e)}function Ne(_e,ye,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Te=we.apply(_e,ye||[]),Pe=[];return Ae={},dt("next"),dt("throw"),dt("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function dt(Ln){Te[Ln]&&(Ae[Ln]=function(nr){return new Promise(function(Gn,En){Pe.push([Ln,nr,Gn,En])>1||We(Ln,nr)})})}function We(Ln,nr){try{!function Mn(Ln){Ln.value instanceof ge?Promise.resolve(Ln.value.v).then(It,kt):Lt(Pe[0][2],Ln)}(Te[Ln](nr))}catch(Gn){Lt(Pe[0][3],Gn)}}function It(Ln){We("next",Ln)}function kt(Ln){We("throw",Ln)}function Lt(Ln,nr){Ln(nr),Pe.shift(),Pe.length&&We(Pe[0][0],Pe[0][1])}}function Ke(_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,ye=_e[Symbol.asyncIterator];return ye?ye.call(_e):(_e=function $e(_e){var ye="function"==typeof Symbol&&Symbol.iterator,we=ye&&_e[ye],Te=0;if(we)return we.call(_e);if(_e&&"number"==typeof _e.length)return{next:function(){return _e&&Te>=_e.length&&(_e=void 0),{value:_e&&_e[Te++],done:!_e}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(_e),we={},Te("next"),Te("throw"),Te("return"),we[Symbol.asyncIterator]=function(){return this},we);function Te(Pe){we[Pe]=_e[Pe]&&function(dt){return new Promise(function(We,Mn){!function Ae(Pe,dt,We,Mn){Promise.resolve(Mn).then(function(It){Pe({value:It,done:We})},dt)}(We,Mn,(dt=_e[Pe](dt)).done,dt.value)})}}}V.d(Ce,{FC:()=>Ne,KL:()=>Ke,_T:()=>oe,mG:()=>ie,qq:()=>ge}),"function"==typeof SuppressedError&&SuppressedError}},Et=>{Et(Et.s=5356)}]);